"use strict";(self.webpackChunkUkiyo=self.webpackChunkUkiyo||[]).push([[179],{2011:(wt,Me,k)=>{k.d(Me,{Dh:()=>we,GT:()=>re,cc:()=>Te,hO:()=>$e,on:()=>$,pX:()=>se,xv:()=>fe});var f=k(4650),Q=k(9260),O=k(4976);wt=k.hmd(wt);const ie=["ngOnDestroy"],se=(Pe,Oe,je,ke={})=>new Proxy(Pe,{get:(Ee,Ie)=>je.runOutsideAngular(()=>{var ze;if(Pe[Ie])return!(null===(ze=ke?.spy)||void 0===ze)&&ze.get&&ke.spy.get(Ie,Pe[Ie]),Pe[Ie];if(ie.indexOf(Ie)>-1)return()=>{};const Le=Oe.toPromise().then(nt=>{const ne=nt&&nt[Ie];return"function"==typeof ne?ne.bind(nt):ne&&ne.then?ne.then(bt=>je.run(()=>bt)):je.run(()=>ne)});return new Proxy(()=>{},{get:(nt,ne)=>Le[ne],apply:(nt,ne,bt)=>Le.then(Xe=>{var Ht;const ot=Xe&&Xe(...bt);return!(null===(Ht=ke?.spy)||void 0===Ht)&&Ht.apply&&ke.spy.apply(Ie,bt,ot),ot})})})}),re=(Pe,Oe)=>{Oe.forEach(je=>{Object.getOwnPropertyNames(je.prototype||je).forEach(ke=>{Object.defineProperty(Pe.prototype,ke,Object.getOwnPropertyDescriptor(je.prototype||je,ke))})})};class ye{constructor(Oe){return Oe}}const we=new f.OlP("angularfire2.app.options"),fe=new f.OlP("angularfire2.app.name");function $(Pe,Oe,je){const Ee="object"==typeof je&&je||{};Ee.name=Ee.name||"string"==typeof je&&je||"[DEFAULT]";const ze=Q.Z.apps.filter(Le=>Le&&Le.name===Ee.name)[0]||Oe.runOutsideAngular(()=>Q.Z.initializeApp(Pe,Ee));try{JSON.stringify(Pe)!==JSON.stringify(ze.options)&&j("error",`${ze.name} Firebase App already initialized with different options${wt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ye(ze)}const j=(Pe,...Oe)=>{(0,f.X6Q)()&&typeof console<"u"&&console[Pe](...Oe)},W={provide:ye,useFactory:$,deps:[we,f.R0b,[new f.FiY,fe]]};let $e=(()=>{class Pe{constructor(je){Q.Z.registerVersion("angularfire",O.q4.full,"core"),Q.Z.registerVersion("angularfire",O.q4.full,"app-compat"),Q.Z.registerVersion("angular",f.q4F.full,je.toString())}static initializeApp(je,ke){return{ngModule:Pe,providers:[{provide:we,useValue:je},{provide:fe,useValue:ke}]}}}return Pe.\u0275fac=function(je){return new(je||Pe)(f.LFG(f.Lbi))},Pe.\u0275mod=f.oAB({type:Pe}),Pe.\u0275inj=f.cJS({providers:[W]}),Pe})();function Te(Pe,Oe,je,ke,Ee){const[,Ie,ze]=globalThis.\u0275AngularfireInstanceCache.find(Le=>Le[0]===Pe)||[];if(Ie)return function We(Pe,Oe){try{return Pe.toString()===Oe.toString()}catch{return Pe===Oe}}(Ee,ze)||(pe("error",`${Oe} was already initialized on the ${je} Firebase App with different settings.${ut?" You may need to reload as Firebase is not HMR aware.":""}`),pe("warn",{is:Ee,was:ze})),Ie;{const Le=ke();return globalThis.\u0275AngularfireInstanceCache.push([Pe,Le,Ee]),Le}}const ut=!!wt.hot,pe=(Pe,...Oe)=>{(0,f.X6Q)()&&typeof console<"u"&&console[Pe](...Oe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(wt,Me,k)=>{k.d(Me,{q4:()=>On,iC:()=>Bi,fc:()=>Hd,HU:()=>Dt,vb:()=>yc,JM:()=>mc});var f=k(4650),Q=k(259),O=k(5861),ie=k(6881),se=k(2090),re=k(4859),ye=k(1877);const we=(E,C)=>C.some(A=>E instanceof A);let fe,$;const $e=new WeakMap,Te=new WeakMap,We=new WeakMap,ut=new WeakMap,pe=new WeakMap;let je={get(E,C,A){if(E instanceof IDBTransaction){if("done"===C)return Te.get(E);if("objectStoreNames"===C)return E.objectStoreNames||We.get(E);if("store"===C)return A.objectStoreNames[1]?void 0:A.objectStore(A.objectStoreNames[0])}return ze(E[C])},set:(E,C,A)=>(E[C]=A,!0),has:(E,C)=>E instanceof IDBTransaction&&("done"===C||"store"===C)||C in E};function Ie(E){return"function"==typeof E?function Ee(E){return E!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function W(){return $||($=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(E)?function(...C){return E.apply(Le(this),C),ze($e.get(this))}:function(...C){return ze(E.apply(Le(this),C))}:function(C,...A){const P=E.call(Le(this),C,...A);return We.set(P,C.sort?C.sort():[C]),ze(P)}}(E):(E instanceof IDBTransaction&&function Oe(E){if(Te.has(E))return;const C=new Promise((A,P)=>{const H=()=>{E.removeEventListener("complete",K),E.removeEventListener("error",te),E.removeEventListener("abort",te)},K=()=>{A(),H()},te=()=>{P(E.error||new DOMException("AbortError","AbortError")),H()};E.addEventListener("complete",K),E.addEventListener("error",te),E.addEventListener("abort",te)});Te.set(E,C)}(E),we(E,function j(){return fe||(fe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(E,je):E)}function ze(E){if(E instanceof IDBRequest)return function Pe(E){const C=new Promise((A,P)=>{const H=()=>{E.removeEventListener("success",K),E.removeEventListener("error",te)},K=()=>{A(ze(E.result)),H()},te=()=>{P(E.error),H()};E.addEventListener("success",K),E.addEventListener("error",te)});return C.then(A=>{A instanceof IDBCursor&&$e.set(A,E)}).catch(()=>{}),pe.set(C,E),C}(E);if(ut.has(E))return ut.get(E);const C=Ie(E);return C!==E&&(ut.set(E,C),pe.set(C,E)),C}const Le=E=>pe.get(E),bt=["get","getKey","getAll","getAllKeys","count"],Xe=["put","add","delete","clear"],Ht=new Map;function ot(E,C){if(!(E instanceof IDBDatabase)||C in E||"string"!=typeof C)return;if(Ht.get(C))return Ht.get(C);const A=C.replace(/FromIndex$/,""),P=C!==A,H=Xe.includes(A);if(!(A in(P?IDBIndex:IDBObjectStore).prototype)||!H&&!bt.includes(A))return;const K=function(){var te=(0,O.Z)(function*(qe,...He){const at=this.transaction(qe,H?"readwrite":"readonly");let xt=at.store;return P&&(xt=xt.index(He.shift())),(yield Promise.all([xt[A](...He),H&&at.done]))[0]});return function(He){return te.apply(this,arguments)}}();return Ht.set(C,K),K}!function ke(E){je=E(je)}(E=>({...E,get:(C,A,P)=>ot(C,A)||E.get(C,A,P),has:(C,A)=>!!ot(C,A)||E.has(C,A)}));const Fs="@firebase/installations",ei="0.6.4",fo=1e4,Zi=`w:${ei}`,ae="FIS_v2",de="https://firebaseinstallations.googleapis.com/v1",ge=36e5,ct=new se.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function lt(E){return E instanceof se.ZR&&E.code.includes("request-failed")}function _n({projectId:E}){return`${de}/projects/${E}/installations`}function mt(E){return{token:E.token,requestStatus:2,expiresIn:$r(E.expiresIn),creationTime:Date.now()}}function qt(E,C){return En.apply(this,arguments)}function En(){return(En=(0,O.Z)(function*(E,C){const P=(yield C.json()).error;return ct.create("request-failed",{requestName:E,serverCode:P.code,serverMessage:P.message,serverStatus:P.status})})).apply(this,arguments)}function gn({apiKey:E}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E})}function dr(E){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,O.Z)(function*(E){const C=yield E();return C.status>=500&&C.status<600?E():C})).apply(this,arguments)}function $r(E){return Number(E.replace("s","000"))}function yt(){return(yt=(0,O.Z)(function*({appConfig:E,heartbeatServiceProvider:C},{fid:A}){const P=_n(E),H=gn(E),K=C.getImmediate({optional:!0});if(K){const at=yield K.getHeartbeatsHeader();at&&H.append("x-firebase-client",at)}const qe={method:"POST",headers:H,body:JSON.stringify({fid:A,authVersion:ae,appId:E.appId,sdkVersion:Zi})},He=yield dr(()=>fetch(P,qe));if(He.ok){const at=yield He.json();return{fid:at.fid||A,registrationStatus:2,refreshToken:at.refreshToken,authToken:mt(at.authToken)}}throw yield qt("Create Installation",He)})).apply(this,arguments)}function ni(E){return new Promise(C=>{setTimeout(C,E)})}const Dr=/^[cdef][\w-]{21}$/,Hr="";function Yi(){try{const E=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(E),E[0]=112+E[0]%16;const A=function en(E){return function Kc(E){return btoa(String.fromCharCode(...E)).replace(/\+/g,"-").replace(/\//g,"_")}(E).substr(0,22)}(E);return Dr.test(A)?A:Hr}catch{return Hr}}function nn(E){return`${E.appName}!${E.appId}`}const rt=new Map;function Rt(E,C){const A=nn(E);hr(A,C),function Gr(E,C){const A=function ii(){return!Tn&&"BroadcastChannel"in self&&(Tn=new BroadcastChannel("[Firebase] FID Change"),Tn.onmessage=E=>{hr(E.data.key,E.data.fid)}),Tn}();A&&A.postMessage({key:E,fid:C}),function hn(){0===rt.size&&Tn&&(Tn.close(),Tn=null)}()}(A,C)}function hr(E,C){const A=rt.get(E);if(A)for(const P of A)P(C)}let Tn=null;const Ls="firebase-installations-database",Kt=1,Qi="firebase-installations-store";let rn=null;function fi(){return rn||(rn=function nt(E,C,{blocked:A,upgrade:P,blocking:H,terminated:K}={}){const te=indexedDB.open(E,C),qe=ze(te);return P&&te.addEventListener("upgradeneeded",He=>{P(ze(te.result),He.oldVersion,He.newVersion,ze(te.transaction))}),A&&te.addEventListener("blocked",()=>A()),qe.then(He=>{K&&He.addEventListener("close",()=>K()),H&&He.addEventListener("versionchange",()=>H())}).catch(()=>{}),qe}(Ls,Kt,{upgrade:(E,C)=>{0===C&&E.createObjectStore(Qi)}})),rn}function Nn(E,C){return qn.apply(this,arguments)}function qn(){return(qn=(0,O.Z)(function*(E,C){const A=nn(E),H=(yield fi()).transaction(Qi,"readwrite"),K=H.objectStore(Qi),te=yield K.get(A);return yield K.put(C,A),yield H.done,(!te||te.fid!==C.fid)&&Rt(E,C.fid),C})).apply(this,arguments)}function Ri(E){return vn.apply(this,arguments)}function vn(){return(vn=(0,O.Z)(function*(E){const C=nn(E),P=(yield fi()).transaction(Qi,"readwrite");yield P.objectStore(Qi).delete(C),yield P.done})).apply(this,arguments)}function Ni(E,C){return zr.apply(this,arguments)}function zr(){return(zr=(0,O.Z)(function*(E,C){const A=nn(E),H=(yield fi()).transaction(Qi,"readwrite"),K=H.objectStore(Qi),te=yield K.get(A),qe=C(te);return void 0===qe?yield K.delete(A):yield K.put(qe,A),yield H.done,qe&&(!te||te.fid!==qe.fid)&&Rt(E,qe.fid),qe})).apply(this,arguments)}function B(E){return L.apply(this,arguments)}function L(){return L=(0,O.Z)(function*(E){let C;const A=yield Ni(E.appConfig,P=>{const H=function z(E){return In(E||{fid:Yi(),registrationStatus:0})}(P),K=function _e(E,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(ct.create("app-offline"))};const A={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},P=function X(E,C){return Ve.apply(this,arguments)}(E,A);return{installationEntry:A,registrationPromise:P}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:St(E)}:{installationEntry:C}}(E,H);return C=K.registrationPromise,K.installationEntry});return A.fid===Hr?{installationEntry:yield C}:{installationEntry:A,registrationPromise:C}}),L.apply(this,arguments)}function Ve(){return Ve=(0,O.Z)(function*(E,C){try{const A=yield function Ar(E,C){return yt.apply(this,arguments)}(E,C);return Nn(E.appConfig,A)}catch(A){throw lt(A)&&409===A.customData.serverCode?yield Ri(E.appConfig):yield Nn(E.appConfig,{fid:C.fid,registrationStatus:0}),A}}),Ve.apply(this,arguments)}function St(E){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,O.Z)(function*(E){let C=yield jn(E.appConfig);for(;1===C.registrationStatus;)yield ni(100),C=yield jn(E.appConfig);if(0===C.registrationStatus){const{installationEntry:A,registrationPromise:P}=yield B(E);return P||A}return C})).apply(this,arguments)}function jn(E){return Ni(E,C=>{if(!C)throw ct.create("installation-not-found");return In(C)})}function In(E){return function an(E){return 1===E.registrationStatus&&E.registrationTime+fo<Date.now()}(E)?{fid:E.fid,registrationStatus:0}:E}function xr(){return(xr=(0,O.Z)(function*({appConfig:E,heartbeatServiceProvider:C},A){const P=function Pi(E,{fid:C}){return`${_n(E)}/${C}/authTokens:generate`}(E,A),H=function Bn(E,{refreshToken:C}){const A=gn(E);return A.append("Authorization",function ti(E){return`${ae} ${E}`}(C)),A}(E,A),K=C.getImmediate({optional:!0});if(K){const at=yield K.getHeartbeatsHeader();at&&H.append("x-firebase-client",at)}const qe={method:"POST",headers:H,body:JSON.stringify({installation:{sdkVersion:Zi,appId:E.appId}})},He=yield dr(()=>fetch(P,qe));if(He.ok)return mt(yield He.json());throw yield qt("Generate Auth Token",He)})).apply(this,arguments)}function Xi(E){return Ma.apply(this,arguments)}function Ma(){return Ma=(0,O.Z)(function*(E,C=!1){let A;const P=yield Ni(E.appConfig,K=>{if(!$t(K))throw ct.create("not-registered");const te=K.authToken;if(!C&&function _t(E){return 2===E.requestStatus&&!function tn(E){const C=Date.now();return C<E.creationTime||E.creationTime+E.expiresIn<C+ge}(E)}(te))return K;if(1===te.requestStatus)return A=function le(E,C){return J.apply(this,arguments)}(E,C),K;{if(!navigator.onLine)throw ct.create("app-offline");const qe=function Qt(E){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},E),{authToken:C})}(K);return A=function pt(E,C){return Ct.apply(this,arguments)}(E,qe),qe}});return A?yield A:P.authToken}),Ma.apply(this,arguments)}function J(){return(J=(0,O.Z)(function*(E,C){let A=yield Fe(E.appConfig);for(;1===A.authToken.requestStatus;)yield ni(100),A=yield Fe(E.appConfig);const P=A.authToken;return 0===P.requestStatus?Xi(E,C):P})).apply(this,arguments)}function Fe(E){return Ni(E,C=>{if(!$t(C))throw ct.create("not-registered");return function fr(E){return 1===E.requestStatus&&E.requestTime+fo<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function Ct(){return Ct=(0,O.Z)(function*(E,C){try{const A=yield function zt(E,C){return xr.apply(this,arguments)}(E,C),P=Object.assign(Object.assign({},C),{authToken:A});return yield Nn(E.appConfig,P),A}catch(A){if(!lt(A)||401!==A.customData.serverCode&&404!==A.customData.serverCode){const P=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield Nn(E.appConfig,P)}else yield Ri(E.appConfig);throw A}}),Ct.apply(this,arguments)}function $t(E){return void 0!==E&&2===E.registrationStatus}function Pu(){return(Pu=(0,O.Z)(function*(E){const C=E,{installationEntry:A,registrationPromise:P}=yield B(C);return P?P.catch(console.error):Xi(C).catch(console.error),A.fid})).apply(this,arguments)}function Zo(){return Zo=(0,O.Z)(function*(E,C=!1){const A=E;return yield function pi(E){return Ke.apply(this,arguments)}(A),(yield Xi(A,C)).token}),Zo.apply(this,arguments)}function Ke(){return(Ke=(0,O.Z)(function*(E){const{registrationPromise:C}=yield B(E);C&&(yield C)})).apply(this,arguments)}function hs(E){return ct.create("missing-app-config-values",{valueName:E})}const Bt="installations",po=E=>{const C=E.getProvider("app").getImmediate(),A=function Ra(E){if(!E||!E.options)throw hs("App Configuration");if(!E.name)throw hs("App Name");const C=["projectId","apiKey","appId"];for(const A of C)if(!E.options[A])throw hs(A);return{appName:E.name,projectId:E.options.projectId,apiKey:E.options.apiKey,appId:E.options.appId}}(C);return{app:C,appConfig:A,heartbeatServiceProvider:(0,ie._getProvider)(C,"heartbeat"),_delete:()=>Promise.resolve()}},fs=E=>{const C=E.getProvider("app").getImmediate(),A=(0,ie._getProvider)(C,Bt).getImmediate();return{getId:()=>function Wn(E){return Pu.apply(this,arguments)}(A),getToken:H=>function df(E){return Zo.apply(this,arguments)}(A,H)}};(function go(){(0,ie._registerComponent)(new re.wA(Bt,po,"PUBLIC")),(0,ie._registerComponent)(new re.wA("installations-internal",fs,"PRIVATE"))})(),(0,ie.registerVersion)(Fs,ei),(0,ie.registerVersion)(Fs,ei,"esm2017");const $n="@firebase/remote-config",Cr=new se.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class gs{constructor(C,A,P,H){this.client=C,this.storage=A,this.storageCache=P,this.logger=H}isCachedDataFresh(C,A){if(!A)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const P=Date.now()-A,H=P<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${P}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${H}.`),H}fetch(C){var A=this;return(0,O.Z)(function*(){const[P,H]=yield Promise.all([A.storage.getLastSuccessfulFetchTimestampMillis(),A.storage.getLastSuccessfulFetchResponse()]);if(H&&A.isCachedDataFresh(C.cacheMaxAgeMillis,P))return H;C.eTag=H&&H.eTag;const K=yield A.client.fetch(C),te=[A.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===K.status&&te.push(A.storage.setLastSuccessfulFetchResponse(K)),yield Promise.all(te),K})()}}function Mg(E=navigator){return E.languages&&E.languages[0]||E.language}class Qc{constructor(C,A,P,H,K,te){this.firebaseInstallations=C,this.sdkVersion=A,this.namespace=P,this.projectId=H,this.apiKey=K,this.appId=te}fetch(C){var A=this;return(0,O.Z)(function*(){const[P,H]=yield Promise.all([A.firebaseInstallations.getId(),A.firebaseInstallations.getToken()]),te=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${A.projectId}/namespaces/${A.namespace}:fetch?key=${A.apiKey}`,qe={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},He={sdk_version:A.sdkVersion,app_instance_id:P,app_instance_id_token:H,app_id:A.appId,language_code:Mg()},at={method:"POST",headers:qe,body:JSON.stringify(He)},xt=fetch(te,at),Mt=new Promise((vr,ji)=>{C.signal.addEventListener(()=>{const Qs=new Error("The operation was aborted.");Qs.name="AbortError",ji(Qs)})});let Nr;try{yield Promise.race([xt,Mt]),Nr=yield xt}catch(vr){let ji="fetch-client-network";throw"AbortError"===vr?.name&&(ji="fetch-timeout"),Cr.create(ji,{originalErrorMessage:vr?.message})}let pn=Nr.status;const Pt=Nr.headers.get("ETag")||void 0;let Ys,Vo;if(200===Nr.status){let vr;try{vr=yield Nr.json()}catch(ji){throw Cr.create("fetch-client-parse",{originalErrorMessage:ji?.message})}Ys=vr.entries,Vo=vr.state}if("INSTANCE_STATE_UNSPECIFIED"===Vo?pn=500:"NO_CHANGE"===Vo?pn=304:("NO_TEMPLATE"===Vo||"EMPTY_CONFIG"===Vo)&&(Ys={}),304!==pn&&200!==pn)throw Cr.create("fetch-status",{httpStatus:pn});return{status:pn,eTag:Pt,config:Ys}})()}}class Ng{constructor(C,A){this.client=C,this.storage=A}fetch(C){var A=this;return(0,O.Z)(function*(){const P=(yield A.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return A.attemptFetch(C,P)})()}attemptFetch(C,{throttleEndTimeMillis:A,backoffCount:P}){var H=this;return(0,O.Z)(function*(){yield function Rg(E,C){return new Promise((A,P)=>{const H=Math.max(C-Date.now(),0),K=setTimeout(A,H);E.addEventListener(()=>{clearTimeout(K),P(Cr.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,A);try{const K=yield H.client.fetch(C);return yield H.storage.deleteThrottleMetadata(),K}catch(K){if(!function vd(E){if(!(E instanceof se.ZR&&E.customData))return!1;const C=Number(E.customData.httpStatus);return 429===C||500===C||503===C||504===C}(K))throw K;const te={throttleEndTimeMillis:Date.now()+(0,se.$s)(P),backoffCount:P+1};return yield H.storage.setThrottleMetadata(te),H.attemptFetch(C,te)}})()}}class t_{constructor(C,A,P,H,K){this.app=C,this._client=A,this._storageCache=P,this._storage=H,this._logger=K,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Lu(E,C){const A=E.target.error||void 0;return Cr.create(C,{originalErrorMessage:A&&A?.message})}const ui="app_namespace_store";class n_{constructor(C,A,P,H=function ea(){return new Promise((E,C)=>{try{const A=indexedDB.open("firebase_remote_config",1);A.onerror=P=>{C(Lu(P,"storage-open"))},A.onsuccess=P=>{E(P.target.result)},A.onupgradeneeded=P=>{0===P.oldVersion&&P.target.result.createObjectStore(ui,{keyPath:"compositeKey"})}}catch(A){C(Cr.create("storage-open",{originalErrorMessage:A?.message}))}})}()){this.appId=C,this.appName=A,this.namespace=P,this.openDbPromise=H}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var A=this;return(0,O.Z)(function*(){const P=yield A.openDbPromise;return new Promise((H,K)=>{const qe=P.transaction([ui],"readonly").objectStore(ui),He=A.createCompositeKey(C);try{const at=qe.get(He);at.onerror=xt=>{K(Lu(xt,"storage-get"))},at.onsuccess=xt=>{const Mt=xt.target.result;H(Mt?Mt.value:void 0)}}catch(at){K(Cr.create("storage-get",{originalErrorMessage:at?.message}))}})})()}set(C,A){var P=this;return(0,O.Z)(function*(){const H=yield P.openDbPromise;return new Promise((K,te)=>{const He=H.transaction([ui],"readwrite").objectStore(ui),at=P.createCompositeKey(C);try{const xt=He.put({compositeKey:at,value:A});xt.onerror=Mt=>{te(Lu(Mt,"storage-set"))},xt.onsuccess=()=>{K()}}catch(xt){te(Cr.create("storage-set",{originalErrorMessage:xt?.message}))}})})()}delete(C){var A=this;return(0,O.Z)(function*(){const P=yield A.openDbPromise;return new Promise((H,K)=>{const qe=P.transaction([ui],"readwrite").objectStore(ui),He=A.createCompositeKey(C);try{const at=qe.delete(He);at.onerror=xt=>{K(Lu(xt,"storage-delete"))},at.onsuccess=()=>{H()}}catch(at){K(Cr.create("storage-delete",{originalErrorMessage:at?.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class pf{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,O.Z)(function*(){const A=C.storage.getLastFetchStatus(),P=C.storage.getLastSuccessfulFetchTimestampMillis(),H=C.storage.getActiveConfig(),K=yield A;K&&(C.lastFetchStatus=K);const te=yield P;te&&(C.lastSuccessfulFetchTimestampMillis=te);const qe=yield H;qe&&(C.activeConfig=qe)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function Xc(){return ka.apply(this,arguments)}function ka(){return(ka=(0,O.Z)(function*(){if(!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}!function ms(){(0,ie._registerComponent)(new re.wA("remote-config",function E(C,{instanceIdentifier:A}){const P=C.getProvider("app").getImmediate(),H=C.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Cr.create("registration-window");if(!(0,se.hl)())throw Cr.create("indexed-db-unavailable");const{projectId:K,apiKey:te,appId:qe}=P.options;if(!K)throw Cr.create("registration-project-id");if(!te)throw Cr.create("registration-api-key");if(!qe)throw Cr.create("registration-app-id");const He=new n_(qe,P.name,A=A||"firebase"),at=new pf(He),xt=new ye.Yd($n);xt.logLevel=ye.in.ERROR;const Mt=new Qc(H,ie.SDK_VERSION,A,K,te,qe),Nr=new Ng(Mt,He),pn=new gs(Nr,He,at,xt),Pt=new t_(P,pn,at,He,xt);return function oi(E){const C=(0,se.m9)(E);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(Pt),Pt},"PUBLIC").setMultipleInstances(!0)),(0,ie.registerVersion)($n,"0.4.4"),(0,ie.registerVersion)($n,"0.4.4","esm2017")}();const Id=(E,C)=>C.some(A=>E instanceof A);let Jc,Bs;const Uu=new WeakMap,js=new WeakMap,qr=new WeakMap,Mr=new WeakMap,Fa=new WeakMap;let ys={get(E,C,A){if(E instanceof IDBTransaction){if("done"===C)return js.get(E);if("objectStoreNames"===C)return E.objectStoreNames||qr.get(E);if("store"===C)return A.objectStoreNames[1]?void 0:A.objectStore(A.objectStoreNames[0])}return Rr(E[C])},set:(E,C,A)=>(E[C]=A,!0),has:(E,C)=>E instanceof IDBTransaction&&("done"===C||"store"===C)||C in E};function Cd(E){return"function"==typeof E?function Dd(E){return E!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Vu(){return Bs||(Bs=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(E)?function(...C){return E.apply(tr(this),C),Rr(Uu.get(this))}:function(...C){return Rr(E.apply(tr(this),C))}:function(C,...A){const P=E.call(tr(this),C,...A);return qr.set(P,C.sort?C.sort():[C]),Rr(P)}}(E):(E instanceof IDBTransaction&&function ta(E){if(js.has(E))return;const C=new Promise((A,P)=>{const H=()=>{E.removeEventListener("complete",K),E.removeEventListener("error",te),E.removeEventListener("abort",te)},K=()=>{A(),H()},te=()=>{P(E.error||new DOMException("AbortError","AbortError")),H()};E.addEventListener("complete",K),E.addEventListener("error",te),E.addEventListener("abort",te)});js.set(E,C)}(E),Id(E,function gf(){return Jc||(Jc=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(E,ys):E)}function Rr(E){if(E instanceof IDBRequest)return function gr(E){const C=new Promise((A,P)=>{const H=()=>{E.removeEventListener("success",K),E.removeEventListener("error",te)},K=()=>{A(Rr(E.result)),H()},te=()=>{P(E.error),H()};E.addEventListener("success",K),E.addEventListener("error",te)});return C.then(A=>{A instanceof IDBCursor&&Uu.set(A,E)}).catch(()=>{}),Fa.set(C,E),C}(E);if(Mr.has(E))return Mr.get(E);const C=Cd(E);return C!==E&&(Mr.set(E,C),Fa.set(C,E)),C}const tr=E=>Fa.get(E);function Bu(E,C,{blocked:A,upgrade:P,blocking:H,terminated:K}={}){const te=indexedDB.open(E,C),qe=Rr(te);return P&&te.addEventListener("upgradeneeded",He=>{P(Rr(te.result),He.oldVersion,He.newVersion,Rr(te.transaction))}),A&&te.addEventListener("blocked",()=>A()),qe.then(He=>{K&&He.addEventListener("close",()=>K()),H&&He.addEventListener("versionchange",()=>H())}).catch(()=>{}),qe}function _s(E,{blocked:C}={}){const A=indexedDB.deleteDatabase(E);return C&&A.addEventListener("blocked",()=>C()),Rr(A).then(()=>{})}const el=["get","getKey","getAll","getAllKeys","count"],$s=["put","add","delete","clear"],na=new Map;function La(E,C){if(!(E instanceof IDBDatabase)||C in E||"string"!=typeof C)return;if(na.get(C))return na.get(C);const A=C.replace(/FromIndex$/,""),P=C!==A,H=$s.includes(A);if(!(A in(P?IDBIndex:IDBObjectStore).prototype)||!H&&!el.includes(A))return;const K=function(){var te=(0,O.Z)(function*(qe,...He){const at=this.transaction(qe,H?"readwrite":"readonly");let xt=at.store;return P&&(xt=xt.index(He.shift())),(yield Promise.all([xt[A](...He),H&&at.done]))[0]});return function(He){return te.apply(this,arguments)}}();return na.set(C,K),K}!function mr(E){ys=E(ys)}(E=>({...E,get:(C,A,P)=>La(C,A)||E.get(C,A,P),has:(C,A)=>!!La(C,A)||E.has(C,A)}));const Nt="/firebase-messaging-sw.js",Va="/firebase-cloud-messaging-push-scope",bd="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Td="https://fcmregistrations.googleapis.com/v1",ju="google.c.a.c_id",Sd="google.c.a.c_l",$u="google.c.a.ts",Pg="google.c.a.e";var he=(()=>{return(E=he||(he={})).PUSH_RECEIVED="push-received",E.NOTIFICATION_CLICKED="notification-clicked",he;var E})();function Ft(E){const C=new Uint8Array(E);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ua(E){const A=(E+"=".repeat((4-E.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),P=atob(A),H=new Uint8Array(P.length);for(let K=0;K<P.length;++K)H[K]=P.charCodeAt(K);return H}const Ba="fcm_token_details_db",nr=5,_o="fcm_token_object_Store";function Wr(){return Wr=(0,O.Z)(function*(E){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(K=>K.name).includes(Ba))return null;let C=null;return(yield Bu(Ba,nr,{upgrade:(P=(0,O.Z)(function*(H,K,te,qe){var He;if(K<2||!H.objectStoreNames.contains(_o))return;const at=qe.objectStore(_o),xt=yield at.index("fcmSenderId").get(E);if(yield at.clear(),xt)if(2===K){const Mt=xt;if(!Mt.auth||!Mt.p256dh||!Mt.endpoint)return;C={token:Mt.fcmToken,createTime:null!==(He=Mt.createTime)&&void 0!==He?He:Date.now(),subscriptionOptions:{auth:Mt.auth,p256dh:Mt.p256dh,endpoint:Mt.endpoint,swScope:Mt.swScope,vapidKey:"string"==typeof Mt.vapidKey?Mt.vapidKey:Ft(Mt.vapidKey)}}}else if(3===K){const Mt=xt;C={token:Mt.fcmToken,createTime:Mt.createTime,subscriptionOptions:{auth:Ft(Mt.auth),p256dh:Ft(Mt.p256dh),endpoint:Mt.endpoint,swScope:Mt.swScope,vapidKey:Ft(Mt.vapidKey)}}}else if(4===K){const Mt=xt;C={token:Mt.fcmToken,createTime:Mt.createTime,subscriptionOptions:{auth:Ft(Mt.auth),p256dh:Ft(Mt.p256dh),endpoint:Mt.endpoint,swScope:Mt.swScope,vapidKey:Ft(Mt.vapidKey)}}}}),function(K,te,qe,He){return P.apply(this,arguments)})})).close(),yield _s(Ba),yield _s("fcm_vapid_details_db"),yield _s("undefined"),function xd(E){if(!E||!E.subscriptionOptions)return!1;const{subscriptionOptions:C}=E;return"number"==typeof E.createTime&&E.createTime>0&&"string"==typeof E.token&&E.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}(C)?C:null;var P}),Wr.apply(this,arguments)}const Gu="firebase-messaging-database",Og=1,vs="firebase-messaging-store";let ja=null;function Zn(){return ja||(ja=Bu(Gu,Og,{upgrade:(E,C)=>{0===C&&E.createObjectStore(vs)}})),ja}function yi(E){return es.apply(this,arguments)}function es(){return es=(0,O.Z)(function*(E){const C=zu(E),P=yield(yield Zn()).transaction(vs).objectStore(vs).get(C);if(P)return P;{const H=yield function Hu(E){return Wr.apply(this,arguments)}(E.appConfig.senderId);if(H)return yield vo(E,H),H}}),es.apply(this,arguments)}function vo(E,C){return _i.apply(this,arguments)}function _i(){return(_i=(0,O.Z)(function*(E,C){const A=zu(E),H=(yield Zn()).transaction(vs,"readwrite");return yield H.objectStore(vs).put(C,A),yield H.done,C})).apply(this,arguments)}function $a(){return($a=(0,O.Z)(function*(E){const C=zu(E),P=(yield Zn()).transaction(vs,"readwrite");yield P.objectStore(vs).delete(C),yield P.done})).apply(this,arguments)}function zu({appConfig:E}){return E.appId}const Yn=new se.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ra(E,C){return tl.apply(this,arguments)}function tl(){return(tl=(0,O.Z)(function*(E,C){const A=yield nl(E),P=Nd(C),H={method:"POST",headers:A,body:JSON.stringify(P)};let K;try{K=yield(yield fetch(Ha(E.appConfig),H)).json()}catch(te){throw Yn.create("token-subscribe-failed",{errorInfo:te?.toString()})}if(K.error)throw Yn.create("token-subscribe-failed",{errorInfo:K.error.message});if(!K.token)throw Yn.create("token-subscribe-no-token");return K.token})).apply(this,arguments)}function Rd(){return(Rd=(0,O.Z)(function*(E,C){const A=yield nl(E),P=Nd(C.subscriptionOptions),H={method:"PATCH",headers:A,body:JSON.stringify(P)};let K;try{K=yield(yield fetch(`${Ha(E.appConfig)}/${C.token}`,H)).json()}catch(te){throw Yn.create("token-update-failed",{errorInfo:te?.toString()})}if(K.error)throw Yn.create("token-update-failed",{errorInfo:K.error.message});if(!K.token)throw Yn.create("token-update-no-token");return K.token})).apply(this,arguments)}function Wu(E,C){return Ku.apply(this,arguments)}function Ku(){return(Ku=(0,O.Z)(function*(E,C){const P={method:"DELETE",headers:yield nl(E)};try{const K=yield(yield fetch(`${Ha(E.appConfig)}/${C}`,P)).json();if(K.error)throw Yn.create("token-unsubscribe-failed",{errorInfo:K.error.message})}catch(H){throw Yn.create("token-unsubscribe-failed",{errorInfo:H?.toString()})}})).apply(this,arguments)}function Ha({projectId:E}){return`${Td}/projects/${E}/registrations`}function nl(E){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,O.Z)(function*({appConfig:E,installations:C}){const A=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E.apiKey,"x-goog-firebase-installations-auth":`FIS ${A}`})})).apply(this,arguments)}function Nd({p256dh:E,auth:C,endpoint:A,vapidKey:P}){const H={web:{endpoint:A,auth:C,p256dh:E}};return P!==bd&&(H.web.applicationPubKey=P),H}const Zu=6048e5;function Yu(){return Yu=(0,O.Z)(function*(E){const C=yield function _f(E,C){return Pd.apply(this,arguments)}(E.swRegistration,E.vapidKey),A={vapidKey:E.vapidKey,swScope:E.swRegistration.scope,endpoint:C.endpoint,auth:Ft(C.getKey("auth")),p256dh:Ft(C.getKey("p256dh"))},P=yield yi(E.firebaseDependencies);if(P){if(function Fg(E,C){return C.vapidKey===E.vapidKey&&C.endpoint===E.endpoint&&C.auth===E.auth&&C.p256dh===E.p256dh}(P.subscriptionOptions,A))return Date.now()>=P.createTime+Zu?function Dn(E,C){return za.apply(this,arguments)}(E,{token:P.token,createTime:Date.now(),subscriptionOptions:A}):P.token;try{yield Wu(E.firebaseDependencies,P.token)}catch(H){console.warn(H)}return yf(E.firebaseDependencies,A)}return yf(E.firebaseDependencies,A)}),Yu.apply(this,arguments)}function ws(){return ws=(0,O.Z)(function*(E){const C=yield yi(E.firebaseDependencies);C&&(yield Wu(E.firebaseDependencies,C.token),yield function Md(E){return $a.apply(this,arguments)}(E.firebaseDependencies));const A=yield E.swRegistration.pushManager.getSubscription();return!A||A.unsubscribe()}),ws.apply(this,arguments)}function za(){return za=(0,O.Z)(function*(E,C){try{const A=yield function qu(E,C){return Rd.apply(this,arguments)}(E.firebaseDependencies,C),P=Object.assign(Object.assign({},C),{token:A,createTime:Date.now()});return yield vo(E.firebaseDependencies,P),A}catch(A){throw yield function br(E){return ws.apply(this,arguments)}(E),A}}),za.apply(this,arguments)}function yf(E,C){return wo.apply(this,arguments)}function wo(){return(wo=(0,O.Z)(function*(E,C){const P={token:yield ra(E,C),createTime:Date.now(),subscriptionOptions:C};return yield vo(E,P),P.token})).apply(this,arguments)}function Pd(){return(Pd=(0,O.Z)(function*(E,C){return(yield E.pushManager.getSubscription())||E.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ua(C)})})).apply(this,arguments)}function Qu(E){const C={from:E.from,collapseKey:E.collapse_key,messageId:E.fcmMessageId};return function rl(E,C){if(!C.notification)return;E.notification={};const A=C.notification.title;A&&(E.notification.title=A);const P=C.notification.body;P&&(E.notification.body=P);const H=C.notification.image;H&&(E.notification.image=H);const K=C.notification.icon;K&&(E.notification.icon=K)}(C,E),function il(E,C){C.data&&(E.data=C.data)}(C,E),function Od(E,C){var A,P,H,K,te;if(!(C.fcmOptions||null!==(A=C.notification)&&void 0!==A&&A.click_action))return;E.fcmOptions={};const qe=null!==(H=null===(P=C.fcmOptions)||void 0===P?void 0:P.link)&&void 0!==H?H:null===(K=C.notification)||void 0===K?void 0:K.click_action;qe&&(E.fcmOptions.link=qe);const He=null===(te=C.fcmOptions)||void 0===te?void 0:te.analytics_label;He&&(E.fcmOptions.analyticsLabel=He)}(C,E),C}function ia(E,C){const A=[];for(let P=0;P<E.length;P++)A.push(E.charAt(P)),P<C.length&&A.push(C.charAt(P));return A.join("")}function Es(E){return Yn.create("missing-app-config-values",{valueName:E})}ia("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ia("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Lg{constructor(C,A,P){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const H=function sa(E){if(!E||!E.options)throw Es("App Configuration Object");if(!E.name)throw Es("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:A}=E;for(const P of C)if(!A[P])throw Es(P);return{appName:E.name,projectId:A.projectId,apiKey:A.apiKey,appId:A.appId,senderId:A.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:H,installations:A,analyticsProvider:P}}_delete(){return Promise.resolve()}}function vf(E){return Xu.apply(this,arguments)}function Xu(){return(Xu=(0,O.Z)(function*(E){try{E.swRegistration=yield navigator.serviceWorker.register(Nt,{scope:Va}),E.swRegistration.update().catch(()=>{})}catch(C){throw Yn.create("failed-service-worker-registration",{browserErrorMessage:C?.message})}})).apply(this,arguments)}function qa(){return(qa=(0,O.Z)(function*(E,C){if(!C&&!E.swRegistration&&(yield vf(E)),C||!E.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw Yn.create("invalid-sw-registration");E.swRegistration=C}})).apply(this,arguments)}function Io(){return(Io=(0,O.Z)(function*(E,C){C?E.vapidKey=C:E.vapidKey||(E.vapidKey=bd)})).apply(this,arguments)}function oa(){return oa=(0,O.Z)(function*(E,C){if(!navigator)throw Yn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Yn.create("permission-blocked");return yield function Eo(E,C){return Io.apply(this,arguments)}(E,C?.vapidKey),yield function r_(E,C){return qa.apply(this,arguments)}(E,C?.serviceWorkerRegistration),function mf(E){return Yu.apply(this,arguments)}(E)}),oa.apply(this,arguments)}function Do(){return(Do=(0,O.Z)(function*(E,C,A){const P=function Co(E){switch(E){case he.NOTIFICATION_CLICKED:return"notification_open";case he.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(C);(yield E.firebaseDependencies.analyticsProvider.get()).logEvent(P,{message_id:A[ju],message_name:A[Sd],message_time:A[$u],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function bo(){return bo=(0,O.Z)(function*(E,C){const A=C.data;if(!A.isFirebaseMessaging)return;E.onMessageHandler&&A.messageType===he.PUSH_RECEIVED&&("function"==typeof E.onMessageHandler?E.onMessageHandler(Qu(A)):E.onMessageHandler.next(Qu(A)));const P=A.data;(function sl(E){return"object"==typeof E&&!!E&&ju in E})(P)&&"1"===P[Pg]&&(yield function ol(E,C,A){return Do.apply(this,arguments)}(E,A.messageType,P))}),bo.apply(this,arguments)}const Hs="@firebase/messaging",To=E=>{const C=new Lg(E.getProvider("app").getImmediate(),E.getProvider("installations-internal").getImmediate(),E.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",A=>function ec(E,C){return bo.apply(this,arguments)}(C,A)),C},tc=E=>{const C=E.getProvider("messaging").getImmediate();return{getToken:P=>function Ju(E,C){return oa.apply(this,arguments)}(C,P)}};function wf(){return nc.apply(this,arguments)}function nc(){return(nc=(0,O.Z)(function*(){try{yield(0,se.eu)()}catch{return!1}return typeof window<"u"&&(0,se.hl)()&&(0,se.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Wa(){(0,ie._registerComponent)(new re.wA("messaging",To,"PUBLIC")),(0,ie._registerComponent)(new re.wA("messaging-internal",tc,"PRIVATE")),(0,ie.registerVersion)(Hs,"0.12.4"),(0,ie.registerVersion)(Hs,"0.12.4","esm2017")}();const fn="analytics",Vd="firebase_id",rc="origin",ul=6e4,ic="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",sc="https://www.googletagmanager.com/gtag/js",rr=new ye.Yd("@firebase/analytics"),Hn=new se.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function cl(E){if(!E.startsWith(sc)){const C=Hn.create("invalid-gtag-resource",{gtagURL:E});return rr.warn(C.message),""}return E}function Ka(E){return Promise.all(E.map(C=>C.catch(A=>A)))}function xo(){return(xo=(0,O.Z)(function*(E,C,A,P,H,K){const te=P[H];try{if(te)yield C[te];else{const He=(yield Ka(A)).find(at=>at.measurementId===H);He&&(yield C[He.appId])}}catch(qe){rr.error(qe)}E("config",H,K)})).apply(this,arguments)}function Ya(){return(Ya=(0,O.Z)(function*(E,C,A,P,H){try{let K=[];if(H&&H.send_to){let te=H.send_to;Array.isArray(te)||(te=[te]);const qe=yield Ka(A);for(const He of te){const at=qe.find(Mt=>Mt.measurementId===He),xt=at&&C[at.appId];if(!xt){K=[];break}K.push(xt)}}0===K.length&&(K=Object.values(C)),yield Promise.all(K),E("event",P,H||{})}catch(K){rr.error(K)}})).apply(this,arguments)}const Qa=30,Ro=new class Mo{constructor(C={},A=1e3){this.throttleMetadata=C,this.intervalMillis=A}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,A){this.throttleMetadata[C]=A}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function Df(E){return new Headers({Accept:"application/json","x-goog-api-key":E})}function Zt(){return(Zt=(0,O.Z)(function*(E){var C;const{appId:A,apiKey:P}=E,H={method:"GET",headers:Df(P)},K=ic.replace("{app-id}",A),te=yield fetch(K,H);if(200!==te.status&&304!==te.status){let qe="";try{const He=yield te.json();null!==(C=He.error)&&void 0!==C&&C.message&&(qe=He.error.message)}catch{}throw Hn.create("config-fetch-failed",{httpStatus:te.status,responseMessage:qe})}return te.json()})).apply(this,arguments)}function Xa(){return(Xa=(0,O.Z)(function*(E,C=Ro,A){const{appId:P,apiKey:H,measurementId:K}=E.options;if(!P)throw Hn.create("no-app-id");if(!H){if(K)return{measurementId:K,appId:P};throw Hn.create("no-api-key")}const te=C.getThrottleMetadata(P)||{backoffCount:0,throttleEndTimeMillis:Date.now()},qe=new s_;return setTimeout((0,O.Z)(function*(){qe.abort()}),void 0!==A?A:ul),dl({appId:P,apiKey:H,measurementId:K},te,qe,C)})).apply(this,arguments)}function dl(E,C,A){return hl.apply(this,arguments)}function hl(){return hl=(0,O.Z)(function*(E,{throttleEndTimeMillis:C,backoffCount:A},P,H=Ro){var K;const{appId:te,measurementId:qe}=E;try{yield function i_(E,C){return new Promise((A,P)=>{const H=Math.max(C-Date.now(),0),K=setTimeout(A,H);E.addEventListener(()=>{clearTimeout(K),P(Hn.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(P,C)}catch(He){if(qe)return rr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${qe} provided in the "measurementId" field in the local Firebase config. [${He?.message}]`),{appId:te,measurementId:qe};throw He}try{const He=yield function Ud(E){return Zt.apply(this,arguments)}(E);return H.deleteThrottleMetadata(te),He}catch(He){const at=He;if(!function Cf(E){if(!(E instanceof se.ZR&&E.customData))return!1;const C=Number(E.customData.httpStatus);return 429===C||500===C||503===C||504===C}(at)){if(H.deleteThrottleMetadata(te),qe)return rr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${qe} provided in the "measurementId" field in the local Firebase config. [${at?.message}]`),{appId:te,measurementId:qe};throw He}const xt=503===Number(null===(K=at?.customData)||void 0===K?void 0:K.httpStatus)?(0,se.$s)(A,H.intervalMillis,Qa):(0,se.$s)(A,H.intervalMillis),Mt={throttleEndTimeMillis:Date.now()+xt,backoffCount:A+1};return H.setThrottleMetadata(te,Mt),rr.debug(`Calling attemptFetch again in ${xt} millis`),dl(E,Mt,P,H)}}),hl.apply(this,arguments)}class s_{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}let No,Sf;function bf(){return(bf=(0,O.Z)(function*(E,C,A,P,H){if(H&&H.global)E("event",A,P);else{const K=yield C;E("event",A,Object.assign(Object.assign({},P),{send_to:K}))}})).apply(this,arguments)}function Xt(){return(Xt=(0,O.Z)(function*(){if(!(0,se.hl)())return rr.warn(Hn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,se.eu)()}catch(E){return rr.warn(Hn.create("indexeddb-unavailable",{errorInfo:E?.toString()}).message),!1}return!0})).apply(this,arguments)}function st(){return st=(0,O.Z)(function*(E,C,A,P,H,K,te){var qe;const He=function Vg(E){return Xa.apply(this,arguments)}(E);He.then(pn=>{A[pn.measurementId]=pn.appId,E.options.measurementId&&pn.measurementId!==E.options.measurementId&&rr.warn(`The measurement ID in the local Firebase config (${E.options.measurementId}) does not match the measurement ID fetched from the server (${pn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(pn=>rr.error(pn)),C.push(He);const at=function Kr(){return Xt.apply(this,arguments)}().then(pn=>{if(pn)return P.getId()}),[xt,Mt]=yield Promise.all([He,at]);(function la(E){const C=window.document.getElementsByTagName("script");for(const A of Object.values(C))if(A.src&&A.src.includes(sc)&&A.src.includes(E))return A;return null})(K)||function Ds(E,C){const A=function Za(E,C){let A;return window.trustedTypes&&(A=window.trustedTypes.createPolicy(E,C)),A}("firebase-js-sdk-policy",{createScriptURL:cl}),P=document.createElement("script"),H=`${sc}?l=${E}&id=${C}`;P.src=A?A?.createScriptURL(H):H,P.async=!0,document.head.appendChild(P)}(K,xt.measurementId),Sf&&(H("consent","default",Sf),function pl(E){Sf=E}(void 0)),H("js",new Date);const Nr=null!==(qe=te?.config)&&void 0!==qe?qe:{};return Nr[rc]="firebase",Nr.update=!0,null!=Mt&&(Nr[Vd]=Mt),H("config",xt.measurementId,Nr),No&&(H("set",No),function lc(E){No=E}(void 0)),xt.measurementId}),st.apply(this,arguments)}class Qn{constructor(C){this.app=C}_delete(){return delete Cn[this.app.options.appId],Promise.resolve()}}let Cn={},Bd=[];const eu={};let gl,vi,Zr="dataLayer",dc="gtag",da=!1;function zs(E,C,A){!function nu(){const E=[];if((0,se.ru)()&&E.push("This is a browser extension environment."),(0,se.zI)()||E.push("Cookies are not available."),E.length>0){const C=E.map((P,H)=>`(${H+1}) ${P}`).join(" "),A=Hn.create("invalid-analytics-context",{errorInfo:C});rr.warn(A.message)}}();const P=E.options.appId;if(!P)throw Hn.create("no-app-id");if(!E.options.apiKey){if(!E.options.measurementId)throw Hn.create("no-api-key");rr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${E.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Cn[P])throw Hn.create("already-exists",{id:P});if(!da){!function Ef(E){let C=[];Array.isArray(window[E])?C=window[E]:window[E]=C}(Zr);const{wrappedGtag:K,gtagCore:te}=function Gs(E,C,A,P,H){let K=function(...te){window[P].push(arguments)};return window[H]&&"function"==typeof window[H]&&(K=window[H]),window[H]=function ca(E,C,A,P){function K(){return K=(0,O.Z)(function*(te,...qe){try{if("event"===te){const[He,at]=qe;yield function ll(E,C,A,P,H){return Ya.apply(this,arguments)}(E,C,A,He,at)}else if("config"===te){const[He,at]=qe;yield function oc(E,C,A,P,H,K){return xo.apply(this,arguments)}(E,C,A,P,He,at)}else if("consent"===te){const[He]=qe;E("consent","update",He)}else if("get"===te){const[He,at,xt]=qe;E("get",He,at,xt)}else if("set"===te){const[He]=qe;E("set",He)}else E(te,...qe)}catch(He){rr.error(He)}}),K.apply(this,arguments)}return function H(te){return K.apply(this,arguments)}}(K,E,C,A),{gtagCore:K,wrappedGtag:window[H]}}(Cn,Bd,eu,Zr,dc);vi=K,gl=te,da=!0}return Cn[P]=function ci(E,C,A,P,H,K,te){return st.apply(this,arguments)}(E,Bd,eu,C,gl,Zr,A),new Qn(E)}function hc(){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,O.Z)(function*(){if((0,se.ru)()||!(0,se.zI)()||!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}const Ws="@firebase/analytics";!function Af(){(0,ie._registerComponent)(new re.wA(fn,(C,{options:A})=>zs(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),A),"PUBLIC")),(0,ie._registerComponent)(new re.wA("analytics-internal",function E(C){try{const A=C.getProvider(fn).getImmediate();return{logEvent:(P,H,K)=>function jd(E,C,A,P){E=(0,se.m9)(E),function o_(E,C,A,P,H){return bf.apply(this,arguments)}(vi,Cn[E.app.options.appId],C,A,P).catch(H=>rr.error(H))}(A,P,H,K)}}catch(A){throw Hn.create("interop-component-reg-failed",{reason:A})}},"PRIVATE")),(0,ie.registerVersion)(Ws,"0.10.0"),(0,ie.registerVersion)(Ws,"0.10.0","esm2017")}();var wi=k(4408),Vi=k(7565);const yr=new class iu extends Vi.v{}(class ru extends wi.o{constructor(C,A){super(C,A),this.scheduler=C,this.work=A}schedule(C,A=0){return A>0?super.schedule(C,A):(this.delay=A,this.state=C,this.scheduler.flush(this),this)}execute(C,A){return A>0||this.closed?super.execute(C,A):this._execute(C,A)}requestAsyncId(C,A,P=0){return null!=P&&P>0||null==P&&this.delay>0?super.requestAsyncId(C,A,P):(C.flush(this),0)}});var wl=k(4986),Sn=k(8505),Ks=k(5363),Fo=k(9468);const On=new f.GfV("7.6.1"),kn="__angularfire_symbol__analyticsIsSupportedValue",Zs="__angularfire_symbol__analyticsIsSupported",El="__angularfire_symbol__remoteConfigIsSupportedValue",ha="__angularfire_symbol__remoteConfigIsSupported",Ei="__angularfire_symbol__messagingIsSupportedValue",bs="__angularfire_symbol__messagingIsSupported";function mc(E,C,A){if(C){if(1===C.length)return C[0];const K=C.filter(te=>te.app===A);if(1===K.length)return K[0]}return A.container.getProvider(E).getImmediate({optional:!0})}globalThis[Zs]||(globalThis[Zs]=hc().then(E=>globalThis[kn]=E).catch(()=>globalThis[kn]=!1)),globalThis[bs]||(globalThis[bs]=wf().then(E=>globalThis[Ei]=E).catch(()=>globalThis[Ei]=!1)),globalThis[ha]||(globalThis[ha]=Xc().then(E=>globalThis[El]=E).catch(()=>globalThis[El]=!1));const yc=(E,C)=>{const A=C?[C]:(0,Q.C6)(),P=[];return A.forEach(H=>{H.container.getProvider(E).instances.forEach(te=>{P.includes(te)||P.push(te)})}),P};function Ts(){}class Il{constructor(C,A=yr){this.zone=C,this.delegate=A}now(){return this.delegate.now()}schedule(C,A,P){const H=this.zone;return this.delegate.schedule(function(te){H.runGuarded(()=>{C.apply(this,[te])})},A,P)}}class _c{constructor(C){this.zone=C,this.task=null}call(C,A){const P=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ts,{},Ts,Ts)),A.pipe((0,Sn.b)({next:P,complete:P,error:P})).subscribe(C).add(P)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Dt=(()=>{class E{constructor(A){this.ngZone=A,this.outsideAngular=A.runOutsideAngular(()=>new Il(Zone.current)),this.insideAngular=A.run(()=>new Il(Zone.current,wl.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return E.\u0275fac=function(A){return new(A||E)(f.LFG(f.R0b))},E.\u0275prov=f.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();function Ui(){const E=globalThis.\u0275AngularFireScheduler;if(!E)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return E}function Hd(E){return E.pipe((0,Ks.Q)(Ui().outsideAngular))}function Bi(E){return Ui(),function zd(E){return function(A){return(A=A.lift(new _c(E.ngZone))).pipe((0,Fo.R)(E.outsideAngular),(0,Ks.Q)(E.insideAngular))}}(Ui())(E)}},2090:(wt,Me,k)=>{k.d(Me,{$s:()=>Ri,BH:()=>Ie,G6:()=>Zi,L:()=>fe,LL:()=>be,Pz:()=>Ee,Sg:()=>ze,UG:()=>ne,US:()=>re,ZB:()=>W,ZR:()=>Se,aH:()=>ke,b$:()=>Ht,eu:()=>de,hl:()=>ae,jU:()=>bt,m9:()=>zr,ne:()=>nn,pd:()=>Yi,r3:()=>Rn,ru:()=>Xe,tV:()=>$,uI:()=>nt,vZ:()=>yt,w1:()=>Fs,xO:()=>Dr,xb:()=>ti,z$:()=>Le,zI:()=>ge,zd:()=>Hr});const ie=function(B){const L=[];let z=0;for(let _e=0;_e<B.length;_e++){let X=B.charCodeAt(_e);X<128?L[z++]=X:X<2048?(L[z++]=X>>6|192,L[z++]=63&X|128):55296==(64512&X)&&_e+1<B.length&&56320==(64512&B.charCodeAt(_e+1))?(X=65536+((1023&X)<<10)+(1023&B.charCodeAt(++_e)),L[z++]=X>>18|240,L[z++]=X>>12&63|128,L[z++]=X>>6&63|128,L[z++]=63&X|128):(L[z++]=X>>12|224,L[z++]=X>>6&63|128,L[z++]=63&X|128)}return L},re={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(B,L){if(!Array.isArray(B))throw Error("encodeByteArray takes an array as a parameter");this.init_();const z=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,_e=[];for(let X=0;X<B.length;X+=3){const Ve=B[X],St=X+1<B.length,Yt=St?B[X+1]:0,jn=X+2<B.length,In=jn?B[X+2]:0;let xr=(15&Yt)<<2|In>>6,Pi=63&In;jn||(Pi=64,St||(xr=64)),_e.push(z[Ve>>2],z[(3&Ve)<<4|Yt>>4],z[xr],z[Pi])}return _e.join("")},encodeString(B,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(B):this.encodeByteArray(ie(B),L)},decodeString(B,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(B):function(B){const L=[];let z=0,_e=0;for(;z<B.length;){const X=B[z++];if(X<128)L[_e++]=String.fromCharCode(X);else if(X>191&&X<224){const Ve=B[z++];L[_e++]=String.fromCharCode((31&X)<<6|63&Ve)}else if(X>239&&X<365){const jn=((7&X)<<18|(63&B[z++])<<12|(63&B[z++])<<6|63&B[z++])-65536;L[_e++]=String.fromCharCode(55296+(jn>>10)),L[_e++]=String.fromCharCode(56320+(1023&jn))}else{const Ve=B[z++],St=B[z++];L[_e++]=String.fromCharCode((15&X)<<12|(63&Ve)<<6|63&St)}}return L.join("")}(this.decodeStringToByteArray(B,L))},decodeStringToByteArray(B,L){this.init_();const z=L?this.charToByteMapWebSafe_:this.charToByteMap_,_e=[];for(let X=0;X<B.length;){const Ve=z[B.charAt(X++)],Yt=X<B.length?z[B.charAt(X)]:0;++X;const In=X<B.length?z[B.charAt(X)]:64;++X;const zt=X<B.length?z[B.charAt(X)]:64;if(++X,null==Ve||null==Yt||null==In||null==zt)throw new ye;_e.push(Ve<<2|Yt>>4),64!==In&&(_e.push(Yt<<4&240|In>>2),64!==zt&&_e.push(In<<6&192|zt))}return _e},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let B=0;B<this.ENCODED_VALS.length;B++)this.byteToCharMap_[B]=this.ENCODED_VALS.charAt(B),this.charToByteMap_[this.byteToCharMap_[B]]=B,this.byteToCharMapWebSafe_[B]=this.ENCODED_VALS_WEBSAFE.charAt(B),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[B]]=B,B>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(B)]=B,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(B)]=B)}}};class ye extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fe=function(B){return function(B){const L=ie(B);return re.encodeByteArray(L,!0)}(B).replace(/\./g,"")},$=function(B){try{return re.decodeString(B,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function W(B,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===B&&(B={});break;case Array:B=[];break;default:return L}for(const z in L)!L.hasOwnProperty(z)||!$e(z)||(B[z]=W(B[z],L[z]));return B}function $e(B){return"__proto__"!==B}const Pe=()=>{try{return function Te(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const B=process.env.__FIREBASE_DEFAULTS__;return B?JSON.parse(B):void 0})()||(()=>{if(typeof document>"u")return;let B;try{B=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const L=B&&$(B[1]);return L&&JSON.parse(L)})()}catch(B){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${B}`)}},ke=()=>{var B;return null===(B=Pe())||void 0===B?void 0:B.config},Ee=B=>{var L;return null===(L=Pe())||void 0===L?void 0:L[`_${B}`]};class Ie{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,z)=>{this.resolve=L,this.reject=z})}wrapCallback(L){return(z,_e)=>{z?this.reject(z):this.resolve(_e),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L(z):L(z,_e))}}}function ze(B,L){if(B.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const _e=L||"demo-project",X=B.iat||0,Ve=B.sub||B.user_id;if(!Ve)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const St=Object.assign({iss:`https://securetoken.google.com/${_e}`,aud:_e,iat:X,exp:X+3600,auth_time:X,sub:Ve,user_id:Ve,firebase:{sign_in_provider:"custom",identities:{}}},B);return[fe(JSON.stringify({alg:"none",type:"JWT"})),fe(JSON.stringify(St)),""].join(".")}function Le(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function nt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Le())}function ne(){var B;const L=null===(B=Pe())||void 0===B?void 0:B.forceEnvironment;if("node"===L)return!0;if("browser"===L)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function bt(){return"object"==typeof self&&self.self===self}function Xe(){const B="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof B&&void 0!==B.id}function Ht(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Fs(){const B=Le();return B.indexOf("MSIE ")>=0||B.indexOf("Trident/")>=0}function Zi(){return!ne()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ae(){try{return"object"==typeof indexedDB}catch{return!1}}function de(){return new Promise((B,L)=>{try{let z=!0;const _e="validate-browser-context-for-indexeddb-analytics-module",X=self.indexedDB.open(_e);X.onsuccess=()=>{X.result.close(),z||self.indexedDB.deleteDatabase(_e),B(!0)},X.onupgradeneeded=()=>{z=!1},X.onerror=()=>{var Ve;L((null===(Ve=X.error)||void 0===Ve?void 0:Ve.message)||"")}}catch(z){L(z)}})}function ge(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Se extends Error{constructor(L,z,_e){super(z),this.code=L,this.customData=_e,this.name="FirebaseError",Object.setPrototypeOf(this,Se.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,be.prototype.create)}}class be{constructor(L,z,_e){this.service=L,this.serviceName=z,this.errors=_e}create(L,...z){const _e=z[0]||{},X=`${this.service}/${L}`,Ve=this.errors[L],St=Ve?function ct(B,L){return B.replace(lt,(z,_e)=>{const X=L[_e];return null!=X?String(X):`<${_e}?>`})}(Ve,_e):"Error";return new Se(X,`${this.serviceName}: ${St} (${X}).`,_e)}}const lt=/\{\$([^}]+)}/g;function Rn(B,L){return Object.prototype.hasOwnProperty.call(B,L)}function ti(B){for(const L in B)if(Object.prototype.hasOwnProperty.call(B,L))return!1;return!0}function yt(B,L){if(B===L)return!0;const z=Object.keys(B),_e=Object.keys(L);for(const X of z){if(!_e.includes(X))return!1;const Ve=B[X],St=L[X];if(ni(Ve)&&ni(St)){if(!yt(Ve,St))return!1}else if(Ve!==St)return!1}for(const X of _e)if(!z.includes(X))return!1;return!0}function ni(B){return null!==B&&"object"==typeof B}function Dr(B){const L=[];for(const[z,_e]of Object.entries(B))Array.isArray(_e)?_e.forEach(X=>{L.push(encodeURIComponent(z)+"="+encodeURIComponent(X))}):L.push(encodeURIComponent(z)+"="+encodeURIComponent(_e));return L.length?"&"+L.join("&"):""}function Hr(B){const L={};return B.replace(/^\?/,"").split("&").forEach(_e=>{if(_e){const[X,Ve]=_e.split("=");L[decodeURIComponent(X)]=decodeURIComponent(Ve)}}),L}function Yi(B){const L=B.indexOf("?");if(!L)return"";const z=B.indexOf("#",L);return B.substring(L,z>0?z:void 0)}function nn(B,L){const z=new rt(B,L);return z.subscribe.bind(z)}class rt{constructor(L,z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=z,this.task.then(()=>{L(this)}).catch(_e=>{this.error(_e)})}next(L){this.forEachObserver(z=>{z.next(L)})}error(L){this.forEachObserver(z=>{z.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,z,_e){let X;if(void 0===L&&void 0===z&&void 0===_e)throw new Error("Missing Observer.");X=function hi(B,L){if("object"!=typeof B||null===B)return!1;for(const z of L)if(z in B&&"function"==typeof B[z])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:z,complete:_e},void 0===X.next&&(X.next=ri),void 0===X.error&&(X.error=ri),void 0===X.complete&&(X.complete=ri);const Ve=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?X.error(this.finalError):X.complete()}catch{}}),this.observers.push(X),Ve}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let z=0;z<this.observers.length;z++)this.sendOne(z,L)}sendOne(L,z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{z(this.observers[L])}catch(_e){typeof console<"u"&&console.error&&console.error(_e)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ri(){}const rn=1e3,fi=2,Nn=144e5,qn=.5;function Ri(B,L=rn,z=fi){const _e=L*Math.pow(z,B),X=Math.round(qn*_e*(Math.random()-.5)*2);return Math.min(Nn,_e+X)}function zr(B){return B&&B._delegate?B._delegate:B}},6942:(wt,Me,k)=>{var f=k(4650);let Q=null;function O(){return Q}class se{}const re=new f.OlP("DocumentToken");let ye=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function we(){return(0,f.LFG)($)}()},providedIn:"platform"}),n})();const fe=new f.OlP("Location Initialized");let $=(()=>{class n extends ye{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){j()?this._history.pushState(t,r,i):this._location.hash=i}replaceState(t,r,i){j()?this._history.replaceState(t,r,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(re))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function W(){return new $((0,f.LFG)(re))}()},providedIn:"platform"}),n})();function j(){return!!window.history.pushState}function $e(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Te(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function We(n){return n&&"?"!==n[0]?"?"+n:n}let ut=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(Pe)},providedIn:"root"}),n})();const pe=new f.OlP("appBaseHref");let Pe=(()=>{class n extends ut{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,f.f3M)(re).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return $e(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+We(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,u){const c=this.prepareExternalUrl(i+We(u));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){const c=this.prepareExternalUrl(i+We(u));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ye),f.LFG(pe,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Oe=(()=>{class n extends ut{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=$e(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,u){let c=this.prepareExternalUrl(i+We(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){let c=this.prepareExternalUrl(i+We(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ye),f.LFG(pe,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),je=(()=>{class n{constructor(t){this._subject=new f.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function ze(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(Te(Ie(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+We(r))}normalize(t){return n.stripTrailingSlash(function Ee(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,Ie(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+We(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+We(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=We,n.joinWithSlash=$e,n.stripTrailingSlash=Te,n.\u0275fac=function(t){return new(t||n)(f.LFG(ut))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function ke(){return new je((0,f.LFG)(ut))}()},providedIn:"root"}),n})();function Ie(n){return n.replace(/\/index.html$/,"")}class Kn{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Yo=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,u,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Kn(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,c),Pn(m,i)}});for(let i=0,u=r.length;i<u;i++){const m=r.get(i).context;m.index=i,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Pn(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(f.ZZ4))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Pn(n,e){n.context.$implicit=e.item}let hs=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Bt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Na("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Na("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Bt{constructor(){this.$implicit=null,this.ngIf=null}}function Na(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,f.AaK)(e)}'.`)}let Vs=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,u]=t.split("."),c=-1===i.indexOf("-")?void 0:f.JOm.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,u?`${r}${u}`:r,c):this._renderer.removeStyle(this._ngEl.nativeElement,i,c)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.SBq),f.Y36(f.aQg),f.Y36(f.Qsj))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})(),ui=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();const Ed="server";function ms(n){return n===Ed}let ka=(()=>{class n{}return n.\u0275prov=(0,f.Yz7)({token:n,providedIn:"root",factory:()=>new Id((0,f.LFG)(re),window)}),n})();class Id{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Bs(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const u=i.shadowRoot;if(u){const c=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],i-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Jc(this.window.history)||Jc(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Jc(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Od extends se{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class sl extends Od{static makeCurrent(){!function ie(n){Q||(Q=n)}(new sl)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function sa(){return ia=ia||document.querySelector("base"),ia?ia.getAttribute("href"):null}();return null==t?null:function Lg(n){Es=Es||document.createElement("a"),Es.setAttribute("href",n);const e=Es.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ia=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Zo(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let Es,ia=null;const vf=new f.OlP("TRANSITION_ID"),r_=[{provide:f.ip1,useFactory:function Xu(n,e,t){return()=>{t.get(f.CZH).donePromise.then(()=>{const r=O(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<i.length;u++)r.remove(i[u])})}},deps:[vf,re,f.zs3],multi:!0}];let Eo=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Io=new f.OlP("EventManagerPlugins");let Ju=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let u=0;u<i.length;u++){const c=i[u];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Io),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class oa{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=O().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let ol=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,r){const i=this.usageCount;let u=i.get(t)??0;return u+=r,u>0?i.set(t,u):i.delete(t),u}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Do=(()=>{class n extends ol{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.forEach(u=>u.remove()),r.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,r){const i=this.doc.createElement("style");i.textContent=r,t.appendChild(i);const u=this.styleRef.get(r);u?u.push(i):this.styleRef.set(r,[i])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(re))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Co={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ec=/%COMP%/g,Wa=new f.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function Fd(n,e){return e.flat(100).map(t=>t.replace(ec,n))}function So(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Fi=(()=>{class n{constructor(t,r,i,u){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestory=u,this.rendererByCompId=new Map,this.defaultRenderer=new Is(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;const i=this.getOrCreateRenderer(t,r);return i instanceof Vd?i.applyToHost(t):i instanceof fn&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let u=i.get(r.id);if(!u){const c=this.eventManager,m=this.sharedStylesHost,w=this.removeStylesOnCompDestory;switch(r.encapsulation){case f.ifc.Emulated:u=new Vd(c,m,r,this.appId,w);break;case f.ifc.ShadowDom:return new Ld(c,m,t,r);default:u=new fn(c,m,r,w)}u.onDestroy=()=>i.delete(r.id),i.set(r.id,u)}return u}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ju),f.LFG(Do),f.LFG(f.AFp),f.LFG(Wa))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Is{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Co[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(ua(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(ua(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const u=Co[i];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Co[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(t,r,i&f.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&f.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,So(r)):this.eventManager.addEventListener(e,t,So(r))}}function ua(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Ld extends Is{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Fd(i.id,i.styles);for(const c of u){const m=document.createElement("style");m.textContent=c,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class fn extends Is{constructor(e,t,r,i,u=r.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=i,this.rendererUsageCount=0,this.styles=Fd(u,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Vd extends fn{constructor(e,t,r,i,u){const c=i+"-"+r.id;super(e,t,r,u,c),this.contentAttr=function wf(n){return"_ngcontent-%COMP%".replace(ec,n)}(c),this.hostAttr=function nc(n){return"_nghost-%COMP%".replace(ec,n)}(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let rc=(()=>{class n extends oa{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(re))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const ul=["alt","control","meta","shift"],ic={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},sc={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let rr=(()=>{class n extends oa{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const u=n.parseEventName(r),c=n.eventCallback(u.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const u=n._normalizeKey(r.pop());let c="",m=r.indexOf("code");if(m>-1&&(r.splice(m,1),c="code."),ul.forEach(D=>{const T=r.indexOf(D);T>-1&&(r.splice(T,1),c+=D+".")}),c+=u,0!=r.length||0===u.length)return null;const w={};return w.domEventName=i,w.fullKey=c,w}static matchEventFullKeyCode(t,r){let i=ic[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(i=t.code,u="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),ul.forEach(c=>{c!==i&&(0,sc[c])(t)&&(u+=c+".")}),u+=i,u===r)}static eventCallback(t,r,i){return u=>{n.matchEventFullKeyCode(u,t)&&i.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(re))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const ll=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:"browser"},{provide:f.g9A,useValue:function Ds(){sl.makeCurrent()},multi:!0},{provide:re,useFactory:function oc(){return(0,f.RDi)(document),document},deps:[]}]),Ya=new f.OlP(""),ca=[{provide:f.rWj,useClass:class qa{addToWindow(e){f.dqk.getAngularTestability=(r,i=!0)=>{const u=e.findTestabilityInTree(r,i);if(null==u)throw new Error("Could not find testability for element.");return u},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(r=>{const i=f.dqk.getAllAngularTestabilities();let u=i.length,c=!1;const m=function(w){c=c||w,u--,0==u&&r(c)};i.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:f.lri,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]}],Gs=[{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function Ef(){return new f.qLn},deps:[]},{provide:Io,useClass:rc,multi:!0,deps:[re,f.R0b,f.Lbi]},{provide:Io,useClass:rr,multi:!0,deps:[re]},{provide:Fi,useClass:Fi,deps:[Ju,Do,f.AFp,Wa]},{provide:f.FYo,useExisting:Fi},{provide:ol,useExisting:Do},{provide:Do,useClass:Do,deps:[re]},{provide:Ju,useClass:Ju,deps:[Io,f.R0b]},{provide:class Vu{},useClass:Eo,deps:[]},[]];let la=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:f.AFp,useValue:t.appId},{provide:vf,useExisting:f.AFp},r_]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ya,12))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[...Gs,...ca],imports:[ui,f.hGG]}),n})(),Df=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(re))},n.\u0275prov=f.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Ro(){return new Df((0,f.LFG)(re))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var Xt=k(8996),ci=k(7669);function st(...n){const e=(0,ci.yG)(n);return(0,Xt.D)(n,e)}var Qn=k(7579);class Cn extends Qn.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const eu=(0,k(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Zr=k(9751);const{isArray:dc}=Array,{getPrototypeOf:gl,prototype:vi,keys:da}=Object;function tu(n){if(1===n.length){const e=n[0];if(dc(e))return{args:e,keys:null};if(function nu(n){return n&&"object"==typeof n&&gl(n)===vi}(e)){const t=da(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var zs=k(4671),It=k(4004);const{isArray:ml}=Array;function Cs(n){return(0,It.U)(e=>function hc(n,e){return ml(e)?n(...e):n(e)}(n,e))}function qs(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var sr=k(5403),yl=k(9672);function _l(...n){const e=(0,ci.yG)(n),t=(0,ci.jO)(n),{args:r,keys:i}=tu(n);if(0===r.length)return(0,Xt.D)([],e);const u=new Zr.y(function Oo(n,e,t=zs.y){return r=>{ko(e,()=>{const{length:i}=n,u=new Array(i);let c=i,m=i;for(let w=0;w<i;w++)ko(e,()=>{const D=(0,Xt.D)(n[w],e);let T=!1;D.subscribe((0,sr.x)(r,N=>{u[w]=N,T||(T=!0,m--),m||r.next(t(u.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>qs(i,c):zs.y));return t?u.pipe(Cs(t)):u}function ko(n,e,t){n?(0,yl.f)(t,n,e):e()}var fc=k(8189);function pc(...n){return function jd(){return(0,fc.J)(1)}()((0,Xt.D)(n,(0,ci.yG)(n)))}var Ws=k(8421);function $d(n){return new Zr.y(e=>{(0,Ws.Xf)(n()).subscribe(e)})}var Af=k(9635),wi=k(576);function ru(n,e){const t=(0,wi.m)(n)?n:()=>n,r=i=>i.error(t());return new Zr.y(e?i=>e.schedule(r,0,i):r)}var Vi=k(515),iu=k(727),yr=k(4482);function vl(){return(0,yr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,sr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,u=t;t=null,i&&(!u||i===u)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class wl extends Zr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,yr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new iu.w0;const t=this.getSubject();e.add(this.source.subscribe((0,sr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=iu.w0.EMPTY)}return e}refCount(){return vl()(this)}}function Sn(n,e){return(0,yr.e)((t,r)=>{let i=null,u=0,c=!1;const m=()=>c&&!i&&r.complete();t.subscribe((0,sr.x)(r,w=>{i?.unsubscribe();let D=0;const T=u++;(0,Ws.Xf)(n(w,T)).subscribe(i=(0,sr.x)(r,N=>r.next(e?e(w,N,T,D++):N),()=>{i=null,m()}))},()=>{c=!0,m()}))})}function Ks(n){return n<=0?()=>Vi.E:(0,yr.e)((e,t)=>{let r=0;e.subscribe((0,sr.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Fo(...n){const e=(0,ci.yG)(n);return(0,yr.e)((t,r)=>{(e?pc(n,t,e):pc(n,t)).subscribe(r)})}function On(n,e){return(0,yr.e)((t,r)=>{let i=0;t.subscribe((0,sr.x)(r,u=>n.call(e,u,i++)&&r.next(u)))})}var kn=k(5577);function Zs(n){return(0,yr.e)((e,t)=>{let r=!1;e.subscribe((0,sr.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function El(n=ha){return(0,yr.e)((e,t)=>{let r=!1;e.subscribe((0,sr.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function ha(){return new eu}function Ei(n,e){const t=arguments.length>=2;return r=>r.pipe(n?On((i,u)=>n(i,u,r)):zs.y,Ks(1),t?Zs(e):El(()=>new eu))}function bs(n,e){return(0,wi.m)(e)?(0,kn.z)(n,e,1):(0,kn.z)(n,1)}var _r=k(8505);function Lo(n){return(0,yr.e)((e,t)=>{let u,r=null,i=!1;r=e.subscribe((0,sr.x)(t,void 0,void 0,c=>{u=(0,Ws.Xf)(n(c,Lo(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,u.subscribe(t))})}function gc(n,e){return(0,yr.e)(function xf(n,e,t,r,i){return(u,c)=>{let m=t,w=e,D=0;u.subscribe((0,sr.x)(c,T=>{const N=D++;w=m?n(w,T,N):(m=!0,T),r&&c.next(w)},i&&(()=>{m&&c.next(w),c.complete()})))}}(n,e,arguments.length>=2,!0))}function mc(n){return n<=0?()=>Vi.E:(0,yr.e)((e,t)=>{let r=[];e.subscribe((0,sr.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function yc(n,e){const t=arguments.length>=2;return r=>r.pipe(n?On((i,u)=>n(i,u,r)):zs.y,mc(1),t?Zs(e):El(()=>new eu))}function _c(n){return(0,yr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Dt="primary",Ui=Symbol("RouteTitle");class vc{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Ii(n){return new vc(n)}function Hd(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let u=0;u<r.length;u++){const c=r[u],m=n[u];if(c.startsWith(":"))i[c.substring(1)]=m;else if(c!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Bi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let u=0;u<t.length;u++)if(i=t[u],!zd(n[i],e[i]))return!1;return!0}function zd(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,u)=>r[u]===i)}return n===e}function qd(n){return Array.prototype.concat.apply([],n)}function Wd(n){return n.length>0?n[n.length-1]:null}function C(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function A(n){return(0,f.CqO)(n)?n:(0,f.QGY)(n)?(0,Xt.D)(Promise.resolve(n)):st(n)}const P=!1,H={exact:function He(n,e,t){if(!vr(n.segments,e.segments)||!Nr(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!He(n.children[r],e.children[r],t))return!1;return!0},subset:xt},K={exact:function qe(n,e){return Bi(n,e)},subset:function at(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>zd(n[t],e[t]))},ignored:()=>!0};function te(n,e,t){return H[t.paths](n.root,e.root,t.matrixParams)&&K[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function xt(n,e,t){return Mt(n,e,e.segments,t)}function Mt(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!vr(i,t)||e.hasChildren()||!Nr(i,t,r))}if(n.segments.length===t.length){if(!vr(n.segments,t)||!Nr(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!xt(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(vr(n.segments,i)&&Nr(n.segments,i,r)&&n.children[Dt])&&Mt(n.children[Dt],e,u,r)}}function Nr(n,e,t){return e.every((r,i)=>K[t](n[i].parameters,r.parameters))}class pn{constructor(e=new Pt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ii(this.queryParams)),this._queryParamMap}toString(){return Cl.serialize(this)}}class Pt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,C(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Mf(this)}}class Ys{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Ii(this.parameters)),this._parameterMap}toString(){return Ug(this)}}function vr(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Qs=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return new Dl},providedIn:"root"}),n})();class Dl{parse(e){const t=new Tl(e);return new pn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${su(e.root,!0)}`,r=function a_(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Uo(t)}=${Uo(i)}`).join("&"):`${Uo(t)}=${Uo(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Rf(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Cl=new Dl;function Mf(n){return n.segments.map(e=>Ug(e)).join("/")}function su(n,e){if(!n.hasChildren())return Mf(n);if(e){const t=n.children[Dt]?su(n.children[Dt],!1):"",r=[];return C(n.children,(i,u)=>{u!==Dt&&r.push(`${u}:${su(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function ji(n,e){let t=[];return C(n.children,(r,i)=>{i===Dt&&(t=t.concat(e(r,i)))}),C(n.children,(r,i)=>{i!==Dt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Dt?[su(n.children[Dt],!1)]:[`${i}:${su(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Dt]?`${Mf(n)}/${t[0]}`:`${Mf(n)}/(${t.join("//")})`}}function bl(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Uo(n){return bl(n).replace(/%3B/gi,";")}function Bo(n){return bl(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function wc(n){return decodeURIComponent(n)}function Nf(n){return wc(n.replace(/\+/g,"%20"))}function Ug(n){return`${Bo(n.path)}${function Pf(n){return Object.keys(n).map(e=>`;${Bo(e)}=${Bo(n[e])}`).join("")}(n.parameters)}`}const Bg=/^[^\/()?;=#]+/;function Kd(n){const e=n.match(Bg);return e?e[0]:""}const sw=/^[^=?&#]+/,u_=/^[^&#]+/;class Tl{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Pt([],{}):new Pt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Dt]=new Pt(e,t)),r}parseSegment(){const e=Kd(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new f.vHH(4009,P);return this.capture(e),new Ys(wc(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Kd(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Kd(this.remaining);i&&(r=i,this.capture(r))}e[wc(t)]=wc(r)}parseQueryParam(e){const t=function ou(n){const e=n.match(sw);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function jg(n){const e=n.match(u_);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=Nf(t),u=Nf(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(u)}else e[i]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Kd(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new f.vHH(4010,P);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Dt);const c=this.parseChildren();t[u]=1===Object.keys(c).length?c[Dt]:new Pt([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new f.vHH(4011,P)}}function Zd(n){return n.segments.length>0?new Pt([],{[Dt]:n}):n}function fa(n){const e={};for(const r of Object.keys(n.children)){const u=fa(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function c_(n){if(1===n.numberOfChildren&&n.children[Dt]){const e=n.children[Dt];return new Pt(n.segments.concat(e.segments),e.children)}return n}(new Pt(n.segments,e))}function au(n){return n instanceof pn}const Ec=!1;function $g(n,e,t,r,i){if(0===t.length)return jo(e.root,e.root,e.root,r,i);const u=function xl(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Qd(!0,0,n);let e=0,t=!1;const r=n.reduce((i,u,c)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return C(u.outlets,(w,D)=>{m[D]="string"==typeof w?w.split("/"):w}),[...i,{outlets:m}]}if(u.segmentPath)return[...i,u.segmentPath]}return"string"!=typeof u?[...i,u]:0===c?(u.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&i.push(m))}),i):[...i,u]},[]);return new Qd(t,e,r)}(t);return u.toRoot()?jo(e.root,e.root,new Pt([],{}),r,i):function c(w){const D=function Xd(n,e,t,r){if(n.isAbsolute)return new uu(e.root,!0,0);if(-1===r)return new uu(t,t===e.root,0);return function cu(n,e,t){let r=n,i=e,u=t;for(;u>i;){if(u-=i,r=r.parent,!r)throw new f.vHH(4005,Ec&&"Invalid number of '../'");i=r.segments.length}return new uu(r,!1,i-u)}(t,r+(Al(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,w),T=D.processChildren?Ss(D.segmentGroup,D.index,u.commands):eh(D.segmentGroup,D.index,u.commands);return jo(e.root,D.segmentGroup,T,r,i)}(n.snapshot?._lastPathIndex)}function Al(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Yd(n){return"object"==typeof n&&null!=n&&n.outlets}function jo(n,e,t,r,i){let c,u={};r&&C(r,(w,D)=>{u[D]=Array.isArray(w)?w.map(T=>`${T}`):`${w}`}),c=n===e?t:Hg(n,e,t);const m=Zd(fa(c));return new pn(m,u,i)}function Hg(n,e,t){const r={};return C(n.children,(i,u)=>{r[u]=i===e?t:Hg(i,e,t)}),new Pt(n.segments,r)}class Qd{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Al(r[0]))throw new f.vHH(4003,Ec&&"Root segment cannot have matrix parameters");const i=r.find(Yd);if(i&&i!==Wd(r))throw new f.vHH(4004,Ec&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class uu{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function eh(n,e,t){if(n||(n=new Pt([],{})),0===n.segments.length&&n.hasChildren())return Ss(n,e,t);const r=function kf(n,e,t){let r=0,i=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return u;const c=n.segments[i],m=t[r];if(Yd(m))break;const w=`${m}`,D=r<t.length-1?t[r+1]:null;if(i>0&&void 0===w)break;if(w&&D&&"object"==typeof D&&void 0===D.outlets){if(!Lf(w,D,c))return u;r+=2}else{if(!Lf(w,{},c))return u;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Pt(n.segments.slice(0,r.pathIndex),{});return u.children[Dt]=new Pt(n.segments.slice(r.pathIndex),n.children),Ss(u,0,i)}return r.match&&0===i.length?new Pt(n.segments,{}):r.match&&!n.hasChildren()?Ml(n,e,t):r.match?Ss(n,0,i):Ml(n,e,t)}function Ss(n,e,t){if(0===t.length)return new Pt(n.segments,{});{const r=function Jd(n){return Yd(n[0])?n[0].outlets:{[Dt]:n}}(t),i={};if(!r[Dt]&&n.children[Dt]&&1===n.numberOfChildren&&0===n.children[Dt].segments.length){const u=Ss(n.children[Dt],e,t);return new Pt(n.segments,u.children)}return C(r,(u,c)=>{"string"==typeof u&&(u=[u]),null!==u&&(i[c]=eh(n.children[c],e,u))}),C(n.children,(u,c)=>{void 0===r[c]&&(i[c]=u)}),new Pt(n.segments,i)}}function Ml(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const u=t[i];if(Yd(u)){const w=Rl(u.outlets);return new Pt(r,w)}if(0===i&&Al(t[0])){r.push(new Ys(n.segments[e].path,Ff(t[0]))),i++;continue}const c=Yd(u)?u.outlets[Dt]:`${u}`,m=i<t.length-1?t[i+1]:null;c&&m&&Al(m)?(r.push(new Ys(c,Ff(m))),i+=2):(r.push(new Ys(c,{})),i++)}return new Pt(r,{})}function Rl(n){const e={};return C(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Ml(new Pt([],{}),0,t))}),e}function Ff(n){const e={};return C(n,(t,r)=>e[r]=`${t}`),e}function Lf(n,e,t){return n==t.path&&Bi(e,t.parameters)}const Nl="imperative";class Xs{constructor(e,t){this.id=e,this.url=t}}class Vf extends Xs{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ns extends Xs{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Pl extends Xs{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ga extends Xs{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class Ol extends Xs{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ic extends Xs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class d_ extends Xs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class h_ extends Xs{constructor(e,t,r,i,u){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class f_ extends Xs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Uf extends Xs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class kl{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Gg{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class zg{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Dc{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Bf{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Di{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lu{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let $f=(()=>{class n{createUrlTree(t,r,i,u,c,m){return $g(t||r.root,i,u,c,m)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),p_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(e){return $f.\u0275fac(e)},providedIn:"root"}),n})();class Gf{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=zf(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=zf(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Pr(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Pr(e,this._root).map(t=>t.value)}}function zf(n,e){if(n===e.value)return e;for(const t of e.children){const r=zf(n,t);if(r)return r}return null}function Pr(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Pr(n,t);if(r.length)return r.unshift(e),r}return[]}class Ci{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Cc(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class g_ extends Gf{constructor(e,t){super(e),this.snapshot=t,du(this,e)}toString(){return this.snapshot.toString()}}function m_(n,e){const t=function y_(n,e){const c=new nh([],{},{},"",{},Dt,e,null,n.root,-1,{});return new Js("",new Ci(c,[]))}(n,e),r=new Cn([new Ys("",{})]),i=new Cn({}),u=new Cn({}),c=new Cn({}),m=new Cn(""),w=new Tr(r,i,c,m,u,Dt,e,t.root);return w.snapshot=t.root,new g_(new Ci(w,[]),t)}class Tr{constructor(e,t,r,i,u,c,m,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=m,this.title=this.data?.pipe((0,It.U)(D=>D[Ui]))??st(void 0),this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,It.U)(e=>Ii(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,It.U)(e=>Ii(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function qf(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],u=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(u.component)break;r--}}return function th(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class nh{get title(){return this.data?.[Ui]}constructor(e,t,r,i,u,c,m,w,D,T,N){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=m,this.routeConfig=w,this._urlSegment=D,this._lastPathIndex=T,this._resolve=N}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ii(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ii(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Js extends Gf{constructor(e,t){super(t),this.url=e,du(this,t)}toString(){return Wf(this._root)}}function du(n,e){e.value._routerState=n,e.children.forEach(t=>du(n,t))}function Wf(n){const e=n.children.length>0?` { ${n.children.map(Wf).join(", ")} } `:"";return`${n.value}${e}`}function bc(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Bi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Bi(e.params,t.params)||n.params.next(t.params),function Gd(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Bi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Bi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function As(n,e){const t=Bi(n.params,e.params)&&function Vo(n,e){return vr(n,e)&&n.every((t,r)=>Bi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||As(n.parent,e.parent))}function Tc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Wg(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Tc(n,r,i);return Tc(n,r)})}(n,e,t);return new Ci(r,i)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const c=u.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(m=>Tc(n,m)),c}}const r=function Kg(n){return new Tr(new Cn(n.url),new Cn(n.params),new Cn(n.queryParams),new Cn(n.fragment),new Cn(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(u=>Tc(n,u));return new Ci(r,i)}}const Zg="ngNavigationCancelingError";function y(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=au(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=h(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function h(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Zg]=!0,r.cancellationCode=e,t&&(r.url=t),r}function p(n){return v(n)&&au(n.url)}function v(n){return n&&n[Zg]}class S{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new M,this.attachRef=null}}let M=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new S,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const U=!1;let Z=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Dt,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.attachEvents=new f.vpe,this.detachEvents=new f.vpe,this.parentContexts=(0,f.f3M)(M),this.location=(0,f.f3M)(f.s_b),this.changeDetector=(0,f.f3M)(f.sBO),this.environmentInjector=(0,f.f3M)(f.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new f.vHH(4012,U);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new f.vHH(4012,U);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new f.vHH(4012,U);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new f.vHH(4013,U);this._activatedRoute=t;const i=this.location,c=t.snapshot.component,m=this.parentContexts.getOrCreateContext(this.name).children,w=new Re(t,m,i.injector);if(r&&function Ge(n){return!!n.resolveComponentFactory}(r)){const D=r.resolveComponentFactory(c);this.activated=i.createComponent(D,i.length,w)}else this.activated=i.createComponent(c,{index:i.length,injector:w,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[f.TTD]}),n})();class Re{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Tr?this.route:e===M?this.childContexts:this.parent.get(e,t)}}let Je=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[f.jDz],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},dependencies:[Z],encapsulation:2}),n})();function tt(n,e){return n.providers&&!n._injector&&(n._injector=(0,f.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Ll(n){const e=n.children&&n.children.map(Ll),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Dt&&(t.component=Je),t}function $i(n){return n.outlet||Dt}function ih(n,e){const t=n.filter(r=>$i(r)===e);return t.push(...n.filter(r=>$i(r)!==e)),t}function Sc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class sh{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),bc(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Cc(t);e.children.forEach(u=>{const c=u.value.outlet;this.deactivateRoutes(u,i[c],r),delete i[c]}),C(i,(u,c)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(i===u)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=Cc(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);if(r&&r.outlet){const c=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=Cc(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Cc(t);e.children.forEach(u=>{this.activateRoutes(u,i[u.value.outlet],r),this.forwardEvent(new Di(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Dc(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(bc(i),i===u)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const m=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(m.contexts),c.attachRef=m.componentRef,c.route=m.route.value,c.outlet&&c.outlet.attach(m.componentRef,m.route.value),bc(m.route.value),this.activateChildRoutes(e,null,c.children)}else{const m=Sc(i.snapshot),w=m?.get(f._Vd)??null;c.attachRef=null,c.route=i,c.resolver=w,c.injector=m,c.outlet&&c.outlet.activateWith(i,c.injector),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class w_{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class E_{constructor(e,t){this.component=e,this.route=t}}function Kf(n,e,t){const r=n._root;return oh(r,e?e._root:null,t,[r.value])}function Vl(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,f.Z0I)(n)?e.get(n):n:r}function oh(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=Cc(e);return n.children.forEach(c=>{(function ow(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,c=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(c&&u.routeConfig===c.routeConfig){const w=function Sx(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!vr(n.url,e.url);case"pathParamsOrQueryParamsChange":return!vr(n.url,e.url)||!Bi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!As(n,e)||!Bi(n.queryParams,e.queryParams);default:return!As(n,e)}}(c,u,u.routeConfig.runGuardsAndResolvers);w?i.canActivateChecks.push(new w_(r)):(u.data=c.data,u._resolvedData=c._resolvedData),oh(n,e,u.component?m?m.children:null:t,r,i),w&&m&&m.outlet&&m.outlet.isActivated&&i.canDeactivateChecks.push(new E_(m.outlet.component,c))}else c&&Zf(e,m,i),i.canActivateChecks.push(new w_(r)),oh(n,null,u.component?m?m.children:null:t,r,i)})(c,u[c.value.outlet],t,r.concat([c.value]),i),delete u[c.value.outlet]}),C(u,(c,m)=>Zf(c,t.getContext(m),i)),i}function Zf(n,e,t){const r=Cc(n),i=n.value;C(r,(u,c)=>{Zf(u,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new E_(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function ah(n){return"function"==typeof n}function fu(n){return n instanceof eu||"EmptyError"===n?.name}const Xg=Symbol("INITIAL_VALUE");function Ac(){return Sn(n=>_l(n.map(e=>e.pipe(Ks(1),Fo(Xg)))).pipe((0,It.U)(e=>{for(const t of e)if(!0!==t){if(t===Xg)return Xg;if(!1===t||t instanceof pn)return t}return!0}),On(e=>e!==Xg),Ks(1)))}function A_(n){return(0,Af.z)((0,_r.b)(e=>{if(au(e))throw y(0,e)}),(0,It.U)(e=>!0===e))}const x_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function lw(n,e,t,r,i){const u=M_(n,e,t);return u.matched?function uh(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?st(i.map(c=>{const m=Vl(c,n);return A(function b_(n){return n&&ah(n.canMatch)}(m)?m.canMatch(e,t):n.runInContext(()=>m(e,t)))})).pipe(Ac(),A_()):st(!0)}(r=tt(e,r),e,t).pipe((0,It.U)(c=>!0===c?u:{...x_})):st(u)}function M_(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...x_}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Hd)(t,n,e);if(!i)return{...x_};const u={};C(i.posParams,(m,w)=>{u[w]=m.path});const c=i.consumed.length>0?{...u,...i.consumed[i.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:c,positionalParamSegments:i.posParams??{}}}function ch(n,e,t,r){if(t.length>0&&function RC(n,e,t){return t.some(r=>R_(n,e,r)&&$i(r)!==Dt)}(n,t,r)){const u=new Pt(e,function dw(n,e,t,r){const i={};i[Dt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&$i(u)!==Dt){const c=new Pt([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[$i(u)]=c}return i}(n,e,r,new Pt(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function hw(n,e,t){return t.some(r=>R_(n,e,r))}(n,t,r)){const u=new Pt(n.segments,function MC(n,e,t,r,i){const u={};for(const c of r)if(R_(n,t,c)&&!i[$i(c)]){const m=new Pt([],{});m._sourceSegment=n,m._segmentIndexShift=e.length,u[$i(c)]=m}return{...i,...u}}(n,e,t,r,n.children));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const i=new Pt(n.segments,n.children);return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:t}}function R_(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function fw(n,e,t,r){return!!($i(n)===r||r!==Dt&&R_(e,t,n))&&("**"===n.path||M_(e,n,t).matched)}function lh(n,e,t){return 0===e.length&&!n.children[t]}const tm=!1;class pu{constructor(e){this.segmentGroup=e||null}}class dh{constructor(e){this.urlTree=e}}function Yf(n){return ru(new pu(n))}function N_(n){return ru(new dh(n))}class pw{constructor(e,t,r,i,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=u,this.allowRedirects=!0}apply(){const e=ch(this.urlTree.root,[],[],this.config).segmentGroup,t=new Pt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Dt).pipe((0,It.U)(u=>this.createUrlTree(fa(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Lo(u=>{if(u instanceof dh)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof pu?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Dt).pipe((0,It.U)(i=>this.createUrlTree(fa(i),e.queryParams,e.fragment))).pipe(Lo(i=>{throw i instanceof pu?this.noMatchError(i):i}))}noMatchError(e){return new f.vHH(4002,tm)}createUrlTree(e,t,r){const i=Zd(e);return new pn(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,It.U)(u=>new Pt([],u))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const u of Object.keys(r.children))"primary"===u?i.unshift(u):i.push(u);return(0,Xt.D)(i).pipe(bs(u=>{const c=r.children[u],m=ih(t,u);return this.expandSegmentGroup(e,m,c,u).pipe((0,It.U)(w=>({segment:w,outlet:u})))}),gc((u,c)=>(u[c.outlet]=c.segment,u),{}),yc())}expandSegment(e,t,r,i,u,c){return(0,Xt.D)(r).pipe(bs(m=>this.expandSegmentAgainstRoute(e,t,r,m,i,u,c).pipe(Lo(D=>{if(D instanceof pu)return st(null);throw D}))),Ei(m=>!!m),Lo((m,w)=>{if(fu(m))return lh(t,i,u)?st(new Pt([],{})):Yf(t);throw m}))}expandSegmentAgainstRoute(e,t,r,i,u,c,m){return fw(i,t,u,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,u,c):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c):Yf(t):Yf(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?N_(u):this.lineralizeSegments(r,u).pipe((0,kn.z)(c=>{const m=new Pt(c,{});return this.expandSegment(e,m,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){const{matched:m,consumedSegments:w,remainingSegments:D,positionalParamSegments:T}=M_(t,i,u);if(!m)return Yf(t);const N=this.applyRedirectCommands(w,i.redirectTo,T);return i.redirectTo.startsWith("/")?N_(N):this.lineralizeSegments(i,N).pipe((0,kn.z)(V=>this.expandSegment(e,t,r,V.concat(D),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,u){return"**"===r.path?(e=tt(r,e),r.loadChildren?(r._loadedRoutes?st({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,It.U)(m=>(r._loadedRoutes=m.routes,r._loadedInjector=m.injector,new Pt(i,{})))):st(new Pt(i,{}))):lw(t,r,i,e).pipe(Sn(({matched:c,consumedSegments:m,remainingSegments:w})=>c?this.getChildConfig(e=r._injector??e,r,i).pipe((0,kn.z)(T=>{const N=T.injector??e,V=T.routes,{segmentGroup:q,slicedSegments:ue}=ch(t,m,w,V),xe=new Pt(q.segments,q.children);if(0===ue.length&&xe.hasChildren())return this.expandChildren(N,V,xe).pipe((0,It.U)(et=>new Pt(m,et)));if(0===V.length&&0===ue.length)return st(new Pt(m,{}));const De=$i(r)===u;return this.expandSegment(N,xe,V,ue,De?Dt:u,!0).pipe((0,It.U)(gt=>new Pt(m.concat(gt.segments),gt.children)))})):Yf(t)))}getChildConfig(e,t,r){return t.children?st({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?st({routes:t._loadedRoutes,injector:t._loadedInjector}):function xC(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?st(!0):st(i.map(c=>{const m=Vl(c,n);return A(function D_(n){return n&&ah(n.canLoad)}(m)?m.canLoad(e,t):n.runInContext(()=>m(e,t)))})).pipe(Ac(),A_())}(e,t,r).pipe((0,kn.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,_r.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function PC(n){return ru(h(tm,3))}())):st({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return st(r);if(i.numberOfChildren>1||!i.children[Dt])return e.redirectTo,ru(new f.vHH(4e3,tm));i=i.children[Dt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const u=this.createSegmentGroup(e,t.root,r,i);return new pn(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return C(e,(i,u)=>{if("string"==typeof i&&i.startsWith(":")){const m=i.substring(1);r[u]=t[m]}else r[u]=i}),r}createSegmentGroup(e,t,r,i){const u=this.createSegments(e,t.segments,r,i);let c={};return C(t.children,(m,w)=>{c[w]=this.createSegmentGroup(e,m,r,i)}),new Pt(u,c)}createSegments(e,t,r,i){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,i):this.findOrReturn(u,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new f.vHH(4001,tm);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class P_{}class Qf{constructor(e,t,r,i,u,c,m){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=u,this.paramsInheritanceStrategy=c,this.urlSerializer=m}recognize(){const e=ch(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Dt).pipe((0,It.U)(t=>{if(null===t)return null;const r=new nh([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Dt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Ci(r,t),u=new Js(this.url,i);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=qf(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,Xt.D)(Object.keys(r.children)).pipe(bs(i=>{const u=r.children[i],c=ih(t,i);return this.processSegmentGroup(e,c,u,i)}),gc((i,u)=>i&&u?(i.push(...u),i):null),function Ts(n,e=!1){return(0,yr.e)((t,r)=>{let i=0;t.subscribe((0,sr.x)(r,u=>{const c=n(u,i++);(c||e)&&r.next(u),!c&&r.complete()}))})}(i=>null!==i),Zs(null),yc(),(0,It.U)(i=>{if(null===i)return null;const u=mw(i);return function FC(n){n.sort((e,t)=>e.value.outlet===Dt?-1:t.value.outlet===Dt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,i,u){return(0,Xt.D)(t).pipe(bs(c=>this.processSegmentAgainstRoute(c._injector??e,c,r,i,u)),Ei(c=>!!c),Lo(c=>{if(fu(c))return lh(r,i,u)?st([]):st(null);throw c}))}processSegmentAgainstRoute(e,t,r,i,u){if(t.redirectTo||!fw(t,r,i,u))return st(null);let c;if("**"===t.path){const m=i.length>0?Wd(i).parameters:{},w=_w(r)+i.length;c=st({snapshot:new nh(i,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,ma(t),$i(t),t.component??t._loadedComponent??null,t,yw(r),w,vw(t)),consumedSegments:[],remainingSegments:[]})}else c=lw(r,t,i,e).pipe((0,It.U)(({matched:m,consumedSegments:w,remainingSegments:D,parameters:T})=>{if(!m)return null;const N=_w(r)+w.length;return{snapshot:new nh(w,T,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,ma(t),$i(t),t.component??t._loadedComponent??null,t,yw(r),N,vw(t)),consumedSegments:w,remainingSegments:D}}));return c.pipe(Sn(m=>{if(null===m)return st(null);const{snapshot:w,consumedSegments:D,remainingSegments:T}=m;e=t._injector??e;const N=t._loadedInjector??e,V=function LC(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:q,slicedSegments:ue}=ch(r,D,T,V.filter(De=>void 0===De.redirectTo));if(0===ue.length&&q.hasChildren())return this.processChildren(N,V,q).pipe((0,It.U)(De=>null===De?null:[new Ci(w,De)]));if(0===V.length&&0===ue.length)return st([new Ci(w,[])]);const xe=$i(t)===u;return this.processSegment(N,V,q,ue,xe?Dt:u).pipe((0,It.U)(De=>null===De?null:[new Ci(w,De)]))}))}}function VC(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function mw(n){const e=[],t=new Set;for(const r of n){if(!VC(r)){e.push(r);continue}const i=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=mw(r.children);e.push(new Ci(r.value,i))}return e.filter(r=>!t.has(r))}function yw(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function _w(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function ma(n){return n.data||{}}function vw(n){return n.resolve||{}}function k_(n){return"string"==typeof n.title||null===n.title}function F_(n){return Sn(e=>{const t=n(e);return t?(0,Xt.D)(t).pipe((0,It.U)(()=>e)):st(e)})}const hh=new f.OlP("ROUTES");let V_=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,f.f3M)(f.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return st(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=A(t.loadComponent()).pipe((0,It.U)(Iw),(0,_r.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),_c(()=>{this.componentLoaders.delete(t)})),i=new wl(r,()=>new Qn.x).pipe(vl());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return st({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,It.U)(m=>{this.onLoadEndListener&&this.onLoadEndListener(r);let w,D,T=!1;Array.isArray(m)?D=m:(w=m.create(t).injector,D=qd(w.get(hh,[],f.XFs.Self|f.XFs.Optional)));return{routes:D.map(Ll),injector:w}}),_c(()=>{this.childrenLoaders.delete(r)})),c=new wl(u,()=>new Qn.x).pipe(vl());return this.childrenLoaders.set(r,c),c}loadModuleFactoryOrRoutes(t){return A(t()).pipe((0,It.U)(Iw),(0,kn.z)(r=>r instanceof f.YKP||Array.isArray(r)?st(r):(0,Xt.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Iw(n){return function $o(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let rm=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Qn.x,this.configLoader=(0,f.f3M)(V_),this.environmentInjector=(0,f.f3M)(f.lqb),this.urlSerializer=(0,f.f3M)(Qs),this.rootContexts=(0,f.f3M)(M),this.navigationId=0,this.afterPreactivation=()=>st(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new Gg(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new kl(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new Cn({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Nl,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(On(r=>0!==r.id),(0,It.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),Sn(r=>{let i=!1,u=!1;return st(r).pipe((0,_r.b)(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Sn(c=>{const m=t.browserUrlTree.toString(),w=!t.navigated||c.extractedUrl.toString()!==m||m!==t.currentUrlTree.toString();if(!w&&"reload"!==(c.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const T="";return this.events.next(new ga(c.id,t.serializeUrl(r.rawUrl),T,0)),t.rawUrlTree=c.rawUrl,c.resolve(null),Vi.E}if(t.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return Dw(c.source)&&(t.browserUrlTree=c.extractedUrl),st(c).pipe(Sn(T=>{const N=this.transitions?.getValue();return this.events.next(new Vf(T.id,this.urlSerializer.serialize(T.extractedUrl),T.source,T.restoredState)),N!==this.transitions?.getValue()?Vi.E:Promise.resolve(T)}),function gw(n,e,t,r){return Sn(i=>function OC(n,e,t,r,i){return new pw(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,It.U)(u=>({...i,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,_r.b)(T=>{this.currentNavigation={...this.currentNavigation,finalUrl:T.urlAfterRedirects},r.urlAfterRedirects=T.urlAfterRedirects}),function BC(n,e,t,r,i){return(0,kn.z)(u=>function O_(n,e,t,r,i,u,c="emptyOnly"){return new Qf(n,e,t,r,i,c,u).recognize().pipe(Sn(m=>null===m?function kC(n){return new Zr.y(e=>e.error(n))}(new P_):st(m)))}(n,e,t,u.urlAfterRedirects,r.serialize(u.urlAfterRedirects),r,i).pipe((0,It.U)(c=>({...u,targetSnapshot:c}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,_r.b)(T=>{if(r.targetSnapshot=T.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!T.extras.skipLocationChange){const V=t.urlHandlingStrategy.merge(T.urlAfterRedirects,T.rawUrl);t.setBrowserUrl(V,T)}t.browserUrlTree=T.urlAfterRedirects}const N=new Ic(T.id,this.urlSerializer.serialize(T.extractedUrl),this.urlSerializer.serialize(T.urlAfterRedirects),T.targetSnapshot);this.events.next(N)}));if(w&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:T,extractedUrl:N,source:V,restoredState:q,extras:ue}=c,xe=new Vf(T,this.urlSerializer.serialize(N),V,q);this.events.next(xe);const De=m_(N,this.rootComponentType).snapshot;return st(r={...c,targetSnapshot:De,urlAfterRedirects:N,extras:{...ue,skipLocationChange:!1,replaceUrl:!1}})}{const T="";return this.events.next(new ga(c.id,t.serializeUrl(r.extractedUrl),T,1)),t.rawUrlTree=c.rawUrl,c.resolve(null),Vi.E}}),(0,_r.b)(c=>{const m=new d_(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(m)}),(0,It.U)(c=>r={...c,guards:Kf(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),function Jg(n,e){return(0,kn.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:u,canDeactivateChecks:c}}=t;return 0===c.length&&0===u.length?st({...t,guardsResult:!0}):function SC(n,e,t,r){return(0,Xt.D)(n).pipe((0,kn.z)(i=>function AC(n,e,t,r,i){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?st(u.map(m=>{const w=Sc(e)??i,D=Vl(m,w);return A(function bC(n){return n&&ah(n.canDeactivate)}(D)?D.canDeactivate(n,e,t,r):w.runInContext(()=>D(n,e,t,r))).pipe(Ei())})).pipe(Ac()):st(!0)}(i.component,i.route,t,e,r)),Ei(i=>!0!==i,!0))}(c,r,i,n).pipe((0,kn.z)(m=>m&&function aw(n){return"boolean"==typeof n}(m)?function T_(n,e,t,r){return(0,Xt.D)(e).pipe(bs(i=>pc(function Ul(n,e){return null!==n&&e&&e(new zg(n)),st(!0)}(i.route.parent,r),function em(n,e){return null!==n&&e&&e(new Bf(n)),st(!0)}(i.route,r),function S_(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(c=>function I_(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>$d(()=>st(c.guards.map(w=>{const D=Sc(c.node)??t,T=Vl(w,D);return A(function C_(n){return n&&ah(n.canActivateChild)}(T)?T.canActivateChild(r,n):D.runInContext(()=>T(r,n))).pipe(Ei())})).pipe(Ac())));return st(u).pipe(Ac())}(n,i.path,t),function cw(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return st(!0);const i=r.map(u=>$d(()=>{const c=Sc(e)??t,m=Vl(u,c);return A(function Ax(n){return n&&ah(n.canActivate)}(m)?m.canActivate(e,n):c.runInContext(()=>m(e,n))).pipe(Ei())}));return st(i).pipe(Ac())}(n,i.route,t))),Ei(i=>!0!==i,!0))}(r,u,n,e):st(m)),(0,It.U)(m=>({...t,guardsResult:m})))})}(this.environmentInjector,c=>this.events.next(c)),(0,_r.b)(c=>{if(r.guardsResult=c.guardsResult,au(c.guardsResult))throw y(0,c.guardsResult);const m=new h_(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(m)}),On(c=>!!c.guardsResult||(t.restoreHistory(c),this.cancelNavigationTransition(c,"",3),!1)),F_(c=>{if(c.guards.canActivateChecks.length)return st(c).pipe((0,_r.b)(m=>{const w=new f_(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(w)}),Sn(m=>{let w=!1;return st(m).pipe(function xx(n,e){return(0,kn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return st(t);let u=0;return(0,Xt.D)(i).pipe(bs(c=>function Mx(n,e,t,r){const i=n.routeConfig,u=n._resolve;return void 0!==i?.title&&!k_(i)&&(u[Ui]=i.title),function ww(n,e,t,r){const i=function Rx(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return st({});const u={};return(0,Xt.D)(i).pipe((0,kn.z)(c=>function Ew(n,e,t,r){const i=Sc(e)??r,u=Vl(n,i);return A(u.resolve?u.resolve(e,t):i.runInContext(()=>u(e,t)))}(n[c],e,t,r).pipe(Ei(),(0,_r.b)(m=>{u[c]=m}))),mc(1),function Il(n){return(0,It.U)(()=>n)}(u),Lo(c=>fu(c)?Vi.E:ru(c)))}(u,n,e,r).pipe((0,It.U)(c=>(n._resolvedData=c,n.data=qf(n,t).resolve,i&&k_(i)&&(n.data[Ui]=i.title),null)))}(c.route,r,n,e)),(0,_r.b)(()=>u++),mc(1),(0,kn.z)(c=>u===i.length?st(t):Vi.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,_r.b)({next:()=>w=!0,complete:()=>{w||(t.restoreHistory(m),this.cancelNavigationTransition(m,"",2))}}))}),(0,_r.b)(m=>{const w=new Uf(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(w)}))}),F_(c=>{const m=w=>{const D=[];w.routeConfig?.loadComponent&&!w.routeConfig._loadedComponent&&D.push(this.configLoader.loadComponent(w.routeConfig).pipe((0,_r.b)(T=>{w.component=T}),(0,It.U)(()=>{})));for(const T of w.children)D.push(...m(T));return D};return _l(m(c.targetSnapshot.root)).pipe(Zs(),Ks(1))}),F_(()=>this.afterPreactivation()),(0,It.U)(c=>{const m=function hu(n,e,t){const r=Tc(n,e._root,t?t._root:void 0);return new g_(r,e)}(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return r={...c,targetRouterState:m}}),(0,_r.b)(c=>{t.currentUrlTree=c.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(c.urlAfterRedirects,c.rawUrl),t.routerState=c.targetRouterState,"deferred"===t.urlUpdateStrategy&&(c.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,c),t.browserUrlTree=c.urlAfterRedirects)}),((n,e,t)=>(0,It.U)(r=>(new sh(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c)),Ks(1),(0,_r.b)({next:c=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new ns(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{i=!0}}),_c(()=>{i||u||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Lo(c=>{if(u=!0,v(c)){p(c)||(t.navigated=!0,t.restoreHistory(r,!0));const m=new Pl(r.id,this.urlSerializer.serialize(r.extractedUrl),c.message,c.cancellationCode);if(this.events.next(m),p(c)){const w=t.urlHandlingStrategy.merge(c.url,t.rawUrlTree),D={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||Dw(r.source)};t.scheduleNavigation(w,Nl,null,D,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const m=new Ol(r.id,this.urlSerializer.serialize(r.extractedUrl),c,r.targetSnapshot??void 0);this.events.next(m);try{r.resolve(t.errorHandler(c))}catch(w){r.reject(w)}}return Vi.E}))}))}cancelNavigationTransition(t,r,i){const u=new Pl(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(u),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Dw(n){return n!==Nl}let Cw=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(u=>u.outlet===Dt);return r}getResolvedTitleForRoute(t){return t.data[Ui]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(jC)},providedIn:"root"}),n})(),jC=(()=>{class n extends Cw{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Df))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),bw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(HC)},providedIn:"root"}),n})();class $C{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let HC=(()=>{class n extends $C{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Lt=new f.OlP("",{providedIn:"root",factory:()=>({})});let Tw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(Sw)},providedIn:"root"}),n})(),Sw=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function zC(n){throw n}function qC(n,e,t){return e.parse("/")}const Aw={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},WC={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let rs=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,f.f3M)(f.c2e),this.isNgZoneEnabled=!1,this.options=(0,f.f3M)(Lt,{optional:!0})||{},this.errorHandler=this.options.errorHandler||zC,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||qC,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,f.f3M)(Tw),this.routeReuseStrategy=(0,f.f3M)(bw),this.urlCreationStrategy=(0,f.f3M)(p_),this.titleStrategy=(0,f.f3M)(Cw),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=qd((0,f.f3M)(hh,{optional:!0})??[]),this.navigationTransitions=(0,f.f3M)(rm),this.urlSerializer=(0,f.f3M)(Qs),this.location=(0,f.f3M)(je),this.isNgZoneEnabled=(0,f.f3M)(f.R0b)instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new pn,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=m_(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Nl,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const u={replaceUrl:!0},c=i?.navigationId?i:null;if(i){const w={...i};delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(u.state=w)}const m=this.parseUrl(t);this.scheduleNavigation(m,r,c,u)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(Ll),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:u,fragment:c,queryParamsHandling:m,preserveFragment:w}=r,D=w?this.currentUrlTree.fragment:c;let T=null;switch(m){case"merge":T={...this.currentUrlTree.queryParams,...u};break;case"preserve":T=this.currentUrlTree.queryParams;break;default:T=u||null}return null!==T&&(T=this.removeEmptyProps(T)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,t,T,D??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=au(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(u,Nl,null,r)}navigate(t,r={skipLocationChange:!1}){return function KC(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new f.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...Aw}:!1===r?{...WC}:r,au(t))return te(this.currentUrlTree,t,i);const u=this.parseUrl(t);return te(this.currentUrlTree,u,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const u=t[i];return null!=u&&(r[i]=u),r},{})}scheduleNavigation(t,r,i,u,c){if(this.disposed)return Promise.resolve(!1);let m,w,D,T;return c?(m=c.resolve,w=c.reject,D=c.promise):D=new Promise((N,V)=>{m=N,w=V}),T="computed"===this.canceledNavigationResolution?i&&i.\u0275routerPageId?i.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:T,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:u,resolve:m,reject:w,promise:D,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),D.catch(N=>Promise.reject(N))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const c={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",c)}else{const u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.go(i,"",u)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-(this.browserPageId??this.currentPageId);0!==u?this.location.historyGo(u):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===u&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class B_{}let j_=(()=>{class n{constructor(t,r,i,u,c){this.router=t,this.injector=i,this.preloadingStrategy=u,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(On(t=>t instanceof ns),bs(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,f.MMx)(u.providers,t,`Route: ${u.path}`));const c=u._injector??t,m=u._loadedInjector??c;(u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent)&&i.push(this.preloadConfig(c,u)),(u.children||u._loadedRoutes)&&i.push(this.processRoutes(m,u.children??u._loadedRoutes))}return(0,Xt.D)(i).pipe((0,fc.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):st(null);const u=i.pipe((0,kn.z)(c=>null===c?st(void 0):(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,this.processRoutes(c.injector??t,c.routes))));if(r.loadComponent&&!r._loadedComponent){const c=this.loader.loadComponent(r);return(0,Xt.D)([u,c]).pipe((0,fc.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(rs),f.LFG(f.Sil),f.LFG(f.lqb),f.LFG(B_),f.LFG(V_))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ep=new f.OlP("");let Mw=(()=>{class n{constructor(t,r,i,u,c={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=u,this.options=c,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},c.scrollPositionRestoration=c.scrollPositionRestoration||"disabled",c.anchorScrolling=c.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Vf?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ns&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof lu&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new lu(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();var to=(()=>((to=to||{})[to.COMPLETE=0]="COMPLETE",to[to.FAILED=1]="FAILED",to[to.REDIRECTING=2]="REDIRECTING",to))();const tp=!1;function Bl(n,e){return{\u0275kind:n,\u0275providers:e}}const H_=new f.OlP("",{providedIn:"root",factory:()=>!1});function np(){const n=(0,f.f3M)(f.zs3);return e=>{const t=n.get(f.z2F);if(e!==t.components[0])return;const r=n.get(rs),i=n.get(Rw);1===n.get(sm)&&r.initialNavigation(),n.get(Nw,null,f.XFs.Optional)?.setUpPreloading(),n.get(ep,null,f.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const Rw=new f.OlP(tp?"bootstrap done indicator":"",{factory:()=>new Qn.x}),sm=new f.OlP(tp?"initial navigation":"",{providedIn:"root",factory:()=>1});function XC(){let n=[];return n=tp?[{provide:f.Xts,multi:!0,useFactory:()=>{const e=(0,f.f3M)(rs);return()=>e.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function jf(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],Bl(1,n)}const Nw=new f.OlP(tp?"router preloader":"");function JC(n){return Bl(0,[{provide:Nw,useExisting:j_},{provide:B_,useExisting:n}])}const gh=!1,nb=new f.OlP(gh?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),G_=[je,{provide:Qs,useClass:Dl},rs,M,{provide:Tr,useFactory:function $_(n){return n.routerState.root},deps:[rs]},V_,gh?{provide:H_,useValue:!0}:[]];function rb(){return new f.PXZ("Router",rs)}let ib=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[G_,gh&&r?.enableTracing?XC().\u0275providers:[],{provide:hh,multi:!0,useValue:t},{provide:nb,useFactory:kw,deps:[[rs,new f.FiY,new f.tp0]]},{provide:Lt,useValue:r||{}},r?.useHash?{provide:ut,useClass:Oe}:{provide:ut,useClass:Pe},{provide:ep,useFactory:()=>{const n=(0,f.f3M)(ka),e=(0,f.f3M)(f.R0b),t=(0,f.f3M)(Lt),r=(0,f.f3M)(rm),i=(0,f.f3M)(Qs);return t.scrollOffset&&n.setOffset(t.scrollOffset),new Mw(i,r,n,e,t)}},r?.preloadingStrategy?JC(r.preloadingStrategy).\u0275providers:[],{provide:f.PXZ,multi:!0,useFactory:rb},r?.initialNavigation?ob(r):[],[{provide:Fw,useFactory:np},{provide:f.tb,multi:!0,useExisting:Fw}]]}}static forChild(t){return{ngModule:n,providers:[{provide:hh,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(nb,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[Je]}),n})();function kw(n){if(gh&&n)throw new f.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function ob(n){return["disabled"===n.initialNavigation?Bl(3,[{provide:f.ip1,multi:!0,useFactory:()=>{const e=(0,f.f3M)(rs);return()=>{e.setUpLocationChangeListener()}}},{provide:sm,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Bl(2,[{provide:sm,useValue:0},{provide:f.ip1,multi:!0,deps:[f.zs3],useFactory:e=>{const t=e.get(fe,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(rs),u=e.get(Rw);(function Ox(n,e){n.events.pipe(On(t=>t instanceof ns||t instanceof Pl||t instanceof Ol||t instanceof ga),(0,It.U)(t=>t instanceof ns||t instanceof ga?to.COMPLETE:t instanceof Pl&&(0===t.code||1===t.code)?to.REDIRECTING:to.FAILED),On(t=>t!==to.REDIRECTING),Ks(1)).subscribe(()=>{e()})})(i,()=>{r(!0)}),e.get(rm).afterPreactivation=()=>(r(!0),u.closed?st(void 0):u),i.initialNavigation()}))}}]).\u0275providers:[]]}const Fw=new f.OlP(gh?"Router Initializer":""),z_=[];let ip=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[ib.forRoot(z_),ib]}),n})();var am=k(4986);function sp(n,e=am.z){return(0,yr.e)((t,r)=>{let i=null,u=null,c=null;const m=()=>{if(i){i.unsubscribe(),i=null;const D=u;u=null,r.next(D)}};function w(){const D=c+n,T=e.now();if(T<D)return i=this.schedule(void 0,D-T),void r.add(i);m()}t.subscribe((0,sr.x)(r,D=>{u=D,c=e.now(),i||(i=e.schedule(w,n),r.add(i))},()=>{m(),r.complete()},void 0,()=>{u=i=null}))})}function q_(n,e=zs.y){return n=n??W_,(0,yr.e)((t,r)=>{let i,u=!0;t.subscribe((0,sr.x)(r,c=>{const m=e(c);(u||!n(i,m))&&(u=!1,i=m,r.next(c))}))})}function W_(n,e){return n===e}let um=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n}),n})(),xc=(()=>{class n extends um{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();const no=new f.OlP("NgValueAccessor"),Vw={provide:no,useExisting:(0,f.Gpc)(()=>yh),multi:!0},Uw=new f.OlP("CompositionEventMode");let yh=(()=>{class n extends um{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function ub(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(Uw,8))},n.\u0275dir=f.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[f._Bn([Vw]),f.qOj]}),n})();const cb=!1;function Mc(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function is(n){return null!=n&&"number"==typeof n.length}const bi=new f.OlP("NgValidators"),Rc=new f.OlP("NgAsyncValidators"),Vx=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Nc{static min(e){return function Z_(n){return e=>{if(Mc(e.value)||Mc(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function Bw(n){return e=>{if(Mc(e.value)||Mc(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function jw(n){return Mc(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function $w(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function Y_(n){return Mc(n.value)||Vx.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function Hw(n){return e=>Mc(e.value)||!is(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function Gw(n){return e=>is(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function cm(n){if(!n)return lm;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Mc(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return Zw(e)}static composeAsync(e){return X_(e)}}function lm(n){return null}function zw(n){return null!=n}function qw(n){const e=(0,f.QGY)(n)?(0,Xt.D)(n):n;if(cb&&!(0,f.CqO)(e)){let t="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(t+=" Are you using a synchronous validator where an async validator is expected?"),new f.vHH(-1101,t)}return e}function Ww(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Kw(n,e){return e.map(t=>t(n))}function dm(n){return n.map(e=>function ya(n){return!n.validate}(e)?e:t=>e.validate(t))}function Zw(n){if(!n)return null;const e=n.filter(zw);return 0==e.length?null:function(t){return Ww(Kw(t,e))}}function Q_(n){return null!=n?Zw(dm(n)):null}function X_(n){if(!n)return null;const e=n.filter(zw);return 0==e.length?null:function(t){return function K_(...n){const e=(0,ci.jO)(n),{args:t,keys:r}=tu(n),i=new Zr.y(u=>{const{length:c}=t;if(!c)return void u.complete();const m=new Array(c);let w=c,D=c;for(let T=0;T<c;T++){let N=!1;(0,Ws.Xf)(t[T]).subscribe((0,sr.x)(u,V=>{N||(N=!0,D--),m[T]=V},()=>w--,void 0,()=>{(!w||!N)&&(D||u.next(r?qs(r,m):m),u.complete())}))}});return e?i.pipe(Cs(e)):i}(Kw(t,e).map(qw)).pipe((0,It.U)(Ww))}}function J_(n){return null!=n?X_(dm(n)):null}function Yw(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Qw(n){return n._rawValidators}function hm(n){return n._rawAsyncValidators}function ev(n){return n?Array.isArray(n)?n:[n]:[]}function fm(n,e){return Array.isArray(n)?n.includes(e):n===e}function op(n,e){const t=ev(e);return ev(n).forEach(i=>{fm(t,i)||t.push(i)}),t}function ap(n,e){return ev(e).filter(t=>!fm(n,t))}class up{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Q_(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=J_(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class ss extends up{get formDirective(){return null}get path(){return null}}class _a extends up{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class lb{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let pm=(()=>{class n extends lb{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(_a,2))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[f.qOj]}),n})(),gm=(()=>{class n extends lb{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(ss,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[f.qOj]}),n})();function Xw(n,e){return n?`with name: '${e}'`:`at index: ${e}`}const tv=!1,dp="VALID",_m="INVALID",jl="PENDING",$l="DISABLED";function nv(n){return(vm(n)?n.validators:n)||null}function iv(n,e){return(vm(e)?e.asyncValidators:n)||null}function vm(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class tE{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===dp}get invalid(){return this.status===_m}get pending(){return this.status==jl}get disabled(){return this.status===$l}get enabled(){return this.status!==$l}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(op(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(op(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(ap(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(ap(e,this._rawAsyncValidators))}hasValidator(e){return fm(this._rawValidators,e)}hasAsyncValidator(e){return fm(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=jl,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=$l,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=dp,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===dp||this.status===jl)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?$l:dp}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=jl,this._hasOwnPendingAsyncValidator=!0;const t=qw(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?$l:this.errors?_m:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(jl)?jl:this._anyControlsHaveStatus(_m)?_m:dp}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){vm(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function rv(n){return Array.isArray(n)?Q_(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function _b(n){return Array.isArray(n)?J_(n):n||null}(this._rawAsyncValidators)}}class hp extends tE{constructor(e,t,r){super(nv(t),iv(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function eE(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new f.vHH(1002,tv?function yb(n,e){return`Must supply a value for form control ${Xw(n,e)}`}(e,i):"")})})(this,!0,e),Object.keys(e).forEach(r=>{(function Jw(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new f.vHH(1e3,tv?function gb(n){return`\n    There are no form controls registered with this ${n?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(e):"");if(!r[t])throw new f.vHH(1001,tv?function mb(n,e){return`Cannot find form control ${Xw(n,e)}`}(e,t):"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,u)=>{r=t(r,i,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const Hl=new f.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>sv}),sv="always";function fp(n,e,t=sv){io(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function Ti(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&pp(n,e)})}(n,e),function so(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function zl(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&pp(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Ib(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function wm(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Pc(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function vh(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function io(n,e){const t=Qw(n);null!==e.validator?n.setValidators(Yw(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=hm(n);null!==e.asyncValidator?n.setAsyncValidators(Yw(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();vh(e._rawValidators,i),vh(e._rawAsyncValidators,i)}function Pc(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=Qw(n);if(Array.isArray(i)&&i.length>0){const u=i.filter(c=>c!==e.validator);u.length!==i.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const i=hm(n);if(Array.isArray(i)&&i.length>0){const u=i.filter(c=>c!==e.asyncValidator);u.length!==i.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return vh(e._rawValidators,r),vh(e._rawAsyncValidators,r),t}function pp(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function ov(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function av(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const va=class extends tE{constructor(e=null,t,r){super(nv(t),iv(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),vm(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=av(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){ov(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){ov(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){av(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let Tm=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),dv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();const Am=new f.OlP("NgModelWithFormControlWarning"),fE={provide:ss,useExisting:(0,f.Gpc)(()=>vp)};let vp=(()=>{class n extends ss{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new f.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Pc(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return fp(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){wm(t.control||null,t,!1),function nE(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function ql(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(wm(r||null,t),(n=>n instanceof va)(i)&&(fp(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function Em(n,e){io(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function wh(n,e){return Pc(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){io(this.form,this),this._oldForm&&Pc(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(bi,10),f.Y36(Rc,10),f.Y36(Hl,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&f.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([fE]),f.qOj,f.TTD]}),n})();const gE={provide:_a,useExisting:(0,f.Gpc)(()=>Ep)};let Ep=(()=>{class n extends _a{set isDisabled(t){}constructor(t,r,i,u,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new f.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function Im(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(u=>{u.constructor===yh?t=u:function Ih(n){return Object.getPrototypeOf(n.constructor)===xc}(u)?r=u:i=u}),i||r||t||null}(0,u)}ngOnChanges(t){this._added||this._setUpControl(),function kc(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function Gl(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(f.Y36(ss,13),f.Y36(bi,10),f.Y36(Rc,10),f.Y36(no,10),f.Y36(Am,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[f._Bn([gE]),f.qOj,f.TTD]}),n})(),SE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[dv]}),n})(),xE=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Am,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Hl,useValue:t.callSetDisabledState??sv}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[SE]}),n})();var Fn=k(4976);function _v(){return(0,yr.e)((n,e)=>{let t,r=!1;n.subscribe((0,sr.x)(e,i=>{const u=t;t=i,r&&e.next([u,i]),r=!0}))})}var Qe,Hi=k(2011),ME=(k(2644),k(3942)),me=k(5861),Gi=k(6881),bh=k(4859),vu=k(1877),Gt=k(2090),kb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},oo={},Th=Th||{},jt=kb||self;function Dp(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Sh(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Cp="closure_uid_"+(1e9*Math.random()>>>0),RE=0;function NE(n,e,t){return n.call.apply(n.bind,arguments)}function PE(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function li(n,e,t){return(li=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?NE:PE).apply(null,arguments)}function bp(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Or(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,u){for(var c=Array(arguments.length-2),m=2;m<arguments.length;m++)c[m-2]=arguments[m];return e.prototype[i].apply(r,c)}}function wu(){this.s=this.s,this.o=this.o}wu.prototype.s=!1,wu.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function vv(n){Object.prototype.hasOwnProperty.call(n,Cp)&&n[Cp]||(n[Cp]=++RE)}(this)},wu.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const kE=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function wv(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function FE(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Dp(r)){const i=n.length||0,u=r.length||0;n.length=i+u;for(let c=0;c<u;c++)n[i+c]=r[c]}else n.push(r)}}function Si(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Si.prototype.h=function(){this.defaultPrevented=!0};var Fb=function(){if(!jt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{jt.addEventListener("test",()=>{},e),jt.removeEventListener("test",()=>{},e)}catch{}return n}();function Tp(n){return/^[\s\xa0]*$/.test(n)}function Nm(){var n=jt.navigator;return n&&(n=n.userAgent)?n:""}function Ia(n){return-1!=Nm().indexOf(n)}function Ev(n){return Ev[" "](n),n}Ev[" "]=function(){};var Dv,n,Vb=Ia("Opera"),Ah=Ia("Trident")||Ia("MSIE"),LE=Ia("Edge"),Iv=LE||Ah,VE=Ia("Gecko")&&!(-1!=Nm().toLowerCase().indexOf("webkit")&&!Ia("Edge"))&&!(Ia("Trident")||Ia("MSIE"))&&!Ia("Edge"),Ub=-1!=Nm().toLowerCase().indexOf("webkit")&&!Ia("Edge");function UE(){var n=jt.document;return n?n.documentMode:void 0}e:{var Pm="",Om=(n=Nm(),VE?/rv:([^\);]+)(\)|;)/.exec(n):LE?/Edge\/([\d\.]+)/.exec(n):Ah?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Ub?/WebKit\/(\S+)/.exec(n):Vb?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Om&&(Pm=Om?Om[1]:""),Ah){var km=UE();if(null!=km&&km>parseFloat(Pm)){Dv=String(km);break e}}Dv=Pm}var BE=jt.document&&Ah&&(UE()||parseInt(Dv,10))||void 0;function xh(n,e){if(Si.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(VE){e:{try{Ev(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:jE[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&xh.$.h.call(this)}}Or(xh,Si);var jE={2:"touch",3:"pen",4:"mouse"};xh.prototype.h=function(){xh.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Mh="closure_listenable_"+(1e6*Math.random()|0),$E=0;function HE(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++$E,this.fa=this.ia=!1}function Da(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function bv(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Kl(n){const e={};for(const t in n)e[t]=n[t];return e}const jb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Lm(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let u=0;u<jb.length;u++)t=jb[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Tv(n){this.src=n,this.g={},this.h=0}function Vm(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],i=kE(r,e);(u=0<=i)&&Array.prototype.splice.call(r,i,1),u&&(Da(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Um(n,e,t,r){for(var i=0;i<n.length;++i){var u=n[i];if(!u.fa&&u.listener==e&&u.capture==!!t&&u.la==r)return i}return-1}Tv.prototype.add=function(n,e,t,r,i){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var c=Um(n,e,r,i);return-1<c?(e=n[c],t||(e.ia=!1)):((e=new HE(e,this.src,u,!!r,i)).ia=t,n.push(e)),e};var GE="closure_lm_"+(1e6*Math.random()|0),Tt={};function zE(n,e,t,r,i){if(r&&r.once)return Zl(n,e,t,r,i);if(Array.isArray(e)){for(var u=0;u<e.length;u++)zE(n,e[u],t,r,i);return null}return t=jm(t),n&&n[Mh]?n.O(e,t,Sh(r)?!!r.capture:!!r,i):qE(n,e,t,!1,r,i)}function qE(n,e,t,r,i,u){if(!e)throw Error("Invalid event type");var c=Sh(i)?!!i.capture:!!i,m=KE(n);if(m||(n[GE]=m=new Tv(n)),(t=m.add(e,t,r,c,u)).proxy)return t;if(r=function $b(){const e=or;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Fb||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(Sp(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Zl(n,e,t,r,i){if(Array.isArray(e)){for(var u=0;u<e.length;u++)Zl(n,e[u],t,r,i);return null}return t=jm(t),n&&n[Mh]?n.P(e,t,Sh(r)?!!r.capture:!!r,i):qE(n,e,t,!0,r,i)}function WE(n,e,t,r,i){if(Array.isArray(e))for(var u=0;u<e.length;u++)WE(n,e[u],t,r,i);else r=Sh(r)?!!r.capture:!!r,t=jm(t),n&&n[Mh]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Um(u=n.g[e],t,r,i))&&(Da(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=KE(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Um(e,t,r,i)),(t=-1<n?e[n]:null)&&Rh(t))}function Rh(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Mh])Vm(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Sp(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=KE(e))?(Vm(t,n),0==t.h&&(t.src=null,e[GE]=null)):Da(n)}}}function Sp(n){return n in Tt?Tt[n]:Tt[n]="on"+n}function or(n,e){if(n.fa)n=!0;else{e=new xh(e,this);var t=n.listener,r=n.la||n.src;n.ia&&Rh(n),n=t.call(r,e)}return n}function KE(n){return(n=n[GE])instanceof Tv?n:null}var Bm="__closure_events_fn_"+(1e9*Math.random()>>>0);function jm(n){return"function"==typeof n?n:(n[Bm]||(n[Bm]=function(e){return n.handleEvent(e)}),n[Bm])}function Yr(){wu.call(this),this.i=new Tv(this),this.S=this,this.J=null}function Qr(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Si(e,n);else if(e instanceof Si)e.target=e.target||n;else{var i=e;Lm(e=new Si(r,n),i)}if(i=!0,t)for(var u=t.length-1;0<=u;u--){var c=e.g=t[u];i=Ap(c,r,!0,e)&&i}if(i=Ap(c=e.g=n,r,!0,e)&&i,i=Ap(c,r,!1,e)&&i,t)for(u=0;u<t.length;u++)i=Ap(c=e.g=t[u],r,!1,e)&&i}function Ap(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,u=0;u<e.length;++u){var c=e[u];if(c&&!c.fa&&c.capture==t){var m=c.listener,w=c.la||c.src;c.ia&&Vm(n.i,c),i=!1!==m.call(w,r)&&i}}return i&&!r.defaultPrevented}Or(Yr,wu),Yr.prototype[Mh]=!0,Yr.prototype.removeEventListener=function(n,e,t,r){WE(this,n,e,t,r)},Yr.prototype.N=function(){if(Yr.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Da(t[r]);delete n.g[e],n.h--}}this.J=null},Yr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Yr.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var $m=jt.JSON.stringify;function Hb(){var n=Hm;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var YE=new class ZE{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new xp,n=>n.reset());class xp{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function zb(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function qb(n){jt.setTimeout(()=>{throw n},0)}let Mp,Fc=!1,Hm=new class Gb{constructor(){this.h=this.g=null}add(e,t){const r=YE.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},Sv=()=>{const n=jt.Promise.resolve(void 0);Mp=()=>{n.then(QE)}};var QE=()=>{for(var n;n=Hb();){try{n.h.call(n.g)}catch(t){qb(t)}var e=YE;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Fc=!1};function Gm(n,e){Yr.call(this),this.h=n||1,this.g=e||jt,this.j=li(this.qb,this),this.l=Date.now()}function Yl(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function Ql(n,e,t){if("function"==typeof n)t&&(n=li(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=li(n.handleEvent,n)}return 2147483647<Number(e)?-1:jt.setTimeout(n,e||0)}function XE(n){n.g=Ql(()=>{n.g=null,n.i&&(n.i=!1,XE(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Or(Gm,Yr),(Qe=Gm.prototype).ga=!1,Qe.T=null,Qe.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Qr(this,"tick"),this.ga&&(Yl(this),this.start()))}},Qe.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Qe.N=function(){Gm.$.N.call(this),Yl(this),delete this.g};class Wb extends wu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:XE(this)}N(){super.N(),this.g&&(jt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rp(n){wu.call(this),this.h=n,this.g={}}Or(Rp,wu);var Av=[];function xv(n,e,t,r){Array.isArray(t)||(t&&(Av[0]=t.toString()),t=Av);for(var i=0;i<t.length;i++){var u=zE(e,t[i],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function Mv(n){bv(n.g,function(e,t){this.g.hasOwnProperty(t)&&Rh(e)},n),n.g={}}function zm(){this.g=!0}function Nh(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function tM(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var u=i[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var c=1;c<i.length;c++)i[c]=""}}}return $m(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Rp.prototype.N=function(){Rp.$.N.call(this),Mv(this)},Rp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},zm.prototype.Ea=function(){this.g=!1},zm.prototype.info=function(){};var Ph={},Zb=null;function Np(){return Zb=Zb||new Yr}function Pp(n){Si.call(this,Ph.Ta,n)}function Op(n){const e=Np();Qr(e,new Pp(e))}function eI(n,e){Si.call(this,Ph.STAT_EVENT,n),this.stat=e}function Ai(n){const e=Np();Qr(e,new eI(e,n))}function Oh(n,e){Si.call(this,Ph.Ua,n),this.size=e}function kp(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return jt.setTimeout(function(){n()},e)}Ph.Ta="serverreachability",Or(Pp,Si),Ph.STAT_EVENT="statevent",Or(eI,Si),Ph.Ua="timingevent",Or(Oh,Si);var qm={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},tI={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Rv(){}function nI(){}Rv.prototype.h=null;var Xl,kh={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Nv(){Si.call(this,"d")}function Pv(){Si.call(this,"c")}function Wm(){}function Fh(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Rp(this),this.P=iI,this.V=new Gm(n=Iv?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new rI}function rI(){this.i=null,this.g="",this.h=!1}Or(Nv,Si),Or(Pv,Si),Or(Wm,Rv),Wm.prototype.g=function(){return new XMLHttpRequest},Wm.prototype.i=function(){return{}},Xl=new Wm;var iI=45e3,Ov={},Fp={};function kv(n,e,t){n.L=1,n.v=Xm(Eu(e)),n.s=t,n.S=!0,Km(n,null)}function Km(n,e){n.G=Date.now(),Lp(n),n.A=Eu(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),jv(t.i,"t",r),n.C=0,t=n.l.J,n.h=new rI,n.g=AI(n.l,t?e:null,!n.s),0<n.O&&(n.M=new Wb(li(n.Pa,n,n.g),n.O)),xv(n.U,n.g,"readystatechange",n.nb),e=n.I?Kl(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),Op(),function JE(n,e,t,r,i,u){n.info(function(){if(n.g)if(u)for(var c="",m=u.split("&"),w=0;w<m.length;w++){var D=m[w].split("=");if(1<D.length){var T=D[0];D=D[1];var N=T.split("_");c=2<=N.length&&"type"==N[1]?c+(T+"=")+D+"&":c+(T+"=redacted&")}}else c=null;else c=u;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.W,n.s)}function sI(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function Fv(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=oI(n,t),i==Fp){4==e&&(n.o=4,Ai(14),r=!1),Nh(n.j,n.m,null,"[Incomplete Response]");break}if(i==Ov){n.o=4,Ai(15),Nh(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Nh(n.j,n.m,i,null),Ym(n,i)}sI(n)&&i!=Fp&&i!=Ov&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ai(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),Zv(e),e.M=!0,Ai(11))):(Nh(n.j,n.m,t,"[Invalid Chunked Response]"),ed(n),Jl(n))}function oI(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Fp:(t=Number(e.substring(t,r)),isNaN(t)?Ov:(r+=1)+t>e.length?Fp:(e=e.slice(r,r+t),n.C=r+t,e))}function Lp(n){n.Y=Date.now()+n.P,aI(n,n.P)}function aI(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=kp(li(n.lb,n),e)}function Zm(n){n.B&&(jt.clearTimeout(n.B),n.B=null)}function Jl(n){0==n.l.H||n.J||cy(n.l,n)}function ed(n){Zm(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,Yl(n.V),Mv(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function Ym(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||jp(t.i,n)))if(!n.K&&jp(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;uy(t),Hp(t)}Kv(t),Ai(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=kp(li(t.ib,t),6e3));if(1>=gI(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else rd(t,11)}else if((n.K||t.g==n)&&uy(t),!Tp(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let D=i[e];if(t.V=D[0],D=D[1],2==t.H)if("c"==D[0]){t.K=D[1],t.pa=D[2];const T=D[3];null!=T&&(t.ra=T,t.l.info("VER="+t.ra));const N=D[4];null!=N&&(t.Ga=N,t.l.info("SVER="+t.Ga));const V=D[5];null!=V&&"number"==typeof V&&0<V&&(t.L=r=1.5*V,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const q=n.g;if(q){const ue=q.g?q.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ue){var u=r.i;u.g||-1==ue.indexOf("spdy")&&-1==ue.indexOf("quic")&&-1==ue.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&($v(u,u.h),u.h=null))}if(r.F){const xe=q.g?q.g.getResponseHeader("X-HTTP-Session-Id"):null;xe&&(r.Da=xe,Ln(r.I,r.F,xe))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var c=n;if((r=t).wa=jh(r,r.J?r.pa:null,r.Y),c.K){Hv(r.i,c);var m=c,w=r.L;w&&m.setTimeout(w),m.B&&(Zm(m),Lp(m)),r.g=c}else SI(r);0<t.j.length&&ay(t)}else"stop"!=D[0]&&"close"!=D[0]||rd(t,7);else 3==t.H&&("stop"==D[0]||"close"==D[0]?"stop"==D[0]?rd(t,7):oy(t):"noop"!=D[0]&&t.h&&t.h.Aa(D),t.A=0)}Op()}catch{}}function uI(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Dp(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function Xb(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Dp(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function Qb(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Dp(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,u=0;u<i;u++)e.call(void 0,r[u],t&&t[u],n)}(Qe=Fh.prototype).setTimeout=function(n){this.P=n},Qe.nb=function(n){n=n.target;const e=this.M;e&&3==Ca(n)?e.l():this.Pa(n)},Qe.Pa=function(n){try{if(n==this.g)e:{const T=Ca(this.g);var e=this.g.Ia();if(this.g.da(),!(3>T)&&(3!=T||Iv||this.g&&(this.h.h||this.g.ja()||CI(this.g)))){this.J||4!=T||7==e||Op(),Zm(this);var t=this.g.da();this.ca=t;t:if(sI(this)){var r=CI(this.g);n="";var i=r.length,u=4==Ca(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ed(this),Jl(this);var c="";break t}this.h.i=new jt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ja();if(this.i=200==t,function Kb(n,e,t,r,i,u,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+u+" "+c})}(this.j,this.u,this.A,this.m,this.W,T,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Tp(m)){var D=m;break t}}D=null}if(!(t=D)){this.i=!1,this.o=3,Ai(12),ed(this),Jl(this);break e}Nh(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ym(this,t)}this.S?(Fv(this,T,c),Iv&&this.i&&3==T&&(xv(this.U,this.V,"tick",this.mb),this.V.start())):(Nh(this.j,this.m,c,null),Ym(this,c)),4==T&&ed(this),this.i&&!this.J&&(4==T?cy(this.l,this):(this.i=!1,Lp(this)))}else(function uT(n){const e={};n=(n.g&&2<=Ca(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(Tp(n[r]))continue;var t=zb(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const u=e[i]||[];e[i]=u,u.push(t)}!function Bb(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<c.indexOf("Unknown SID")?(this.o=3,Ai(12)):(this.o=0,Ai(13)),ed(this),Jl(this)}}}catch{}},Qe.mb=function(){if(this.g){var n=Ca(this.g),e=this.g.ja();this.C<e.length&&(Zm(this),Fv(this,n,e),this.i&&4!=n&&Lp(this))}},Qe.cancel=function(){this.J=!0,ed(this)},Qe.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function eM(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Op(),Ai(17)),ed(this),this.o=2,Jl(this)):aI(this,this.Y-n)};var cI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function td(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof td){this.h=n.h,Qm(this,n.j),this.s=n.s,this.g=n.g,Vp(this,n.m),this.l=n.l;var e=n.i,t=new Bp;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Lv(this,t),this.o=n.o}else n&&(e=String(n).match(cI))?(this.h=!1,Qm(this,e[1]||"",!0),this.s=Lh(e[2]||""),this.g=Lh(e[3]||"",!0),Vp(this,e[4]),this.l=Lh(e[5]||"",!0),Lv(this,e[6]||"",!0),this.o=Lh(e[7]||"")):(this.h=!1,this.i=new Bp(null,this.h))}function Eu(n){return new td(n)}function Qm(n,e,t){n.j=t?Lh(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Vp(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Lv(n,e,t){e instanceof Bp?(n.i=e,function fI(n,e){e&&!n.j&&(Lc(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(Jm(this,r),jv(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Up(e,dI)),n.i=new Bp(e,n.h))}function Ln(n,e,t){n.i.set(e,t)}function Xm(n){return Ln(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Lh(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Up(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,eT),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function eT(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}td.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Up(e,lI,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Up(e,lI,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Up(t,"/"==t.charAt(0)?Uv:Vv,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Up(t,Bv)),n.join("")};var lI=/[#\/\?@]/g,Vv=/[#\?:]/g,Uv=/[#\?]/g,dI=/[#\?@]/g,Bv=/#/g;function Bp(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Lc(n){n.g||(n.g=new Map,n.h=0,n.i&&function Jb(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var u=n[t].substring(0,r);i=n[t].substring(r+1)}else u=n[t];e(u,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Jm(n,e){Lc(n),e=Ho(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function hI(n,e){return Lc(n),e=Ho(n,e),n.g.has(e)}function jv(n,e,t){Jm(n,e),0<t.length&&(n.i=null,n.g.set(Ho(n,e),wv(t)),n.h+=t.length)}function Ho(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function nT(n){this.l=n||pI,n=jt.PerformanceNavigationTiming?0<(n=jt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(jt.g&&jt.g.Ka&&jt.g.Ka()&&jt.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Qe=Bp.prototype).add=function(n,e){Lc(this),this.i=null,n=Ho(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Qe.forEach=function(n,e){Lc(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},Qe.ta=function(){Lc(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let u=0;u<i.length;u++)t.push(e[r])}return t},Qe.Z=function(n){Lc(this);let e=[];if("string"==typeof n)hI(this,n)&&(e=e.concat(this.g.get(Ho(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Qe.set=function(n,e){return Lc(this),this.i=null,hI(this,n=Ho(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Qe.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},Qe.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),c=this.Z(r);for(r=0;r<c.length;r++){var i=u;""!==c[r]&&(i+="="+encodeURIComponent(String(c[r]))),n.push(i)}}return this.i=n.join("&")};var pI=10;function ey(n){return!!n.h||!!n.g&&n.g.size>=n.j}function gI(n){return n.h?1:n.g?n.g.size:0}function jp(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function $v(n,e){n.g?n.g.add(e):n.h=e}function Hv(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function ty(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return wv(n.i)}nT.prototype.cancel=function(){if(this.i=ty(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var mI=class{stringify(n){return jt.JSON.stringify(n,void 0)}parse(n){return jt.JSON.parse(n,void 0)}};function yI(){this.g=new mI}function _I(n,e,t){const r=t||"";try{uI(n,function(i,u){let c=i;Sh(i)&&(c=$m(i)),e.push(r+u+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function ny(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function $p(n){this.l=n.fc||null,this.j=n.ob||!1}function ry(n,e){Yr.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=Gv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Or($p,Rv),$p.prototype.g=function(){return new ry(this.l,this.j)},$p.prototype.i=function(n){return function(){return n}}({}),Or(ry,Yr);var Gv=0;function zv(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function iy(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Vh(n)}function Vh(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Qe=ry.prototype).open=function(n,e){if(this.readyState!=Gv)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Vh(this)},Qe.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||jt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Qe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,iy(this)),this.readyState=Gv},Qe.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Vh(this)),this.g&&(this.readyState=3,Vh(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof jt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;zv(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},Qe.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?iy(this):Vh(this),3==this.readyState&&zv(this)}},Qe.Za=function(n){this.g&&(this.response=this.responseText=n,iy(this))},Qe.Ya=function(n){this.g&&(this.response=n,iy(this))},Qe.ka=function(){this.g&&iy(this)},Qe.setRequestHeader=function(n,e){this.v.append(n,e)},Qe.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Qe.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(ry.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var rT=jt.JSON.parse;function ar(n){Yr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=iT,this.L=this.M=!1}Or(ar,Yr);var iT="",sT=/^https?$/i,oT=["POST","PUT"];function wI(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,EI(n),sy(n)}function EI(n){n.F||(n.F=!0,Qr(n,"complete"),Qr(n,"error"))}function II(n){if(n.h&&typeof Th<"u"&&(!n.C[1]||4!=Ca(n)||2!=n.da()))if(n.v&&4==Ca(n))Ql(n.La,0,n);else if(Qr(n,"readystatechange"),4==Ca(n)){n.h=!1;try{const c=n.da();e:switch(c){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===c){var i=String(n.I).match(cI)[1]||null;!i&&jt.self&&jt.self.location&&(i=jt.self.location.protocol.slice(0,-1)),r=!sT.test(i?i.toLowerCase():"")}t=r}if(t)Qr(n,"complete"),Qr(n,"success");else{n.m=6;try{var u=2<Ca(n)?n.g.statusText:""}catch{u=""}n.j=u+" ["+n.da()+"]",EI(n)}}finally{sy(n)}}}function sy(n,e){if(n.g){DI(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Qr(n,"ready");try{t.onreadystatechange=r}catch{}}}function DI(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(jt.clearTimeout(n.A),n.A=null)}function Ca(n){return n.g?n.g.readyState:0}function CI(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case iT:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function bI(n){let e="";return bv(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function nd(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=bI(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Ln(n,e,t))}function Uh(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function qv(n){this.Ga=0,this.j=[],this.l=new zm,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Uh("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Uh("baseRetryDelayMs",5e3,n),this.hb=Uh("retryDelaySeedMs",1e4,n),this.eb=Uh("forwardChannelMaxRetries",2,n),this.xa=Uh("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new nT(n&&n.concurrentRequestLimit),this.Ja=new yI,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function oy(n){if(Wv(n),3==n.H){var e=n.W++,t=Eu(n.I);if(Ln(t,"SID",n.K),Ln(t,"RID",e),Ln(t,"TYPE","terminate"),Gp(n,t),(e=new Fh(n,n.l,e)).L=2,e.v=Xm(Eu(t)),t=!1,jt.navigator&&jt.navigator.sendBeacon)try{t=jt.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&jt.Image&&((new Image).src=e.v,t=!0),t||(e.g=AI(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Lp(e)}ly(n)}function Hp(n){n.g&&(Zv(n),n.g.cancel(),n.g=null)}function Wv(n){Hp(n),n.u&&(jt.clearTimeout(n.u),n.u=null),uy(n),n.i.cancel(),n.m&&("number"==typeof n.m&&jt.clearTimeout(n.m),n.m=null)}function ay(n){if(!ey(n.i)&&!n.m){n.m=!0;var e=n.Na;Mp||Sv(),Fc||(Mp(),Fc=!0),Hm.add(e,n),n.C=0}}function lT(n,e){var t;t=e?e.m:n.W++;const r=Eu(n.I);Ln(r,"SID",n.K),Ln(r,"RID",t),Ln(r,"AID",n.V),Gp(n,r),n.o&&n.s&&nd(r,n.o,n.s),t=new Fh(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=TI(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),$v(n.i,t),kv(t,r,e)}function Gp(n,e){n.na&&bv(n.na,function(t,r){Ln(e,r,t)}),n.h&&uI({},function(t,r){Ln(e,r,t)})}function TI(n,e,t){t=Math.min(n.j.length,t);var r=n.h?li(n.h.Va,n.h,n):null;e:{var i=n.j;let u=-1;for(;;){const c=["count="+t];-1==u?0<t?(u=i[0].g,c.push("ofs="+u)):u=0:c.push("ofs="+u);let m=!0;for(let w=0;w<t;w++){let D=i[w].g;const T=i[w].map;if(D-=u,0>D)u=Math.max(0,i[w].g-100),m=!1;else try{_I(T,c,"req"+D+"_")}catch{r&&r(T)}}if(m){r=c.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function SI(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;Mp||Sv(),Fc||(Mp(),Fc=!0),Hm.add(e,n),n.A=0}}function Kv(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=kp(li(n.Ma,n),Go(n,n.A)),n.A++,0))}function Zv(n){null!=n.B&&(jt.clearTimeout(n.B),n.B=null)}function Bh(n){n.g=new Fh(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Eu(n.wa);Ln(e,"RID","rpc"),Ln(e,"SID",n.K),Ln(e,"AID",n.V),Ln(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&Ln(e,"TO",n.qa),Ln(e,"TYPE","xmlhttp"),Gp(n,e),n.o&&n.s&&nd(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=Xm(Eu(e)),t.s=null,t.S=!0,Km(t,n)}function uy(n){null!=n.v&&(jt.clearTimeout(n.v),n.v=null)}function cy(n,e){var t=null;if(n.g==e){uy(n),Zv(n),n.g=null;var r=2}else{if(!jp(n.i,e))return;t=e.F,Hv(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;Qr(r=Np(),new Oh(r,t)),ay(n)}else SI(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function cT(n,e){return!(gI(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=kp(li(n.Na,n,e),Go(n,n.C)),n.C++,0)))}(n,e)||2==r&&Kv(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:rd(n,5);break;case 4:rd(n,10);break;case 3:rd(n,6);break;default:rd(n,2)}}function Go(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function rd(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=li(n.pb,n);t||(t=new td("//www.google.com/images/cleardot.gif"),jt.location&&"http"==jt.location.protocol||Qm(t,"https"),Xm(t)),function vI(n,e){const t=new zm;if(jt.Image){const r=new Image;r.onload=bp(ny,t,r,"TestLoadImage: loaded",!0,e),r.onerror=bp(ny,t,r,"TestLoadImage: error",!1,e),r.onabort=bp(ny,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=bp(ny,t,r,"TestLoadImage: timeout",!1,e),jt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ai(2);n.H=0,n.h&&n.h.za(e),ly(n),Wv(n)}function ly(n){if(n.H=0,n.ma=[],n.h){const e=ty(n.i);(0!=e.length||0!=n.j.length)&&(FE(n.ma,e),FE(n.ma,n.j),n.i.i.length=0,wv(n.j),n.j.length=0),n.h.ya()}}function jh(n,e,t){var r=t instanceof td?Eu(t):new td(t);if(""!=r.g)e&&(r.g=e+"."+r.g),Vp(r,r.m);else{var i=jt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var u=new td(null);r&&Qm(u,r),e&&(u.g=e),i&&Vp(u,i),t&&(u.l=t),r=u}return e=n.Da,(t=n.F)&&e&&Ln(r,t,e),Ln(r,"VER",n.ra),Gp(n,r),r}function AI(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ar(t&&n.Ha&&!n.va?new $p({ob:!0}):n.va)).Oa(n.J),e}function xI(){}function dy(){if(Ah&&!(10<=Number(BE)))throw Error("Environmental error: no available transport.")}function xi(n,e){Yr.call(this),this.g=new qv(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!Tp(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Tp(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new $h(this)}function zp(n){Nv.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function MI(){Pv.call(this),this.status=1}function $h(n){this.g=n}function ao(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function qp(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var u=n.g[3],c=(e=n.g[0])+(u^(t=n.g[1])&((i=n.g[2])^u))+r[0]+3614090360&4294967295;c=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=t+(c<<7&4294967295|c>>>25))+((c=u+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^u&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(u^e))+r[3]+3250441966&4294967295)<<22&4294967295|c>>>10))+((c=e+(u^t&(i^u))+r[4]+4118548399&4294967295)<<7&4294967295|c>>>25))+((c=u+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^u&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(u^e))+r[7]+4249261313&4294967295)<<22&4294967295|c>>>10))+((c=e+(u^t&(i^u))+r[8]+1770035416&4294967295)<<7&4294967295|c>>>25))+((c=u+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^u&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(u^e))+r[11]+2304563134&4294967295)<<22&4294967295|c>>>10))+((c=e+(u^t&(i^u))+r[12]+1804603682&4294967295)<<7&4294967295|c>>>25))+((c=u+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^u&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(u^e))+r[15]+1236535329&4294967295)<<22&4294967295|c>>>10))+((c=e+(i^u&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|c>>>27))+((c=u+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(u^e))+r[11]+643717713&4294967295)<<14&4294967295|c>>>18))+((c=t+(u^e&(i^u))+r[0]+3921069994&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^u&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|c>>>27))+((c=u+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(u^e))+r[15]+3634488961&4294967295)<<14&4294967295|c>>>18))+((c=t+(u^e&(i^u))+r[4]+3889429448&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^u&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|c>>>27))+((c=u+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(u^e))+r[3]+4107603335&4294967295)<<14&4294967295|c>>>18))+((c=t+(u^e&(i^u))+r[8]+1163531501&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^u&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|c>>>27))+((c=u+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(u^e))+r[7]+1735328473&4294967295)<<14&4294967295|c>>>18))+((c=t+(u^e&(i^u))+r[12]+2368359562&4294967295)<<20&4294967295|c>>>12))+((c=e+(t^i^u)+r[5]+4294588738&4294967295)<<4&4294967295|c>>>28))+((c=u+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|c>>>21))+((c=i+(u^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^u^e)+r[14]+4259657740&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^u)+r[1]+2763975236&4294967295)<<4&4294967295|c>>>28))+((c=u+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|c>>>21))+((c=i+(u^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^u^e)+r[10]+3200236656&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^u)+r[13]+681279174&4294967295)<<4&4294967295|c>>>28))+((c=u+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|c>>>21))+((c=i+(u^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^u^e)+r[6]+76029189&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^u)+r[9]+3654602809&4294967295)<<4&4294967295|c>>>28))+((c=u+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|c>>>21))+((c=i+(u^e^t)+r[15]+530742520&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^u^e)+r[2]+3299628645&4294967295)<<23&4294967295|c>>>9))+((c=e+(i^(t|~u))+r[0]+4096336452&4294967295)<<6&4294967295|c>>>26))+((c=u+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(u|~t))+r[14]+2878612391&4294967295)<<15&4294967295|c>>>17))+((c=t+(u^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|c>>>11))+((c=e+(i^(t|~u))+r[12]+1700485571&4294967295)<<6&4294967295|c>>>26))+((c=u+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(u|~t))+r[10]+4293915773&4294967295)<<15&4294967295|c>>>17))+((c=t+(u^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|c>>>11))+((c=e+(i^(t|~u))+r[8]+1873313359&4294967295)<<6&4294967295|c>>>26))+((c=u+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(u|~t))+r[6]+2734768916&4294967295)<<15&4294967295|c>>>17))+((c=t+(u^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|c>>>11))+((u=(e=t+((c=e+(i^(t|~u))+r[4]+4149444226&4294967295)<<6&4294967295|c>>>26))+((c=u+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|c>>>22))^((i=u+((c=i+(e^(u|~t))+r[2]+718787259&4294967295)<<15&4294967295|c>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(c<<21&4294967295|c>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+u&4294967295}function yn(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var u=0|n[i];r&&u==e||(t[i]=u,r=!1)}this.g=t}(Qe=ar.prototype).Oa=function(n){this.M=n},Qe.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Xl.g(),this.C=function Yb(n){return n.h||(n.h=n.i())}(this.u?this.u:Xl),this.g.onreadystatechange=li(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(u){return void wI(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),i=jt.FormData&&n instanceof jt.FormData,!(0<=kE(oT,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,c]of t)this.g.setRequestHeader(u,c);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{DI(this),0<this.B&&((this.L=function aT(n){return Ah&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=li(this.ua,this)):this.A=Ql(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){wI(this,u)}},Qe.ua=function(){typeof Th<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Qr(this,"timeout"),this.abort(8))},Qe.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Qr(this,"complete"),Qr(this,"abort"),sy(this))},Qe.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),sy(this,!0)),ar.$.N.call(this)},Qe.La=function(){this.s||(this.G||this.v||this.l?II(this):this.kb())},Qe.kb=function(){II(this)},Qe.isActive=function(){return!!this.g},Qe.da=function(){try{return 2<Ca(this)?this.g.status:-1}catch{return-1}},Qe.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},Qe.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),rT(e)}},Qe.Ia=function(){return this.m},Qe.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Qe=qv.prototype).ra=8,Qe.H=1,Qe.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new Fh(this,this.l,n);let u=this.s;if(this.U&&(u?(u=Kl(u),Lm(u,this.U)):u=this.U),null!==this.o||this.O||(i.I=u,u=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=TI(this,i,e),Ln(t=Eu(this.I),"RID",n),Ln(t,"CVER",22),this.F&&Ln(t,"X-HTTP-Session-Id",this.F),Gp(this,t),u&&(this.O?e="headers="+encodeURIComponent(String(bI(u)))+"&"+e:this.o&&nd(t,this.o,u)),$v(this.i,i),this.bb&&Ln(t,"TYPE","init"),this.P?(Ln(t,"$req",e),Ln(t,"SID","null"),i.aa=!0,kv(i,t,null)):kv(i,t,e),this.H=2}}else 3==this.H&&(n?lT(this,n):0==this.j.length||ey(this.i)||lT(this))},Qe.Ma=function(){if(this.u=null,Bh(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=kp(li(this.jb,this),n)}},Qe.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ai(10),Hp(this),Bh(this))},Qe.ib=function(){null!=this.v&&(this.v=null,Hp(this),Kv(this),Ai(19))},Qe.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Ai(2)):(this.l.info("Failed to ping google.com"),Ai(1))},Qe.isActive=function(){return!!this.h&&this.h.isActive(this)},(Qe=xI.prototype).Ba=function(){},Qe.Aa=function(){},Qe.za=function(){},Qe.ya=function(){},Qe.isActive=function(){return!0},Qe.Va=function(){},dy.prototype.g=function(n,e){return new xi(n,e)},Or(xi,Yr),xi.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Ai(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=jh(n,null,n.Y),ay(n)},xi.prototype.close=function(){oy(this.g)},xi.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=$m(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&ay(e)},xi.prototype.N=function(){this.g.h=null,delete this.j,oy(this.g),delete this.g,xi.$.N.call(this)},Or(zp,Nv),Or(MI,Pv),Or($h,xI),$h.prototype.Ba=function(){Qr(this.g,"a")},$h.prototype.Aa=function(n){Qr(this.g,new zp(n))},$h.prototype.za=function(n){Qr(this.g,new MI)},$h.prototype.ya=function(){Qr(this.g,"b")},Or(ao,function RI(){this.blockSize=-1}),ao.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},ao.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,u=0;u<e;){if(0==i)for(;u<=t;)qp(this,n,u),u+=this.blockSize;if("string"==typeof n){for(;u<e;)if(r[i++]=n.charCodeAt(u++),i==this.blockSize){qp(this,r),i=0;break}}else for(;u<e;)if(r[i++]=n[u++],i==this.blockSize){qp(this,r),i=0;break}}this.h=i,this.i+=e},ao.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var Yv={};function Wp(n){return-128<=n&&128>n?function Lb(n,e){var t=Yv;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new yn([0|e],0>e?-1:0)}):new yn([0|n],0>n?-1:0)}function zo(n){if(isNaN(n)||!isFinite(n))return Hh;if(0>n)return kr(zo(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=Kp;return new yn(e,0)}var Kp=4294967296,Hh=Wp(0),Qv=Wp(1),NI=Wp(16777216);function Iu(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function xs(n){return-1==n.h}function kr(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new yn(t,~n.h).add(Qv)}function Zp(n,e){return n.add(kr(e))}function Yp(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Gh(n,e){this.g=n,this.h=e}function Qp(n,e){if(Iu(e))throw Error("division by zero");if(Iu(n))return new Gh(Hh,Hh);if(xs(n))return e=Qp(kr(n),e),new Gh(kr(e.g),kr(e.h));if(xs(e))return e=Qp(n,kr(e)),new Gh(kr(e.g),e.h);if(30<n.g.length){if(xs(n)||xs(e))throw Error("slowDivide_ only works with positive integers.");for(var t=Qv,r=e;0>=r.X(n);)t=PI(t),r=PI(r);var i=id(t,1),u=id(r,1);for(r=id(r,2),t=id(t,2);!Iu(r);){var c=u.add(r);0>=c.X(n)&&(i=i.add(t),u=c),r=id(r,1),t=id(t,1)}return e=Zp(n,i.R(e)),new Gh(i,e)}for(i=Hh;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),c=(u=zo(t)).R(e);xs(c)||0<c.X(n);)c=(u=zo(t-=r)).R(e);Iu(u)&&(u=Qv),i=i.add(u),n=Zp(n,c)}return new Gh(i,n)}function PI(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new yn(t,n.h)}function id(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],u=0;u<r;u++)i[u]=0<e?n.D(u+t)>>>e|n.D(u+t+1)<<32-e:n.D(u+t);return new yn(i,n.h)}(Qe=yn.prototype).ea=function(){if(xs(this))return-kr(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:Kp+r)*e,e*=Kp}return n},Qe.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Iu(this))return"0";if(xs(this))return"-"+kr(this).toString(n);for(var e=zo(Math.pow(n,6)),t=this,r="";;){var i=Qp(t,e).g,u=((0<(t=Zp(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Iu(t=i))return u+r;for(;6>u.length;)u="0"+u;r=u+r}},Qe.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},Qe.X=function(n){return xs(n=Zp(this,n))?-1:Iu(n)?0:1},Qe.abs=function(){return xs(this)?kr(this):this},Qe.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var u=r+(65535&this.D(i))+(65535&n.D(i)),c=(u>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=c>>>16,t[i]=(c&=65535)<<16|(u&=65535)}return new yn(t,-2147483648&t[t.length-1]?-1:0)},Qe.R=function(n){if(Iu(this)||Iu(n))return Hh;if(xs(this))return xs(n)?kr(this).R(kr(n)):kr(kr(this).R(n));if(xs(n))return kr(this.R(kr(n)));if(0>this.X(NI)&&0>n.X(NI))return zo(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var u=this.D(r)>>>16,c=65535&this.D(r),m=n.D(i)>>>16,w=65535&n.D(i);t[2*r+2*i]+=c*w,Yp(t,2*r+2*i),t[2*r+2*i+1]+=u*w,Yp(t,2*r+2*i+1),t[2*r+2*i+1]+=c*m,Yp(t,2*r+2*i+1),t[2*r+2*i+2]+=u*m,Yp(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new yn(t,0)},Qe.gb=function(n){return Qp(this,n).h},Qe.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new yn(t,this.h&n.h)},Qe.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new yn(t,this.h|n.h)},Qe.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new yn(t,this.h^n.h)},dy.prototype.createWebChannel=dy.prototype.g,xi.prototype.send=xi.prototype.u,xi.prototype.open=xi.prototype.m,xi.prototype.close=xi.prototype.close,qm.NO_ERROR=0,qm.TIMEOUT=8,qm.HTTP_ERROR=6,tI.COMPLETE="complete",nI.EventType=kh,kh.OPEN="a",kh.CLOSE="b",kh.ERROR="c",kh.MESSAGE="d",Yr.prototype.listen=Yr.prototype.O,ar.prototype.listenOnce=ar.prototype.P,ar.prototype.getLastError=ar.prototype.Sa,ar.prototype.getLastErrorCode=ar.prototype.Ia,ar.prototype.getStatus=ar.prototype.da,ar.prototype.getResponseJson=ar.prototype.Wa,ar.prototype.getResponseText=ar.prototype.ja,ar.prototype.send=ar.prototype.ha,ar.prototype.setWithCredentials=ar.prototype.Oa,ao.prototype.digest=ao.prototype.l,ao.prototype.reset=ao.prototype.reset,ao.prototype.update=ao.prototype.j,yn.prototype.add=yn.prototype.add,yn.prototype.multiply=yn.prototype.R,yn.prototype.modulo=yn.prototype.gb,yn.prototype.compare=yn.prototype.X,yn.prototype.toNumber=yn.prototype.ea,yn.prototype.toString=yn.prototype.toString,yn.prototype.getBits=yn.prototype.D,yn.fromNumber=zo,yn.fromString=function hy(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return kr(hy(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=zo(Math.pow(e,8)),r=Hh,i=0;i<n.length;i+=8){var u=Math.min(8,n.length-i),c=parseInt(n.substring(i,i+u),e);8>u?(u=zo(Math.pow(e,u)),r=r.R(u).add(zo(c))):r=(r=r.R(t)).add(zo(c))}return r};var OI=oo.createWebChannelTransport=function(){return new dy},dT=oo.getStatEventTarget=function(){return Np()},fy=oo.ErrorCode=qm,hT=oo.EventType=tI,zi=oo.Event=Ph,sd=oo.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},fT=oo.FetchXmlHttpFactory=$p,py=oo.WebChannel=nI,nM=oo.XhrIo=ar,rM=oo.Md5=ao,od=oo.Integer=yn;const gy="@firebase/firestore";class ur{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ur.UNAUTHENTICATED=new ur(null),ur.GOOGLE_CREDENTIALS=new ur("google-credentials-uid"),ur.FIRST_PARTY=new ur("first-party-uid"),ur.MOCK_USER=new ur("mock-user");let zh="9.23.0";const ba=new vu.Yd("@firebase/firestore");function Xv(){return ba.logLevel}function Ue(n,...e){if(ba.logLevel<=vu.in.DEBUG){const t=e.map(Xp);ba.debug(`Firestore (${zh}): ${n}`,...t)}}function Er(n,...e){if(ba.logLevel<=vu.in.ERROR){const t=e.map(Xp);ba.error(`Firestore (${zh}): ${n}`,...t)}}function uo(n,...e){if(ba.logLevel<=vu.in.WARN){const t=e.map(Xp);ba.warn(`Firestore (${zh}): ${n}`,...t)}}function Xp(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function it(n="Unexpected state"){const e=`FIRESTORE (${zh}) INTERNAL ASSERTION FAILED: `+n;throw Er(e),new Error(e)}function vt(n,e){n||it()}function Ye(n,e){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends Gt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Fr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Jv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qh{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ur.UNAUTHENTICATED))}shutdown(){}}class pT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class FI{constructor(e){this.t=e,this.currentUser=ur.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const u=D=>this.i!==i?(i=this.i,t(D)):Promise.resolve();let c=new Fr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Fr,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const D=c;e.enqueueRetryable((0,me.Z)(function*(){yield D.promise,yield u(r.currentUser)}))},w=D=>{Ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=D,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(D=>w(D)),setTimeout(()=>{if(!this.auth){const D=this.t.getImmediate({optional:!0});D?w(D):(Ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Fr)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(vt("string"==typeof r.accessToken),new Jv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return vt(null===e||"string"==typeof e),new ur(e)}}class e0{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=ur.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class iM{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new e0(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ur.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class LI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class sM{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=u=>{null!=u.error&&Ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.T;return this.T=u.token,Ue("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const i=u=>{Ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.I.onInit(u=>i(u)),setTimeout(()=>{if(!this.appCheck){const u=this.I.getImmediate({optional:!0});u?i(u):Ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(vt("string"==typeof t.token),this.T=t.token,new LI(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function gT(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class VI{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=gT(40);for(let u=0;u<i.length;++u)r.length<20&&i[u]<t&&(r+=e.charAt(i[u]%e.length))}return r}}function Vt(n,e){return n<e?-1:n>e?1:0}function ad(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function UI(n){return n+"\0"}class Vn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ae(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ae(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ae(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ae(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Vn.fromMillis(Date.now())}static fromDate(e){return Vn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Vn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Vt(this.nanoseconds,e.nanoseconds):Vt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Et{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Et(e)}static min(){return new Et(new Vn(0,0))}static max(){return new Et(new Vn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Jp{constructor(e,t,r){void 0===t?t=0:t>e.length&&it(),void 0===r?r=e.length-t:r>e.length-t&&it(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Jp.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Jp?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const u=e.get(i),c=t.get(i);if(u<c)return-1;if(u>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class sn extends Jp{construct(e,t,r){return new sn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ae(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new sn(t)}static emptyPath(){return new sn([])}}const BI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class cr extends Jp{construct(e,t,r){return new cr(e,t,r)}static isValidIdentifier(e){return BI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),cr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new cr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const u=()=>{if(0===r.length)throw new Ae(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const m=e[i];if("\\"===m){if(i+1===e.length)throw new Ae(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[i+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new Ae(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,i+=2}else"`"===m?(c=!c,i++):"."!==m||c?(r+=m,i++):(u(),i++)}if(u(),c)throw new Ae(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new cr(t)}static emptyPath(){return new cr([])}}class Ze{constructor(e){this.path=e}static fromPath(e){return new Ze(sn.fromString(e))}static fromName(e){return new Ze(sn.fromString(e).popFirst(5))}static empty(){return new Ze(sn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===sn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return sn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ze(new sn(e.slice()))}}class eg{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function yy(n){return n.fields.find(e=>2===e.kind)}function Vc(n){return n.fields.filter(e=>2!==e.kind)}eg.UNKNOWN_ID=-1;class _y{constructor(e,t){this.fieldPath=e,this.kind=t}}class Wh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Wh(0,co.min())}}function yT(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Et.fromTimestamp(1e9===r?new Vn(t+1,0):new Vn(t,r));return new co(i,Ze.empty(),e)}function _T(n){return new co(n.readTime,n.key,-1)}class co{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new co(Et.min(),Ze.empty(),-1)}static max(){return new co(Et.max(),Ze.empty(),-1)}}function jI(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ze.comparator(n.documentKey,e.documentKey),0!==t?t:Vt(n.largestBatchId,e.largestBatchId))}const vT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ud(n){return $I.apply(this,arguments)}function $I(){return $I=(0,me.Z)(function*(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==vT)throw n;Ue("LocalStore","Unexpectedly lost primary lease")}),$I.apply(this,arguments)}class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&it(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ee((r,i)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,i)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ee?t:ee.resolve(t)}catch(t){return ee.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ee.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ee.reject(t)}static resolve(e){return new ee((t,r)=>{t(e)})}static reject(e){return new ee((t,r)=>{r(e)})}static waitFor(e){return new ee((t,r)=>{let i=0,u=0,c=!1;e.forEach(m=>{++i,m.next(()=>{++u,c&&u===i&&t()},w=>r(w))}),c=!0,u===i&&t()})}static or(e){let t=ee.resolve(!1);for(const r of e)t=t.next(i=>i?ee.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,u)=>{r.push(t.call(this,i,u))}),this.waitFor(r)}static mapArray(e,t){return new ee((r,i)=>{const u=e.length,c=new Array(u);let m=0;for(let w=0;w<u;w++){const D=w;t(e[D]).next(T=>{c[D]=T,++m,m===u&&r(c)},T=>i(T))}})}static doWhile(e,t){return new ee((r,i)=>{const u=()=>{!0===e()?t().next(()=>{u()},i):r()};u()})}}class t0{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Fr,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Kh(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=r0(r.target.error);this.v.reject(new Kh(e,i))}}static open(e,t,r,i){try{return new t0(t,e.transaction(i,r))}catch(u){throw new Kh(t,u)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Ue("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new uM(t)}}class lo{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===lo.S((0,Gt.z$)())&&Er("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ue("SimpleDb","Removing database:",e),Cu(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Gt.hl)())return!1;if(lo.C())return!0;const e=(0,Gt.z$)(),t=lo.S(e),r=0<t&&t<10,i=lo.N(e),u=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,me.Z)(function*(){return t.db||(Ue("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=c=>{r(c.target.result)},u.onblocked=()=>{i(new Kh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=c=>{const m=c.target.error;i("VersionError"===m.name?new Ae(ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Ae(ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new Kh(e,m))},u.onupgradeneeded=c=>{Ue("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.V.O(c.target.result,u.transaction,c.oldVersion,t.version).next(()=>{Ue("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var u=this;return(0,me.Z)(function*(){const c="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.$(e);const w=t0.open(u.db,e,c?"readonly":"readwrite",r),D=i(w).next(T=>(w.P(),T)).catch(T=>(w.abort(T),ee.reject(T))).toPromise();return D.catch(()=>{}),yield w.R,D}catch(w){const D=w,T="FirebaseError"!==D.name&&m<3;if(Ue("SimpleDb","Transaction failed with error:",D.message,"Retrying:",T),u.close(),!T)return Promise.reject(D)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class vy{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Cu(this.L.delete())}}class Kh extends Ae{constructor(e,t){super(ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Du(n){return"IndexedDbTransactionError"===n.name}class uM{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ue("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ue("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Cu(r)}add(e){return Ue("SimpleDb","ADD",this.store.name,e,e),Cu(this.store.add(e))}get(e){return Cu(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ue("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ue("SimpleDb","DELETE",this.store.name,e),Cu(this.store.delete(e))}count(){return Ue("SimpleDb","COUNT",this.store.name),Cu(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),u=[];return this.W(i,(c,m)=>{u.push(m)}).next(()=>u)}{const i=this.store.getAll(r.range);return new ee((u,c)=>{i.onerror=m=>{c(m.target.error)},i.onsuccess=m=>{u(m.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ee((i,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}J(e,t){Ue("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(u,c,m)=>m.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Z(e){const t=this.cursor({});return new ee((r,i)=>{t.onerror=u=>{const c=r0(u.target.error);i(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(m=>{m?c.continue():r()}):r()}})}W(e,t){const r=[];return new ee((i,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const m=c.target.result;if(!m)return void i();const w=new vy(m),D=t(m.primaryKey,m.value,w);if(D instanceof ee){const T=D.catch(N=>(w.done(),ee.reject(N)));r.push(T)}w.isDone?i():null===w.K?m.continue():m.continue(w.K)}}).next(()=>ee.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Cu(n){return new ee((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=r0(r.target.error);t(i)}})}let n0=!1;function r0(n){const e=lo.S((0,Gt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ae("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return n0||(n0=!0,setTimeout(()=>{throw r},0)),r}}return n}class cM{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Ue("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,me.Z)(function*(){t.task=null;try{Ue("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){Du(r)?Ue("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield ud(r)}yield t.et(6e4)}))}}class lM{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,me.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,u=!0;return ee.doWhile(()=>!0===u&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return Ue("IndexBackiller",`Processing collection: ${c}`),this.it(e,c,i).next(m=>{i-=m,r.add(c)});u=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(u=>{const c=u.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.rt(i,u)).next(m=>(Ue("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>c.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,u)=>{const c=_T(u);jI(c,r)>0&&(r=c)}),new co(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Ms=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function tg(n){return null==n}function Uc(n){return 0===n&&1/n==-1/0}function HI(n){return"number"==typeof n&&Number.isInteger(n)&&!Uc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function qi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=ET(e)),e=dM(n.get(t),e);return ET(e)}function dM(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const u=n.charAt(i);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function ET(n){return n+"\x01\x01"}function Ta(n){const e=n.length;if(vt(e>=2),2===e)return vt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),sn.emptyPath();const t=e-2,r=[];let i="";for(let u=0;u<e;){const c=n.indexOf("\x01",u);switch((c<0||c>t)&&it(),n.charAt(c+1)){case"\x01":const m=n.substring(u,c);let w;0===i.length?w=m:(i+=m,w=i,i=""),r.push(w);break;case"\x10":i+=n.substring(u,c),i+="\0";break;case"\x11":i+=n.substring(u,c+1);break;default:it()}u=c+2}return new sn(r)}const GI=["userId","batchId"];function wy(n,e){return[n,qi(e)]}function IT(n,e,t){return[n,qi(e),t]}const DT={},zI=["prefixPath","collectionGroup","readTime","documentId"],qI=["prefixPath","collectionGroup","documentId"],hM=["collectionGroup","readTime","prefixPath","documentId"],qo=["canonicalId","targetId"],CT=["targetId","path"],s0=["path","targetId"],bT=["collectionId","parent"],fM=["indexId","uid"],ho=["uid","sequenceNumber"],TT=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],o0=["indexId","uid","orderedDocumentKey"],ST=["userId","collectionPath","documentId"],AT=["userId","collectionPath","largestBatchId"],a0=["userId","collectionGroup","largestBatchId"],u0=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],WI=[...u0,"documentOverlays"],KI=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],c0=KI,ZI=[...c0,"indexConfiguration","indexState","indexEntries"];class l0 extends wT{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Lr(n,e){const t=Ye(n);return lo.M(t.ht,e)}function YI(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Sa(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Aa(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class un{constructor(e,t){this.comparator=e,this.root=t||Vr.EMPTY}insert(e,t){return new un(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Vr.BLACK,null,null))}remove(e){return new un(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ng(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ng(this.root,e,this.comparator,!1)}getReverseIterator(){return new ng(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ng(this.root,e,this.comparator,!0)}}class ng{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&i&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Vr{constructor(e,t,r,i,u){this.key=e,this.value=t,this.color=r??Vr.RED,this.left=i??Vr.EMPTY,this.right=u??Vr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,u){return new Vr(e??this.key,t??this.value,r??this.color,i??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const u=r(e,i.key);return i=u<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===u?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Vr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Vr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Vr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Vr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw it();const e=this.left.check();if(e!==this.right.check())throw it();return e+(this.isRed()?0:1)}}Vr.EMPTY=null,Vr.RED=!0,Vr.BLACK=!1,Vr.EMPTY=new class{constructor(){this.size=0}get key(){throw it()}get value(){throw it()}get color(){throw it()}get left(){throw it()}get right(){throw it()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Vr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class xn{constructor(e){this.comparator=e,this.data=new un(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new QI(this.data.getIterator())}getIteratorFrom(e){return new QI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof xn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(i,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new xn(this.comparator);return t.data=e,t}}class QI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function rg(n){return n.hasNext()?n.getNext():void 0}class os{constructor(e){this.fields=e,e.sort(cr.comparator)}static empty(){return new os([])}unionWith(e){let t=new xn(cr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new os(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ad(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class XI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ur{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new XI("Invalid base64 string: "+i):i}}(e);return new Ur(t)}static fromUint8Array(e){const t=function(r){let i="";for(let u=0;u<r.length;++u)i+=String.fromCharCode(r[u]);return i}(e);return new Ur(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Vt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ur.EMPTY_BYTE_STRING=new Ur("");const JI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function cd(n){if(vt(!!n),"string"==typeof n){let e=0;const t=JI.exec(n);if(vt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Xn(n.seconds),nanos:Xn(n.nanos)}}function Xn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function bu(n){return"string"==typeof n?Ur.fromBase64String(n):Ur.fromUint8Array(n)}function ig(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function d0(n){const e=n.mapValue.fields.__previous_value__;return ig(e)?d0(e):e}function ld(n){const e=cd(n.mapValue.fields.__local_write_time__.timestampValue);return new Vn(e.seconds,e.nanos)}class eD{constructor(e,t,r,i,u,c,m,w,D){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=m,this.longPollingOptions=w,this.useFetchStreams=D}}class Tu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Tu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Tu&&e.projectId===this.projectId&&e.database===this.database}}const Su={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},sg={nullValue:"NULL_VALUE"};function Au(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ig(n)?4:MT(n)?9007199254740991:10:it()}function Rs(n,e){if(n===e)return!0;const t=Au(n);if(t!==Au(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ld(n).isEqual(ld(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const u=cd(r.timestampValue),c=cd(i.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,bu(n.bytesValue).isEqual(bu(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Xn(r.geoPointValue.latitude)===Xn(i.geoPointValue.latitude)&&Xn(r.geoPointValue.longitude)===Xn(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Xn(r.integerValue)===Xn(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const u=Xn(r.doubleValue),c=Xn(i.doubleValue);return u===c?Uc(u)===Uc(c):isNaN(u)&&isNaN(c)}return!1}(n,e);case 9:return ad(n.arrayValue.values||[],e.arrayValue.values||[],Rs);case 10:return function(r,i){const u=r.mapValue.fields||{},c=i.mapValue.fields||{};if(YI(u)!==YI(c))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===c[m]||!Rs(u[m],c[m])))return!1;return!0}(n,e);default:return it()}var i}function Bc(n,e){return void 0!==(n.values||[]).find(t=>Rs(t,e))}function xu(n,e){if(n===e)return 0;const t=Au(n),r=Au(e);if(t!==r)return Vt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Vt(n.booleanValue,e.booleanValue);case 2:return function(i,u){const c=Xn(i.integerValue||i.doubleValue),m=Xn(u.integerValue||u.doubleValue);return c<m?-1:c>m?1:c===m?0:isNaN(c)?isNaN(m)?0:-1:1}(n,e);case 3:return tD(n.timestampValue,e.timestampValue);case 4:return tD(ld(n),ld(e));case 5:return Vt(n.stringValue,e.stringValue);case 6:return function(i,u){const c=bu(i),m=bu(u);return c.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(i,u){const c=i.split("/"),m=u.split("/");for(let w=0;w<c.length&&w<m.length;w++){const D=Vt(c[w],m[w]);if(0!==D)return D}return Vt(c.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,u){const c=Vt(Xn(i.latitude),Xn(u.latitude));return 0!==c?c:Vt(Xn(i.longitude),Xn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,u){const c=i.values||[],m=u.values||[];for(let w=0;w<c.length&&w<m.length;++w){const D=xu(c[w],m[w]);if(D)return D}return Vt(c.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,u){if(i===Su.mapValue&&u===Su.mapValue)return 0;if(i===Su.mapValue)return 1;if(u===Su.mapValue)return-1;const c=i.fields||{},m=Object.keys(c),w=u.fields||{},D=Object.keys(w);m.sort(),D.sort();for(let T=0;T<m.length&&T<D.length;++T){const N=Vt(m[T],D[T]);if(0!==N)return N;const V=xu(c[m[T]],w[D[T]]);if(0!==V)return V}return Vt(m.length,D.length)}(n.mapValue,e.mapValue);default:throw it()}}function tD(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Vt(n,e);const t=cd(n),r=cd(e),i=Vt(t.seconds,r.seconds);return 0!==i?i:Vt(t.nanos,r.nanos)}function Zh(n){return nD(n)}function nD(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=cd(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?bu(n.bytesValue).toBase64():"referenceValue"in n?Ze.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",u=!0;for(const c of r.values||[])u?u=!1:i+=",",i+=nD(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let u="{",c=!0;for(const m of i)c?c=!1:u+=",",u+=`${m}:${nD(r.fields[m])}`;return u+"}"}(n.mapValue):it();var e}function Yh(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Ey(n){return!!n&&"integerValue"in n}function og(n){return!!n&&"arrayValue"in n}function rD(n){return!!n&&"nullValue"in n}function iD(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function f0(n){return!!n&&"mapValue"in n}function Iy(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Sa(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Iy(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Iy(n.arrayValue.values[t]);return e}return Object.assign({},n)}function MT(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function pM(n){return"nullValue"in n?sg:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Yh(Tu.empty(),Ze.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:it()}function gM(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Yh(Tu.empty(),Ze.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Su:it()}function sD(n,e){const t=xu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function ag(n,e){const t=xu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class di{constructor(e){this.value=e}static empty(){return new di({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!f0(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Iy(t)}setAll(e){let t=cr.emptyPath(),r={},i=[];e.forEach((c,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,i),r={},i=[],t=m.popLast()}c?r[m.lastSegment()]=Iy(c):i.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,i)}delete(e){const t=this.field(e.popLast());f0(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Rs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];f0(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Sa(t,(i,u)=>e[i]=u);for(const i of r)delete e[i]}clone(){return new di(Iy(this.value))}}function oD(n){const e=[];return Sa(n.fields,(t,r)=>{const i=new cr([t]);if(f0(r)){const u=oD(r.mapValue).fields;if(0===u.length)e.push(i);else for(const c of u)e.push(i.child(c))}else e.push(i)}),new os(e)}class Mn{constructor(e,t,r,i,u,c,m){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=u,this.data=c,this.documentState=m}static newInvalidDocument(e){return new Mn(e,0,Et.min(),Et.min(),Et.min(),di.empty(),0)}static newFoundDocument(e,t,r,i){return new Mn(e,1,t,Et.min(),r,i,0)}static newNoDocument(e,t){return new Mn(e,2,t,Et.min(),Et.min(),di.empty(),0)}static newUnknownDocument(e,t){return new Mn(e,3,t,Et.min(),Et.min(),di.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Et.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=di.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=di.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Et.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Mn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Mn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class as{constructor(e,t){this.position=e,this.inclusive=t}}function p0(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const u=e[i],c=n.position[i];if(r=u.field.isKeyField()?Ze.comparator(Ze.fromName(c.referenceValue),t.key):xu(c,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function Dy(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Rs(n.position[t],e.position[t]))return!1;return!0}class jc{constructor(e,t="asc"){this.field=e,this.dir=t}}function RT(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Cy{}class Jt extends Cy{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new PT(e,t,r):"array-contains"===t?new OT(e,r):"in"===t?new pD(e,r):"not-in"===t?new gD(e,r):"array-contains-any"===t?new m0(e,r):new Jt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new hD(e,r):new fD(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(xu(t,this.value)):null!==t&&Au(this.value)===Au(t)&&this.matchesComparison(xu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return it()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class ln extends Cy{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new ln(e,t)}matches(e){return ug(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function ug(n){return"and"===n.op}function aD(n){return"or"===n.op}function uD(n){return NT(n)&&ug(n)}function NT(n){for(const e of n.filters)if(e instanceof ln)return!1;return!0}function by(n){if(n instanceof Jt)return n.field.canonicalString()+n.op.toString()+Zh(n.value);if(uD(n))return n.filters.map(e=>by(e)).join(",");{const e=n.filters.map(t=>by(t)).join(",");return`${n.op}(${e})`}}function cD(n,e){return n instanceof Jt?(t=n,(r=e)instanceof Jt&&t.op===r.op&&t.field.isEqual(r.field)&&Rs(t.value,r.value)):n instanceof ln?function(t,r){return r instanceof ln&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,u,c)=>i&&cD(u,r.filters[c]),!0)}(n,e):void it();var t,r}function lD(n,e){const t=n.filters.concat(e);return ln.create(t,n.op)}function dD(n){return n instanceof Jt?`${(e=n).field.canonicalString()} ${e.op} ${Zh(e.value)}`:n instanceof ln?function(e){return e.op.toString()+" {"+e.getFilters().map(dD).join(" ,")+"}"}(n):"Filter";var e}class PT extends Jt{constructor(e,t,r){super(e,t,r),this.key=Ze.fromName(r.referenceValue)}matches(e){const t=Ze.comparator(e.key,this.key);return this.matchesComparison(t)}}class hD extends Jt{constructor(e,t){super(e,"in",t),this.keys=g0(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class fD extends Jt{constructor(e,t){super(e,"not-in",t),this.keys=g0(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function g0(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ze.fromName(r.referenceValue))}class OT extends Jt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return og(t)&&Bc(t.arrayValue,this.value)}}class pD extends Jt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Bc(this.value.arrayValue,t)}}class gD extends Jt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Bc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Bc(this.value.arrayValue,t)}}class m0 extends Jt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!og(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Bc(this.value.arrayValue,r))}}class mM{constructor(e,t=null,r=[],i=[],u=null,c=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=u,this.startAt=c,this.endAt=m,this.dt=null}}function Ty(n,e=null,t=[],r=[],i=null,u=null,c=null){return new mM(n,e,t,r,i,u,c)}function Mu(n){const e=Ye(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>by(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),tg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Zh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Zh(r)).join(",")),e.dt=t}return e.dt}function cg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!RT(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!cD(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Dy(n.startAt,e.startAt)&&Dy(n.endAt,e.endAt)}function Sy(n){return Ze.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function y0(n,e){return n.filters.filter(t=>t instanceof Jt&&t.field.isEqual(e))}function kT(n,e,t){let r=sg,i=!0;for(const u of y0(n,e)){let c=sg,m=!0;switch(u.op){case"<":case"<=":c=pM(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,m=!1;break;case"!=":case"not-in":c=sg}sD({value:r,inclusive:i},{value:c,inclusive:m})<0&&(r=c,i=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];sD({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function mD(n,e,t){let r=Su,i=!0;for(const u of y0(n,e)){let c=Su,m=!0;switch(u.op){case">=":case">":c=gM(u.value),m=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,m=!1;break;case"!=":case"not-in":c=Su}ag({value:r,inclusive:i},{value:c,inclusive:m})>0&&(r=c,i=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];ag({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class Ru{constructor(e,t=null,r=[],i=[],u=null,c="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=u,this.limitType=c,this.startAt=m,this.endAt=w,this.wt=null,this._t=null}}function yD(n,e,t,r,i,u,c,m){return new Ru(n,e,t,r,i,u,c,m)}function lg(n){return new Ru(n)}function FT(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function _D(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function _0(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function v0(n){return null!==n.collectionGroup}function Qh(n){const e=Ye(n);if(null===e.wt){e.wt=[];const t=_0(e),r=_D(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new jc(t)),e.wt.push(new jc(cr.keyField(),"asc"));else{let i=!1;for(const u of e.explicitOrderBy)e.wt.push(u),u.field.isKeyField()&&(i=!0);if(!i){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new jc(cr.keyField(),u))}}}return e.wt}function us(n){const e=Ye(n);if(!e._t)if("F"===e.limitType)e._t=Ty(e.path,e.collectionGroup,Qh(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Qh(e))t.push(new jc(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new as(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new as(e.startAt.position,e.startAt.inclusive):null;e._t=Ty(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function vD(n,e){e.getFirstInequalityField(),_0(n);const t=n.filters.concat([e]);return new Ru(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function w0(n,e,t){return new Ru(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function dg(n,e){return cg(us(n),us(e))&&n.limitType===e.limitType}function LT(n){return`${Mu(us(n))}|lt:${n.limitType}`}function s(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>dD(r)).join(", ")}]`),tg(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Zh(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Zh(r)).join(",")),`Target(${t})`}(us(n))}; limitType=${n.limitType})`}function o(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Ze.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of Qh(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,u,c){const m=p0(i,u,c);return i.inclusive?m<=0:m<0}(t.startAt,Qh(t),r)||t.endAt&&!function(i,u,c){const m=p0(i,u,c);return i.inclusive?m>=0:m>0}(t.endAt,Qh(t),r)));var t,r}function a(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function l(n){return(e,t)=>{let r=!1;for(const i of Qh(n)){const u=d(i,e,t);if(0!==u)return u;r=r||i.field.isKeyField()}return 0}}function d(n,e,t){const r=n.field.isKeyField()?Ze.comparator(e.key,t.key):function(i,u,c){const m=u.data.field(i),w=c.data.field(i);return null!==m&&null!==w?xu(m,w):it()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return it()}}class g{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,u]of r)if(this.equalsFn(i,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<i.length;u++)if(this.equalsFn(i[u][0],e))return void(i[u]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Sa(this.inner,(t,r)=>{for(const[i,u]of r)e(i,u)})}isEmpty(){return Aa(this.inner)}size(){return this.innerSize}}const _=new un(Ze.comparator);function I(){return _}const b=new un(Ze.comparator);function x(...n){let e=b;for(const t of n)e=e.insert(t.key,t);return e}function R(n){let e=b;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function F(){return Y()}function G(){return Y()}function Y(){return new g(n=>n.toString(),(n,e)=>n.isEqual(e))}const ve=new un(Ze.comparator),Be=new xn(Ze.comparator);function Ce(...n){let e=Be;for(const t of n)e=e.add(t);return e}const ht=new xn(Vt);function At(){return ht}function Ne(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Uc(e)?"-0":e}}function Ut(n){return{integerValue:""+n}}function Un(n,e){return HI(e)?Ut(e):Ne(n,e)}class Gn{constructor(){this._=void 0}}function yM(n,e,t){return n instanceof Ay?function(r,i){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&ig(i)&&(i=d0(i)),i&&(u.fields.__previous_value__=i),{mapValue:u}}(t,e):n instanceof hg?vM(n,e):n instanceof fg?wM(n,e):function(r,i){const u=_M(r,i),c=EM(u)+EM(r.gt);return Ey(u)&&Ey(r.gt)?Ut(c):Ne(r.serializer,c)}(n,e)}function RO(n,e,t){return n instanceof hg?vM(n,e):n instanceof fg?wM(n,e):t}function _M(n,e){return n instanceof xy?Ey(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Ay extends Gn{}class hg extends Gn{constructor(e){super(),this.elements=e}}function vM(n,e){const t=IM(e);for(const r of n.elements)t.some(i=>Rs(i,r))||t.push(r);return{arrayValue:{values:t}}}class fg extends Gn{constructor(e){super(),this.elements=e}}function wM(n,e){let t=IM(e);for(const r of n.elements)t=t.filter(i=>!Rs(i,r));return{arrayValue:{values:t}}}class xy extends Gn{constructor(e,t){super(),this.serializer=e,this.gt=t}}function EM(n){return Xn(n.integerValue||n.doubleValue)}function IM(n){return og(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class E0{constructor(e,t){this.field=e,this.transform=t}}class PO{constructor(e,t){this.version=e,this.transformResults=t}}class lr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new lr}static exists(e){return new lr(void 0,e)}static updateTime(e){return new lr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wD(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class ED{}function DM(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Ry(n.key,lr.none()):new My(n.key,n.data,lr.none());{const t=n.data,r=di.empty();let i=new xn(cr.comparator);for(let u of e.fields)if(!i.has(u)){let c=t.field(u);null===c&&u.length>1&&(u=u.popLast(),c=t.field(u)),null===c?r.delete(u):r.set(u,c),i=i.add(u)}return new dd(n.key,r,new os(i.toArray()),lr.none())}}function OO(n,e,t){n instanceof My?function(r,i,u){const c=r.value.clone(),m=TM(r.fieldTransforms,i,u.transformResults);c.setAll(m),i.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(n,e,t):n instanceof dd?function(r,i,u){if(!wD(r.precondition,i))return void i.convertToUnknownDocument(u.version);const c=TM(r.fieldTransforms,i,u.transformResults),m=i.data;m.setAll(bM(r)),m.setAll(c),i.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function I0(n,e,t,r){return n instanceof My?function(i,u,c,m){if(!wD(i.precondition,u))return c;const w=i.value.clone(),D=SM(i.fieldTransforms,m,u);return w.setAll(D),u.convertToFoundDocument(u.version,w).setHasLocalMutations(),null}(n,e,t,r):n instanceof dd?function(i,u,c,m){if(!wD(i.precondition,u))return c;const w=SM(i.fieldTransforms,m,u),D=u.data;return D.setAll(bM(i)),D.setAll(w),u.convertToFoundDocument(u.version,D).setHasLocalMutations(),null===c?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(T=>T.field))}(n,e,t,r):(c=t,wD(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):c);var u,c}function kO(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),u=_M(r.transform,i||null);null!=u&&(null===t&&(t=di.empty()),t.set(r.field,u))}return t||null}function CM(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&ad(t,r,(i,u)=>function NO(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof hg&&r instanceof hg||t instanceof fg&&r instanceof fg?ad(t.elements,r.elements,Rs):t instanceof xy&&r instanceof xy?Rs(t.gt,r.gt):t instanceof Ay&&r instanceof Ay);var t,r}(i,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class My extends ED{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class dd extends ED{constructor(e,t,r,i,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function bM(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function TM(n,e,t){const r=new Map;vt(n.length===t.length);for(let i=0;i<t.length;i++){const u=n[i],c=u.transform,m=e.data.field(u.field);r.set(u.field,RO(c,m,t[i]))}return r}function SM(n,e,t){const r=new Map;for(const i of n){const u=i.transform,c=t.data.field(i.field);r.set(i.field,yM(u,c,e))}return r}class Ry extends ED{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class VT extends ED{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class UT{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const u=this.mutations[i];u.key.isEqual(e.key)&&OO(u,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=I0(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=I0(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=G();return this.mutations.forEach(i=>{const u=e.get(i.key),c=u.overlayedDocument;let m=this.applyToLocalView(c,u.mutatedFields);m=t.has(i.key)?null:m;const w=DM(c,m);null!==w&&r.set(i.key,w),c.isValidDocument()||c.convertToNoDocument(Et.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ce())}isEqual(e){return this.batchId===e.batchId&&ad(this.mutations,e.mutations,(t,r)=>CM(t,r))&&ad(this.baseMutations,e.baseMutations,(t,r)=>CM(t,r))}}class BT{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){vt(e.mutations.length===r.length);let i=ve;const u=e.mutations;for(let c=0;c<u.length;c++)i=i.insert(u[c].key,r[c].version);return new BT(e,t,r,i)}}class jT{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class LO{constructor(e,t){this.count=e,this.unchangedNames=t}}var Xr,dn;function AM(n){switch(n){default:return it();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0}}function xM(n){if(void 0===n)return Er("GRPC error has no .code"),ce.UNKNOWN;switch(n){case Xr.OK:return ce.OK;case Xr.CANCELLED:return ce.CANCELLED;case Xr.UNKNOWN:return ce.UNKNOWN;case Xr.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case Xr.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case Xr.INTERNAL:return ce.INTERNAL;case Xr.UNAVAILABLE:return ce.UNAVAILABLE;case Xr.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case Xr.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case Xr.NOT_FOUND:return ce.NOT_FOUND;case Xr.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case Xr.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case Xr.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case Xr.ABORTED:return ce.ABORTED;case Xr.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case Xr.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case Xr.DATA_LOSS:return ce.DATA_LOSS;default:return it()}}(dn=Xr||(Xr={}))[dn.OK=0]="OK",dn[dn.CANCELLED=1]="CANCELLED",dn[dn.UNKNOWN=2]="UNKNOWN",dn[dn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dn[dn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dn[dn.NOT_FOUND=5]="NOT_FOUND",dn[dn.ALREADY_EXISTS=6]="ALREADY_EXISTS",dn[dn.PERMISSION_DENIED=7]="PERMISSION_DENIED",dn[dn.UNAUTHENTICATED=16]="UNAUTHENTICATED",dn[dn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dn[dn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dn[dn.ABORTED=10]="ABORTED",dn[dn.OUT_OF_RANGE=11]="OUT_OF_RANGE",dn[dn.UNIMPLEMENTED=12]="UNIMPLEMENTED",dn[dn.INTERNAL=13]="INTERNAL",dn[dn.UNAVAILABLE=14]="UNAVAILABLE",dn[dn.DATA_LOSS=15]="DATA_LOSS";class $T{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return ID}static getOrCreateInstance(){return null===ID&&(ID=new $T),ID}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let ID=null;function MM(){return new TextEncoder}const VO=new od([4294967295,4294967295],0);function RM(n){const e=MM().encode(n),t=new rM;return t.update(e),new Uint8Array(t.digest())}function NM(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new od([t,r],0),new od([i,u],0)]}class HT{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new D0(`Invalid padding: ${t}`);if(r<0)throw new D0(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new D0(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new D0(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=od.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(od.fromNumber(r)));return 1===i.compare(VO)&&(i=new od([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=RM(e),[r,i]=NM(t);for(let u=0;u<this.hashCount;u++){const c=this.Et(r,i,u);if(!this.At(c))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),c=new HT(u,i,t);return r.forEach(m=>c.insert(m)),c}insert(e){if(0===this.It)return;const t=RM(e),[r,i]=NM(t);for(let u=0;u<this.hashCount;u++){const c=this.Et(r,i,u);this.Rt(c)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class D0 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class C0{constructor(e,t,r,i,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,b0.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new C0(Et.min(),i,new un(Vt),I(),Ce())}}class b0{constructor(e,t,r,i,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new b0(r,t,Ce(),Ce(),Ce())}}class DD{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class PM{constructor(e,t){this.targetId=e,this.Vt=t}}class OM{constructor(e,t,r=Ur.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class kM{constructor(){this.St=0,this.Dt=LM(),this.Ct=Ur.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Ce(),t=Ce(),r=Ce();return this.Dt.forEach((i,u)=>{switch(u){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:it()}}),new b0(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=LM()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class UO{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=I(),this.zt=FM(),this.Wt=new un(Vt)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:it()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,u=this.se(r);if(u){const c=u.target;if(Sy(c))if(0===i){const m=new Ze(c.path);this.Yt(r,m,Mn.newNoDocument(m,Et.min()))}else vt(1===i);else{const m=this.ie(r);if(m!==i){const w=this.re(e,m);0!==w&&(this.ee(r),this.Wt=this.Wt.insert(r,2===w?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=$T.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(D,T,N){var V,q,ue,xe,De,ft;const gt={localCacheCount:T,existenceFilterCount:N.count},et=N.unchangedNames;return et&&(gt.bloomFilter={applied:0===D,hashCount:null!==(V=et?.hashCount)&&void 0!==V?V:0,bitmapLength:null!==(xe=null===(ue=null===(q=et?.bits)||void 0===q?void 0:q.bitmap)||void 0===ue?void 0:ue.length)&&void 0!==xe?xe:0,padding:null!==(ft=null===(De=et?.bits)||void 0===De?void 0:De.padding)&&void 0!==ft?ft:0}),gt}(w,m,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:u="",padding:c=0},hashCount:m=0}=r;let w,D;try{w=bu(u).toUint8Array()}catch(T){if(T instanceof XI)return uo("Decoding the base64 bloom filter in existence filter failed ("+T.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw T}try{D=new HT(w,c,m)}catch(T){return uo(T instanceof D0?"BloomFilter error: ":"Applying bloom filter failed: ",T),1}return 0===D.It?1:i!==t-this.oe(e.targetId,D)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(u=>{const c=this.Gt.ue(),m=`projects/${c.projectId}/databases/${c.database}/documents/${u.path.canonicalString()}`;t.vt(m)||(this.Yt(e,u,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((u,c)=>{const m=this.se(c);if(m){if(u.current&&Sy(m.target)){const w=new Ze(m.target.path);null!==this.jt.get(w)||this.ae(c,w)||this.Yt(c,w,Mn.newNoDocument(w,e))}u.Mt&&(t.set(c,u.Ot()),u.Ft())}});let r=Ce();this.zt.forEach((u,c)=>{let m=!0;c.forEachWhile(w=>{const D=this.se(w);return!D||"TargetPurposeLimboResolution"===D.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.jt.forEach((u,c)=>c.setReadTime(e));const i=new C0(e,t,this.Wt,this.jt,r);return this.jt=I(),this.zt=FM(),this.Wt=new un(Vt),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new kM,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new xn(Vt),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Ue("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new kM),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function FM(){return new un(Ze.comparator)}function LM(){return new un(Ze.comparator)}const BO={asc:"ASCENDING",desc:"DESCENDING"},jO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$O={and:"AND",or:"OR"};class HO{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function GT(n,e){return n.useProto3Json||tg(e)?e:{value:e}}function Ny(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function VM(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function GO(n,e){return Ny(n,e.toTimestamp())}function Br(n){return vt(!!n),Et.fromTimestamp(function(e){const t=cd(e);return new Vn(t.seconds,t.nanos)}(n))}function zT(n,e){return(t=n,new sn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function UM(n){const e=sn.fromString(n);return vt(KM(e)),e}function T0(n,e){return zT(n.databaseId,e.path)}function $c(n,e){const t=UM(e);if(t.get(1)!==n.databaseId.projectId)throw new Ae(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ae(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ze(jM(t))}function qT(n,e){return zT(n.databaseId,e)}function BM(n){const e=UM(n);return 4===e.length?sn.emptyPath():jM(e)}function S0(n){return new sn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function jM(n){return vt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function $M(n,e,t){return{name:T0(n,e),fields:t.value.mapValue.fields}}function HM(n,e,t){const r=$c(n,e.name),i=Br(e.updateTime),u=e.createTime?Br(e.createTime):Et.min(),c=new di({mapValue:{fields:e.fields}}),m=Mn.newFoundDocument(r,i,u,c);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function A0(n,e){let t;if(e instanceof My)t={update:$M(n,e.key,e.value)};else if(e instanceof Ry)t={delete:T0(n,e.key)};else if(e instanceof dd)t={update:$M(n,e.key,e.data),updateMask:XO(e.fieldMask)};else{if(!(e instanceof VT))return it();t={verify:T0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,u){const c=u.transform;if(c instanceof Ay)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof hg)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof fg)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof xy)return{fieldPath:u.field.canonicalString(),increment:c.gt};throw it()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:GO(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:it()),t;var i}function WT(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?lr.updateTime(Br(i.updateTime)):void 0!==i.exists?lr.exists(i.exists):lr.none():lr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(u,c){let m=null;"setToServerValue"in c?(vt("REQUEST_TIME"===c.setToServerValue),m=new Ay):"appendMissingElements"in c?m=new hg(c.appendMissingElements.values||[]):"removeAllFromArray"in c?m=new fg(c.removeAllFromArray.values||[]):"increment"in c?m=new xy(u,c.increment):it();const w=cr.fromServerFormat(c.fieldPath);return new E0(w,m)}(n,i)):[];var i;if(e.update){const i=$c(n,e.update.name),u=new di({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new os((e.updateMask.fieldPaths||[]).map(D=>cr.fromServerFormat(D)));return new dd(i,u,c,t,r)}return new My(i,u,t,r)}if(e.delete){const i=$c(n,e.delete);return new Ry(i,t)}if(e.verify){const i=$c(n,e.verify);return new VT(i,t)}return it()}function GM(n,e){return{documents:[qT(n,e.path)]}}function KT(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=qT(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=qT(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(w){if(0!==w.length)return WM(ln.create(w,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const u=function(w){if(0!==w.length)return w.map(D=>{return{field:Xh((T=D).field),direction:ZO(T.dir)};var T})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=GT(n,e.limit);var m,w;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function zM(n){let e=BM(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){vt(1===r);const T=t.from[0];T.allDescendants?i=T.collectionId:e=e.child(T.collectionId)}let u=[];t.where&&(u=function(T){const N=qM(T);return N instanceof ln&&uD(N)?N.getFilters():[N]}(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(T=>{return new jc(Py((N=T).field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let m=null;t.limit&&(m=function(T){let N;return N="object"==typeof T?T.value:T,tg(N)?null:N}(t.limit));let w=null;var T;t.startAt&&(w=new as((T=t.startAt).values||[],!!T.before));let D=null;return t.endAt&&(D=function(T){return new as(T.values||[],!T.before)}(t.endAt)),yD(e,i,c,u,m,"F",w,D)}function qM(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Py(e.unaryFilter.field);return Jt.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Py(e.unaryFilter.field);return Jt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Py(e.unaryFilter.field);return Jt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Py(e.unaryFilter.field);return Jt.create(u,"!=",{nullValue:"NULL_VALUE"});default:return it()}}(n):void 0!==n.fieldFilter?Jt.create(Py((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return it()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return ln.create(e.compositeFilter.filters.map(t=>qM(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return it()}}(e.compositeFilter.op))}(n):it();var e}function ZO(n){return BO[n]}function YO(n){return jO[n]}function QO(n){return $O[n]}function Xh(n){return{fieldPath:n.canonicalString()}}function Py(n){return cr.fromServerFormat(n.fieldPath)}function WM(n){return n instanceof Jt?function(e){if("=="===e.op){if(iD(e.value))return{unaryFilter:{field:Xh(e.field),op:"IS_NAN"}};if(rD(e.value))return{unaryFilter:{field:Xh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(iD(e.value))return{unaryFilter:{field:Xh(e.field),op:"IS_NOT_NAN"}};if(rD(e.value))return{unaryFilter:{field:Xh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xh(e.field),op:YO(e.op),value:e.value}}}(n):n instanceof ln?function(e){const t=e.getFilters().map(r=>WM(r));return 1===t.length?t[0]:{compositeFilter:{op:QO(e.op),filters:t}}}(n):it()}function XO(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function KM(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class hd{constructor(e,t,r,i,u=Et.min(),c=Et.min(),m=Ur.EMPTY_BYTE_STRING,w=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=m,this.expectedCount=w}withSequenceNumber(e){return new hd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new hd(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new hd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new hd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class ZM{constructor(e){this.fe=e}}function YM(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:CD(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:T0(i=n.fe,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Ny(i,u.version.toTimestamp()),createTime:Ny(i,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:pg(e.version)};else{if(!e.isUnknownDocument())return it();r.unknownDocument={path:t.path.toArray(),version:pg(e.version)}}var i,u;return r}function CD(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function pg(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function gg(n){const e=new Vn(n.seconds,n.nanoseconds);return Et.fromTimestamp(e)}function mg(n,e){const t=(e.baseMutations||[]).map(u=>WT(n.fe,u));for(let u=0;u<e.mutations.length-1;++u)u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(e.mutations[u].updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u);const r=e.mutations.map(u=>WT(n.fe,u)),i=Vn.fromMillis(e.localWriteTimeMs);return new UT(e.batchId,i,t,r)}function x0(n){const e=gg(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?gg(n.lastLimboFreeSnapshotVersion):Et.min();let r;var i;return void 0!==n.query.documents?(vt(1===(i=n.query).documents.length),r=us(lg(BM(i.documents[0])))):r=us(zM(n.query)),new hd(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Ur.fromBase64String(n.resumeToken))}function QM(n,e){const t=pg(e.snapshotVersion),r=pg(e.lastLimboFreeSnapshotVersion);let i;i=Sy(e.target)?GM(n.fe,e.target):KT(n.fe,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Mu(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function ZT(n){const e=zM({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?w0(e,e.limit,"L"):e}function YT(n,e){return new jT(e.largestBatchId,WT(n.fe,e.overlayMutation))}function XM(n,e){const t=e.path.lastSegment();return[n,qi(e.path.popLast()),t]}function JM(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:pg(r.readTime),documentKey:qi(r.documentKey.path),largestBatchId:r.largestBatchId}}class e1{getBundleMetadata(e,t){return eR(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:gg(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return eR(e).put({bundleId:(r=t).id,createTime:pg(Br(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return tR(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:ZT(i.bundledQuery),readTime:gg(i.readTime)};var i})}saveNamedQuery(e,t){return tR(e).put({name:(r=t).name,readTime:pg(Br(r.readTime)),bundledQuery:r.bundledQuery});var r}}function eR(n){return Lr(n,"bundles")}function tR(n){return Lr(n,"namedQueries")}class bD{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new bD(e,t.uid||"")}getOverlay(e,t){return M0(e).get(XM(this.userId,t)).next(r=>r?YT(this.serializer,r):null)}getOverlays(e,t){const r=F();return ee.forEach(t,i=>this.getOverlay(e,i).next(u=>{null!==u&&r.set(i,u)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((u,c)=>{const m=new jT(t,c);i.push(this.we(e,m))}),ee.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(qi(c.getCollectionPath())));const u=[];return i.forEach(c=>{const m=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(M0(e).J("collectionPathOverlayIndex",m))}),ee.waitFor(u)}getOverlaysForCollection(e,t,r){const i=F(),u=qi(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return M0(e).j("collectionPathOverlayIndex",c).next(m=>{for(const w of m){const D=YT(this.serializer,w);i.set(D.getKey(),D)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const u=F();let c;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return M0(e).X({index:"collectionGroupOverlayIndex",range:m},(w,D,T)=>{const N=YT(this.serializer,D);u.size()<i||N.largestBatchId===c?(u.set(N.getKey(),N),c=N.largestBatchId):T.done()}).next(()=>u)}we(e,t){return M0(e).put(function(r,i,u){const[c,m,w]=XM(i,u.mutation.key);return{userId:i,collectionPath:m,documentId:w,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:A0(r.fe,u.mutation)}}(this.serializer,this.userId,t))}}function M0(n){return Lr(n,"documentOverlays")}class yg{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Xn(e.integerValue));else if("doubleValue"in e){const r=Xn(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),Uc(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(bu(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?MT(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):it()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),Ze.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function t1(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function nR(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const u=t1(255&t[i]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}yg.Ve=new yg;class n1{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const i=t.codePointAt(0);this.De(240|i>>>18),this.De(128|63&i>>>12),this.De(128|63&i>>>6),this.De(128|63&i)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const i=t.codePointAt(0);this.Ne(240|i>>>18),this.Ne(128|63&i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i)}}this.ke()}Oe(e){const t=this.Fe(e),r=nR(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Le(e){const t=this.Fe(e),r=nR(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(i){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,i,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class r1{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class i1{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class R0{constructor(){this.je=new n1,this.ze=new r1(this.je),this.We=new i1(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class _g{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new _g(this.indexId,this.documentKey,this.arrayValue,r)}}function Jh(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=rR(n.arrayValue,e.arrayValue),0!==t?t:(t=rR(n.directionalValue,e.directionalValue),0!==t?t:Ze.comparator(n.documentKey,e.documentKey)))}function rR(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class s1{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){vt(e.collectionGroup===this.collectionId);const t=yy(e);if(void 0!==t&&!this.en(t))return!1;const r=Vc(e);let i=new Set,u=0,c=0;for(;u<r.length&&this.en(r[u]);++u)i=i.add(r[u].fieldPath.canonicalString());if(u===r.length)return!0;if(void 0!==this.Ze){if(!i.has(this.Ze.field.canonicalString())){const m=r[u];if(!this.nn(this.Ze,m)||!this.sn(this.Ye[c++],m))return!1}++u}for(;u<r.length;++u)if(c>=this.Ye.length||!this.sn(this.Ye[c++],r[u]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function iR(n){var e,t;if(vt(n instanceof Jt||n instanceof ln),n instanceof Jt){if(n instanceof pD){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>Jt.create(n.field,"==",u)))||[];return ln.create(i,"or")}return n}const r=n.filters.map(i=>iR(i));return ln.create(r,n.op)}function o1(n){if(0===n.getFilters().length)return[];const e=JT(iR(n));return vt(sR(e)),QT(e)||XT(e)?[e]:e.getFilters()}function QT(n){return n instanceof Jt}function XT(n){return n instanceof ln&&uD(n)}function sR(n){return QT(n)||XT(n)||function(e){if(e instanceof ln&&aD(e)){for(const t of e.getFilters())if(!QT(t)&&!XT(t))return!1;return!0}return!1}(n)}function JT(n){if(vt(n instanceof Jt||n instanceof ln),n instanceof Jt)return n;if(1===n.filters.length)return JT(n.filters[0]);const e=n.filters.map(r=>JT(r));let t=ln.create(e,n.op);return t=TD(t),sR(t)?t:(vt(t instanceof ln),vt(ug(t)),vt(t.filters.length>1),t.filters.reduce((r,i)=>eS(r,i)))}function eS(n,e){let t;return vt(n instanceof Jt||n instanceof ln),vt(e instanceof Jt||e instanceof ln),t=n instanceof Jt?e instanceof Jt?ln.create([n,e],"and"):oR(n,e):e instanceof Jt?oR(e,n):function(r,i){if(vt(r.filters.length>0&&i.filters.length>0),ug(r)&&ug(i))return lD(r,i.getFilters());const u=aD(r)?r:i,c=aD(r)?i:r,m=u.filters.map(w=>eS(w,c));return ln.create(m,"or")}(n,e),TD(t)}function oR(n,e){if(ug(e))return lD(e,n.getFilters());{const t=e.filters.map(r=>eS(n,r));return ln.create(t,"or")}}function TD(n){if(vt(n instanceof Jt||n instanceof ln),n instanceof Jt)return n;const e=n.getFilters();if(1===e.length)return TD(e[0]);if(NT(n))return n;const t=e.map(i=>TD(i)),r=[];return t.forEach(i=>{i instanceof Jt?r.push(i):i instanceof ln&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:ln.create(r,n.op)}class a1{constructor(){this.rn=new tS}addToCollectionParentIndex(e,t){return this.rn.add(t),ee.resolve()}getCollectionParents(e,t){return ee.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return ee.resolve()}deleteFieldIndex(e,t){return ee.resolve()}getDocumentsMatchingTarget(e,t){return ee.resolve(null)}getIndexType(e,t){return ee.resolve(0)}getFieldIndexes(e,t){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,t){return ee.resolve(co.min())}getMinOffsetFromCollectionGroup(e,t){return ee.resolve(co.min())}updateCollectionGroup(e,t,r){return ee.resolve()}updateIndexEntries(e,t){return ee.resolve()}}class tS{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new xn(sn.comparator),u=!i.has(r);return this.index[t]=i.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new xn(sn.comparator)).toArray()}}const SD=new Uint8Array(0);class u1{constructor(e,t){this.user=e,this.databaseId=t,this.on=new tS,this.un=new g(r=>Mu(r),(r,i)=>cg(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const u={collectionId:r,parent:qi(i)};return aR(e).put(u)}return ee.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[UI(t),""],!1,!0);return aR(e).j(i).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(Ta(c.parent))}return r})}addFieldIndex(e,t){const r=AD(e),i={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var c;delete i.indexId;const u=r.add(i);if(t.indexState){const c=P0(e);return u.next(m=>{c.put(JM(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=AD(e),i=P0(e),u=N0(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=N0(e);let i=!0;const u=new Map;return ee.forEach(this.cn(t),c=>this.an(e,c).next(m=>{i&&(i=!!m),u.set(c,m)})).next(()=>{if(i){let c=Ce();const m=[];return ee.forEach(u,(w,D)=>{var T;Ue("IndexedDbIndexManager",`Using index ${T=w,`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(et=>`${et.fieldPath}:${et.kind}`).join(",")}`} to execute ${Mu(t)}`);const N=function(et,dt){const Ot=yy(dt);if(void 0===Ot)return null;for(const Wt of y0(et,Ot.fieldPath))switch(Wt.op){case"array-contains-any":return Wt.value.arrayValue.values||[];case"array-contains":return[Wt.value]}return null}(D,w),V=function(et,dt){const Ot=new Map;for(const Wt of Vc(dt))for(const Jr of y0(et,Wt.fieldPath))switch(Jr.op){case"==":case"in":Ot.set(Wt.fieldPath.canonicalString(),Jr.value);break;case"not-in":case"!=":return Ot.set(Wt.fieldPath.canonicalString(),Jr.value),Array.from(Ot.values())}return null}(D,w),q=function(et,dt){const Ot=[];let Wt=!0;for(const Jr of Vc(dt)){const Ko=0===Jr.kind?kT(et,Jr.fieldPath,et.startAt):mD(et,Jr.fieldPath,et.startAt);Ot.push(Ko.value),Wt&&(Wt=Ko.inclusive)}return new as(Ot,Wt)}(D,w),ue=function(et,dt){const Ot=[];let Wt=!0;for(const Jr of Vc(dt)){const Ko=0===Jr.kind?mD(et,Jr.fieldPath,et.endAt):kT(et,Jr.fieldPath,et.endAt);Ot.push(Ko.value),Wt&&(Wt=Ko.inclusive)}return new as(Ot,Wt)}(D,w),xe=this.hn(w,D,q),De=this.hn(w,D,ue),ft=this.ln(w,D,V),gt=this.fn(w.indexId,N,xe,q.inclusive,De,ue.inclusive,ft);return ee.forEach(gt,et=>r.H(et,t.limit).next(dt=>{dt.forEach(Ot=>{const Wt=Ze.fromSegments(Ot.documentKey);c.has(Wt)||(c=c.add(Wt),m.push(Wt))})}))}).next(()=>m)}return ee.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:o1(ln.create(e.filters,"and")).map(r=>Ty(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,i,u,c,m){const w=(null!=t?t.length:1)*Math.max(r.length,u.length),D=w/(null!=t?t.length:1),T=[];for(let N=0;N<w;++N){const V=t?this.dn(t[N/D]):SD,q=this.wn(e,V,r[N%D],i),ue=this._n(e,V,u[N%D],c),xe=m.map(De=>this.wn(e,V,De,!0));T.push(...this.createRange(q,ue,xe))}return T}wn(e,t,r,i){const u=new _g(e,Ze.empty(),t,r);return i?u:u.Je()}_n(e,t,r,i){const u=new _g(e,Ze.empty(),t,r);return i?u.Je():u}an(e,t){const r=new s1(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(u=>{let c=null;for(const m of u)r.tn(m)&&(!c||m.fields.length>c.fields.length)&&(c=m);return c})}getIndexType(e,t){let r=2;const i=this.cn(t);return ee.forEach(i,u=>this.an(e,u).next(c=>{c?0!==r&&c.fields.length<function(m){let w=new xn(cr.comparator),D=!1;for(const T of m.filters)for(const N of T.getFlattenedFilters())N.field.isKeyField()||("array-contains"===N.op||"array-contains-any"===N.op?D=!0:w=w.add(N.field));for(const T of m.orderBy)T.field.isKeyField()||(w=w.add(T.field));return w.size+(D?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}mn(e,t){const r=new R0;for(const i of Vc(e)){const u=t.data.field(i.fieldPath);if(null==u)return null;const c=r.He(i.kind);yg.Ve._e(u,c)}return r.Qe()}dn(e){const t=new R0;return yg.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new R0;return yg.Ve._e(Yh(this.databaseId,t),r.He(function(i){const u=Vc(i);return 0===u.length?0:u[u.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let i=[];i.push(new R0);let u=0;for(const c of Vc(e)){const m=r[u++];for(const w of i)if(this.yn(t,c.fieldPath)&&og(m))i=this.pn(i,c,m);else{const D=w.He(c.kind);yg.Ve._e(m,D)}}return this.In(i)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const i=[...e],u=[];for(const c of r.arrayValue.values||[])for(const m of i){const w=new R0;w.seed(m.Qe()),yg.Ve._e(c,w.He(t.kind)),u.push(w)}return u}yn(e,t){return!!e.filters.find(r=>r instanceof Jt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=AD(e),i=P0(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(u=>{const c=[];return ee.forEach(u,m=>i.get([m.indexId,this.uid]).next(w=>{c.push(function(D,T){const N=T?new Wh(T.sequenceNumber,new co(gg(T.readTime),new Ze(Ta(T.documentKey)),T.largestBatchId)):Wh.empty(),V=D.fields.map(([q,ue])=>new _y(cr.fromServerFormat(q),ue));return new eg(D.indexId,D.collectionGroup,V,N)}(m,w))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const u=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==u?u:Vt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=AD(e),u=P0(e);return this.Tn(e).next(c=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>ee.forEach(m,w=>u.put(JM(w.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return ee.forEach(t,(i,u)=>{const c=r.get(i.collectionGroup);return(c?ee.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(m=>(r.set(i.collectionGroup,m),ee.forEach(m,w=>this.En(e,i,w).next(D=>{const T=this.An(u,w);return D.isEqual(T)?ee.resolve():this.vn(e,u,w,D,T)}))))})}Rn(e,t,r,i){return N0(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,i){return N0(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const i=N0(e);let u=new xn(Jh);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(c,m)=>{u=u.add(new _g(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}An(e,t){let r=new xn(Jh);const i=this.mn(t,e);if(null==i)return r;const u=yy(t);if(null!=u){const c=e.data.field(u.fieldPath);if(og(c))for(const m of c.arrayValue.values||[])r=r.add(new _g(t.indexId,e.key,this.dn(m),i))}else r=r.add(new _g(t.indexId,e.key,SD,i));return r}vn(e,t,r,i,u){Ue("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(m,w,D,T,N){const V=m.getIterator(),q=w.getIterator();let ue=rg(V),xe=rg(q);for(;ue||xe;){let De=!1,ft=!1;if(ue&&xe){const gt=D(ue,xe);gt<0?ft=!0:gt>0&&(De=!0)}else null!=ue?ft=!0:De=!0;De?(T(xe),xe=rg(q)):ft?(N(ue),ue=rg(V)):(ue=rg(V),xe=rg(q))}}(i,u,Jh,m=>{c.push(this.Rn(e,t,r,m))},m=>{c.push(this.Pn(e,t,r,m))}),ee.waitFor(c)}Tn(e){let t=1;return P0(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,u)=>{u.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,m)=>Jh(c,m)).filter((c,m,w)=>!m||0!==Jh(c,w[m-1]));const i=[];i.push(e);for(const c of r){const m=Jh(c,e),w=Jh(c,t);if(0===m)i[0]=e.Je();else if(m>0&&w<0)i.push(c),i.push(c.Je());else if(w>0)break}i.push(t);const u=[];for(let c=0;c<i.length;c+=2){if(this.bn(i[c],i[c+1]))return[];u.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,SD,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,SD,[]]))}return u}bn(e,t){return Jh(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(uR)}getMinOffset(e,t){return ee.mapArray(this.cn(t),r=>this.an(e,r).next(i=>i||it())).next(uR)}}function aR(n){return Lr(n,"collectionParents")}function N0(n){return Lr(n,"indexEntries")}function AD(n){return Lr(n,"indexConfiguration")}function P0(n){return Lr(n,"indexState")}function uR(n){vt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;jI(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new co(e.readTime,e.documentKey,t)}const cR={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class cs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new cs(e,cs.DEFAULT_COLLECTION_PERCENTILE,cs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function lR(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),u=[],c=IDBKeyRange.only(t.batchId);let m=0;const w=r.X({range:c},(T,N,V)=>(m++,V.delete()));u.push(w.next(()=>{vt(1===m)}));const D=[];for(const T of t.mutations){const N=IT(e,T.key.path,t.batchId);u.push(i.delete(N)),D.push(T.key)}return ee.waitFor(u).next(()=>D)}function xD(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw it();e=n.noDocument}return JSON.stringify(e).length}cs.DEFAULT_COLLECTION_PERCENTILE=10,cs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cs.DEFAULT=new cs(41943040,cs.DEFAULT_COLLECTION_PERCENTILE,cs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cs.DISABLED=new cs(-1,0,0);class MD{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}static de(e,t,r,i){vt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new MD(u,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ef(e).X({index:"userMutationsIndex",range:r},(i,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const u=Oy(e),c=ef(e);return c.add({}).next(m=>{vt("number"==typeof m);const w=new UT(m,t,r,i),D=function(V,q,ue){const xe=ue.baseMutations.map(ft=>A0(V.fe,ft)),De=ue.mutations.map(ft=>A0(V.fe,ft));return{userId:q,batchId:ue.batchId,localWriteTimeMs:ue.localWriteTime.toMillis(),baseMutations:xe,mutations:De}}(this.serializer,this.userId,w),T=[];let N=new xn((V,q)=>Vt(V.canonicalString(),q.canonicalString()));for(const V of i){const q=IT(this.userId,V.key.path,m);N=N.add(V.key.path.popLast()),T.push(c.put(D)),T.push(u.put(q,DT))}return N.forEach(V=>{T.push(this.indexManager.addToCollectionParentIndex(e,V))}),e.addOnCommittedListener(()=>{this.Vn[m]=w.keys()}),ee.waitFor(T).next(()=>w)})}lookupMutationBatch(e,t){return ef(e).get(t).next(r=>r?(vt(r.userId===this.userId),mg(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?ee.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Vn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return ef(e).X({index:"userMutationsIndex",range:i},(c,m,w)=>{m.userId===this.userId&&(vt(m.batchId>=r),u=mg(this.serializer,m)),w.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ef(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ef(e).j("userMutationsIndex",t).next(r=>r.map(i=>mg(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=wy(this.userId,t.path),i=IDBKeyRange.lowerBound(r),u=[];return Oy(e).X({range:i},(c,m,w)=>{const[D,T,N]=c,V=Ta(T);if(D===this.userId&&t.path.isEqual(V))return ef(e).get(N).next(q=>{if(!q)throw it();vt(q.userId===this.userId),u.push(mg(this.serializer,q))});w.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new xn(Vt);const i=[];return t.forEach(u=>{const c=wy(this.userId,u.path),m=IDBKeyRange.lowerBound(c),w=Oy(e).X({range:m},(D,T,N)=>{const[V,q,ue]=D,xe=Ta(q);V===this.userId&&u.path.isEqual(xe)?r=r.add(ue):N.done()});i.push(w)}),ee.waitFor(i).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,u=wy(this.userId,r),c=IDBKeyRange.lowerBound(u);let m=new xn(Vt);return Oy(e).X({range:c},(w,D,T)=>{const[N,V,q]=w,ue=Ta(V);N===this.userId&&r.isPrefixOf(ue)?ue.length===i&&(m=m.add(q)):T.done()}).next(()=>this.Dn(e,m))}Dn(e,t){const r=[],i=[];return t.forEach(u=>{i.push(ef(e).get(u).next(c=>{if(null===c)throw it();vt(c.userId===this.userId),r.push(mg(this.serializer,c))}))}),ee.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return lR(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),ee.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ee.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Oy(e).X({range:r},(u,c,m)=>{if(u[0]===this.userId){const w=Ta(u[1]);i.push(w)}else m.done()}).next(()=>{vt(0===i.length)})})}containsKey(e,t){return dR(e,this.userId,t)}xn(e){return hR(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function dR(n,e,t){const r=wy(e,t.path),i=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return Oy(n).X({range:u,Y:!0},(m,w,D)=>{const[T,N,V]=m;T===e&&N===i&&(c=!0),D.done()}).next(()=>c)}function ef(n){return Lr(n,"mutations")}function Oy(n){return Lr(n,"documentMutations")}function hR(n){return Lr(n,"mutationQueues")}class vg{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new vg(0)}static Mn(){return new vg(-1)}}class c1{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new vg(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>Et.fromTimestamp(new Vn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.On(e,i)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ky(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(vt(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let i=0;const u=[];return ky(e).X((c,m)=>{const w=x0(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(i++,u.push(this.removeTargetData(e,w)))}).next(()=>ee.waitFor(u)).next(()=>i)}forEachTarget(e,t){return ky(e).X((r,i)=>{const u=x0(i);t(u)})}$n(e){return fR(e).get("targetGlobalKey").next(t=>(vt(null!==t),t))}On(e,t){return fR(e).put("targetGlobalKey",t)}Fn(e,t){return ky(e).put(QM(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Mu(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return ky(e).X({range:i,index:"queryTargetsIndex"},(c,m,w)=>{const D=x0(m);cg(t,D.target)&&(u=D,w.done())}).next(()=>u)}addMatchingKeys(e,t,r){const i=[],u=tf(e);return t.forEach(c=>{const m=qi(c.path);i.push(u.put({targetId:r,path:m})),i.push(this.referenceDelegate.addReference(e,r,c))}),ee.waitFor(i)}removeMatchingKeys(e,t,r){const i=tf(e);return ee.forEach(t,u=>{const c=qi(u.path);return ee.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=tf(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=tf(e);let u=Ce();return i.X({range:r,Y:!0},(c,m,w)=>{const D=Ta(c[1]),T=new Ze(D);u=u.add(T)}).next(()=>u)}containsKey(e,t){const r=qi(t.path),i=IDBKeyRange.bound([r],[UI(r)],!1,!0);let u=0;return tf(e).X({index:"documentTargetsIndex",Y:!0,range:i},([c,m],w,D)=>{0!==c&&(u++,D.done())}).next(()=>u>0)}le(e,t){return ky(e).get(t).next(r=>r?x0(r):null)}}function ky(n){return Lr(n,"targets")}function fR(n){return Lr(n,"targetGlobal")}function tf(n){return Lr(n,"targetDocuments")}function pR([n,e],[t,r]){const i=Vt(n,t);return 0===i?Vt(e,r):i}class l1{constructor(e){this.Ln=e,this.buffer=new xn(pR),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();pR(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class gR{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Ue("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,me.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Du(r)?Ue("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield ud(r)}yield t.Qn(3e5)}))}}class d1{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ee.resolve(Ms.ct);const r=new l1(t);return this.jn.forEachTarget(e,i=>r.Kn(i.sequenceNumber)).next(()=>this.jn.Wn(e,i=>r.Kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ue("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(cR)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),cR):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,i,u,c,m,w,D;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(Ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),i=this.params.maximumSequenceNumbersToCollect):i=N,c=Date.now(),this.nthSequenceNumber(e,i))).next(N=>(r=N,m=Date.now(),this.removeTargets(e,r,t))).next(N=>(u=N,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(D=Date.now(),Xv()<=vu.in.DEBUG&&Ue("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-T}ms\n\tDetermined least recently used ${i} in `+(m-c)+`ms\n\tRemoved ${u} targets in `+(w-m)+`ms\n\tRemoved ${N} documents in `+(D-w)+`ms\nTotal Duration: ${D-T}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:u,documentsRemoved:N})))}}class h1{constructor(e,t){this.db=e,this.garbageCollector=function mR(n,e){return new d1(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,i)=>t(i))}addReference(e,t,r){return RD(e,r)}removeReference(e,t,r){return RD(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return RD(e,t)}Xn(e,t){return function(r,i){let u=!1;return hR(r).Z(c=>dR(r,c,i).next(m=>(m&&(u=!0),ee.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let u=0;return this.Yn(e,(c,m)=>{if(m<=t){const w=this.Xn(e,c).next(D=>{if(!D)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Et.min()),tf(e).delete([0,qi(c.path)])))});i.push(w)}}).next(()=>ee.waitFor(i)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return RD(e,t)}Yn(e,t){const r=tf(e);let i,u=Ms.ct;return r.X({index:"documentTargetsIndex"},([c,m],{path:w,sequenceNumber:D})=>{0===c?(u!==Ms.ct&&t(new Ze(Ta(i)),u),u=D,i=w):u=Ms.ct}).next(()=>{u!==Ms.ct&&t(new Ze(Ta(i)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function RD(n,e){return tf(n).put((r=n.currentSequenceNumber,{targetId:0,path:qi(e.path),sequenceNumber:r}));var r}class yR{constructor(){this.changes=new g(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Mn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ee.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class f1{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return wg(e).put(r)}removeEntry(e,t,r){return wg(e).delete(function(i,u){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],CD(u),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=Mn.newInvalidDocument(t);return wg(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(O0(t))},(i,u)=>{r=this.ts(t,u)}).next(()=>r)}es(e,t){let r={size:0,document:Mn.newInvalidDocument(t)};return wg(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(O0(t))},(i,u)=>{r={document:this.ts(t,u),size:xD(u)}}).next(()=>r)}getEntries(e,t){let r=I();return this.ns(e,t,(i,u)=>{const c=this.ts(i,u);r=r.insert(i,c)}).next(()=>r)}ss(e,t){let r=I(),i=new un(Ze.comparator);return this.ns(e,t,(u,c)=>{const m=this.ts(u,c);r=r.insert(u,m),i=i.insert(u,xD(c))}).next(()=>({documents:r,rs:i}))}ns(e,t,r){if(t.isEmpty())return ee.resolve();let i=new xn(ER);t.forEach(w=>i=i.add(w));const u=IDBKeyRange.bound(O0(i.first()),O0(i.last())),c=i.getIterator();let m=c.getNext();return wg(e).X({index:"documentKeyIndex",range:u},(w,D,T)=>{const N=Ze.fromSegments([...D.prefixPath,D.collectionGroup,D.documentId]);for(;m&&ER(m,N)<0;)r(m,null),m=c.getNext();m&&m.isEqual(N)&&(r(m,D),m=c.hasNext()?c.getNext():null),m?T.G(O0(m)):T.done()}).next(()=>{for(;m;)r(m,null),m=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const u=t.path,c=[u.popLast().toArray(),u.lastSegment(),CD(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],m=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return wg(e).j(IDBKeyRange.bound(c,m,!0)).next(w=>{let D=I();for(const T of w){const N=this.ts(Ze.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);N.isFoundDocument()&&(o(t,N)||i.has(N.key))&&(D=D.insert(N.key,N))}return D})}getAllFromCollectionGroup(e,t,r,i){let u=I();const c=wR(t,r),m=wR(t,co.max());return wg(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,m,!0)},(w,D,T)=>{const N=this.ts(Ze.fromSegments(D.prefixPath.concat(D.collectionGroup,D.documentId)),D);u=u.insert(N.key,N),u.size===i&&T.done()}).next(()=>u)}newChangeBuffer(e){return new p1(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return vR(e).get("remoteDocumentGlobalKey").next(t=>(vt(!!t),t))}Zn(e,t){return vR(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function JO(n,e){let t;if(e.document)t=HM(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ze.fromSegments(e.noDocument.path),i=gg(e.noDocument.readTime);t=Mn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return it();{const r=Ze.fromSegments(e.unknownDocument.path),i=gg(e.unknownDocument.version);t=Mn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Vn(r[0],r[1]);return Et.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(Et.min()))return r}return Mn.newInvalidDocument(e)}}function _R(n){return new f1(n)}class p1 extends yR{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new g(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new xn((u,c)=>Vt(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const m=this.us.get(u);if(t.push(this.os.removeEntry(e,u,m.readTime)),c.isValidDocument()){const w=YM(this.os.serializer,c);i=i.add(u.path.popLast());const D=xD(w);r+=D-m.size,t.push(this.os.addEntry(e,u,w))}else if(r-=m.size,this.trackRemovals){const w=YM(this.os.serializer,c.convertToNoDocument(Et.min()));t.push(this.os.addEntry(e,u,w))}}),i.forEach(u=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.os.updateMetadata(e,r)),ee.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:i})=>(i.forEach((u,c)=>{this.us.set(u,{size:c,readTime:r.get(u).readTime})}),r))}}function vR(n){return Lr(n,"remoteDocumentGlobal")}function wg(n){return Lr(n,"remoteDocumentsV14")}function O0(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function wR(n,e){const t=e.documentKey.path.toArray();return[n,CD(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function ER(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(i=Vt(t[u],r[u]),i)return i;return i=Vt(t.length,r.length),i||(i=Vt(t[t.length-2],r[r.length-2]),i||Vt(t[t.length-1],r[r.length-1]))}class g1{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class IR{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&I0(r.mutation,i,os.empty(),Vn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ce()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ce()){const i=F();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(u=>{let c=x();return u.forEach((m,w)=>{c=c.insert(m,w.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=F();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ce()))}populateOverlays(e,t,r){const i=[];return r.forEach(u=>{t.has(u)||i.push(u)}),this.documentOverlayCache.getOverlays(e,i).next(u=>{u.forEach((c,m)=>{t.set(c,m)})})}computeViews(e,t,r,i){let u=I();const c=Y(),m=Y();return t.forEach((w,D)=>{const T=r.get(D.key);i.has(D.key)&&(void 0===T||T.mutation instanceof dd)?u=u.insert(D.key,D):void 0!==T?(c.set(D.key,T.mutation.getFieldMask()),I0(T.mutation,D,T.mutation.getFieldMask(),Vn.now())):c.set(D.key,os.empty())}),this.recalculateAndSaveOverlays(e,u).next(w=>(w.forEach((D,T)=>c.set(D,T)),t.forEach((D,T)=>{var N;return m.set(D,new g1(T,null!==(N=c.get(D))&&void 0!==N?N:null))}),m))}recalculateAndSaveOverlays(e,t){const r=Y();let i=new un((c,m)=>c-m),u=Ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const m of c)m.keys().forEach(w=>{const D=t.get(w);if(null===D)return;let T=r.get(w)||os.empty();T=m.applyToLocalView(D,T),r.set(w,T);const N=(i.get(m.batchId)||Ce()).add(w);i=i.insert(m.batchId,N)})}).next(()=>{const c=[],m=i.getReverseIterator();for(;m.hasNext();){const w=m.getNext(),D=w.key,T=w.value,N=G();T.forEach(V=>{if(!u.has(V)){const q=DM(t.get(V),r.get(V));null!==q&&N.set(V,q),u=u.add(V)}}),c.push(this.documentOverlayCache.saveOverlays(e,D,N))}return ee.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ze.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):v0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(u=>{const c=i-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-u.size):ee.resolve(F());let m=-1,w=u;return c.next(D=>ee.forEach(D,(T,N)=>(m<N.largestBatchId&&(m=N.largestBatchId),u.get(T)?ee.resolve():this.remoteDocumentCache.getEntry(e,T).next(V=>{w=w.insert(T,V)}))).next(()=>this.populateOverlays(e,D,u)).next(()=>this.computeViews(e,w,D,Ce())).next(T=>({batchId:m,changes:R(T)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ze(t)).next(r=>{let i=x();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let u=x();return this.indexManager.getCollectionParents(e,i).next(c=>ee.forEach(c,m=>{const w=(D=t,T=m.child(i),new Ru(T,null,D.explicitOrderBy.slice(),D.filters.slice(),D.limit,D.limitType,D.startAt,D.endAt));var D,T;return this.getDocumentsMatchingCollectionQuery(e,w,r).next(D=>{D.forEach((T,N)=>{u=u.insert(T,N)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(i=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(u=>{i.forEach((m,w)=>{const D=w.getKey();null===u.get(D)&&(u=u.insert(D,Mn.newInvalidDocument(D)))});let c=x();return u.forEach((m,w)=>{const D=i.get(m);void 0!==D&&I0(D.mutation,w,os.empty(),Vn.now()),o(t,w)&&(c=c.insert(m,w))}),c})}}class m1{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return ee.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:Br(r.createTime)}),ee.resolve()}getNamedQuery(e,t){return ee.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:ZT(r.bundledQuery),readTime:Br(r.readTime)}),ee.resolve();var r}}class y1{constructor(){this.overlays=new un(Ze.comparator),this.ls=new Map}getOverlay(e,t){return ee.resolve(this.overlays.get(t))}getOverlays(e,t){const r=F();return ee.forEach(t,i=>this.getOverlay(e,i).next(u=>{null!==u&&r.set(i,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,u)=>{this.we(e,t,u)}),ee.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(u=>this.overlays=this.overlays.remove(u)),this.ls.delete(r)),ee.resolve()}getOverlaysForCollection(e,t,r){const i=F(),u=t.length+1,c=new Ze(t.child("")),m=this.overlays.getIteratorFrom(c);for(;m.hasNext();){const w=m.getNext().value,D=w.getKey();if(!t.isPrefixOf(D.path))break;D.path.length===u&&w.largestBatchId>r&&i.set(w.getKey(),w)}return ee.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let u=new un((D,T)=>D-T);const c=this.overlays.getIterator();for(;c.hasNext();){const D=c.getNext().value;if(D.getKey().getCollectionGroup()===t&&D.largestBatchId>r){let T=u.get(D.largestBatchId);null===T&&(T=F(),u=u.insert(D.largestBatchId,T)),T.set(D.getKey(),D)}}const m=F(),w=u.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((D,T)=>m.set(D,T)),!(m.size()>=i)););return ee.resolve(m)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const c=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new jT(t,r));let u=this.ls.get(t);void 0===u&&(u=Ce(),this.ls.set(t,u)),this.ls.set(t,u.add(r.key))}}class nS{constructor(){this.fs=new xn(Mi.ds),this.ws=new xn(Mi._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new Mi(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new Mi(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new Ze(new sn([])),r=new Mi(t,e),i=new Mi(t,e+1),u=[];return this.ws.forEachInRange([r,i],c=>{this.ys(c),u.push(c.key)}),u}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Ze(new sn([])),r=new Mi(t,e),i=new Mi(t,e+1);let u=Ce();return this.ws.forEachInRange([r,i],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new Mi(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Mi{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Ze.comparator(e.key,t.key)||Vt(e.As,t.As)}static _s(e,t){return Vt(e.As,t.As)||Ze.comparator(e.key,t.key)}}class _1{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new xn(Mi.ds)}checkEmpty(e){return ee.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const u=this.vs;this.vs++;const c=new UT(u,t,r,i);this.mutationQueue.push(c);for(const m of i)this.Rs=this.Rs.add(new Mi(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ee.resolve(c)}lookupMutationBatch(e,t){return ee.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),u=i<0?0:i;return ee.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Mi(t,0),i=new Mi(t,Number.POSITIVE_INFINITY),u=[];return this.Rs.forEachInRange([r,i],c=>{const m=this.Ps(c.As);u.push(m)}),ee.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new xn(Vt);return t.forEach(i=>{const u=new Mi(i,0),c=new Mi(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([u,c],m=>{r=r.add(m.As)})}),ee.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let u=r;Ze.isDocumentKey(u)||(u=u.child(""));const c=new Mi(new Ze(u),0);let m=new xn(Vt);return this.Rs.forEachWhile(w=>{const D=w.key.path;return!!r.isPrefixOf(D)&&(D.length===i&&(m=m.add(w.As)),!0)},c),ee.resolve(this.Vs(m))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){vt(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return ee.forEach(t.mutations,i=>{const u=new Mi(i.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new Mi(t,0),i=this.Rs.firstAfterOrEqual(r);return ee.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ee.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class v1{constructor(e){this.Ds=e,this.docs=new un(Ze.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),u=i?i.size:0,c=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ee.resolve(r?r.document.mutableCopy():Mn.newInvalidDocument(t))}getEntries(e,t){let r=I();return t.forEach(i=>{const u=this.docs.get(i);r=r.insert(i,u?u.document.mutableCopy():Mn.newInvalidDocument(i))}),ee.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let u=I();const c=t.path,m=new Ze(c.child("")),w=this.docs.getIteratorFrom(m);for(;w.hasNext();){const{key:D,value:{document:T}}=w.getNext();if(!c.isPrefixOf(D.path))break;D.path.length>c.length+1||jI(_T(T),r)<=0||(i.has(T.key)||o(t,T))&&(u=u.insert(T.key,T.mutableCopy()))}return ee.resolve(u)}getAllFromCollectionGroup(e,t,r,i){it()}Cs(e,t){return ee.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new w1(this)}getSize(e){return ee.resolve(this.size)}}class w1 extends yR{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),ee.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class E1{constructor(e){this.persistence=e,this.xs=new g(t=>Mu(t),cg),this.lastRemoteSnapshotVersion=Et.min(),this.highestTargetId=0,this.Ns=0,this.ks=new nS,this.targetCount=0,this.Ms=vg.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),ee.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new vg(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,ee.resolve()}updateTargetData(e,t){return this.Fn(t),ee.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,t,r){let i=0;const u=[];return this.xs.forEach((c,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.xs.delete(c),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),i++)}),ee.waitFor(u).next(()=>i)}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return ee.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),ee.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,u=[];return i&&t.forEach(c=>{u.push(i.markPotentiallyOrphaned(e,c))}),ee.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),ee.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return ee.resolve(r)}containsKey(e,t){return ee.resolve(this.ks.containsKey(t))}}class rS{constructor(e,t){this.$s={},this.overlays={},this.Os=new Ms(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new E1(this),this.indexManager=new a1,this.remoteDocumentCache=new v1(r=>this.referenceDelegate.Ls(r)),this.serializer=new ZM(t),this.qs=new m1(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new y1,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new _1(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Ue("MemoryPersistence","Starting transaction:",e);const i=new I1(this.Os.next());return this.referenceDelegate.Us(),r(i).next(u=>this.referenceDelegate.Ks(i).next(()=>u)).toPromise().then(u=>(i.raiseOnCommittedEvent(),u))}Gs(e,t){return ee.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class I1 extends wT{constructor(e){super(),this.currentSequenceNumber=e}}class ND{constructor(e){this.persistence=e,this.Qs=new nS,this.js=null}static zs(e){return new ND(e)}get Ws(){if(this.js)return this.js;throw it()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),ee.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),ee.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),ee.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(u=>this.Ws.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.Ws,r=>{const i=Ze.fromPath(r);return this.Hs(e,i).next(u=>{u||t.removeEntry(i,Et.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return ee.or([()=>ee.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class D1{constructor(e){this.serializer=e}O(e,t,r,i){const u=new t0("createOrUpgrade",t);var m;r<1&&i>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",GI,{unique:!0}),m.createObjectStore("documentMutations"),DR(e),function(m){m.createObjectStore("remoteDocuments")}(e));let c=ee.resolve();return r<3&&i>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),DR(e)),c=c.next(()=>function(m){const w=m.store("targetGlobal"),D={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Et.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",D)}(u))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(m,w){return w.store("mutations").j().next(D=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",GI,{unique:!0});const T=w.store("mutations"),N=D.map(V=>T.put(V));return ee.waitFor(N)})}(e,u))),c=c.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Ys(u))),r<6&&i>=6&&(c=c.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(u)))),r<7&&i>=7&&(c=c.next(()=>this.Zs(u))),r<8&&i>=8&&(c=c.next(()=>this.ti(e,u))),r<9&&i>=9&&(c=c.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.ei(u))),r<11&&i>=11&&(c=c.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(m){const w=m.createObjectStore("documentOverlays",{keyPath:ST});w.createIndex("collectionPathOverlayIndex",AT,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",a0,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(m){const w=m.createObjectStore("remoteDocumentsV14",{keyPath:zI});w.createIndex("documentKeyIndex",qI),w.createIndex("collectionGroupIndex",hM)}(e)).next(()=>this.ni(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>this.si(e,u))),r<15&&i>=15&&(c=c.next(()=>function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:fM}).createIndex("sequenceNumberIndex",ho,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:TT}).createIndex("documentKeyIndex",o0,{unique:!1})}(e))),c}Xs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=xD(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>ee.forEach(i,u=>{const c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",c).next(m=>ee.forEach(m,w=>{vt(w.userId===u.userId);const D=mg(this.serializer,w);return lR(e,u.userId,D).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const u=[];return r.X((c,m)=>{const w=new sn(c),D=[0,qi(w)];u.push(t.get(D).next(T=>T?ee.resolve():t.put({targetId:0,path:qi(w),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ee.waitFor(u))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:bT});const r=t.store("collectionParents"),i=new tS,u=c=>{if(i.add(c)){const m=c.lastSegment(),w=c.popLast();return r.put({collectionId:m,parent:qi(w)})}};return t.store("remoteDocuments").X({Y:!0},(c,m)=>{const w=new sn(c);return u(w.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([c,m,w],D)=>{const T=Ta(m);return u(T.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,i)=>{const u=x0(i),c=QM(this.serializer,u);return t.put(c)})}ni(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((u,c)=>{const m=t.store("remoteDocumentsV14"),w=(D=c,D.document?new Ze(sn.fromString(D.document.name).popFirst(5)):D.noDocument?Ze.fromSegments(D.noDocument.path):D.unknownDocument?Ze.fromSegments(D.unknownDocument.path):it()).path.toArray();var D;const T={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(m.put(T))}).next(()=>ee.waitFor(i))}si(e,t){const r=t.store("mutations"),i=_R(this.serializer),u=new rS(ND.zs,this.serializer.fe);return r.j().next(c=>{const m=new Map;return c.forEach(w=>{var D;let T=null!==(D=m.get(w.userId))&&void 0!==D?D:Ce();mg(this.serializer,w).keys().forEach(N=>T=T.add(N)),m.set(w.userId,T)}),ee.forEach(m,(w,D)=>{const T=new ur(D),N=bD.de(this.serializer,T),V=u.getIndexManager(T),q=MD.de(T,this.serializer,V,u.referenceDelegate);return new IR(i,q,N,V).recalculateAndSaveOverlaysForDocumentKeys(new l0(t,Ms.ct),w).next()})})}}function DR(n){n.createObjectStore("targetDocuments",{keyPath:CT}).createIndex("documentTargetsIndex",s0,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",qo,{unique:!0}),n.createObjectStore("targetGlobal")}const iS="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class sS{constructor(e,t,r,i,u,c,m,w,D,T,N=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=u,this.window=c,this.document=m,this.ri=D,this.oi=T,this.ui=N,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=V=>Promise.resolve(),!sS.D())throw new Ae(ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new h1(this,i),this.di=t+"main",this.serializer=new ZM(w),this.wi=new lo(this.di,this.ui,new D1(this.serializer)),this.Bs=new c1(this.referenceDelegate,this.serializer),this.remoteDocumentCache=_R(this.serializer),this.qs=new e1,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===T&&Er("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ae(ce.FAILED_PRECONDITION,iS);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Ms(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,me.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,me.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,me.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>OD(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Du(e))return Ue("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ue("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return k0(e).get("owner").next(t=>ee.resolve(this.Ri(t)))}Pi(e){return OD(e).delete(this.clientId)}bi(){var e=this;return(0,me.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Lr(r,"clientMetadata");return i.j().next(u=>{const c=e.Si(u,18e5),m=u.filter(w=>-1===c.indexOf(w));return ee.forEach(m,w=>i.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?ee.resolve(!0):k0(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Ae(ce.FAILED_PRECONDITION,iS);return!1}}return!(!this.networkEnabled||!this.inForeground)||OD(e).j().next(r=>void 0===this.Si(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Ue("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,me.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new l0(t,Ms.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>OD(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return MD.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new u1(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return bD.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){Ue("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",u=15===(c=this.ui)?ZI:14===c?c0:13===c?KI:12===c?WI:11===c?u0:void it();var c;let m;return this.wi.runTransaction(e,i,u,w=>(m=new l0(w,this.Os?this.Os.next():Ms.ct),"readwrite-primary"===t?this.Ti(m).next(D=>!!D||this.Ei(m)).next(D=>{if(!D)throw Er(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Ae(ce.FAILED_PRECONDITION,vT);return r(m)}).next(D=>this.vi(m).next(()=>D)):this.Oi(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}Oi(e){return k0(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ae(ce.FAILED_PRECONDITION,iS)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return k0(e).put("owner",t)}static D(){return lo.D()}Ai(e){const t=k0(e);return t.get("owner").next(r=>this.Ri(r)?(Ue("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ee.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Er(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,Gt.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Ue("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Er("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Er("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function k0(n){return Lr(n,"owner")}function OD(n){return Lr(n,"clientMetadata")}function oS(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class aS{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=Ce(),i=Ce();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}return new aS(e,t.fromCache,r,i)}}class CR{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(u=>u||this.Gi(e,t,i,r)).next(u=>u||this.Qi(e,t))}Ki(e,t){if(FT(t))return ee.resolve(null);let r=us(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=w0(t,null,"F"),r=us(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const c=Ce(...u);return this.Ui.getDocuments(e,c).next(m=>this.indexManager.getMinOffset(e,r).next(w=>{const D=this.ji(t,m);return this.zi(t,D,c,w.readTime)?this.Ki(e,w0(t,null,"F")):this.Wi(e,D,t,w)}))})))}Gi(e,t,r,i){return FT(t)||i.isEqual(Et.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(u=>{const c=this.ji(t,u);return this.zi(t,c,r,i)?this.Qi(e,t):(Xv()<=vu.in.DEBUG&&Ue("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),s(t)),this.Wi(e,c,t,yT(i,-1)))})}ji(e,t){let r=new xn(l(e));return t.forEach((i,u)=>{o(e,u)&&(r=r.add(u))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(i)>0)}Qi(e,t){return Xv()<=vu.in.DEBUG&&Ue("QueryEngine","Using full collection scan to execute query:",s(t)),this.Ui.getDocumentsMatchingQuery(e,t,co.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(u=>(t.forEach(c=>{u=u.insert(c.key,c)}),u))}}class C1{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new un(Vt),this.Yi=new g(u=>Mu(u),cg),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new IR(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function bR(n,e,t,r){return new C1(n,e,t,r)}function TR(n,e){return uS.apply(this,arguments)}function uS(){return uS=(0,me.Z)(function*(n,e){const t=Ye(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(u=>(i=u,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const c=[],m=[];let w=Ce();for(const D of i){c.push(D.batchId);for(const T of D.mutations)w=w.add(T.key)}for(const D of u){m.push(D.batchId);for(const T of D.mutations)w=w.add(T.key)}return t.localDocuments.getDocuments(r,w).next(D=>({er:D,removedBatchIds:c,addedBatchIds:m}))})})}),uS.apply(this,arguments)}function SR(n){const e=Ye(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function AR(n,e,t){let r=Ce(),i=Ce();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let c=I();return t.forEach((m,w)=>{const D=u.get(m);w.isFoundDocument()!==D.isFoundDocument()&&(i=i.add(m)),w.isNoDocument()&&w.version.isEqual(Et.min())?(e.removeEntry(m,w.readTime),c=c.insert(m,w)):!D.isValidDocument()||w.version.compareTo(D.version)>0||0===w.version.compareTo(D.version)&&D.hasPendingWrites?(e.addEntry(w),c=c.insert(m,w)):Ue("LocalStore","Ignoring outdated watch update for ",m,". Current version:",D.version," Watch version:",w.version)}),{nr:c,sr:i}})}function S1(n,e){const t=Ye(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Fy(n,e){const t=Ye(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(u=>u?(i=u,ee.resolve(i)):t.Bs.allocateTargetId(r).next(c=>(i=new hd(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function Ly(n,e,t){return cS.apply(this,arguments)}function cS(){return cS=(0,me.Z)(function*(n,e,t){const r=Ye(n),i=r.Ji.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!Du(c))throw c;Ue("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),cS.apply(this,arguments)}function kD(n,e,t){const r=Ye(n);let i=Et.min(),u=Ce();return r.persistence.runTransaction("Execute query","readonly",c=>function(m,w,D){const T=Ye(m),N=T.Yi.get(D);return void 0!==N?ee.resolve(T.Ji.get(N)):T.Bs.getTargetData(w,D)}(r,c,us(e)).next(m=>{if(m)return i=m.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(c,m.targetId).next(w=>{u=w})}).next(()=>r.Hi.getDocumentsMatchingQuery(c,e,t?i:Et.min(),t?u:Ce())).next(m=>(RR(r,a(e),m),{documents:m,ir:u})))}function xR(n,e){const t=Ye(n),r=Ye(t.Bs),i=t.Ji.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",u=>r.le(u,e).next(c=>c?c.target:null))}function MR(n,e){const t=Ye(n),r=t.Xi.get(e)||Et.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Zi.getAllFromCollectionGroup(i,e,yT(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(RR(t,e,i),i))}function RR(n,e,t){let r=n.Xi.get(e)||Et.min();t.forEach((i,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Xi.set(e,r)}function lS(){return lS=(0,me.Z)(function*(n,e,t,r){const i=Ye(n);let u=Ce(),c=I();for(const D of t){const T=e.rr(D.metadata.name);D.document&&(u=u.add(T));const N=e.ur(D);N.setReadTime(e.cr(D.metadata.readTime)),c=c.insert(T,N)}const m=i.Zi.newChangeBuffer({trackRemovals:!0}),w=yield Fy(i,(D=r,us(lg(sn.fromString(`__bundle__/docs/${D}`)))));var D;return i.persistence.runTransaction("Apply bundle documents","readwrite",D=>AR(D,m,c).next(T=>(m.apply(D),T)).next(T=>i.Bs.removeMatchingKeysForTargetId(D,w.targetId).next(()=>i.Bs.addMatchingKeys(D,u,w.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(D,T.nr,T.sr)).next(()=>T.nr)))}),lS.apply(this,arguments)}function x1(n,e){return dS.apply(this,arguments)}function dS(){return dS=(0,me.Z)(function*(n,e,t=Ce()){const r=yield Fy(n,us(ZT(e.bundledQuery))),i=Ye(n);return i.persistence.runTransaction("Save named query","readwrite",u=>{const c=Br(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.qs.saveNamedQuery(u,e);const m=r.withResumeToken(Ur.EMPTY_BYTE_STRING,c);return i.Ji=i.Ji.insert(m.targetId,m),i.Bs.updateTargetData(u,m).next(()=>i.Bs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>i.Bs.addMatchingKeys(u,t,r.targetId)).next(()=>i.qs.saveNamedQuery(u,e))})}),dS.apply(this,arguments)}function NR(n,e){return`firestore_clients_${n}_${e}`}function PR(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function hS(n,e){return`firestore_targets_${n}_${e}`}class FD{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static ar(e,t,r){const i=JSON.parse(r);let u,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(u=new Ae(i.error.code,i.error.message))),c?new FD(e,t,i.state,u):(Er("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class F0{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let i,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(i=new Ae(r.error.code,r.error.message))),u?new F0(e,r.state,i):(Er("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class LD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,u=At();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=HI(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return i?new LD(e,u):(Er("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class fS{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new fS(t.clientId,t.onlineState):(Er("SharedClientState",`Failed to parse online state: ${e}`),null)}}class pS{constructor(){this.activeTargetIds=At()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class gS{constructor(e,t,r,i,u){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new un(Vt),this.started=!1,this.yr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.pr=NR(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new pS),this.Tr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,me.Z)(function*(){const t=yield e.syncEngine.$i();for(const i of t){if(i===e.wr)continue;const u=e.getItem(NR(e.persistenceKey,i));if(u){const c=LD.ar(i,u);c&&(e.gr=e.gr.insert(c.clientId,c))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const i=e.br(r);i&&e.Vr(i)}for(const i of e.yr)e.mr(i);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(hS(this.persistenceKey,e));if(r){const i=F0.ar(e,r);i&&(t=i.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(hS(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Cr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ue("SharedClientState","READ",e,t),t}setItem(e,t){Ue("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ue("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ue("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void Er("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,me.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const i=t.Or(r.key);return t.Fr(i,null)}{const i=t.Br(r.key,r.newValue);if(i)return t.Fr(i.clientId,i)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const i=t.Lr(r.key,r.newValue);if(i)return t.qr(i)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const i=t.Ur(r.key,r.newValue);if(i)return t.Kr(i)}}else if(r.key===t.vr){if(null!==r.newValue){const i=t.br(r.newValue);if(i)return t.Vr(i)}}else if(r.key===t.Ir){const i=function(u){let c=Ms.ct;if(null!=u)try{const m=JSON.parse(u);vt("number"==typeof m),c=m}catch(m){Er("SharedClientState","Failed to read sequence number from WebStorage",m)}return c}(r.newValue);i!==Ms.ct&&t.sequenceNumberHandler(i)}else if(r.key===t.Rr){const i=t.Gr(r.newValue);yield Promise.all(i.map(u=>t.syncEngine.Qr(u)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const i=new FD(this.currentUser,e,t,r),u=PR(this.persistenceKey,this.currentUser,e);this.setItem(u,i.hr())}Cr(e){const t=PR(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const i=hS(this.persistenceKey,e),u=new F0(e,t,r);this.setItem(i,u.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return LD.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),i=Number(r[1]);return FD.ar(new ur(void 0!==r[2]?r[2]:null),i,t)}Ur(e,t){const r=this.Ar.exec(e),i=Number(r[1]);return F0.ar(i,t)}br(e){return fS.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,me.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Ue("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),u=this.Sr(r),c=[],m=[];return u.forEach(w=>{i.has(w)||c.push(w)}),i.forEach(w=>{u.has(w)||m.push(w)}),this.syncEngine.Wr(c,m).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=At();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class OR{constructor(){this.Hr=new pS,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new pS,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class M1{Yr(e){}shutdown(){}}class kR{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Ue("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Ue("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let VD=null;function mS(){return null===VD?VD=268435456+Math.round(2147483648*Math.random()):VD++,"0x"+VD.toString(16)}const R1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class N1{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const ls="WebChannelConnection";class P1 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,u){const c=mS(),m=this.To(e,t);Ue("RestConnection",`Sending RPC '${e}' ${c}:`,m,r);const w={};return this.Eo(w,i,u),this.Ao(e,m,w,r).then(D=>(Ue("RestConnection",`Received RPC '${e}' ${c}: `,D),D),D=>{throw uo("RestConnection",`RPC '${e}' ${c} failed with error: `,D,"url: ",m,"request:",r),D})}vo(e,t,r,i,u,c){return this.Io(e,t,r,i,u)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+zh,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,u)=>e[u]=i),r&&r.headers.forEach((i,u)=>e[u]=i)}To(e,t){return`${this.mo}/v1/${t}:${R1[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const u=mS();return new Promise((c,m)=>{const w=new nM;w.setWithCredentials(!0),w.listenOnce(hT.COMPLETE,()=>{try{switch(w.getLastErrorCode()){case fy.NO_ERROR:const T=w.getResponseJson();Ue(ls,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(T)),c(T);break;case fy.TIMEOUT:Ue(ls,`RPC '${e}' ${u} timed out`),m(new Ae(ce.DEADLINE_EXCEEDED,"Request time out"));break;case fy.HTTP_ERROR:const N=w.getStatus();if(Ue(ls,`RPC '${e}' ${u} failed with status:`,N,"response text:",w.getResponseText()),N>0){let V=w.getResponseJson();Array.isArray(V)&&(V=V[0]);const q=V?.error;if(q&&q.status&&q.message){const ue=function(xe){const De=xe.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(De)>=0?De:ce.UNKNOWN}(q.status);m(new Ae(ue,q.message))}else m(new Ae(ce.UNKNOWN,"Server responded with status "+w.getStatus()))}else m(new Ae(ce.UNAVAILABLE,"Connection failed."));break;default:it()}}finally{Ue(ls,`RPC '${e}' ${u} completed.`)}});const D=JSON.stringify(i);Ue(ls,`RPC '${e}' ${u} sending request:`,i),w.send(t,"POST",D,r,15)})}Ro(e,t,r){const i=mS(),u=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=OI(),m=dT(),w={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},D=this.longPollingOptions.timeoutSeconds;void 0!==D&&(w.longPollingTimeout=Math.round(1e3*D)),this.useFetchStreams&&(w.xmlHttpFactory=new fT({})),this.Eo(w.initMessageHeaders,t,r),w.encodeInitMessageHeaders=!0;const T=u.join("");Ue(ls,`Creating RPC '${e}' stream ${i}: ${T}`,w);const N=c.createWebChannel(T,w);let V=!1,q=!1;const ue=new N1({ro:De=>{q?Ue(ls,`Not sending because RPC '${e}' stream ${i} is closed:`,De):(V||(Ue(ls,`Opening RPC '${e}' stream ${i} transport.`),N.open(),V=!0),Ue(ls,`RPC '${e}' stream ${i} sending:`,De),N.send(De))},oo:()=>N.close()}),xe=(De,ft,gt)=>{De.listen(ft,et=>{try{gt(et)}catch(dt){setTimeout(()=>{throw dt},0)}})};return xe(N,py.EventType.OPEN,()=>{q||Ue(ls,`RPC '${e}' stream ${i} transport opened.`)}),xe(N,py.EventType.CLOSE,()=>{q||(q=!0,Ue(ls,`RPC '${e}' stream ${i} transport closed`),ue.wo())}),xe(N,py.EventType.ERROR,De=>{q||(q=!0,uo(ls,`RPC '${e}' stream ${i} transport errored:`,De),ue.wo(new Ae(ce.UNAVAILABLE,"The operation could not be completed")))}),xe(N,py.EventType.MESSAGE,De=>{var ft;if(!q){const gt=De.data[0];vt(!!gt);const dt=gt.error||(null===(ft=gt[0])||void 0===ft?void 0:ft.error);if(dt){Ue(ls,`RPC '${e}' stream ${i} received error:`,dt);const Ot=dt.status;let Wt=function(Ko){const e_=Xr[Ko];if(void 0!==e_)return xM(e_)}(Ot),Jr=dt.message;void 0===Wt&&(Wt=ce.INTERNAL,Jr="Unknown error status: "+Ot+" with message "+dt.message),q=!0,ue.wo(new Ae(Wt,Jr)),N.close()}else Ue(ls,`RPC '${e}' stream ${i} received:`,gt),ue._o(gt)}}),xe(m,zi.STAT_EVENT,De=>{De.stat===sd.PROXY?Ue(ls,`RPC '${e}' stream ${i} detected buffering proxy`):De.stat===sd.NOPROXY&&Ue(ls,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{ue.fo()},0),ue}}function FR(){return typeof window<"u"?window:null}function UD(){return typeof document<"u"?document:null}function L0(n){return new HO(n,!0)}class yS{constructor(e,t,r=1e3,i=1.5,u=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=u,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&Ue("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class LR{constructor(e,t,r,i,u,c,m,w){this.ii=e,this.$o=r,this.Oo=i,this.connection=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new yS(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,me.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,me.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,me.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(Er(t.toString()),Er("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===ce.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new Ae(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,me.Z)(function*(){e.state=0,e.start()}))}tu(e){return Ue("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Ue("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class O1 extends LR{constructor(e,t,r,i,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.serializer=u}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function qO(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:it(),i=e.targetChange.targetIds||[],u=function(w,D){return w.useProto3Json?(vt(void 0===D||"string"==typeof D),Ur.fromBase64String(D||"")):(vt(void 0===D||D instanceof Uint8Array),Ur.fromUint8Array(D||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,m=c&&function(w){const D=void 0===w.code?ce.UNKNOWN:xM(w.code);return new Ae(D,w.message||"")}(c);t=new OM(r,i,u,m||null)}else if("documentChange"in e){const r=e.documentChange,i=$c(n,r.document.name),u=Br(r.document.updateTime),c=r.document.createTime?Br(r.document.createTime):Et.min(),m=new di({mapValue:{fields:r.document.fields}}),w=Mn.newFoundDocument(i,u,c,m);t=new DD(r.targetIds||[],r.removedTargetIds||[],w.key,w)}else if("documentDelete"in e){const r=e.documentDelete,i=$c(n,r.document),u=r.readTime?Br(r.readTime):Et.min(),c=Mn.newNoDocument(i,u);t=new DD([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=$c(n,r.document);t=new DD([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return it();{const r=e.filter,{count:i=0,unchangedNames:u}=r,c=new LO(i,u);t=new PM(r.targetId,c)}}var w;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return Et.min();const u=i.targetChange;return u.targetIds&&u.targetIds.length?Et.min():u.readTime?Br(u.readTime):Et.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=S0(this.serializer),t.addTarget=function(i,u){let c;const m=u.target;if(c=Sy(m)?{documents:GM(i,m)}:{query:KT(i,m)},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){c.resumeToken=VM(i,u.resumeToken);const w=GT(i,u.expectedCount);null!==w&&(c.expectedCount=w)}else if(u.snapshotVersion.compareTo(Et.min())>0){c.readTime=Ny(i,u.snapshotVersion.toTimestamp());const w=GT(i,u.expectedCount);null!==w&&(c.expectedCount=w)}return c}(this.serializer,e);const r=function KO(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return it()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=S0(this.serializer),t.removeTarget=e,this.Wo(t)}}class k1 extends LR{constructor(e,t,r,i,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.serializer=u,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(vt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function WO(n,e){return n&&n.length>0?(vt(void 0!==e),n.map(t=>function(r,i){let u=Br(r.updateTime?r.updateTime:i);return u.isEqual(Et.min())&&(u=Br(i)),new PO(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Br(e.commitTime);return this.listener.cu(r,t)}return vt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=S0(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>A0(this.serializer,r))};this.Wo(t)}}class F1 extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new Ae(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.connection.Io(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ae(ce.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,c])=>this.connection.vo(e,t,r,u,c,i)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ae(ce.UNKNOWN,u.toString())})}terminate(){this.lu=!0}}class V1{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Er(t),this.mu=!1):Ue("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class U1{constructor(e,t,r,i,u){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=u,this.Pu.Yr(m=>{r.enqueueAndForget((0,me.Z)(function*(){var w;nf(c)&&(Ue("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,me.Z)(function*(D){const T=Ye(D);T.vu.add(4),yield Vy(T),T.bu.set("Unknown"),T.vu.delete(4),yield V0(T)}),function(D){return w.apply(this,arguments)})(c))}))}),this.bu=new V1(r,i)}}function V0(n){return vS.apply(this,arguments)}function vS(){return vS=(0,me.Z)(function*(n){if(nf(n))for(const e of n.Ru)yield e(!0)}),vS.apply(this,arguments)}function Vy(n){return wS.apply(this,arguments)}function wS(){return wS=(0,me.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),wS.apply(this,arguments)}function BD(n,e){const t=Ye(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),DS(t)?IS(t):By(t).Ko()&&ES(t,e))}function U0(n,e){const t=Ye(n),r=By(t);t.Au.delete(e),r.Ko()&&VR(t,e),0===t.Au.size&&(r.Ko()?r.jo():nf(t)&&t.bu.set("Unknown"))}function ES(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Et.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}By(n).su(e)}function VR(n,e){n.Vu.qt(e),By(n).iu(e)}function IS(n){n.Vu=new UO({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),By(n).start(),n.bu.gu()}function DS(n){return nf(n)&&!By(n).Uo()&&n.Au.size>0}function nf(n){return 0===Ye(n).vu.size}function UR(n){n.Vu=void 0}function B1(n){return CS.apply(this,arguments)}function CS(){return CS=(0,me.Z)(function*(n){n.Au.forEach((e,t)=>{ES(n,e)})}),CS.apply(this,arguments)}function j1(n,e){return bS.apply(this,arguments)}function bS(){return bS=(0,me.Z)(function*(n,e){UR(n),DS(n)?(n.bu.Iu(e),IS(n)):n.bu.set("Unknown")}),bS.apply(this,arguments)}function $1(n,e,t){return TS.apply(this,arguments)}function TS(){return TS=(0,me.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof OM&&2===e.state&&e.cause)try{yield(r=(0,me.Z)(function*(i,u){const c=u.cause;for(const m of u.targetIds)i.Au.has(m)&&(yield i.remoteSyncer.rejectListen(m,c),i.Au.delete(m),i.Vu.removeTarget(m))}),function(i,u){return r.apply(this,arguments)})(n,e)}catch(r){Ue("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield jD(n,r)}else if(e instanceof DD?n.Vu.Ht(e):e instanceof PM?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(Et.min()))try{const r=yield SR(n.localStore);t.compareTo(r)>=0&&(yield function(i,u){const c=i.Vu.ce(u);return c.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const D=i.Au.get(w);D&&i.Au.set(w,D.withResumeToken(m.resumeToken,u))}}),c.targetMismatches.forEach((m,w)=>{const D=i.Au.get(m);if(!D)return;i.Au.set(m,D.withResumeToken(Ur.EMPTY_BYTE_STRING,D.snapshotVersion)),VR(i,m);const T=new hd(D.target,m,w,D.sequenceNumber);ES(i,T)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Ue("RemoteStore","Failed to raise snapshot:",r),yield jD(n,r)}var r}),TS.apply(this,arguments)}function jD(n,e,t){return SS.apply(this,arguments)}function SS(){return SS=(0,me.Z)(function*(n,e,t){if(!Du(e))throw e;n.vu.add(1),yield Vy(n),n.bu.set("Offline"),t||(t=()=>SR(n.localStore)),n.asyncQueue.enqueueRetryable((0,me.Z)(function*(){Ue("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield V0(n)}))}),SS.apply(this,arguments)}function BR(n,e){return e().catch(t=>jD(n,t,e))}function Uy(n){return AS.apply(this,arguments)}function AS(){return AS=(0,me.Z)(function*(n){const e=Ye(n),t=rf(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;H1(e);)try{const i=yield S1(e.localStore,r);if(null===i){0===e.Eu.length&&t.jo();break}r=i.batchId,G1(e,i)}catch(i){yield jD(e,i)}jR(e)&&$R(e)}),AS.apply(this,arguments)}function H1(n){return nf(n)&&n.Eu.length<10}function G1(n,e){n.Eu.push(e);const t=rf(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function jR(n){return nf(n)&&!rf(n).Uo()&&n.Eu.length>0}function $R(n){rf(n).start()}function z1(n){return xS.apply(this,arguments)}function xS(){return xS=(0,me.Z)(function*(n){rf(n).hu()}),xS.apply(this,arguments)}function q1(n){return MS.apply(this,arguments)}function MS(){return MS=(0,me.Z)(function*(n){const e=rf(n);for(const t of n.Eu)e.uu(t.mutations)}),MS.apply(this,arguments)}function W1(n,e,t){return RS.apply(this,arguments)}function RS(){return RS=(0,me.Z)(function*(n,e,t){const r=n.Eu.shift(),i=BT.from(r,e,t);yield BR(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Uy(n)}),RS.apply(this,arguments)}function K1(n,e){return NS.apply(this,arguments)}function NS(){return NS=(0,me.Z)(function*(n,e){var t;e&&rf(n).ou&&(yield(t=(0,me.Z)(function*(r,i){if(AM(u=i.code)&&u!==ce.ABORTED){const c=r.Eu.shift();rf(r).Qo(),yield BR(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield Uy(r)}var u}),function(r,i){return t.apply(this,arguments)})(n,e)),jR(n)&&$R(n)}),NS.apply(this,arguments)}function HR(n,e){return PS.apply(this,arguments)}function PS(){return PS=(0,me.Z)(function*(n,e){const t=Ye(n);t.asyncQueue.verifyOperationInProgress(),Ue("RemoteStore","RemoteStore received new credentials");const r=nf(t);t.vu.add(3),yield Vy(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield V0(t)}),PS.apply(this,arguments)}function OS(n,e){return kS.apply(this,arguments)}function kS(){return kS=(0,me.Z)(function*(n,e){const t=Ye(n);e?(t.vu.delete(2),yield V0(t)):e||(t.vu.add(2),yield Vy(t),t.bu.set("Unknown"))}),kS.apply(this,arguments)}function By(n){return n.Su||(n.Su=function(e,t,r){const i=Ye(e);return i.fu(),new O1(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:B1.bind(null,n),ao:j1.bind(null,n),nu:$1.bind(null,n)}),n.Ru.push(function(){var e=(0,me.Z)(function*(t){t?(n.Su.Qo(),DS(n)?IS(n):n.bu.set("Unknown")):(yield n.Su.stop(),UR(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function rf(n){return n.Du||(n.Du=function(e,t,r){const i=Ye(e);return i.fu(),new k1(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:z1.bind(null,n),ao:K1.bind(null,n),au:q1.bind(null,n),cu:W1.bind(null,n)}),n.Ru.push(function(){var e=(0,me.Z)(function*(t){t?(n.Du.Qo(),yield Uy(n)):(yield n.Du.stop(),n.Eu.length>0&&(Ue("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class FS{constructor(e,t,r,i,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=u,this.deferred=new Fr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,u){const c=Date.now()+r,m=new FS(e,t,c,i,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ae(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jy(n,e){if(Er("AsyncQueue",`${e}: ${n}`),Du(n))return new Ae(ce.UNAVAILABLE,`${e}: ${n}`);throw n}class $y{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ze.comparator(t.key,r.key):(t,r)=>Ze.comparator(t.key,r.key),this.keyedMap=x(),this.sortedSet=new un(this.comparator)}static emptySet(e){return new $y(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof $y)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(!i.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new $y;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class GR{constructor(){this.Cu=new un(Ze.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):it():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Hy{constructor(e,t,r,i,u,c,m,w,D){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=m,this.excludesMetadataChanges=w,this.hasCachedResults=D}static fromInitialDocuments(e,t,r,i,u){const c=[];return t.forEach(m=>{c.push({type:0,doc:m})}),new Hy(e,t,$y.emptySet(t),c,r,i,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class Z1{constructor(){this.Nu=void 0,this.listeners=[]}}class Y1{constructor(){this.queries=new g(e=>LT(e),dg),this.onlineState="Unknown",this.ku=new Set}}function LS(n,e){return VS.apply(this,arguments)}function VS(){return VS=(0,me.Z)(function*(n,e){const t=Ye(n),r=e.query;let i=!1,u=t.queries.get(r);if(u||(i=!0,u=new Z1),i)try{u.Nu=yield t.onListen(r)}catch(c){const m=jy(c,`Initialization of query '${s(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.Mu(t.onlineState),u.Nu&&e.$u(u.Nu)&&jS(t)}),VS.apply(this,arguments)}function US(n,e){return BS.apply(this,arguments)}function BS(){return BS=(0,me.Z)(function*(n,e){const t=Ye(n),r=e.query;let i=!1;const u=t.queries.get(r);if(u){const c=u.listeners.indexOf(e);c>=0&&(u.listeners.splice(c,1),i=0===u.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),BS.apply(this,arguments)}function Q1(n,e){const t=Ye(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const m of c.listeners)m.$u(i)&&(r=!0);c.Nu=i}}r&&jS(t)}function X1(n,e,t){const r=Ye(n),i=r.queries.get(e);if(i)for(const u of i.listeners)u.onError(t);r.queries.delete(e)}function jS(n){n.ku.forEach(e=>{e.next()})}class $S{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Hy(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=Hy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class J1{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class zR{constructor(e){this.serializer=e}rr(e){return $c(this.serializer,e)}ur(e){return e.metadata.exists?HM(this.serializer,e.document,!1):Mn.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Br(e)}}class ek{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=qR(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=sn.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new zR(this.serializer);for(const i of e)if(i.metadata.queries){const u=r.rr(i.metadata.name);for(const c of i.metadata.queries){const m=(t.get(c)||Ce()).add(u);t.set(c,m)}}return t}complete(){var e=this;return(0,me.Z)(function*(){const t=yield function A1(n,e,t,r){return lS.apply(this,arguments)}(e.localStore,new zR(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const i of e.queries)yield x1(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function qR(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class WR{constructor(e){this.key=e}}class KR{constructor(e){this.key=e}}class ZR{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Ce(),this.mutatedKeys=Ce(),this.tc=l(e),this.ec=new $y(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new GR,i=t?t.ec:this.ec;let u=t?t.mutatedKeys:this.mutatedKeys,c=i,m=!1;const w="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,D="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((T,N)=>{const V=i.get(T),q=o(this.query,N)?N:null,ue=!!V&&this.mutatedKeys.has(V.key),xe=!!q&&(q.hasLocalMutations||this.mutatedKeys.has(q.key)&&q.hasCommittedMutations);let De=!1;V&&q?V.data.isEqual(q.data)?ue!==xe&&(r.track({type:3,doc:q}),De=!0):this.rc(V,q)||(r.track({type:2,doc:q}),De=!0,(w&&this.tc(q,w)>0||D&&this.tc(q,D)<0)&&(m=!0)):!V&&q?(r.track({type:0,doc:q}),De=!0):V&&!q&&(r.track({type:1,doc:V}),De=!0,(w||D)&&(m=!0)),De&&(q?(c=c.add(q),u=xe?u.add(T):u.delete(T)):(c=c.delete(T),u=u.delete(T)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const T="F"===this.query.limitType?c.last():c.first();c=c.delete(T.key),u=u.delete(T.key),r.track({type:1,doc:T})}return{ec:c,ic:r,zi:m,mutatedKeys:u}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const u=e.ic.xu();u.sort((D,T)=>function(N,V){const q=ue=>{switch(ue){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return it()}};return q(N)-q(V)}(D.type,T.type)||this.tc(D.doc,T.doc)),this.oc(r);const c=t?this.uc():[],m=0===this.Zu.size&&this.current?1:0,w=m!==this.Xu;return this.Xu=m,0!==u.length||w?{snapshot:new Hy(this.query,e.ec,i,u,e.mutatedKeys,0===m,w,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:c}:{cc:c}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new GR,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Ce(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new KR(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new WR(r))}),t}hc(e){this.Yu=e.ir,this.Zu=Ce();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Hy.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class tk{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class nk{constructor(e){this.key=e,this.fc=!1}}class rk{constructor(e,t,r,i,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.dc={},this.wc=new g(m=>LT(m),dg),this._c=new Map,this.mc=new Set,this.gc=new un(Ze.comparator),this.yc=new Map,this.Ic=new nS,this.Tc={},this.Ec=new Map,this.Ac=vg.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function ik(n,e){return HS.apply(this,arguments)}function HS(){return HS=(0,me.Z)(function*(n,e){const t=hA(n);let r,i;const u=t.wc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),i=u.view.lc();else{const c=yield Fy(t.localStore,us(e)),m=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield GS(t,e,r,"current"===m,c.resumeToken),t.isPrimaryClient&&BD(t.remoteStore,c)}return i}),HS.apply(this,arguments)}function GS(n,e,t,r,i){return zS.apply(this,arguments)}function zS(){return zS=(0,me.Z)(function*(n,e,t,r,i){n.Rc=(N,V,q)=>{return(ue=(0,me.Z)(function*(xe,De,ft,gt){let et=De.view.sc(ft);et.zi&&(et=yield kD(xe.localStore,De.query,!1).then(({documents:Wt})=>De.view.sc(Wt,et)));const dt=gt&&gt.targetChanges.get(De.targetId),Ot=De.view.applyChanges(et,xe.isPrimaryClient,dt);return tA(xe,De.targetId,Ot.cc),Ot.snapshot}),function(xe,De,ft,gt){return ue.apply(this,arguments)})(n,N,V,q);var ue};const u=yield kD(n.localStore,e,!0),c=new ZR(e,u.ir),m=c.sc(u.documents),w=b0.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),D=c.applyChanges(m,n.isPrimaryClient,w);tA(n,t,D.cc);const T=new tk(e,t,c);return n.wc.set(e,T),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),D.snapshot}),zS.apply(this,arguments)}function sk(n,e){return qS.apply(this,arguments)}function qS(){return qS=(0,me.Z)(function*(n,e){const t=Ye(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(u=>!dg(u,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Ly(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),U0(t.remoteStore,r.targetId),Gy(t,r.targetId)}).catch(ud))):(Gy(t,r.targetId),yield Ly(t.localStore,r.targetId,!0))}),qS.apply(this,arguments)}function WS(){return WS=(0,me.Z)(function*(n,e,t){const r=fA(n);try{const i=yield function(u,c){const m=Ye(u),w=Vn.now(),D=c.reduce((V,q)=>V.add(q.key),Ce());let T,N;return m.persistence.runTransaction("Locally write mutations","readwrite",V=>{let q=I(),ue=Ce();return m.Zi.getEntries(V,D).next(xe=>{q=xe,q.forEach((De,ft)=>{ft.isValidDocument()||(ue=ue.add(De))})}).next(()=>m.localDocuments.getOverlayedDocuments(V,q)).next(xe=>{T=xe;const De=[];for(const ft of c){const gt=kO(ft,T.get(ft.key).overlayedDocument);null!=gt&&De.push(new dd(ft.key,gt,oD(gt.value.mapValue),lr.exists(!0)))}return m.mutationQueue.addMutationBatch(V,w,De,c)}).next(xe=>{N=xe;const De=xe.applyToLocalDocumentSet(T,ue);return m.documentOverlayCache.saveOverlays(V,xe.batchId,De)})}).then(()=>({batchId:N.batchId,changes:R(T)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(u,c,m){let w=u.Tc[u.currentUser.toKey()];w||(w=new un(Vt)),w=w.insert(c,m),u.Tc[u.currentUser.toKey()]=w}(r,i.batchId,t),yield fd(r,i.changes),yield Uy(r.remoteStore)}catch(i){const u=jy(i,"Failed to persist write");t.reject(u)}}),WS.apply(this,arguments)}function YR(n,e){return KS.apply(this,arguments)}function KS(){return KS=(0,me.Z)(function*(n,e){const t=Ye(n);try{const r=yield function T1(n,e){const t=Ye(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const m=[];e.targetChanges.forEach((T,N)=>{const V=i.get(N);if(!V)return;m.push(t.Bs.removeMatchingKeys(u,T.removedDocuments,N).next(()=>t.Bs.addMatchingKeys(u,T.addedDocuments,N)));let q=V.withSequenceNumber(u.currentSequenceNumber);var ue,xe,De;null!==e.targetMismatches.get(N)?q=q.withResumeToken(Ur.EMPTY_BYTE_STRING,Et.min()).withLastLimboFreeSnapshotVersion(Et.min()):T.resumeToken.approximateByteSize()>0&&(q=q.withResumeToken(T.resumeToken,r)),i=i.insert(N,q),xe=q,De=T,(0===(ue=V).resumeToken.approximateByteSize()||xe.snapshotVersion.toMicroseconds()-ue.snapshotVersion.toMicroseconds()>=3e8||De.addedDocuments.size+De.modifiedDocuments.size+De.removedDocuments.size>0)&&m.push(t.Bs.updateTargetData(u,q))});let w=I(),D=Ce();if(e.documentUpdates.forEach(T=>{e.resolvedLimboDocuments.has(T)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,T))}),m.push(AR(u,c,e.documentUpdates).next(T=>{w=T.nr,D=T.sr})),!r.isEqual(Et.min())){const T=t.Bs.getLastRemoteSnapshotVersion(u).next(N=>t.Bs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(T)}return ee.waitFor(m).next(()=>c.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,w,D)).next(()=>w)}).then(u=>(t.Ji=i,u))}(t.localStore,e);e.targetChanges.forEach((i,u)=>{const c=t.yc.get(u);c&&(vt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.fc=!0:i.modifiedDocuments.size>0?vt(c.fc):i.removedDocuments.size>0&&(vt(c.fc),c.fc=!1))}),yield fd(t,r,e)}catch(r){yield ud(r)}}),KS.apply(this,arguments)}function QR(n,e,t){const r=Ye(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((u,c)=>{const m=c.view.Mu(e);m.snapshot&&i.push(m.snapshot)}),function(u,c){const m=Ye(u);m.onlineState=c;let w=!1;m.queries.forEach((D,T)=>{for(const N of T.listeners)N.Mu(c)&&(w=!0)}),w&&jS(m)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function ak(n,e,t){return ZS.apply(this,arguments)}function ZS(){return ZS=(0,me.Z)(function*(n,e,t){const r=Ye(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),u=i&&i.key;if(u){let c=new un(Ze.comparator);c=c.insert(u,Mn.newNoDocument(u,Et.min()));const m=Ce().add(u),w=new C0(Et.min(),new Map,new un(Vt),c,m);yield YR(r,w),r.gc=r.gc.remove(u),r.yc.delete(e),nA(r)}else yield Ly(r.localStore,e,!1).then(()=>Gy(r,e,t)).catch(ud)}),ZS.apply(this,arguments)}function uk(n,e){return YS.apply(this,arguments)}function YS(){return YS=(0,me.Z)(function*(n,e){const t=Ye(n),r=e.batch.batchId;try{const i=yield function b1(n,e){const t=Ye(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),u=t.Zi.newChangeBuffer({trackRemovals:!0});return function(c,m,w,D){const T=w.batch,N=T.keys();let V=ee.resolve();return N.forEach(q=>{V=V.next(()=>D.getEntry(m,q)).next(ue=>{const xe=w.docVersions.get(q);vt(null!==xe),ue.version.compareTo(xe)<0&&(T.applyToRemoteDocument(ue,w),ue.isValidDocument()&&(ue.setReadTime(w.commitVersion),D.addEntry(ue)))})}),V.next(()=>c.mutationQueue.removeMutationBatch(m,T))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let m=Ce();for(let w=0;w<c.mutationResults.length;++w)c.mutationResults[w].transformResults.length>0&&(m=m.add(c.batch.mutations[w].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);eA(t,r,null),JS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield fd(t,i)}catch(i){yield ud(i)}}),YS.apply(this,arguments)}function ck(n,e,t){return QS.apply(this,arguments)}function QS(){return QS=(0,me.Z)(function*(n,e,t){const r=Ye(n);try{const i=yield function(u,c){const m=Ye(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let D;return m.mutationQueue.lookupMutationBatch(w,c).next(T=>(vt(null!==T),D=T.keys(),m.mutationQueue.removeMutationBatch(w,T))).next(()=>m.mutationQueue.performConsistencyCheck(w)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(w,D,c)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,D)).next(()=>m.localDocuments.getDocuments(w,D))})}(r.localStore,e);eA(r,e,t),JS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield fd(r,i)}catch(i){yield ud(i)}}),QS.apply(this,arguments)}function XS(){return XS=(0,me.Z)(function*(n,e){const t=Ye(n);nf(t.remoteStore)||Ue("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const c=Ye(u);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>c.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ec.get(r)||[];i.push(e),t.Ec.set(r,i)}catch(r){const i=jy(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),XS.apply(this,arguments)}function JS(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function eA(n,e,t){const r=Ye(n);let i=r.Tc[r.currentUser.toKey()];if(i){const u=i.get(e);u&&(t?u.reject(t):u.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function Gy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||XR(n,r)})}function XR(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(U0(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),nA(n))}function tA(n,e,t){for(const r of t)r instanceof WR?(n.Ic.addReference(r.key,e),dk(n,r)):r instanceof KR?(Ue("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||XR(n,r.key)):it()}function dk(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Ue("SyncEngine","New document in limbo: "+t),n.mc.add(r),nA(n))}function nA(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new Ze(sn.fromString(e)),r=n.Ac.next();n.yc.set(r,new nk(t)),n.gc=n.gc.insert(t,r),BD(n.remoteStore,new hd(us(lg(t.path)),r,"TargetPurposeLimboResolution",Ms.ct))}}function fd(n,e,t){return rA.apply(this,arguments)}function rA(){return rA=(0,me.Z)(function*(n,e,t){const r=Ye(n),i=[],u=[],c=[];var m;r.wc.isEmpty()||(r.wc.forEach((m,w)=>{c.push(r.Rc(w,e,t).then(D=>{if((D||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,D?.fromCache?"not-current":"current"),D){i.push(D);const T=aS.Li(w.targetId,D);u.push(T)}}))}),yield Promise.all(c),r.dc.nu(i),yield(m=(0,me.Z)(function*(w,D){const T=Ye(w);try{yield T.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>ee.forEach(D,V=>ee.forEach(V.Fi,q=>T.persistence.referenceDelegate.addReference(N,V.targetId,q)).next(()=>ee.forEach(V.Bi,q=>T.persistence.referenceDelegate.removeReference(N,V.targetId,q)))))}catch(N){if(!Du(N))throw N;Ue("LocalStore","Failed to update sequence numbers: "+N)}for(const N of D){const V=N.targetId;if(!N.fromCache){const q=T.Ji.get(V),xe=q.withLastLimboFreeSnapshotVersion(q.snapshotVersion);T.Ji=T.Ji.insert(V,xe)}}}),function(w,D){return m.apply(this,arguments)})(r.localStore,u))}),rA.apply(this,arguments)}function hk(n,e){return iA.apply(this,arguments)}function iA(){return iA=(0,me.Z)(function*(n,e){const t=Ye(n);if(!t.currentUser.isEqual(e)){Ue("SyncEngine","User change. New user:",e.toKey());const r=yield TR(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(c=>{c.forEach(m=>{m.reject(new Ae(ce.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield fd(t,r.er)}var i}),iA.apply(this,arguments)}function fk(n,e){const t=Ye(n),r=t.yc.get(e);if(r&&r.fc)return Ce().add(r.key);{let i=Ce();const u=t._c.get(e);if(!u)return i;for(const c of u){const m=t.wc.get(c);i=i.unionWith(m.view.nc)}return i}}function pk(n,e){return sA.apply(this,arguments)}function sA(){return sA=(0,me.Z)(function*(n,e){const t=Ye(n),r=yield kD(t.localStore,e.query,!0),i=e.view.hc(r);return t.isPrimaryClient&&tA(t,e.targetId,i.cc),i}),sA.apply(this,arguments)}function gk(n,e){return oA.apply(this,arguments)}function oA(){return oA=(0,me.Z)(function*(n,e){const t=Ye(n);return MR(t.localStore,e).then(r=>fd(t,r))}),oA.apply(this,arguments)}function mk(n,e,t,r){return aA.apply(this,arguments)}function aA(){return aA=(0,me.Z)(function*(n,e,t,r){const i=Ye(n),u=yield function(c,m){const w=Ye(c),D=Ye(w.mutationQueue);return w.persistence.runTransaction("Lookup mutation documents","readonly",T=>D.Sn(T,m).next(N=>N?w.localDocuments.getDocuments(T,N):ee.resolve(null)))}(i.localStore,e);var m;null!==u?("pending"===t?yield Uy(i.remoteStore):"acknowledged"===t||"rejected"===t?(eA(i,e,r||null),JS(i,e),m=e,Ye(Ye(i.localStore).mutationQueue).Cn(m)):it(),yield fd(i,u)):Ue("SyncEngine","Cannot apply mutation batch with id: "+e)}),aA.apply(this,arguments)}function uA(){return uA=(0,me.Z)(function*(n,e){const t=Ye(n);if(hA(t),fA(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield JR(t,r.toArray());t.vc=!0,yield OS(t.remoteStore,!0);for(const u of i)BD(t.remoteStore,u)}else if(!1===e&&!1!==t.vc){const r=[];let i=Promise.resolve();t._c.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(Gy(t,c),Ly(t.localStore,c,!0))),U0(t.remoteStore,c)}),yield i,yield JR(t,r),function(u){const c=Ye(u);c.yc.forEach((m,w)=>{U0(c.remoteStore,w)}),c.Ic.Ts(),c.yc=new Map,c.gc=new un(Ze.comparator)}(t),t.vc=!1,yield OS(t.remoteStore,!1)}}),uA.apply(this,arguments)}function JR(n,e,t){return cA.apply(this,arguments)}function cA(){return cA=(0,me.Z)(function*(n,e,t){const r=Ye(n),i=[],u=[];for(const c of e){let m;const w=r._c.get(c);if(w&&0!==w.length){m=yield Fy(r.localStore,us(w[0]));for(const D of w){const T=r.wc.get(D),N=yield pk(r,T);N.snapshot&&u.push(N.snapshot)}}else{const D=yield xR(r.localStore,c);m=yield Fy(r.localStore,D),yield GS(r,eN(D),c,!1,m.resumeToken)}i.push(m)}return r.dc.nu(u),i}),cA.apply(this,arguments)}function eN(n){return yD(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function _k(n){const e=Ye(n);return Ye(Ye(e.localStore).persistence).$i()}function vk(n,e,t,r){return lA.apply(this,arguments)}function lA(){return lA=(0,me.Z)(function*(n,e,t,r){const i=Ye(n);if(i.vc)return void Ue("SyncEngine","Ignoring unexpected query state notification.");const u=i._c.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=yield MR(i.localStore,a(u[0])),m=C0.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Ur.EMPTY_BYTE_STRING);yield fd(i,c,m);break}case"rejected":yield Ly(i.localStore,e,!0),Gy(i,e,r);break;default:it()}}),lA.apply(this,arguments)}function wk(n,e,t){return dA.apply(this,arguments)}function dA(){return dA=(0,me.Z)(function*(n,e,t){const r=hA(n);if(r.vc){for(const i of e){if(r._c.has(i)){Ue("SyncEngine","Adding an already active target "+i);continue}const u=yield xR(r.localStore,i),c=yield Fy(r.localStore,u);yield GS(r,eN(u),c.targetId,!1,c.resumeToken),BD(r.remoteStore,c)}for(const i of t)r._c.has(i)&&(yield Ly(r.localStore,i,!1).then(()=>{U0(r.remoteStore,i),Gy(r,i)}).catch(ud))}}),dA.apply(this,arguments)}function hA(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=YR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ak.bind(null,e),e.dc.nu=Q1.bind(null,e.eventManager),e.dc.Pc=X1.bind(null,e.eventManager),e}function fA(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ck.bind(null,e),e}class B0{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,me.Z)(function*(){t.serializer=L0(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return bR(this.persistence,new CR,e.initialUser,this.serializer)}createPersistence(e){return new rS(ND.zs,this.serializer)}createSharedClientState(e){return new OR}terminate(){var e=this;return(0,me.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class pA extends B0{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield fA(r.Vc.syncEngine),yield Uy(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return bR(this.persistence,new CR,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new gR(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new lM(t,this.persistence);return new cM(e.asyncQueue,r)}createPersistence(e){const t=oS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?cs.withCacheSize(this.cacheSizeBytes):cs.DEFAULT;return new sS(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,FR(),UD(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new OR}}class tN extends pA{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e);const i=r.Vc.syncEngine;r.sharedClientState instanceof gS&&(r.sharedClientState.syncEngine={jr:mk.bind(null,i),zr:vk.bind(null,i),Wr:wk.bind(null,i),$i:_k.bind(null,i),Qr:gk.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var u=(0,me.Z)(function*(c){yield function yk(n,e){return uA.apply(this,arguments)}(r.Vc.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return u.apply(this,arguments)}}())})()}createSharedClientState(e){const t=FR();if(!gS.D(t))throw new Ae(ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=oS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new gS(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class zy{initialize(e,t){var r=this;return(0,me.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>QR(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=hk.bind(null,r.syncEngine),yield OS(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Y1}createDatastore(e){const t=L0(e.databaseInfo.databaseId),r=new P1(e.databaseInfo);return new F1(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,u=m=>QR(this.syncEngine,m,0),c=kR.D()?new kR:new M1,new U1(t,r,i,u,c);var t,r,i,u,c}createSyncEngine(e,t){return function(r,i,u,c,m,w,D){const T=new rk(r,i,u,c,m,w);return D&&(T.vc=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,me.Z)(function*(t){const r=Ye(t);Ue("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield Vy(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function nN(n,e=10240){let t=0;return{read:()=>(0,me.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,me.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class $D{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Er("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Dk{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Fr,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,me.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,me.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,me.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),i=Number(r);isNaN(i)&&e.Mc(`length string (${r}) is not valid number`);const u=yield e.$c(i);return new J1(JSON.parse(u),t.length+i)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,me.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,me.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,me.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Ck{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,me.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ae(ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,me.Z)(function*(u,c){const m=Ye(u),w=S0(m.serializer)+"/documents",D={documents:c.map(q=>T0(m.serializer,q))},T=yield m.vo("BatchGetDocuments",w,D,c.length),N=new Map;T.forEach(q=>{const ue=function zO(n,e){return"found"in e?function(t,r){vt(!!r.found);const i=$c(t,r.found.name),u=Br(r.found.updateTime),c=r.found.createTime?Br(r.found.createTime):Et.min(),m=new di({mapValue:{fields:r.found.fields}});return Mn.newFoundDocument(i,u,c,m)}(n,e):"missing"in e?function(t,r){vt(!!r.missing),vt(!!r.readTime);const i=$c(t,r.missing),u=Br(r.readTime);return Mn.newNoDocument(i,u)}(n,e):it()}(m.serializer,q);N.set(ue.key.toString(),ue)});const V=[];return c.forEach(q=>{const ue=N.get(q.toString());vt(!!ue),V.push(ue)}),V}),function(u,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ry(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,me.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const u=Ze.fromPath(i);e.mutations.push(new VT(u,e.precondition(u)))}),yield(r=(0,me.Z)(function*(i,u){const c=Ye(i),m=S0(c.serializer)+"/documents",w={writes:u.map(D=>A0(c.serializer,D))};yield c.Io("Commit",m,w)}),function(i,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw it();t=Et.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ae(ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Et.min())?lr.exists(!1):lr.updateTime(t):lr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Et.min()))throw new Ae(ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return lr.updateTime(t)}return lr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class bk{constructor(e,t,r,i,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=u,this.Bc=r.maxAttempts,this.qo=new yS(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,me.Z)(function*(){const t=new Ck(e.datastore),r=e.qc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(u=>{e.Uc(u)}))}).catch(i=>{e.Uc(i)})}))}qc(e){try{const t=this.updateFunction(e);return!tg(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!AM(t)}return!1}}class Tk{constructor(e,t,r,i){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ur.UNAUTHENTICATED,this.clientId=VI.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,me.Z)(function*(m){Ue("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Ue("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,me.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ae(ce.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Fr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=jy(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function HD(n,e){return gA.apply(this,arguments)}function gA(){return gA=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ue("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,me.Z)(function*(u){r.isEqual(u)||(yield TR(e.localStore,u),r=u)});return function(u){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),gA.apply(this,arguments)}function mA(n,e){return yA.apply(this,arguments)}function yA(){return yA=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield _A(n);Ue("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>HR(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,u)=>HR(e.remoteStore,u)),n._onlineComponents=e}),yA.apply(this,arguments)}function rN(n){return"FirebaseError"===n.name?n.code===ce.FAILED_PRECONDITION||n.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function _A(n){return vA.apply(this,arguments)}function vA(){return vA=(0,me.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ue("FirestoreClient","Using user provided OfflineComponentProvider");try{yield HD(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!rN(t))throw t;uo("Error using user provided cache. Falling back to memory cache: "+t),yield HD(n,new B0)}}else Ue("FirestoreClient","Using default OfflineComponentProvider"),yield HD(n,new B0);return n._offlineComponents}),vA.apply(this,arguments)}function GD(n){return wA.apply(this,arguments)}function wA(){return wA=(0,me.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ue("FirestoreClient","Using user provided OnlineComponentProvider"),yield mA(n,n._uninitializedComponentsProvider._online)):(Ue("FirestoreClient","Using default OnlineComponentProvider"),yield mA(n,new zy))),n._onlineComponents}),wA.apply(this,arguments)}function iN(n){return _A(n).then(e=>e.persistence)}function zD(n){return _A(n).then(e=>e.localStore)}function sN(n){return GD(n).then(e=>e.remoteStore)}function EA(n){return GD(n).then(e=>e.syncEngine)}function qy(n){return IA.apply(this,arguments)}function IA(){return IA=(0,me.Z)(function*(n){const e=yield GD(n),t=e.eventManager;return t.onListen=ik.bind(null,e.syncEngine),t.onUnlisten=sk.bind(null,e.syncEngine),t}),IA.apply(this,arguments)}function aN(n,e,t={}){const r=new Fr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(i,u,c,m,w){const D=new $D({next:N=>{u.enqueueAndForget(()=>US(i,T));const V=N.docs.has(c);!V&&N.fromCache?w.reject(new Ae(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&N.fromCache&&m&&"server"===m.source?w.reject(new Ae(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(N)},error:N=>w.reject(N)}),T=new $S(lg(c.path),D,{includeMetadataChanges:!0,Ku:!0});return LS(i,T)}(yield qy(n),n.asyncQueue,e,t,r)})),r.promise}function uN(n,e,t={}){const r=new Fr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(i,u,c,m,w){const D=new $D({next:N=>{u.enqueueAndForget(()=>US(i,T)),N.fromCache&&"server"===m.source?w.reject(new Ae(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(N)},error:N=>w.reject(N)}),T=new $S(c,D,{includeMetadataChanges:!0,Ku:!0});return LS(i,T)}(yield qy(n),n.asyncQueue,e,t,r)})),r.promise}function cN(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const lN=new Map;function DA(n,e,t){if(!t)throw new Ae(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function dN(n,e,t,r){if(!0===e&&!0===r)throw new Ae(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function hN(n){if(!Ze.isDocumentKey(n))throw new Ae(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function fN(n){if(Ze.isDocumentKey(n))throw new Ae(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function qD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":it()}function on(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ae(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=qD(n);throw new Ae(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function pN(n,e){if(e<=0)throw new Ae(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class gN{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Ae(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ae(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}dN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=cN(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new Ae(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Ae(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Ae(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class j0{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gN({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ae(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ae(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gN(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new qh;switch(t.type){case"firstParty":return new iM(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ae(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=lN.get(e);t&&(Ue("ComponentProvider","Removing Datastore"),lN.delete(e),t.terminate())}(this),Promise.resolve()}}class Jn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Jn(this.firestore,e,this._key)}}class Wi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Wi(this.firestore,e,this._query)}}class Hc extends Wi{constructor(e,t,r){super(e,t,lg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Jn(this.firestore,null,new Ze(e))}withConverter(e){return new Hc(this.firestore,e,this._path)}}function yN(n,e,...t){if(n=(0,Gt.m9)(n),DA("collection","path",e),n instanceof j0){const r=sn.fromString(e,...t);return fN(r),new Hc(n,null,r)}{if(!(n instanceof Jn||n instanceof Hc))throw new Ae(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(sn.fromString(e,...t));return fN(r),new Hc(n.firestore,null,r)}}function WD(n,e,...t){if(n=(0,Gt.m9)(n),1===arguments.length&&(e=VI.A()),DA("doc","path",e),n instanceof j0){const r=sn.fromString(e,...t);return hN(r),new Jn(n,null,new Ze(r))}{if(!(n instanceof Jn||n instanceof Hc))throw new Ae(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(sn.fromString(e,...t));return hN(r),new Jn(n.firestore,n instanceof Hc?n.converter:null,new Ze(r))}}function _N(n,e){return n=(0,Gt.m9)(n),e=(0,Gt.m9)(e),(n instanceof Jn||n instanceof Hc)&&(e instanceof Jn||e instanceof Hc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function CA(n,e){return n=(0,Gt.m9)(n),e=(0,Gt.m9)(e),n instanceof Wi&&e instanceof Wi&&n.firestore===e.firestore&&dg(n._query,e._query)&&n.converter===e.converter}class Fk{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new yS(this,"async_queue_retry"),this.Xc=()=>{const t=UD();t&&Ue("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=UD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=UD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Fr;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,me.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Du(t))throw t;Ue("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,Er("INTERNAL UNHANDLED ERROR: ",function(u){let c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),c}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=FS.createAndSchedule(this,e,t,r,u=>this.na(u));return this.zc.push(i),i}Zc(){this.Wc&&it()}verifyOperationInProgress(){}sa(){var e=this;return(0,me.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function bA(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class Lk{constructor(){this._progressObserver={},this._taskCompletionResolver=new Fr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class er extends j0{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Fk,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||vN(this),this._firestoreClient.terminate()}}function jr(n){return n._firestoreClient||vN(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function vN(n){var e,t,r;const i=n._freezeSettings(),u=(m=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new eD(n._databaseId,m,n._persistenceKey,(D=i).host,D.ssl,D.experimentalForceLongPolling,D.experimentalAutoDetectLongPolling,cN(D.experimentalLongPollingOptions),D.useFetchStreams));var m,D;n._firestoreClient=new Tk(n._authCredentials,n._appCheckCredentials,n._queue,u),null!==(t=i.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function wN(n,e,t){const r=new Fr;return n.asyncQueue.enqueue((0,me.Z)(function*(){try{yield HD(n,t),yield mA(n,e),r.resolve()}catch(i){const u=i;if(!rN(u))throw u;uo("Error enabling indexeddb cache. Falling back to memory cache: "+u),r.reject(u)}})).then(()=>r.promise)}function EN(n){if(n._initialized||n._terminated)throw new Ae(ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Gc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Gc(Ur.fromBase64String(e))}catch(t){throw new Ae(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Gc(Ur.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class pd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ae(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new cr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Eg{constructor(e){this._methodName=e}}class KD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ae(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ae(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Vt(this._lat,e._lat)||Vt(this._long,e._long)}}const Kk=/^__.*__$/;class Zk{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new dd(e,this.data,this.fieldMask,t,this.fieldTransforms):new My(e,this.data,t,this.fieldTransforms)}}class IN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new dd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function DN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw it()}}class ZD{constructor(e,t,r,i,u,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===u&&this.ua(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new ZD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return XD(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(DN(this.ca)&&Kk.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class Yk{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||L0(e)}ya(e,t,r,i=!1){return new ZD({ca:e,methodName:t,ga:r,path:cr.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ig(n){const e=n._freezeSettings(),t=L0(n._databaseId);return new Yk(n._databaseId,!!e.ignoreUndefinedProperties,t)}function YD(n,e,t,r,i,u={}){const c=n.ya(u.merge||u.mergeFields?2:0,e,t,i);xA("Data must be an object, but it was:",c,r);const m=TN(r,c);let w,D;if(u.merge)w=new os(c.fieldMask),D=c.fieldTransforms;else if(u.mergeFields){const T=[];for(const N of u.mergeFields){const V=G0(e,N,t);if(!c.contains(V))throw new Ae(ce.INVALID_ARGUMENT,`Field '${V}' is specified in your field mask but missing from your input data.`);AN(T,V)||T.push(V)}w=new os(T),D=c.fieldTransforms.filter(N=>w.covers(N.field))}else w=null,D=c.fieldTransforms;return new Zk(new di(m),w,D)}class H0 extends Eg{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof H0}}function CN(n,e,t){return new ZD({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class TA extends Eg{_toFieldTransform(e){return new E0(e.path,new Ay)}isEqual(e){return e instanceof TA}}class Qk extends Eg{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=CN(this,e,!0),r=this.pa.map(u=>Dg(u,t)),i=new hg(r);return new E0(e.path,i)}isEqual(e){return this===e}}class Xk extends Eg{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=CN(this,e,!0),r=this.pa.map(u=>Dg(u,t)),i=new fg(r);return new E0(e.path,i)}isEqual(e){return this===e}}class Jk extends Eg{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new xy(e.serializer,Un(e.serializer,this.Ia));return new E0(e.path,t)}isEqual(e){return this===e}}function SA(n,e,t,r){const i=n.ya(1,e,t);xA("Data must be an object, but it was:",i,r);const u=[],c=di.empty();Sa(r,(w,D)=>{const T=QD(e,w,t);D=(0,Gt.m9)(D);const N=i.da(T);if(D instanceof H0)u.push(T);else{const V=Dg(D,N);null!=V&&(u.push(T),c.set(T,V))}});const m=new os(u);return new IN(c,m,i.fieldTransforms)}function AA(n,e,t,r,i,u){const c=n.ya(1,e,t),m=[G0(e,r,t)],w=[i];if(u.length%2!=0)throw new Ae(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let V=0;V<u.length;V+=2)m.push(G0(e,u[V])),w.push(u[V+1]);const D=[],T=di.empty();for(let V=m.length-1;V>=0;--V)if(!AN(D,m[V])){const q=m[V];let ue=w[V];ue=(0,Gt.m9)(ue);const xe=c.da(q);if(ue instanceof H0)D.push(q);else{const De=Dg(ue,xe);null!=De&&(D.push(q),T.set(q,De))}}const N=new os(D);return new IN(T,N,c.fieldTransforms)}function bN(n,e,t,r=!1){return Dg(t,n.ya(r?4:3,e))}function Dg(n,e){if(SN(n=(0,Gt.m9)(n)))return xA("Unsupported field value:",e,n),TN(n,e);if(n instanceof Eg)return function(t,r){if(!DN(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let u=0;for(const c of t){let m=Dg(c,r.wa(u));null==m&&(m={nullValue:"NULL_VALUE"}),i.push(m),u++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,Gt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Un(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Vn.fromDate(t);return{timestampValue:Ny(r.serializer,i)}}if(t instanceof Vn){const i=new Vn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Ny(r.serializer,i)}}if(t instanceof KD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Gc)return{bytesValue:VM(r.serializer,t._byteString)};if(t instanceof Jn){const i=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(i))throw r._a(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:zT(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${qD(t)}`)}(n,e)}function TN(n,e){const t={};return Aa(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Sa(n,(r,i)=>{const u=Dg(i,e.ha(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function SN(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Vn||n instanceof KD||n instanceof Gc||n instanceof Jn||n instanceof Eg)}function xA(n,e,t){if(!SN(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=qD(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function G0(n,e,t){if((e=(0,Gt.m9)(e))instanceof pd)return e._internalPath;if("string"==typeof e)return QD(n,e);throw XD("Field path arguments must be of type string or ",n,!1,void 0,t)}const eF=new RegExp("[~\\*/\\[\\]]");function QD(n,e,t){if(e.search(eF)>=0)throw XD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new pd(...e.split("."))._internalPath}catch{throw XD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function XD(n,e,t,r,i){const u=r&&!r.isEmpty(),c=void 0!==i;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(u||c)&&(w+=" (found",u&&(w+=` in field ${r}`),c&&(w+=` in document ${i}`),w+=")"),new Ae(ce.INVALID_ARGUMENT,m+n+w)}function AN(n,e){return n.some(t=>t.isEqual(e))}class z0{constructor(e,t,r,i,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Jn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new tF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(JD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class tF extends z0{data(){return super.data()}}function JD(n,e){return"string"==typeof e?QD(n,e):e instanceof pd?e._internalPath:e._delegate._internalPath}function xN(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ae(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class MA{}class q0 extends MA{}function sf(n,e,...t){let r=[];e instanceof MA&&r.push(e),r=r.concat(t),function(i){const u=i.filter(m=>m instanceof Wy).length,c=i.filter(m=>m instanceof W0).length;if(u>1||u>0&&c>0)throw new Ae(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class W0 extends q0{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new W0(e,t,r)}_apply(e){const t=this._parse(e);return PN(e._query,t),new Wi(e.firestore,e.converter,vD(e._query,t))}_parse(e){const t=Ig(e.firestore);return function(i,u,c,m,w,D,T){let N;if(w.isKeyField()){if("array-contains"===D||"array-contains-any"===D)throw new Ae(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${D}' queries on documentId().`);if("in"===D||"not-in"===D){NN(T,D);const V=[];for(const q of T)V.push(RN(m,i,q));N={arrayValue:{values:V}}}else N=RN(m,i,T)}else"in"!==D&&"not-in"!==D&&"array-contains-any"!==D||NN(T,D),N=bN(c,"where",T,"in"===D||"not-in"===D);return Jt.create(w,D,N)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Wy extends MA{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Wy(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:ln.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let u=r;const c=i.getFlattenedFilters();for(const m of c)PN(u,m),u=vD(u,m)}(e._query,t),new Wi(e.firestore,e.converter,vD(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class RA extends q0{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new RA(e,t)}_apply(e){const t=function(r,i,u){if(null!==r.startAt)throw new Ae(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ae(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new jc(i,u);return function(m,w){if(null===_D(m)){const D=_0(m);null!==D&&ON(0,D,w.field)}}(r,c),c}(e._query,this._field,this._direction);return new Wi(e.firestore,e.converter,function(r,i){const u=r.explicitOrderBy.concat([i]);return new Ru(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class eC extends q0{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new eC(e,t,r)}_apply(e){return new Wi(e.firestore,e.converter,w0(e._query,this._limit,this._limitType))}}class tC extends q0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new tC(e,t,r)}_apply(e){const t=MN(e,this.type,this._docOrFields,this._inclusive);return new Wi(e.firestore,e.converter,(i=t,new Ru((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class nC extends q0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new nC(e,t,r)}_apply(e){const t=MN(e,this.type,this._docOrFields,this._inclusive);return new Wi(e.firestore,e.converter,(i=t,new Ru((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function MN(n,e,t,r){if(t[0]=(0,Gt.m9)(t[0]),t[0]instanceof z0)return function(i,u,c,m,w){if(!m)throw new Ae(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const D=[];for(const T of Qh(i))if(T.field.isKeyField())D.push(Yh(u,m.key));else{const N=m.data.field(T.field);if(ig(N))throw new Ae(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const V=T.field.canonicalString();throw new Ae(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${V}' (used as the orderBy) does not exist.`)}D.push(N)}return new as(D,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Ig(n.firestore);return function(u,c,m,w,D,T){const N=u.explicitOrderBy;if(D.length>N.length)throw new Ae(ce.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const V=[];for(let q=0;q<D.length;q++){const ue=D[q];if(N[q].field.isKeyField()){if("string"!=typeof ue)throw new Ae(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof ue}`);if(!v0(u)&&-1!==ue.indexOf("/"))throw new Ae(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${ue}' contains a slash.`);const xe=u.path.child(sn.fromString(ue));if(!Ze.isDocumentKey(xe))throw new Ae(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${xe}' is not because it contains an odd number of segments.`);const De=new Ze(xe);V.push(Yh(c,De))}else{const xe=bN(m,w,ue);V.push(xe)}}return new as(V,T)}(n._query,n.firestore._databaseId,i,e,t,r)}}function RN(n,e,t){if("string"==typeof(t=(0,Gt.m9)(t))){if(""===t)throw new Ae(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!v0(e)&&-1!==t.indexOf("/"))throw new Ae(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(sn.fromString(t));if(!Ze.isDocumentKey(r))throw new Ae(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Yh(n,new Ze(r))}if(t instanceof Jn)return Yh(n,t._key);throw new Ae(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qD(t)}.`)}function NN(n,e){if(!Array.isArray(n)||0===n.length)throw new Ae(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function PN(n,e){if(e.isInequality()){const r=_0(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Ae(ce.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const u=_D(n);null!==u&&ON(0,i,u)}const t=function(r,i){for(const u of r)for(const c of u.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Ae(ce.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function ON(n,e,t){if(!t.isEqual(e))throw new Ae(ce.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class NA{convertValue(e,t="none"){switch(Au(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(bu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw it()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Sa(e,(i,u)=>{r[i]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new KD(Xn(e.latitude),Xn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=d0(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ld(e));default:return null}}convertTimestamp(e){const t=cd(e);return new Vn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=sn.fromString(e);vt(KM(r));const i=new Tu(r.get(1),r.get(3)),u=new Ze(r.popFirst(5));return i.isEqual(t)||Er(`Document ${u} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function rC(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class lF extends NA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jn(this.firestore,null,t)}}class Cg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class gd extends z0{constructor(e,t,r,i,u,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new K0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(JD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class K0 extends gd{data(e={}){return super.data(e)}}class af{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Cg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new K0(this._firestore,this._userDataWriter,r.key,r,new Cg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ae(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new K0(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Cg(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const m=new K0(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Cg(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,D=-1;return 0!==c.type&&(w=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),1!==c.type&&(u=u.add(c.doc),D=u.indexOf(c.doc.key)),{type:hF(c.type),doc:m,oldIndex:w,newIndex:D}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function hF(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return it()}}function FN(n,e){return n instanceof gd&&e instanceof gd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof af&&e instanceof af&&n._firestore===e._firestore&&CA(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class uf extends NA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jn(this.firestore,null,t)}}function LN(n,e,t){n=on(n,Jn);const r=on(n.firestore,er),i=rC(n.converter,e,t);return Ky(r,[YD(Ig(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,lr.none())])}function VN(n,e,t,...r){n=on(n,Jn);const i=on(n.firestore,er),u=Ig(i);let c;return c="string"==typeof(e=(0,Gt.m9)(e))||e instanceof pd?AA(u,"updateDoc",n._key,e,t,r):SA(u,"updateDoc",n._key,e),Ky(i,[c.toMutation(n._key,lr.exists(!0))])}function UN(n,...e){var t,r,i;n=(0,Gt.m9)(n);let u={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||bA(e[c])||(u=e[c],c++);const m={includeMetadataChanges:u.includeMetadataChanges};if(bA(e[c])){const N=e[c];e[c]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[c+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[c+2]=null===(i=N.complete)||void 0===i?void 0:i.bind(N)}let w,D,T;if(n instanceof Jn)D=on(n.firestore,er),T=lg(n._key.path),w={next:N=>{e[c]&&e[c](PA(D,n,N))},error:e[c+1],complete:e[c+2]};else{const N=on(n,Wi);D=on(N.firestore,er),T=N._query;const V=new uf(D);w={next:q=>{e[c]&&e[c](new af(D,V,N,q))},error:e[c+1],complete:e[c+2]},xN(n._query)}return function(N,V,q,ue){const xe=new $D(ue),De=new $S(V,xe,q);return N.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return LS(yield qy(N),De)})),()=>{xe.Dc(),N.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return US(yield qy(N),De)}))}}(jr(D),T,m,w)}function Ky(n,e){return function(t,r){const i=new Fr;return t.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function ok(n,e,t){return WS.apply(this,arguments)}(yield EA(t),r,i)})),i.promise}(jr(n),e)}function PA(n,e,t){const r=t.docs.get(e._key),i=new uf(n);return new gd(n,i,e._key,r,new Cg(t.hasPendingWrites,t.fromCache),e.converter)}const MF={maxAttempts:5};class BN{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ig(e)}set(e,t,r){this._verifyNotCommitted();const i=cf(e,this._firestore),u=rC(i.converter,t,r),c=YD(this._dataReader,"WriteBatch.set",i._key,u,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,lr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const u=cf(e,this._firestore);let c;return c="string"==typeof(t=(0,Gt.m9)(t))||t instanceof pd?AA(this._dataReader,"WriteBatch.update",u._key,t,r,i):SA(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,lr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=cf(e,this._firestore);return this._mutations=this._mutations.concat(new Ry(t._key,lr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ae(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function cf(n,e){if((n=(0,Gt.m9)(n)).firestore!==e)throw new Ae(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class RF extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Ig(e)}get(e){const t=cf(e,this._firestore),r=new lF(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return it();const u=i[0];if(u.isFoundDocument())return new z0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new z0(this._firestore,r,t._key,null,t.converter);throw it()})}set(e,t,r){const i=cf(e,this._firestore),u=rC(i.converter,t,r),c=YD(this._dataReader,"Transaction.set",i._key,u,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const u=cf(e,this._firestore);let c;return c="string"==typeof(t=(0,Gt.m9)(t))||t instanceof pd?AA(this._dataReader,"Transaction.update",u._key,t,r,i):SA(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,c),this}delete(e){const t=cf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=cf(e,this._firestore),r=new uf(this._firestore);return super.get(e).then(i=>new gd(this._firestore,r,t._key,i._document,new Cg(!1,!1),t.converter))}}!function(n,e=!0){zh=Gi.SDK_VERSION,(0,Gi._registerComponent)(new bh.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const u=t.getProvider("app").getImmediate(),c=new er(new FI(t.getProvider("auth-internal")),new sM(t.getProvider("app-check-internal")),function(m,w){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Ae(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Tu(m.options.projectId,w)}(u,r),u);return i=Object.assign({useFetchStreams:e},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),(0,Gi.registerVersion)(gy,"3.13.0",n),(0,Gi.registerVersion)(gy,"3.13.0","esm2017")}();function OA(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ae("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function $N(){if(typeof Uint8Array>"u")throw new Ae("unimplemented","Uint8Arrays are not available in this environment.")}function HN(){if(!function xT(){return typeof atob<"u"}())throw new Ae("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Z0{constructor(e){this._delegate=e}static fromBase64String(e){return HN(),new Z0(Gc.fromBase64String(e))}static fromUint8Array(e){return $N(),new Z0(Gc.fromUint8Array(e))}toBase64(){return HN(),this._delegate.toBase64()}toUint8Array(){return $N(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function kA(n){return function BF(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class jF{enableIndexedDbPersistence(e,t){return function Uk(n,e){EN(n=on(n,er));const t=jr(n);if(t._uninitializedComponentsProvider)throw new Ae(ce.FAILED_PRECONDITION,"SDK cache is already specified.");uo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new zy;return wN(t,i,new pA(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Bk(n){EN(n=on(n,er));const e=jr(n);if(e._uninitializedComponentsProvider)throw new Ae(ce.FAILED_PRECONDITION,"SDK cache is already specified.");uo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new zy;return wN(e,r,new tN(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function jk(n){if(n._initialized&&!n._terminated)throw new Ae(ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Fr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{yield(t=(0,me.Z)(function*(r){if(!lo.D())return Promise.resolve();const i=r+"main";yield lo.delete(i)}),function(r){return t.apply(this,arguments)})(oS(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class GN{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Tu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&uo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function mN(n,e,t,r={}){var i;const u=(n=on(n,j0))._getSettings(),c=`${e}:${t}`;if("firestore.googleapis.com"!==u.host&&u.host!==c&&uo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},u),{host:c,ssl:!1})),r.mockUserToken){let m,w;if("string"==typeof r.mockUserToken)m=r.mockUserToken,w=ur.MOCK_USER;else{m=(0,Gt.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const D=r.mockUserToken.sub||r.mockUserToken.user_id;if(!D)throw new Ae(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new ur(D)}n._authCredentials=new pT(new Jv(m,w))}}(this._delegate,e,t,r)}enableNetwork(){return function Hk(n){return function Sk(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield iN(n),t=yield sN(n);return e.setNetworkEnabled(!0),function(r){const i=Ye(r);return i.vu.delete(0),V0(i)}(t)}))}(jr(n=on(n,er)))}(this._delegate)}disableNetwork(){return function Gk(n){return function Ak(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield iN(n),t=yield sN(n);return e.setNetworkEnabled(!1),(r=(0,me.Z)(function*(i){const u=Ye(i);u.vu.add(0),yield Vy(u),u.bu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(jr(n=on(n,er)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,dN("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function $k(n){return function(e){const t=new Fr;return e.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function lk(n,e){return XS.apply(this,arguments)}(yield EA(e),t)})),t.promise}(jr(n=on(n,er)))}(this._delegate)}onSnapshotsInSync(e){return function EF(n,e){return function Rk(n,e){const t=new $D(e);return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield qy(n),i=t,Ye(r).ku.add(i),void i.next();var r,i})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield qy(n),i=t,void Ye(r).ku.delete(i);var r,i}))}}(jr(n=on(n,er)),bA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ae("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Zy(this,yN(this._delegate,e))}catch(t){throw Ns(t,"collection()","Firestore.collection()")}}doc(e){try{return new xa(this,WD(this._delegate,e))}catch(t){throw Ns(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ps(this,function kk(n,e){if(n=on(n,j0),DA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ae(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Wi(n,null,(t=e,new Ru(sn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ns(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function NF(n,e,t){n=on(n,er);const r=Object.assign(Object.assign({},MF),t);return function(i){if(i.maxAttempts<1)throw new Ae(ce.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,u,c){const m=new Fr;return i.asyncQueue.enqueueAndForget((0,me.Z)(function*(){const w=yield function oN(n){return GD(n).then(e=>e.datastore)}(i);new bk(i.asyncQueue,w,c,u,m).run()})),m.promise}(jr(n),i=>e(new RF(n,i)),r)}(this._delegate,t=>e(new zN(this,t)))}batch(){return jr(this._delegate),new qN(new BN(this._delegate,e=>Ky(this._delegate,e)))}loadBundle(e){return function zk(n,e){const t=jr(n=on(n,er)),r=new Lk;return function Nk(n,e,t,r){const i=function(u,c){let m;return m="string"==typeof u?MM().encode(u):u,w=function(w,D){if(w instanceof Uint8Array)return nN(w,D);if(w instanceof ArrayBuffer)return nN(new Uint8Array(w),D);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new Dk(w,c);var w}(t,L0(e));n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){!function Ek(n,e,t){const r=Ye(n);var i;(i=(0,me.Z)(function*(u,c,m){try{const w=yield c.getMetadata();if(yield function(V,q){const ue=Ye(V),xe=Br(q.createTime);return ue.persistence.runTransaction("hasNewerBundle","readonly",De=>ue.qs.getBundleMetadata(De,q.id)).then(De=>!!De&&De.createTime.compareTo(xe)>=0)}(u.localStore,w))return yield c.close(),m._completeWith({taskState:"Success",documentsLoaded:(V=w).totalDocuments,bytesLoaded:V.totalBytes,totalDocuments:V.totalDocuments,totalBytes:V.totalBytes}),Promise.resolve(new Set);m._updateProgress(qR(w));const D=new ek(w,u.localStore,c.serializer);let T=yield c.bc();for(;T;){const V=yield D.zu(T);V&&m._updateProgress(V),T=yield c.bc()}const N=yield D.complete();return yield fd(u,N.Ju,void 0),yield function(V,q){const ue=Ye(V);return ue.persistence.runTransaction("Save bundle","readwrite",xe=>ue.qs.saveBundleMetadata(xe,q))}(u.localStore,w),m._completeWith(N.progress),Promise.resolve(N.Hu)}catch(w){return uo("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w),Promise.resolve(new Set)}var V}),function(u,c,m){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield EA(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function qk(n,e){return function Pk(n,e){return n.asyncQueue.enqueue((0,me.Z)(function*(){return function(t,r){const i=Ye(t);return i.persistence.runTransaction("Get named query","readonly",u=>i.qs.getNamedQuery(u,r))}(yield zD(n),e)}))}(jr(n=on(n,er)),e).then(t=>t?new Wi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ps(this,t):null)}}class iC extends NA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Z0(new Gc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return xa.forKey(t,this.firestore,null)}}class zN{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new iC(e)}get(e){const t=Tg(e);return this._delegate.get(t).then(r=>new Y0(this._firestore,new gd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Tg(e);return r?(OA("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=Tg(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=Tg(e);return this._delegate.delete(t),this}}class qN{constructor(e){this._delegate=e}set(e,t,r){const i=Tg(e);return r?(OA("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=Tg(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=Tg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class bg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new K0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Q0(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=bg.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let u=i.get(t);return u||(u=new bg(e,new iC(e),t),i.set(t,u)),u}}bg.INSTANCES=new WeakMap;class xa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new iC(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ae("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new xa(t,new Jn(t._delegate,r,new Ze(e)))}static forKey(e,t,r){return new xa(t,new Jn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Zy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Zy(this.firestore,yN(this._delegate,e))}catch(t){throw Ns(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Gt.m9)(e))instanceof Jn&&_N(this._delegate,e)}set(e,t){t=OA("DocumentReference.set",t);try{return t?LN(this._delegate,e,t):LN(this._delegate,e)}catch(r){throw Ns(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?VN(this._delegate,e):VN(this._delegate,e,t,...r)}catch(i){throw Ns(i,"updateDoc()","DocumentReference.update()")}}delete(){return function vF(n){return Ky(on(n.firestore,er),[new Ry(n._key,lr.none())])}(this._delegate)}onSnapshot(...e){const t=WN(e),r=KN(e,i=>new Y0(this.firestore,new gd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return UN(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function pF(n){n=on(n,Jn);const e=on(n.firestore,er),t=jr(e),r=new uf(e);return function xk(n,e){const t=new Fr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(i,u,c){try{const m=yield function(w,D){const T=Ye(w);return T.persistence.runTransaction("read document","readonly",N=>T.localDocuments.getDocument(N,D))}(i,u);m.isFoundDocument()?c.resolve(m):m.isNoDocument()?c.resolve(null):c.reject(new Ae(ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=jy(m,`Failed to get document '${u} from cache`);c.reject(w)}}),function(i,u,c){return r.apply(this,arguments)})(yield zD(n),e,t);var r})),t.promise}(t,n._key).then(i=>new gd(e,r,n._key,i,new Cg(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function gF(n){n=on(n,Jn);const e=on(n.firestore,er);return aN(jr(e),n._key,{source:"server"}).then(t=>PA(e,n,t))}(this._delegate):function fF(n){n=on(n,Jn);const e=on(n.firestore,er);return aN(jr(e),n._key).then(t=>PA(e,n,t))}(this._delegate),t.then(r=>new Y0(this.firestore,new gd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new xa(this.firestore,this._delegate.withConverter(e?bg.getInstance(this.firestore,e):null))}}function Ns(n,e,t){return n.message=n.message.replace(e,t),n}function WN(n){for(const e of n)if("object"==typeof e&&!kA(e))return e;return{}}function KN(n,e){var t,r;let i;return i=kA(n[0])?n[0]:kA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{i.next&&i.next(e(u))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Y0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new xa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return FN(this._delegate,e._delegate)}}class Q0 extends Y0{data(e){const t=this._delegate.data(e);return function my(n,e){n||it()}(void 0!==t),t}}class Ps{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new iC(e)}where(e,t,r){try{return new Ps(this.firestore,sf(this._delegate,function nF(n,e,t){const r=e,i=JD("where",n);return W0._create(i,r,t)}(e,t,r)))}catch(i){throw Ns(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ps(this.firestore,sf(this._delegate,function rF(n,e="asc"){const t=e,r=JD("orderBy",n);return RA._create(r,t)}(e,t)))}catch(r){throw Ns(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ps(this.firestore,sf(this._delegate,function iF(n){return pN("limit",n),eC._create("limit",n,"F")}(e)))}catch(t){throw Ns(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ps(this.firestore,sf(this._delegate,function sF(n){return pN("limitToLast",n),eC._create("limitToLast",n,"L")}(e)))}catch(t){throw Ns(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ps(this.firestore,sf(this._delegate,function oF(...n){return tC._create("startAt",n,!0)}(...e)))}catch(t){throw Ns(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ps(this.firestore,sf(this._delegate,function aF(...n){return tC._create("startAfter",n,!1)}(...e)))}catch(t){throw Ns(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ps(this.firestore,sf(this._delegate,function uF(...n){return nC._create("endBefore",n,!1)}(...e)))}catch(t){throw Ns(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ps(this.firestore,sf(this._delegate,function cF(...n){return nC._create("endAt",n,!0)}(...e)))}catch(t){throw Ns(t,"endAt()","Query.endAt()")}}isEqual(e){return CA(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function yF(n){n=on(n,Wi);const e=on(n.firestore,er),t=jr(e),r=new uf(e);return function Mk(n,e){const t=new Fr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(i,u,c){try{const m=yield kD(i,u,!0),w=new ZR(u,m.ir),D=w.sc(m.documents),T=w.applyChanges(D,!1);c.resolve(T.snapshot)}catch(m){const w=jy(m,`Failed to execute query '${u} against cache`);c.reject(w)}}),function(i,u,c){return r.apply(this,arguments)})(yield zD(n),e,t);var r})),t.promise}(t,n._query).then(i=>new af(e,r,n,i))}(this._delegate):"server"===e?.source?function _F(n){n=on(n,Wi);const e=on(n.firestore,er),t=jr(e),r=new uf(e);return uN(t,n._query,{source:"server"}).then(i=>new af(e,r,n,i))}(this._delegate):function mF(n){n=on(n,Wi);const e=on(n.firestore,er),t=jr(e),r=new uf(e);return xN(n._query),uN(t,n._query).then(i=>new af(e,r,n,i))}(this._delegate),t.then(r=>new FA(this.firestore,new af(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=WN(e),r=KN(e,i=>new FA(this.firestore,new af(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return UN(this._delegate,t,r)}withConverter(e){return new Ps(this.firestore,this._delegate.withConverter(e?bg.getInstance(this.firestore,e):null))}}class HF{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Q0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class FA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ps(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Q0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new HF(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Q0(this._firestore,r))})}isEqual(e){return FN(this._delegate,e._delegate)}}class Zy extends Ps{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new xa(this.firestore,e):null}doc(e){try{return new xa(this.firestore,void 0===e?WD(this._delegate):WD(this._delegate,e))}catch(t){throw Ns(t,"doc()","CollectionReference.doc()")}}add(e){return function wF(n,e){const t=on(n.firestore,er),r=WD(n),i=rC(n.converter,e);return Ky(t,[YD(Ig(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,lr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new xa(this.firestore,t))}isEqual(e){return _N(this._delegate,e._delegate)}withConverter(e){return new Zy(this.firestore,this._delegate.withConverter(e?bg.getInstance(this.firestore,e):null))}}function Tg(n){return on(n,Jn)}class LA{constructor(...e){this._delegate=new pd(...e)}static documentId(){return new LA(cr.keyField().canonicalString())}isEqual(e){return(e=(0,Gt.m9)(e))instanceof pd&&this._delegate._internalPath.isEqual(e._internalPath)}}class Sg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function OF(){return new TA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Sg(e)}static delete(){const e=function PF(){return new H0("deleteField")}();return e._methodName="FieldValue.delete",new Sg(e)}static arrayUnion(...e){const t=function kF(...n){return new Qk("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Sg(t)}static arrayRemove(...e){const t=function FF(...n){return new Xk("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Sg(t)}static increment(e){const t=function LF(n){return new Jk("increment",n)}(e);return t._methodName="FieldValue.increment",new Sg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const GF={Firestore:GN,GeoPoint:KD,Timestamp:Vn,Blob:Z0,Transaction:zN,WriteBatch:qN,DocumentReference:xa,DocumentSnapshot:Y0,Query:Ps,QueryDocumentSnapshot:Q0,QuerySnapshot:FA,CollectionReference:Zy,FieldPath:LA,FieldValue:Sg,setLogLevel:function $F(n){!function kI(n){ba.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function qF(n){(function zF(n,e){n.INTERNAL.registerComponent(new bh.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},GF)))})(n,(e,t)=>new GN(e,t,new jF)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(ME.Z);var VA=k(6451),sC=k(5363),WF=k(6063);class KF extends Qn.x{constructor(e=1/0,t=1/0,r=WF.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:u,_windowTime:c}=this;t||(r.push(e),!i&&r.push(u.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,u=i.slice();for(let c=0;c<u.length&&!e.closed;c+=r?1:2)e.next(u[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,u=(i?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!i){const c=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=c;w+=2)m=w;m&&r.splice(0,m+1)}}}var ZF=k(3099);function ZN(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,ZF.B)({connector:()=>new KF(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function YN(n,e){return(0,wi.m)(e)?Sn(()=>n,e):Sn(()=>n)}var UA=k(9468);k(259);const jA=new Map,XN={activated:!1,tokenObservers:[]},eL={initialized:!1,enabled:!1};function Sr(n){return jA.get(n)||Object.assign({},XN)}function aC(){return eL}const $A="https://content-firebaseappcheck.googleapis.com/v1",iL="exchangeDebugToken",JN={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class oL{constructor(e,t,r,i,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=i,i>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,me.Z)(function*(){t.stop();try{t.pending=new Gt.BH,yield function aL(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Gt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ki=new Gt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function HA(n){if(!Sr(n).activated)throw Ki.create("use-before-activation",{appName:n.name})}function lC(n,e){return zA.apply(this,arguments)}function zA(){return zA=(0,me.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const N=yield i.getHeartbeatsHeader();N&&(r["X-Firebase-Client"]=N)}const u={method:"POST",body:JSON.stringify(e),headers:r};let c,m;try{c=yield fetch(n,u)}catch(N){throw Ki.create("fetch-network-error",{originalErrorMessage:N?.message})}if(200!==c.status)throw Ki.create("fetch-status-error",{httpStatus:c.status});try{m=yield c.json()}catch(N){throw Ki.create("fetch-parse-error",{originalErrorMessage:N?.message})}const w=m.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw Ki.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const D=1e3*Number(w[1]),T=Date.now();return{token:m.token,expireTimeMillis:T+D,issuedAtTimeMillis:T}}),zA.apply(this,arguments)}function eP(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${$A}/projects/${t}/apps/${r}:${iL}?key=${i}`,body:{debug_token:e}}}const dL="firebase-app-check-database",hL=1,X0="firebase-app-check-store";let dC=null;function qA(){return qA=(0,me.Z)(function*(n,e){const r=(yield function nP(){return dC||(dC=new Promise((n,e)=>{try{const t=indexedDB.open(dL,hL);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Ki.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(X0,{keyPath:"compositeKey"})}}catch(t){e(Ki.create("storage-open",{originalErrorMessage:t?.message}))}}),dC)}()).transaction(X0,"readwrite"),u=r.objectStore(X0).put({compositeKey:n,value:e});return new Promise((c,m)=>{u.onsuccess=w=>{c()},r.onerror=w=>{var D;m(Ki.create("storage-set",{originalErrorMessage:null===(D=w.target.error)||void 0===D?void 0:D.message}))}})}),qA.apply(this,arguments)}const J0=new vu.Yd("@firebase/app-check");function ZA(n,e){return(0,Gt.hl)()?function pL(n,e){return function rP(n,e){return qA.apply(this,arguments)}(function sP(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{J0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function QA(){return aC().enabled}function XA(){return JA.apply(this,arguments)}function JA(){return JA=(0,me.Z)(function*(){const n=aC();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),JA.apply(this,arguments)}const wL={error:"UNKNOWN_ERROR"};function EL(n){return Gt.US.encodeString(JSON.stringify(n),!1)}function hC(n){return ex.apply(this,arguments)}function ex(){return ex=(0,me.Z)(function*(n,e=!1){const t=n.app;HA(t);const r=Sr(t);let u,i=r.token;if(i&&!Yy(i)&&(r.token=void 0,i=void 0),!i){const w=yield r.cachedTokenPromise;w&&(Yy(w)?i=w:yield ZA(t,void 0))}if(!e&&i&&Yy(i))return{token:i.token};let m,c=!1;if(QA()){r.exchangeTokenPromise||(r.exchangeTokenPromise=lC(eP(t,yield XA()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),c=!0);const w=yield r.exchangeTokenPromise;return yield ZA(t,w),r.token=w,{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),c=!0),i=yield Sr(t).exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?J0.warn(w.message):J0.error(w),u=w}return i?u?m=Yy(i)?{token:i.token,internalError:u}:cP(u):(m={token:i.token},r.token=i,yield ZA(t,i)):m=cP(u),c&&function uP(n,e){const t=Sr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,m),m}),ex.apply(this,arguments)}function tx(){return tx=(0,me.Z)(function*(n){const e=n.app;HA(e);const{provider:t}=Sr(e);if(QA()){const r=yield XA(),{token:i}=yield lC(eP(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}}),tx.apply(this,arguments)}function rx(n,e){const t=Sr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function aP(n){const{app:e}=n,t=Sr(e);let r=t.tokenRefresher;r||(r=function IL(n){const{app:e}=n;return new oL((0,me.Z)(function*(){let r;if(r=Sr(e).token?yield hC(n,!0):yield hC(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Sr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},JN.RETRIAL_MIN_WAIT,JN.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Yy(n){return n.expireTimeMillis-Date.now()>0}function cP(n){return{token:EL(wL),error:n}}class DL{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Sr(this.app);for(const t of e)rx(this.app,t.next);return Promise.resolve()}}const yP="app-check-internal";!function LL(){(0,Gi._registerComponent)(new bh.wA("app-check",n=>function CL(n,e){return new DL(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(yP).initialize()})),(0,Gi._registerComponent)(new bh.wA(yP,n=>function bL(n){return{getToken:e=>hC(n,e),getLimitedUseToken:()=>function oP(n){return tx.apply(this,arguments)}(n),addTokenListener:e=>function nx(n,e,t,r){const{app:i}=n,u=Sr(i);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&Yy(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),aP(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>aP(n))}(n,"INTERNAL",e),removeTokenListener:e=>rx(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Gi.registerVersion)("@firebase/app-check","0.8.0")}();class pC{constructor(){return(0,Fn.vb)("app-check")}}typeof window<"u"&&window;var ux=k(9260);const vP=new f.OlP("angularfire2.auth.use-emulator"),wP=new f.OlP("angularfire2.auth.settings"),EP=new f.OlP("angularfire2.auth.tenant-id"),IP=new f.OlP("angularfire2.auth.langugage-code"),DP=new f.OlP("angularfire2.auth.use-device-language"),CP=new f.OlP("angularfire.auth.persistence"),bP=(n,e,t,r,i,u,c,m)=>(0,Hi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=i,u&&w.useDeviceLanguage(),c)for(const[D,T]of Object.entries(c))w.settings[D]=T;return m&&w.setPersistence(m),w},[t,r,i,u,c,m]);let cx=(()=>{class n{constructor(t,r,i,u,c,m,w,D,T,N,V,q){const ue=new Qn.x,xe=st(void 0).pipe((0,sC.Q)(c.outsideAngular),Sn(()=>u.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,2644)))),(0,It.U)(()=>(0,Hi.on)(t,u,r)),(0,It.U)(De=>bP(De,u,m,D,T,N,w,V)),ZN({bufferSize:1,refCount:!1}));if(ms(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=st(null);else{xe.pipe(Ei()).subscribe();const ft=xe.pipe(Sn(dt=>dt.getRedirectResult().then(Ot=>Ot,()=>null)),Fn.iC,ZN({bufferSize:1,refCount:!1})),gt=xe.pipe(Sn(dt=>new Zr.y(Ot=>({unsubscribe:u.runOutsideAngular(()=>dt.onAuthStateChanged(Wt=>Ot.next(Wt),Wt=>Ot.error(Wt),()=>Ot.complete()))})))),et=xe.pipe(Sn(dt=>new Zr.y(Ot=>({unsubscribe:u.runOutsideAngular(()=>dt.onIdTokenChanged(Wt=>Ot.next(Wt),Wt=>Ot.error(Wt),()=>Ot.complete()))}))));this.authState=ft.pipe(YN(gt),(0,UA.R)(c.outsideAngular),(0,sC.Q)(c.insideAngular)),this.user=ft.pipe(YN(et),(0,UA.R)(c.outsideAngular),(0,sC.Q)(c.insideAngular)),this.idToken=this.user.pipe(Sn(dt=>dt?(0,Xt.D)(dt.getIdToken()):st(null))),this.idTokenResult=this.user.pipe(Sn(dt=>dt?(0,Xt.D)(dt.getIdTokenResult()):st(null))),this.credential=(0,VA.T)(ft,ue,this.authState.pipe(On(dt=>!dt))).pipe((0,It.U)(dt=>dt?.user?dt:null),(0,UA.R)(c.outsideAngular),(0,sC.Q)(c.insideAngular))}return(0,Hi.pX)(this,xe,u,{spy:{apply:(De,ft,gt)=>{(De.startsWith("signIn")||De.startsWith("createUser"))&&gt.then(et=>ue.next(et))}}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Hi.Dh),f.LFG(Hi.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Fn.HU),f.LFG(vP,8),f.LFG(wP,8),f.LFG(EP,8),f.LFG(IP,8),f.LFG(DP,8),f.LFG(CP,8),f.LFG(pC,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),HL=(()=>{class n{constructor(){ux.Z.registerVersion("angularfire",Fn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[cx]}),n})();function TP(n,e){return function GL(n,e=am.z){return new Zr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function lx(n,e){return TP(n,e).pipe((0,It.U)(t=>({payload:t,type:"query"})))}function gC(n,e){return lx(n,e).pipe(Fo(void 0),_v(),(0,It.U)(([t,r])=>{const i=r.payload.docChanges(),u=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,m)=>{const w=i.find(T=>T.doc.ref.isEqual(c.ref)),D=t?.payload.docs.find(T=>T.ref.isEqual(c.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(c.metadata)||!w&&D&&JSON.stringify(D.metadata)===JSON.stringify(c.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:c}})}),u}))}function SP(n,e,t){return gC(n,t).pipe(gc((r,i)=>function qL(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function WL(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return dx(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return dx(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return dx(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(u=>u.payload),e),[]),q_(),(0,It.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function dx(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function AP(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class xP{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=gC(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,It.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Fo(void 0),_v(),On(([r,i])=>i.length>0||!r),(0,It.U)(([r,i])=>i),Fn.iC)}auditTrail(e){return this.stateChanges(e).pipe(gc((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=AP(e);return SP(this.query,t,this.afs.schedulers.outsideAngular).pipe(Fn.iC)}valueChanges(e={}){return lx(this.query,this.afs.schedulers.outsideAngular).pipe((0,It.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Fn.iC)}get(e){return(0,Xt.D)(this.query.get(e)).pipe(Fn.iC)}add(e){return this.ref.add(e)}doc(e){return new MP(this.ref.doc(e),this.afs)}}class MP{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:u}=PP(r,t);return new xP(i,u,this.afs)}snapshotChanges(){return function zL(n,e){return TP(n,e).pipe(Fo(void 0),_v(),(0,It.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Fn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,It.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Xt.D)(this.ref.get(e)).pipe(Fn.iC)}}class KL{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?gC(this.query,this.afs.schedulers.outsideAngular).pipe((0,It.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),On(t=>t.length>0),Fn.iC):gC(this.query,this.afs.schedulers.outsideAngular).pipe(Fn.iC)}auditTrail(e){return this.stateChanges(e).pipe(gc((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=AP(e);return SP(this.query,t,this.afs.schedulers.outsideAngular).pipe(Fn.iC)}valueChanges(e={}){return lx(this.query,this.afs.schedulers.outsideAngular).pipe((0,It.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Fn.iC)}get(e){return(0,Xt.D)(this.query.get(e)).pipe(Fn.iC)}}const RP=new f.OlP("angularfire2.enableFirestorePersistence"),NP=new f.OlP("angularfire2.firestore.persistenceSettings"),ZL=new f.OlP("angularfire2.firestore.settings"),YL=new f.OlP("angularfire2.firestore.use-emulator");function PP(n,e=(t=>t)){return{query:e(n),ref:n}}let OP=(()=>{class n{constructor(t,r,i,u,c,m,w,D,T,N,V,q,ue,xe,De,ft,gt){this.schedulers=w;const et=(0,Hi.on)(t,m,r),dt=T;N&&bP(et,m,V,ue,xe,De,q,ft),[this.firestore,this.persistenceEnabled$]=(0,Hi.cc)(`${et.name}.firestore`,"AngularFirestore",et.name,()=>{const Ot=m.runOutsideAngular(()=>et.firestore());if(u&&Ot.settings(u),dt&&Ot.useEmulator(...dt),i&&!ms(c)){const Wt=()=>{try{return(0,Xt.D)(Ot.enablePersistence(D||void 0).then(()=>!0,()=>!1))}catch(Jr){return typeof console<"u"&&console.warn(Jr),st(!1)}};return[Ot,m.runOutsideAngular(Wt)]}return[Ot,st(!1)]},[u,dt,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:c}=PP(i,r),m=this.schedulers.ngZone.run(()=>u);return new xP(m,c,this)}collectionGroup(t,r){const i=r||(c=>c),u=this.firestore.collectionGroup(t);return new KL(i(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new MP(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Hi.Dh),f.LFG(Hi.xv,8),f.LFG(RP,8),f.LFG(ZL,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Fn.HU),f.LFG(NP,8),f.LFG(YL,8),f.LFG(cx,8),f.LFG(vP,8),f.LFG(wP,8),f.LFG(EP,8),f.LFG(IP,8),f.LFG(DP,8),f.LFG(CP,8),f.LFG(pC,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),QL=(()=>{class n{constructor(){ux.Z.registerVersion("angularfire",Fn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:RP,useValue:!0},{provide:NP,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[OP]}),n})(),kP=(()=>{class n{constructor(t){this.firestore=t}getPersons(){return this.firestore.collection("persons",t=>t.orderBy("name","asc")).valueChanges({idField:"id"}).pipe((0,It.U)(t=>t.map(r=>(r.children?.map(i=>{i.isChild=!0}),{...r,children:r.children??[]}))))}writePerson(t){const r=this.firestore.collection("persons").doc();t={...t,id:r.ref.id},r.set(t).then()}deletePerson(t){this.firestore.doc(`persons/${t.id}`).delete().then()}updatePerson(t,r){this.firestore.doc(`persons/${r}`).update(t).then()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(OP))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var XL=k(1144);const JL=["addListener","removeListener"],e2=["addEventListener","removeEventListener"],t2=["on","off"];function Ag(n,e,t,r){if((0,wi.m)(t)&&(r=t,t=void 0),r)return Ag(n,e,t).pipe(Cs(r));const[i,u]=function i2(n){return(0,wi.m)(n.addEventListener)&&(0,wi.m)(n.removeEventListener)}(n)?e2.map(c=>m=>n[c](e,m,t)):function n2(n){return(0,wi.m)(n.addListener)&&(0,wi.m)(n.removeListener)}(n)?JL.map(FP(n,e)):function r2(n){return(0,wi.m)(n.on)&&(0,wi.m)(n.off)}(n)?t2.map(FP(n,e)):[];if(!i&&(0,XL.z)(n))return(0,kn.z)(c=>Ag(c,e,t))((0,Ws.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new Zr.y(c=>{const m=(...w)=>c.next(1<w.length?w:w[0]);return i(m),()=>u(m)})}function FP(n,e){return t=>r=>n[t](e,r)}var s2=k(5032);function ew(n){return(0,yr.e)((e,t)=>{(0,Ws.Xf)(n).subscribe((0,sr.x)(t,()=>t.complete(),s2.Z)),!t.closed&&e.subscribe(t)})}const o2=["backdrop"],a2=["dialog"];function u2(n,e){if(1&n&&f._UZ(0,"div",6),2&n){const t=f.oxw(),r=f.MAs(3);f.Q6J("dialogDragEnabled",!0)("dialogDragTarget",r)("dragConstraint",t.config.dragConstraint)}}function c2(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",7),f.NdJ("click",function(){f.CHM(t);const i=f.oxw();return f.KtG(i.closeDialog())}),f.O4$(),f.TgZ(1,"svg",8),f._UZ(2,"path",9),f.qZA()()}}class mC{}class hx extends mC{constructor(e={}){super(),this.beforeCloseGuards=[],this.mutate(e)}close(e){this.canClose(e).pipe(On(Boolean)).subscribe({next:()=>this.onClose(e)})}beforeClose(e){this.beforeCloseGuards.push(e)}resetDrag(e){this.onReset(e)}canClose(e){const t=this.beforeCloseGuards.map(r=>r(e)).filter(r=>void 0!==r&&!0!==r).map(r=>"boolean"==typeof r?st(r):(0,Xt.D)(r).pipe(On(i=>!i)));return(0,VA.T)(...t).pipe(Zs(!0),Ei())}mutate(e){Object.assign(this,e)}asDialogRef(){return this}}function yC(n){return function l2(n){return null==n}(n)?"":function d2(n){return"string"==typeof n}(n)?n:`${n}px`}let LP=(()=>{class n{constructor(){this.dialogDragEnabled=!1,this.host=(0,f.f3M)(f.SBq),this.zone=(0,f.f3M)(f.R0b),this.delta={x:0,y:0},this.offset={x:0,y:0},this.enabled=!0,this.destroy$=new Qn.x}set dialogDragOffset(t){this.reset(t)}ngAfterViewInit(){this.enabled&&this.init()}ngOnChanges(){!this.enabled&&this.dialogDragEnabled&&this.dialogDragTarget&&(this.enabled=!0,this.handle?this.handle.style.setProperty("cursor","move"):this.enabled&&this.init()),this.dialogDragEnabled||(this.enabled=!1,this.handle&&this.handle.style.setProperty("cursor",""))}ngOnDestroy(){this.destroy$.next()}reset(t){const r={x:0,y:0};this.offset={...r,...t},this.delta={...r},this.translate()}setupEvents(){this.zone.runOutsideAngular(()=>{const t=Ag(this.handle,"mousedown"),r=Ag(document,"mousemove"),i=Ag(document,"mouseup");t.pipe(On(()=>this.enabled),(0,It.U)(c=>({startX:c.clientX,startY:c.clientY})),Sn(({startX:c,startY:m})=>r.pipe((0,It.U)(w=>{w.preventDefault(),this.delta={x:w.clientX-c,y:w.clientY-m},"constrain"===this.dragConstraint&&this.checkConstraint()}),ew(i))),ew(this.destroy$)).subscribe(()=>{0===this.delta.x&&0===this.delta.y||this.translate()}),i.pipe(On(()=>this.enabled),On(()=>0!==this.delta.x||0!==this.delta.y),ew(this.destroy$)).subscribe(()=>{"bounce"===this.dragConstraint&&(this.checkConstraint(),this.translate()),this.offset.x+=this.delta.x,this.offset.y+=this.delta.y,this.delta={x:0,y:0}})})}translate(){this.target&&this.zone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this.target.style.setProperty("transform",`translate(${this.translateX}px, ${this.translateY}px)`)})})}get translateX(){return this.offset.x+this.delta.x}get translateY(){return this.offset.y+this.delta.y}init(){if(!this.dialogDragTarget)throw new Error("You need to specify the drag target");this.handle=this.dialogDragHandle instanceof Element?this.dialogDragHandle:"string"==typeof this.dialogDragHandle&&this.dialogDragHandle?document.querySelector(this.dialogDragHandle):this.host.nativeElement,this.handle&&this.enabled&&this.handle.style.setProperty("cursor","move"),this.target=this.dialogDragTarget instanceof HTMLElement?this.dialogDragTarget:document.querySelector(this.dialogDragTarget),this.setupEvents(),this.translate()}checkConstraint(){const{width:t,height:r}=this.target.getBoundingClientRect(),{innerWidth:i,innerHeight:u}=window,c=this.translateY>0?this.translateY+r/2:this.translateY-r/2,m=u/2,w=this.translateX>0?this.translateX+t/2:this.translateX-t/2,D=i/2;-m>c&&(this.delta.y=r/2-m-this.offset.y),m<c&&(this.delta.y=m-r/2-this.offset.y),-D>w&&(this.delta.x=t/2-D-this.offset.x),D<w&&(this.delta.x=D-t/2-this.offset.x)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["","dialogDraggable",""]],inputs:{dialogDragHandle:"dialogDragHandle",dialogDragTarget:"dialogDragTarget",dialogDragEnabled:"dialogDragEnabled",dialogDragOffset:"dialogDragOffset",dragConstraint:"dragConstraint"},standalone:!0,features:[f.TTD]}),n})();const fx=new f.OlP("A reference to the document. Useful for iframes that want appends to parent window",{providedIn:"root",factory:()=>(0,f.f3M)(re)}),px=new f.OlP("config",{providedIn:"root",factory:()=>({})});const UP=new f.OlP("Global dialog config token",{providedIn:"root",factory:()=>function VP(){return{id:void 0,container:(0,f.f3M)(fx).body,backdrop:!0,closeButton:!0,enableClose:!0,draggable:!1,dragConstraint:"none",resizable:!1,size:"md",windowClass:void 0,width:void 0,height:void 0,minHeight:void 0,maxHeight:void 0,data:void 0,vcr:void 0,sizes:{sm:{height:"auto",width:"400px"},md:{height:"auto",width:"560px"},lg:{height:"auto",width:"800px"},fullScreen:{height:"100%",width:"100%"}},onClose:void 0,onOpen:void 0}}()}),BP=new f.OlP("Nodes inserted into the dialog");let h2=(()=>{class n{constructor(){this.config=(0,f.f3M)(px),this.dialogRef=(0,f.f3M)(hx),this.size=this.config.sizes?.[this.config.size||"md"],this.styles={width:yC(this.config.width||this.size?.width),height:yC(this.config.height||this.size?.height),minHeight:yC(this.config.minHeight||this.size?.minHeight),maxHeight:yC(this.config.maxHeight||this.size?.maxHeight)},this.destroy$=new Qn.x,this.nodes=(0,f.f3M)(BP),this.document=(0,f.f3M)(re),this.host=(0,f.f3M)(f.SBq).nativeElement,this.dialogService=(0,f.f3M)($P),this.host.id=this.config.id,this.nodes.forEach(t=>this.host.appendChild(t)),this.config.windowClass&&this.config.windowClass.split(/\s/).filter(r=>r).forEach(r=>this.host.classList.add(r))}ngOnInit(){const t=this.config.backdrop?this.backdrop.nativeElement:this.document.body,r=this.dialogElement.nativeElement,i=Ag(t,"click",{capture:!0}).pipe(On(({target:u})=>!r.contains(u)));if(i.pipe(ew(this.destroy$)).subscribe(this.dialogRef.backdropClick$),this.config.enableClose&&(0,VA.T)(Ag(this.document.body,"keyup").pipe(On(({key:u})=>"Escape"===u)),i).pipe(ew(this.destroy$),On(()=>"onlyLastStrategy"!==this.config.enableClose||this.dialogService.isLastOpened(this.config.id))).subscribe(()=>this.closeDialog()),this.nodes.forEach(u=>r.appendChild(u)),this.config.zIndexGetter){const u=this.config.zIndexGetter().toString();t.style.setProperty("--dialog-backdrop-z-index",u)}}reset(t){this.config.draggable&&this.draggable.reset(t)}closeDialog(){this.dialogRef.close()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.dialogRef=null,this.nodes=null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["ngneat-dialog"]],viewQuery:function(t,r){if(1&t&&(f.Gf(o2,7),f.Gf(a2,7),f.Gf(LP,5)),2&t){let i;f.iGM(i=f.CRH())&&(r.backdrop=i.first),f.iGM(i=f.CRH())&&(r.dialogElement=i.first),f.iGM(i=f.CRH())&&(r.draggable=i.first)}},standalone:!0,features:[f.jDz],decls:6,vars:8,consts:[[1,"ngneat-dialog-backdrop",3,"hidden"],["backdrop",""],["role","dialog",1,"ngneat-dialog-content",3,"ngStyle"],["dialog",""],["class","ngneat-drag-marker","dialogDraggable","",3,"dialogDragEnabled","dialogDragTarget","dragConstraint",4,"ngIf"],["class","ngneat-close-dialog",3,"click",4,"ngIf"],["dialogDraggable","",1,"ngneat-drag-marker",3,"dialogDragEnabled","dialogDragTarget","dragConstraint"],[1,"ngneat-close-dialog",3,"click"],["viewBox","0 0 329.26933 329","xmlns","http://www.w3.org/2000/svg"],["fill","currentColor","d","m194.800781 164.769531 128.210938-128.214843c8.34375-8.339844 8.34375-21.824219 0-30.164063-8.339844-8.339844-21.824219-8.339844-30.164063 0l-128.214844 128.214844-128.210937-128.214844c-8.34375-8.339844-21.824219-8.339844-30.164063 0-8.34375 8.339844-8.34375 21.824219 0 30.164063l128.210938 128.214843-128.210938 128.214844c-8.34375 8.339844-8.34375 21.824219 0 30.164063 4.15625 4.160156 9.621094 6.25 15.082032 6.25 5.460937 0 10.921875-2.089844 15.082031-6.25l128.210937-128.214844 128.214844 128.214844c4.160156 4.160156 9.621094 6.25 15.082032 6.25 5.460937 0 10.921874-2.089844 15.082031-6.25 8.34375-8.339844 8.34375-21.824219 0-30.164063zm0 0"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0,1)(2,"div",2,3),f.YNc(4,u2,1,3,"div",4),f.YNc(5,c2,3,0,"div",5),f.qZA()()),2&t&&(f.ekj("ngneat-dialog-backdrop-visible",r.config.backdrop),f.Q6J("hidden",!r.config.backdrop),f.xp6(2),f.ekj("ngneat-dialog-resizable",r.config.resizable),f.Q6J("ngStyle",r.styles),f.xp6(2),f.Q6J("ngIf",r.config.draggable),f.xp6(1),f.Q6J("ngIf",r.config.closeButton))},dependencies:[LP,ui,hs,Vs],styles:[".ngneat-dialog-content{display:flex;flex-direction:column;overflow:hidden;position:relative;animation:dialog-open .4s cubic-bezier(.25,.8,.25,1);border-radius:var(--dialog-content-border-radius, 4px);box-sizing:border-box;box-shadow:var(--dialog-content-box-shadow, 0px 11px 19px rgba(15, 20, 58, .14));background:var(--dialog-content-bg, #fff);width:auto;max-width:100%;height:auto;max-height:100%}@keyframes dialog-open{0%{transform:translate(50px)}to{transform:none}}.ngneat-dialog-content.ngneat-dialog-resizable{resize:both}.ngneat-dialog-backdrop{position:fixed;display:flex;align-items:center;justify-content:center;inset:0;height:100%;width:100%;padding:30px;z-index:var(--dialog-backdrop-z-index, 1050);background-color:transparent;animation:dialog-open-backdrop .3s}.ngneat-dialog-backdrop.ngneat-dialog-backdrop-visible{background:var(--dialog-backdrop-bg, rgba(0, 0, 0, .32))}@keyframes dialog-open-backdrop{0%{opacity:0}to{opacity:1}}.ngneat-drag-marker{position:absolute;left:0;top:0;cursor:move;width:100%;height:10px}.ngneat-close-dialog{display:flex;align-items:center;justify-content:center;position:absolute;cursor:pointer;top:var(--dialog-close-btn-top, 6px);right:var(--dialog-close-btn-right, 10px);width:var(--dialog-close-btn-size, 30px);height:var(--dialog-close-btn-size, 30px);color:var(--dialog-close-btn-color, #5f6368);transition:all .2s ease-in-out;border-radius:50%}.ngneat-close-dialog svg{width:var(--dialog-close-svg-size, 12px);height:var(--dialog-close-svg-size, 12px)}.ngneat-close-dialog:hover{color:var(--dialog-close-btn-color-hover, #5f6368);background-color:var(--dialog-close-btn-bg-hover, #eee)}body.ngneat-dialog-hidden{overflow:hidden}\n"],encapsulation:2}),n})();const jP="ngneat-dialog-hidden";let $P=(()=>{class n{constructor(){this.appRef=(0,f.f3M)(f.z2F),this.injector=(0,f.f3M)(f.lqb),this.document=(0,f.f3M)(fx),this.globalConfig=(0,f.f3M)(UP),this.dialogs=[],this.hasOpenDialogSub=new Cn(!1),this.hasOpenDialogs$=this.hasOpenDialogSub.asObservable()}hasOpenDialogs(){return this.dialogs.length>0}isOpen(t){return this.dialogs.some(r=>r.id===t)}isLastOpened(t){const r=t instanceof mC?t.id:t;return this.dialogs.at(-1)?.id===r}closeAll(){this.dialogs.forEach(t=>t.close())}open(t,r={}){const i=this.mergeConfig(r);i.onOpen?.();const u=new hx({id:i.id,data:i.data,backdropClick$:new Qn.x});this.throwIfIDAlreadyExists(i.id);const c={config:i,dialogRef:u};return this.dialogs.push(u),this.hasOpenDialogSub.next(!0),1===this.dialogs.length&&this.document.body.classList.add(jP),t instanceof f.Rgc?this.openTemplate(t,c):"function"==typeof t?this.openComponent(t,c):function f2(n){throw new TypeError(`Dialog must receive a Component or a TemplateRef, but this has been passed instead: ${n}`)}(t)}openTemplate(t,{config:r,dialogRef:i}){const u={$implicit:i,config:r},c=r.vcr?.createEmbeddedView(t,u)||t.createEmbeddedView(u);return this.attach({dialogRef:i,config:r,ref:t,view:c,attachToApp:!r.vcr})}openComponent(t,{config:r,dialogRef:i}){const u=(0,f.LMc)(t,{elementInjector:f.zs3.create({providers:[{provide:mC,useValue:i},{provide:px,useValue:r}],parent:r.vcr?.injector||this.injector}),environmentInjector:this.injector});return this.attach({dialogRef:i,config:r,ref:u,view:u.hostView,attachToApp:!0})}attach({dialogRef:t,config:r,ref:i,view:u,attachToApp:c}){const m=this.createDialog(r,t,u),w=r.container instanceof f.SBq?r.container.nativeElement:r.container,D={after:new Qn.x};return t.mutate({id:r.id,data:r.data,ref:i,onClose:V=>{this.globalConfig.onClose?.(),this.dialogs=this.dialogs.filter(({id:q})=>t.id!==q),this.hasOpenDialogSub.next(this.hasOpenDialogs()),w.removeChild(m.location.nativeElement),this.appRef.detachView(m.hostView),this.appRef.detachView(u),m.destroy(),u.destroy(),t.backdropClick$.complete(),t.mutate({ref:null,onClose:null,afterClosed$:null,backdropClick$:null,beforeCloseGuards:null,onReset:null}),D.after.next(V),D.after.complete(),0===this.dialogs.length&&this.document.body.classList.remove(jP)},afterClosed$:D.after.asObservable(),onReset:V=>{m.instance.reset(V)}}),w.appendChild(m.location.nativeElement),this.appRef.attachView(m.hostView),c&&this.appRef.attachView(u),t.asDialogRef()}createDialog(t,r,i){return(0,f.LMc)(h2,{elementInjector:f.zs3.create({providers:[{provide:hx,useValue:r},{provide:BP,useValue:i.rootNodes},{provide:px,useValue:t}],parent:this.injector}),environmentInjector:this.injector})}mergeConfig(t){return{...this.globalConfig,id:`dialog-${Math.random().toString(36).substring(7)}`,...t,sizes:this.globalConfig?.sizes}}throwIfIDAlreadyExists(t){if(this.dialogs.find(r=>r.id===t))throw new Error(`Please, ID must be unique, but there is already a dialog created with this ID: ${t}`)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),HP=(()=>{class n{constructor(t,r){this.personService=t,this.dialog=r}ngOnInit(){this.data=this.dialog.data;let{person:t}=this.data;t||(t={}),this.createForm=new hp({name:new va(t.name??"",[Nc.required]),type:new va(t.type??"",[Nc.required]),email:new va(t.email??"",[Nc.required]),phoneNo:new va(t.phoneNo??"",[Nc.required]),companyName:new va(t.companyName??"",[Nc.required]),address:new va(t.address??"",[Nc.required])})}savePerson(t){this.data=this.dialog.data;let{person:r}=this.data;if(!r)return this.personService.writePerson(this.createForm.value),void this.dialog.close();this.personService.updatePerson(this.createForm.value,r.id),this.dialog.close()}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(kP),f.Y36(mC))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-create-person"]],decls:28,vars:2,consts:[[1,"container"],[1,"d-grid",3,"formGroup"],[1,"mb-3"],["for","name",1,"form-label"],["type","text","id","name","formControlName","name",1,"form-control"],["type","text","id","type","formControlName","type",1,"form-control"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email",1,"form-control"],["for","phoneNo",1,"form-label"],["type","tel","id","phoneNo","formControlName","phoneNo",1,"form-control"],["for","companyName",1,"form-label"],["type","text","id","companyName","formControlName","companyName",1,"form-control"],["for","address",1,"form-label"],["type","text","id","address","formControlName","address",1,"form-control"],["type","submit",1,"btn","btn-outline-success",3,"disabled","click"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"label",3),f._uU(4,"Name"),f.qZA(),f._UZ(5,"input",4),f.qZA(),f.TgZ(6,"div",2)(7,"label",3),f._uU(8,"Type"),f.qZA(),f._UZ(9,"input",5),f.qZA(),f.TgZ(10,"div",2)(11,"label",6),f._uU(12,"Email"),f.qZA(),f._UZ(13,"input",7),f.qZA(),f.TgZ(14,"div",2)(15,"label",8),f._uU(16,"Phone No"),f.qZA(),f._UZ(17,"input",9),f.qZA(),f.TgZ(18,"div",2)(19,"label",10),f._uU(20,"Company Name"),f.qZA(),f._UZ(21,"input",11),f.qZA(),f.TgZ(22,"div",2)(23,"label",12),f._uU(24,"Address"),f.qZA(),f._UZ(25,"input",13),f.qZA(),f.TgZ(26,"button",14),f.NdJ("click",function(u){return r.savePerson(u)}),f._uU(27,"Submit"),f.qZA()()()),2&t&&(f.xp6(1),f.Q6J("formGroup",r.createForm),f.xp6(25),f.Q6J("disabled",!r.createForm.valid))},dependencies:[Tm,yh,pm,gm,vp,Ep],styles:[".container[_ngcontent-%COMP%]{max-width:300px}"]}),n})();function g2(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",18)(1,"button",19),f.NdJ("click",function(){f.CHM(t);const i=f.oxw().$implicit,u=f.oxw();return f.KtG(u.deleteRecord(i))}),f._UZ(2,"i",20),f.qZA(),f.TgZ(3,"button",21),f.NdJ("click",function(){f.CHM(t);const i=f.oxw().$implicit,u=f.oxw();return f.KtG(u.updateRecord(i))}),f._UZ(4,"i",22),f.qZA()()}}function m2(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"tr",7)(1,"td",8),f._UZ(2,"input",9),f.YNc(3,g2,5,0,"div",10),f.qZA(),f.TgZ(4,"td",11)(5,"i",12),f.NdJ("click",function(i){f.CHM(t);const u=f.oxw();return f.KtG(u.expand(i))}),f.qZA(),f._uU(6),f.qZA(),f.TgZ(7,"td",13),f._uU(8),f.qZA(),f.TgZ(9,"td",14),f._uU(10),f.qZA(),f.TgZ(11,"td",15),f._uU(12),f.qZA(),f.TgZ(13,"td",16),f._uU(14),f.qZA(),f.TgZ(15,"td",17),f._uU(16),f.qZA()()}if(2&n){const t=e.$implicit;f.xp6(3),f.Q6J("ngIf",!t.isChild),f.xp6(3),f.Oqu(t.name),f.xp6(2),f.Oqu(t.type),f.xp6(2),f.Oqu(t.email),f.xp6(2),f.Oqu(t.phoneNo),f.xp6(2),f.Oqu(t.companyName),f.xp6(2),f.Oqu(t.address)}}let y2=(()=>{class n{constructor(t,r){this.personService=t,this.dialogRef=r,this.persons=[],this.showDelete=!1,this.firstLevel=!1,this.initialPersons=[]}ngOnInit(){this.fetchPersons(),this.searchForm=new hp({searchTerm:new va("")}),this.searchForm.get("searchTerm")?.valueChanges.pipe(sp(400),q_()).subscribe(()=>{this.searchForm.get("searchTerm")?.value&&""!==this.searchForm.get("searchTerm")?.value?this.persons=this.persons.filter(t=>t.name.toLowerCase().includes(this.searchForm.get("searchTerm")?.value.toLowerCase())):this.fetchPersons()})}expand(t){const r=t.target,i=this.persons.find(u=>u.name===r.parentElement.innerText);if(i){if(i.children?.every(u=>this.persons.includes(u)))return i.children?.forEach(u=>{const c=this.persons.indexOf(u);this.persons.splice(c,1)}),void(i.expanded=!i.expanded);i.children?.forEach(u=>{const c=this.persons.indexOf(i);this.persons.splice(c+1,0,u),setTimeout(()=>{r.parentElement.parentElement.nextElementSibling.querySelectorAll("td").forEach(m=>{m.style.marginLeft="50px"})},0)}),i.expanded=!i.expanded}}processDeleteButton(t){!t.isChild&&!this.firstLevel&&(this.firstLevel=!this.firstLevel)}updateRecord(t){this.dialogRef.open(HP,{width:"450px",height:"600px",data:{title:"Update Person",person:t}})}deleteRecord(t){this.personService.deletePerson(t),this.fetchPersons()}deleteMultiple(){}createPerson(){this.dialogRef.open(HP,{width:"450px",height:"600px",data:{title:"Create Person"}})}fetchPersons(){this.personService.getPersons().subscribe(t=>{this.persons=t,this.initialPersons=t.map(r=>({...r,children:{...r.children}}))})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(kP),f.Y36($P))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-root"]],decls:28,vars:2,consts:[[1,"container","mt-5"],[1,"d-flex","justify-content-between"],[1,"buttons-container","d-flex","flex-row","justify-content-between","w-25"],[1,"btn","btn-outline-info",3,"click"],[1,"search-box","d-flex","justify-content-between",3,"formGroup"],["type","text","placeholder","Input a search term...","formControlName","searchTerm"],["class","table-row border-black border-bottom ",4,"ngFor","ngForOf"],[1,"table-row","border-black","border-bottom"],["headers","Select",1,"d-flex","justify-content-between","button-container"],["type","checkbox",1,"form-check-input"],["class","d-flex button-group justify-content-between",4,"ngIf"],["headers","Name"],[1,"bi","bi-arrow-right-short",3,"click"],["headers","Type"],["headers","Email"],["headers","Phone Number"],["headers","Company Name"],["headers","Address"],[1,"d-flex","button-group","justify-content-between"],[1,"btn","btn-outline-danger",3,"click"],[1,"bi","bi-trash"],[1,"btn","btn-outline-secondary",3,"click"],[1,"bi","bi-pencil"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"h1"),f._uU(2,"Ukiyo App Demo"),f.qZA(),f.TgZ(3,"div",1)(4,"section",2)(5,"button",3),f.NdJ("click",function(){return r.createPerson()}),f._uU(6,"Create"),f.qZA()(),f.TgZ(7,"section",4),f._UZ(8,"input",5),f.qZA()(),f.TgZ(9,"table")(10,"thead")(11,"tr")(12,"th"),f._uU(13,"Select"),f.qZA(),f.TgZ(14,"th"),f._uU(15,"Name"),f.qZA(),f.TgZ(16,"th"),f._uU(17,"Type"),f.qZA(),f.TgZ(18,"th"),f._uU(19,"Email"),f.qZA(),f.TgZ(20,"th"),f._uU(21,"Phone Number"),f.qZA(),f.TgZ(22,"th"),f._uU(23,"Company Name"),f.qZA(),f.TgZ(24,"th"),f._uU(25,"Address"),f.qZA()()(),f.TgZ(26,"tbody"),f.YNc(27,m2,17,7,"tr",6),f.qZA()()()),2&t&&(f.xp6(7),f.Q6J("formGroup",r.searchForm),f.xp6(20),f.Q6J("ngForOf",r.persons))},dependencies:[Yo,hs,yh,pm,gm,vp,Ep],styles:[".container[_ngcontent-%COMP%]{max-width:100vw}.container[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-right:1px solid #e0e0e0}.container[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]{margin-bottom:1rem;min-width:15%}.container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{min-width:200px}.container[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]{width:20px;height:20px}.container[_ngcontent-%COMP%]   tr.table-row[_ngcontent-%COMP%]:hover{border-bottom:1px solid #e0e0e0!important;background:#aaf!important}.container[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]{min-height:500px}.container[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{min-width:100px;visibility:hidden}.container[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]:hover   .button-group[_ngcontent-%COMP%]{visibility:visible}"]}),n})();const GP="firebasestorage.googleapis.com",zP="storageBucket";class Ir extends Gt.ZR{constructor(e,t,r=0){super(gx(e),`Firebase Storage: ${t} (${gx(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ir.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return gx(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var zn=(()=>(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(zn||(zn={})),zn))();function gx(n){return"storage/"+n}function mx(){return new Ir(zn.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function qP(){return new Ir(zn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function WP(){return new Ir(zn.CANCELED,"User canceled the upload/download.")}function KP(){return new Ir(zn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Qy(n){return new Ir(zn.INVALID_ARGUMENT,n)}function ZP(){return new Ir(zn.APP_DELETED,"The Firebase app was deleted.")}function YP(n){return new Ir(zn.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function tw(n,e){return new Ir(zn.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function nw(n){throw new Ir(zn.INTERNAL_ERROR,"Internal error: "+n)}class ds{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ds.makeFromUrl(e,t)}catch{return new ds(e,"")}if(""===r.path)return r;throw function S2(n){return new Ir(zn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",m=new RegExp("^gs://"+i+"(/(.*))?$","i");function D(dt){dt.path_=decodeURIComponent(dt.path)}const N=t.replace(/[.]/g,"\\."),et=[{regex:m,indices:{bucket:1,path:3},postModify:function u(dt){"/"===dt.path.charAt(dt.path.length-1)&&(dt.path_=dt.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${N}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:D},{regex:new RegExp(`^https?://${t===GP?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:D}];for(let dt=0;dt<et.length;dt++){const Ot=et[dt],Wt=Ot.regex.exec(e);if(Wt){let Ko=Wt[Ot.indices.path];Ko||(Ko=""),r=new ds(Wt[Ot.indices.bucket],Ko),Ot.postModify(r);break}}if(null==r)throw function T2(n){return new Ir(zn.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class N2{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function _C(n){return"string"==typeof n||n instanceof String}function QP(n){return yx()&&n instanceof Blob}function yx(){return typeof Blob<"u"&&!(0,Gt.UG)()}function _x(n,e,t,r){if(r<e)throw Qy(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Qy(`Invalid value for '${n}'. Expected ${t} or less.`)}function md(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function XP(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var lf=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(lf||(lf={})),lf))();function JP(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),u=-1!==e.indexOf(n);return t||i||u}class V2{constructor(e,t,r,i,u,c,m,w,D,T,N,V=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=u,this.additionalRetryCodes_=c,this.callback_=m,this.errorCallback_=w,this.timeout_=D,this.progressCallback_=T,this.connectionFactory_=N,this.retry=V,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((q,ue)=>{this.resolve_=q,this.reject_=ue,this.start_()})}start_(){const t=(r,i)=>{const u=this.resolve_,c=this.reject_,m=i.connection;if(i.wasSuccessCode)try{const w=this.callback_(m,m.getResponse());!function k2(n){return void 0!==n}(w)?u():u(w)}catch(w){c(w)}else if(null!==m){const w=mx();w.serverResponse=m.getErrorText(),c(this.errorCallback_?this.errorCallback_(m,w):w)}else c(i.canceled?this.appDelete_?ZP():WP():qP())};this.canceled_?t(0,new vC(!1,null,!0)):this.backoffId_=function P2(n,e,t){let r=1,i=null,u=null,c=!1,m=0;function w(){return 2===m}let D=!1;function T(...De){D||(D=!0,e.apply(null,De))}function N(De){i=setTimeout(()=>{i=null,n(q,w())},De)}function V(){u&&clearTimeout(u)}function q(De,...ft){if(D)return void V();if(De)return V(),void T.call(null,De,...ft);if(w()||c)return V(),void T.call(null,De,...ft);let et;r<64&&(r*=2),1===m?(m=2,et=0):et=1e3*(r+Math.random()),N(et)}let ue=!1;function xe(De){ue||(ue=!0,V(),!D&&(null!==i?(De||(m=2),clearTimeout(i),N(0)):De||(m=1)))}return N(0),u=setTimeout(()=>{c=!0,xe(!0)},t),xe}((r,i)=>{if(i)return void r(!1,new vC(!1,null,!0));const u=this.connectionFactory_();this.pendingConnection_=u;const c=m=>{null!==this.progressCallback_&&this.progressCallback_(m.loaded,m.lengthComputable?m.total:-1)};null!==this.progressCallback_&&u.addUploadProgressListener(c),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&u.removeUploadProgressListener(c),this.pendingConnection_=null;const m=u.getErrorCode()===lf.NO_ERROR,w=u.getStatus();if(!m||JP(w,this.additionalRetryCodes_)&&this.retry){const T=u.getErrorCode()===lf.ABORT;return void r(!1,new vC(!1,null,T))}const D=-1!==this.successCodes_.indexOf(w);r(!0,new vC(D,u))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function O2(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class vC{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function z2(...n){const e=function G2(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(yx())return new Blob(n);throw new Ir(zn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Wo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class vx{constructor(e,t){this.data=e,this.contentType=t||null}}function wx(n,e){switch(n){case Wo.RAW:return new vx(eO(e));case Wo.BASE64:case Wo.BASE64URL:return new vx(tO(n,e));case Wo.DATA_URL:return new vx(function Z2(n){const e=new nO(n);return e.base64?tO(Wo.BASE64,e.rest):function K2(n){let e;try{e=decodeURIComponent(n)}catch{throw tw(Wo.DATA_URL,"Malformed data URL.")}return eO(e)}(e.rest)}(e),function Y2(n){return new nO(n).contentType}(e))}throw mx()}function eO(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function tO(n,e){switch(n){case Wo.BASE64:{const i=-1!==e.indexOf("-"),u=-1!==e.indexOf("_");if(i||u)throw tw(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Wo.BASE64URL:{const i=-1!==e.indexOf("+"),u=-1!==e.indexOf("/");if(i||u)throw tw(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function W2(n){if(typeof atob>"u")throw function R2(n){return new Ir(zn.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:tw(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class nO{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw tw(Wo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function Q2(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class zc{constructor(e,t){let r=0,i="";QP(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(QP(this.data_)){const i=function q2(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new zc(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new zc(r,!0)}}static getBlob(...e){if(yx()){const t=e.map(r=>r instanceof zc?r.data_:r);return new zc(z2.apply(null,t))}{const t=e.map(c=>_C(c)?wx(Wo.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let u=0;return t.forEach(c=>{for(let m=0;m<c.length;m++)i[u++]=c[m]}),new zc(i,!0)}}uploadData(){return this.data_}}function Ex(n){let e;try{e=JSON.parse(n)}catch{return null}return function L2(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function rO(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function eV(n,e){return e}class Os{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||eV}}let wC=null;function rw(){if(wC)return wC;const n=[];n.push(new Os("bucket")),n.push(new Os("generation")),n.push(new Os("metageneration")),n.push(new Os("name","fullPath",!0));const t=new Os("name");t.xform=function e(u,c){return function tV(n){return!_C(n)||n.length<2?n:rO(n)}(c)},n.push(t);const i=new Os("size");return i.xform=function r(u,c){return void 0!==c?Number(c):c},n.push(i),n.push(new Os("timeCreated")),n.push(new Os("updated")),n.push(new Os("md5Hash",null,!0)),n.push(new Os("cacheControl",null,!0)),n.push(new Os("contentDisposition",null,!0)),n.push(new Os("contentEncoding",null,!0)),n.push(new Os("contentLanguage",null,!0)),n.push(new Os("contentType",null,!0)),n.push(new Os("metadata","customMetadata",!0)),wC=n,wC}function iO(n,e,t){const r=Ex(e);return null===r?null:function rV(n,e,t){const r={type:"file"},i=t.length;for(let u=0;u<i;u++){const c=t[u];r[c.local]=c.xform(r,e[c.server])}return function nV(n,e){Object.defineProperty(n,"ref",{get:function t(){const u=new ds(n.bucket,n.fullPath);return e._makeStorageReference(u)}})}(r,n),r}(n,r,t)}function Ix(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const u=e[i];u.writable&&(t[u.server]=n[u.local])}return JSON.stringify(t)}const sO="prefixes",oO="items";class qc{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Wc(n){if(!n)throw mx()}function EC(n,e){return function t(r,i){const u=iO(n,i,e);return Wc(null!==u),u}}function Xy(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function C2(){return new Ir(zn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function D2(){return new Ir(zn.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function I2(n){return new Ir(zn.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function b2(n){return new Ir(zn.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function iw(n){const e=Xy(n);return function t(r,i){let u=e(r,i);return 404===r.getStatus()&&(u=function E2(n){return new Ir(zn.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),u.serverResponse=i.serverResponse,u}}function aO(n,e,t){const i=md(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,m=new qc(i,"GET",EC(n,t),c);return m.errorHandler=iw(e),m}function cV(n,e,t,r,i){const u={};u.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(u.delimiter=t),r&&(u.pageToken=r),i&&(u.maxResults=i);const m=md(e.bucketOnlyServerUrl(),n.host,n._protocol),D=n.maxOperationRetryTime,T=new qc(m,"GET",function aV(n,e){return function t(r,i){const u=function oV(n,e,t){const r=Ex(t);return null===r?null:function sV(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[sO])for(const i of t[sO]){const u=i.replace(/\/$/,""),c=n._makeStorageReference(new ds(e,u));r.prefixes.push(c)}if(t[oO])for(const i of t[oO]){const u=n._makeStorageReference(new ds(e,i.name));r.items.push(u)}return r}(n,e,r)}(n,e,i);return Wc(null!==u),u}}(n,e.bucket),D);return T.urlParams=u,T.errorHandler=Xy(e),T}function cO(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function fV(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class IC{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function Dx(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Wc(!1)}return Wc(!!t&&-1!==(e||["active"]).indexOf(t)),t}const yV={STATE_CHANGED:"state_changed"},ks={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Cx(n){switch(n){case"running":case"pausing":case"canceling":return ks.RUNNING;case"paused":return ks.PAUSED;case"success":return ks.SUCCESS;case"canceled":return ks.CANCELED;default:return ks.ERROR}}class _V{constructor(e,t,r){if(function F2(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const u=e;this.next=u.next,this.error=u.error,this.complete=u.complete}}}function Jy(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let hO=null;class vV{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=lf.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=lf.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=lf.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw nw("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const u in i)i.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,i[u].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw nw("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw nw("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw nw("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw nw("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class wV extends vV{initXhr(){this.xhr_.responseType="text"}}function Nu(){return hO?hO():new wV}class fO{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=rw(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(zn.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const u=this.isExponentialBackoffExpired();if(JP(i.status,[])){if(!u)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=qP()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(zn.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,u)=>{this._resolve=i,this._reject=u,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function pV(n,e,t,r,i){const u=e.bucketOnlyServerUrl(),c=cO(e,r,i),m={name:c.fullPath},w=md(u,n.host,n._protocol),T={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},N=Ix(c,t),ue=new qc(w,"POST",function q(xe){let De;Dx(xe);try{De=xe.getResponseHeader("X-Goog-Upload-URL")}catch{Wc(!1)}return Wc(_C(De)),De},n.maxUploadRetryTime);return ue.urlParams=m,ue.headers=T,ue.body=N,ue.errorHandler=Xy(e),ue}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Nu,e,t);this._request=i,i.getPromise().then(u=>{this._request=void 0,this._uploadUrl=u,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function gV(n,e,t,r){const w=new qc(t,"POST",function u(D){const T=Dx(D,["active","final"]);let N=null;try{N=D.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Wc(!1)}N||Wc(!1);const V=Number(N);return Wc(!isNaN(V)),new IC(V,r.size(),"final"===T)},n.maxUploadRetryTime);return w.headers={"X-Goog-Upload-Command":"query"},w.errorHandler=Xy(e),w}(this._ref.storage,this._ref._location,e,this._blob),u=this._ref.storage._makeRequest(i,Nu,t,r);this._request=u,u.getPromise().then(c=>{this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new IC(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,u)=>{let c;try{c=function mV(n,e,t,r,i,u,c,m){const w=new IC(0,0);if(c?(w.current=c.current,w.total=c.total):(w.current=0,w.total=r.size()),r.size()!==w.total)throw function x2(){return new Ir(zn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const D=w.total-w.current;let T=D;i>0&&(T=Math.min(T,i));const N=w.current;let q="";q=0===T?"finalize":D===T?"upload, finalize":"upload";const ue={"X-Goog-Upload-Command":q,"X-Goog-Upload-Offset":`${w.current}`},xe=r.slice(N,N+T);if(null===xe)throw KP();const et=new qc(t,"POST",function De(dt,Ot){const Wt=Dx(dt,["active","final"]),Jr=w.current+T,Ko=r.size();let e_;return e_="final"===Wt?EC(e,u)(dt,Ot):null,new IC(Jr,Ko,"final"===Wt,e_)},e.maxUploadRetryTime);return et.headers=ue,et.body=xe.uploadData(),et.progressCallback=m||null,et.errorHandler=Xy(n),et}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(w){return this._error=w,void this._transition("error")}const m=this._ref.storage._makeRequest(c,Nu,i,u,!1);this._request=m,m.getPromise().then(w=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(w.current),w.finalized?(this._metadata=w.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=aO(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Nu,e,t);this._request=i,i.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function lO(n,e,t,r,i){const u=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},w=function m(){let et="";for(let dt=0;dt<2;dt++)et+=Math.random().toString().slice(2);return et}();c["Content-Type"]="multipart/related; boundary="+w;const D=cO(e,r,i),T=Ix(D,t),q=zc.getBlob("--"+w+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+T+"\r\n--"+w+"\r\nContent-Type: "+D.contentType+"\r\n\r\n",r,"\r\n--"+w+"--");if(null===q)throw KP();const ue={name:D.fullPath},xe=md(u,n.host,n._protocol),ft=n.maxUploadRetryTime,gt=new qc(xe,"POST",EC(n,t),ft);return gt.urlParams=ue,gt.headers=c,gt.body=q.uploadData(),gt.errorHandler=Xy(e),gt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Nu,e,t);this._request=i,i.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=WP(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=Cx(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const u=new _V(t||void 0,r||void 0,i||void 0);return this._addObserver(u),()=>{this._removeObserver(u)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(Cx(this._state)){case ks.SUCCESS:Jy(this._resolve.bind(null,this.snapshot))();break;case ks.CANCELED:case ks.ERROR:Jy(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Cx(this._state)){case ks.RUNNING:case ks.PAUSED:e.next&&Jy(e.next.bind(e,this.snapshot))();break;case ks.SUCCESS:e.complete&&Jy(e.complete.bind(e))();break;default:e.error&&Jy(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class xg{constructor(e,t){this._service=e,this._location=t instanceof ds?t:ds.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new xg(e,t)}get root(){const e=new ds(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return rO(this._location.path)}get storage(){return this._service}get parent(){const e=function X2(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new ds(this._location.bucket,e);return new xg(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw YP(e)}}function gO(n,e,t){return bx.apply(this,arguments)}function bx(){return bx=(0,me.Z)(function*(n,e,t){const i=yield mO(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield gO(n,e,i.nextPageToken))}),bx.apply(this,arguments)}function mO(n,e){null!=e&&"number"==typeof e.maxResults&&_x("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=cV(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Nu)}function NV(n){n._throwIfRoot("getDownloadURL");const e=function lV(n,e,t){const i=md(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,m=new qc(i,"GET",function uV(n,e){return function t(r,i){const u=iO(n,i,e);return Wc(null!==u),function iV(n,e,t,r){const i=Ex(e);if(null===i||!_C(i.downloadTokens))return null;const u=i.downloadTokens;if(0===u.length)return null;const c=encodeURIComponent;return u.split(",").map(D=>{const N=n.fullPath;return md("/b/"+c(n.bucket)+"/o/"+c(N),t,r)+XP({alt:"media",token:D})})[0]}(u,i,n.host,n._protocol)}}(n,t),c);return m.errorHandler=iw(e),m}(n.storage,n._location,rw());return n.storage.makeRequestWithTokens(e,Nu).then(t=>{if(null===t)throw function M2(){return new Ir(zn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function yO(n,e){const t=function J2(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new ds(n._location.bucket,t);return new xg(n.storage,r)}function _O(n,e){if(n instanceof Tx){const t=n;if(null==t._bucket)throw function A2(){return new Ir(zn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+zP+"' property when initializing the app?")}();const r=new xg(t,t._bucket);return null!=e?_O(r,e):r}return void 0!==e?yO(n,e):n}function FV(n,e){if(e&&function OV(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof Tx)return function kV(n,e){return new xg(n,e)}(n,e);throw Qy("To use ref(service, url), the first argument must be a Storage instance.")}return _O(n,e)}function vO(n,e){const t=e?.[zP];return null==t?null:ds.makeFromBucketSpec(t,n)}class Tx{constructor(e,t,r,i,u){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=u,this._bucket=null,this._host=GP,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?ds.makeFromBucketSpec(i,this._host):vO(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?ds.makeFromBucketSpec(this._url,e):vO(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){_x("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){_x("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,me.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,me.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new xg(this,e)}_makeRequest(e,t,r,i,u=!0){if(this._deleted)return new N2(ZP());{const c=function H2(n,e,t,r,i,u,c=!0){const m=XP(n.urlParams),w=n.url+m,D=Object.assign({},n.headers);return function j2(n,e){e&&(n["X-Firebase-GMPID"]=e)}(D,e),function U2(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(D,t),function B2(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(D,u),function $2(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(D,r),new V2(w,n.method,D,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,c)}(e,this._appId,r,i,t,this._firebaseVersion,u);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}makeRequestWithTokens(e,t){var r=this;return(0,me.Z)(function*(){const[i,u]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,u).getPromise()})()}}const wO="@firebase/storage";function DO(n,e){return FV(n=(0,Gt.m9)(n),e)}function qV(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Tx(t,r,i,e,Gi.SDK_VERSION)}!function WV(){(0,Gi._registerComponent)(new bh.wA("storage",qV,"PUBLIC").setMultipleInstances(!0)),(0,Gi.registerVersion)(wO,"0.11.2",""),(0,Gi.registerVersion)(wO,"0.11.2","esm2017")}();class DC{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class bO{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new DC(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new DC(r,this,this._ref))},t)}on(e,t,r,i){let u;return t&&(u="function"==typeof t?c=>t(new DC(c,this,this._ref)):{next:t.next?c=>t.next(new DC(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,u,r||void 0,i||void 0)}}class TO{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new yd(e,this._service))}get items(){return this._delegate.items.map(e=>new yd(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class yd{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function zV(n,e){return yO(n,e)}(this._delegate,e);return new yd(t,this.storage)}get root(){return new yd(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new yd(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new bO(function VV(n,e,t){return function SV(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new fO(n,new zc(e),t)}(n=(0,Gt.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Wo.RAW,r){this._throwIfRoot("putString");const i=wx(t,e),u=Object.assign({},r);return null==u.contentType&&null!=i.contentType&&(u.contentType=i.contentType),new bO(new fO(this._delegate,new zc(i.data,!0),u),this)}listAll(){return function $V(n){return function xV(n){const e={prefixes:[],items:[]};return gO(n,e).then(()=>e)}(n=(0,Gt.m9)(n))}(this._delegate).then(e=>new TO(e,this.storage))}list(e){return function jV(n,e){return mO(n=(0,Gt.m9)(n),e)}(this._delegate,e||void 0).then(t=>new TO(t,this.storage))}getMetadata(){return function UV(n){return function MV(n){n._throwIfRoot("getMetadata");const e=aO(n.storage,n._location,rw());return n.storage.makeRequestWithTokens(e,Nu)}(n=(0,Gt.m9)(n))}(this._delegate)}updateMetadata(e){return function BV(n,e){return function RV(n,e){n._throwIfRoot("updateMetadata");const t=function dV(n,e,t,r){const u=md(e.fullServerUrl(),n.host,n._protocol),m=Ix(t,r),D=n.maxOperationRetryTime,T=new qc(u,"PATCH",EC(n,r),D);return T.headers={"Content-Type":"application/json; charset=utf-8"},T.body=m,T.errorHandler=iw(e),T}(n.storage,n._location,e,rw());return n.storage.makeRequestWithTokens(t,Nu)}(n=(0,Gt.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function HV(n){return NV(n=(0,Gt.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function GV(n){return function PV(n){n._throwIfRoot("deleteObject");const e=function hV(n,e){const r=md(e.fullServerUrl(),n.host,n._protocol),m=new qc(r,"DELETE",function c(w,D){},n.maxOperationRetryTime);return m.successCodes=[200,204],m.errorHandler=iw(e),m}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Nu)}(n=(0,Gt.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw YP(e)}}class SO{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(AO(e))throw Qy("ref() expected a child path but got a URL, use refFromURL instead.");return new yd(DO(this._delegate,e),this)}refFromURL(e){if(!AO(e))throw Qy("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ds.makeFromUrl(e,this._delegate.host)}catch{throw Qy("refFromUrl() expected a valid full URL but got an invalid one.")}return new yd(DO(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function CO(n,e,t,r={}){!function LV(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,Gt.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function AO(n){return/^[A-Za-z]+:\/\//.test(n)}function QV(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new SO(t,r)}function xO(n){const e=function JV(n){return new Zr.y(e=>{const t=c=>e.next(c);t(n.snapshot);const u=n.on("state_changed",t);return n.then(c=>{t(c),e.complete()},c=>{t(n.snapshot),(c=>{e.error(c)})(c)}),function(){u()}}).pipe(sp(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,It.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function CC(n){return{getDownloadURL:()=>st(void 0).pipe(Fn.fc,Sn(()=>n.getDownloadURL()),Fn.iC),getMetadata:()=>st(void 0).pipe(Fn.fc,Sn(()=>n.getMetadata()),Fn.iC),delete:()=>(0,Xt.D)(n.delete()),child:e=>CC(n.child(e)),updateMetadata:e=>(0,Xt.D)(n.updateMetadata(e)),put:(e,t)=>xO(n.put(e,t)),putString:(e,t,r)=>xO(n.putString(e,t,r)),list:e=>(0,Xt.D)(n.list(e)),listAll:()=>(0,Xt.D)(n.listAll())}}!function XV(n){const e={TaskState:ks,TaskEvent:yV,StringFormat:Wo,Storage:SO,Reference:yd};n.INTERNAL.registerComponent(new bh.wA("storage-compat",QV,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}(ME.Z);const eU=new f.OlP("angularfire2.storageBucket"),tU=new f.OlP("angularfire2.storage.maxUploadRetryTime"),nU=new f.OlP("angularfire2.storage.maxOperationRetryTime"),rU=new f.OlP("angularfire2.storage.use-emulator");let iU=(()=>{class n{constructor(t,r,i,u,c,m,w,D,T,N){const V=(0,Hi.on)(t,c,r);this.storage=(0,Hi.cc)(`${V.name}.storage.${i}`,"AngularFireStorage",V.name,()=>{const q=c.runOutsideAngular(()=>V.storage(i||void 0)),ue=T;return ue&&q.useEmulator(...ue),w&&q.setMaxUploadRetryTime(w),D&&q.setMaxOperationRetryTime(D),q},[w,D])}ref(t){return CC(this.storage.ref(t))}refFromURL(t){return CC(this.storage.refFromURL(t))}upload(t,r,i){return CC(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Hi.Dh),f.LFG(Hi.xv,8),f.LFG(eU,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Fn.HU),f.LFG(tU,8),f.LFG(nU,8),f.LFG(rU,8),f.LFG(pC,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),sU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})(),oU=(()=>{class n{constructor(){ux.Z.registerVersion("angularfire",Fn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[iU],imports:[sU]}),n})();const aU_firebase={apiKey:"AIzaSyBqY2TwIcL748hZP9nPotaEVuA357O0458",authDomain:"ukiyo-demo-app.firebaseapp.com",projectId:"ukiyo-demo-app",storageBucket:"ukiyo-demo-app.appspot.com",messagingSenderId:"92707618342",appId:"1:92707618342:web:9abc22a358bd3e8f4ff0e7"};let uU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n,bootstrap:[y2]}),n.\u0275inj=f.cJS({imports:[la,ip,Hi.hO.initializeApp(aU_firebase,"ukiyo-demo-app"),QL,HL,oU,xE]}),n})();ll().bootstrapModule(uU).catch(n=>console.error(n))},9751:(wt,Me,k)=>{k.d(Me,{y:()=>we});var f=k(930),Q=k(727),O=k(8822),ie=k(9635),se=k(2416),re=k(576),ye=k(2806);let we=(()=>{class W{constructor(Te){Te&&(this._subscribe=Te)}lift(Te){const We=new W;return We.source=this,We.operator=Te,We}subscribe(Te,We,ut){const pe=function j(W){return W&&W instanceof f.Lv||function $(W){return W&&(0,re.m)(W.next)&&(0,re.m)(W.error)&&(0,re.m)(W.complete)}(W)&&(0,Q.Nn)(W)}(Te)?Te:new f.Hp(Te,We,ut);return(0,ye.x)(()=>{const{operator:Pe,source:Oe}=this;pe.add(Pe?Pe.call(pe,Oe):Oe?this._subscribe(pe):this._trySubscribe(pe))}),pe}_trySubscribe(Te){try{return this._subscribe(Te)}catch(We){Te.error(We)}}forEach(Te,We){return new(We=fe(We))((ut,pe)=>{const Pe=new f.Hp({next:Oe=>{try{Te(Oe)}catch(je){pe(je),Pe.unsubscribe()}},error:pe,complete:ut});this.subscribe(Pe)})}_subscribe(Te){var We;return null===(We=this.source)||void 0===We?void 0:We.subscribe(Te)}[O.L](){return this}pipe(...Te){return(0,ie.U)(Te)(this)}toPromise(Te){return new(Te=fe(Te))((We,ut)=>{let pe;this.subscribe(Pe=>pe=Pe,Pe=>ut(Pe),()=>We(pe))})}}return W.create=$e=>new W($e),W})();function fe(W){var $e;return null!==($e=W??se.v.Promise)&&void 0!==$e?$e:Promise}},7579:(wt,Me,k)=>{k.d(Me,{x:()=>ye});var f=k(9751),Q=k(727);const ie=(0,k(3888).d)(fe=>function(){fe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var se=k(8737),re=k(2806);let ye=(()=>{class fe extends f.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const W=new we(this,this);return W.operator=j,W}_throwIfClosed(){if(this.closed)throw new ie}next(j){(0,re.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const W of this.currentObservers)W.next(j)}})}error(j){(0,re.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:W}=this;for(;W.length;)W.shift().error(j)}})}complete(){(0,re.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:W,isStopped:$e,observers:Te}=this;return W||$e?Q.Lc:(this.currentObservers=null,Te.push(j),new Q.w0(()=>{this.currentObservers=null,(0,se.P)(Te,j)}))}_checkFinalizedStatuses(j){const{hasError:W,thrownError:$e,isStopped:Te}=this;W?j.error($e):Te&&j.complete()}asObservable(){const j=new f.y;return j.source=this,j}}return fe.create=($,j)=>new we($,j),fe})();class we extends ye{constructor($,j){super(),this.destination=$,this.source=j}next($){var j,W;null===(W=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===W||W.call(j,$)}error($){var j,W;null===(W=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===W||W.call(j,$)}complete(){var $,j;null===(j=null===($=this.destination)||void 0===$?void 0:$.complete)||void 0===j||j.call($)}_subscribe($){var j,W;return null!==(W=null===(j=this.source)||void 0===j?void 0:j.subscribe($))&&void 0!==W?W:Q.Lc}}},930:(wt,Me,k)=>{k.d(Me,{Hp:()=>ut,Lv:()=>W});var f=k(576),Q=k(727),O=k(2416),ie=k(7849),se=k(5032);const re=fe("C",void 0,void 0);function fe(ke,Ee,Ie){return{kind:ke,value:Ee,error:Ie}}var $=k(3410),j=k(2806);class W extends Q.w0{constructor(Ee){super(),this.isStopped=!1,Ee?(this.destination=Ee,(0,Q.Nn)(Ee)&&Ee.add(this)):this.destination=je}static create(Ee,Ie,ze){return new ut(Ee,Ie,ze)}next(Ee){this.isStopped?Oe(function we(ke){return fe("N",ke,void 0)}(Ee),this):this._next(Ee)}error(Ee){this.isStopped?Oe(function ye(ke){return fe("E",void 0,ke)}(Ee),this):(this.isStopped=!0,this._error(Ee))}complete(){this.isStopped?Oe(re,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ee){this.destination.next(Ee)}_error(Ee){try{this.destination.error(Ee)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const $e=Function.prototype.bind;function Te(ke,Ee){return $e.call(ke,Ee)}class We{constructor(Ee){this.partialObserver=Ee}next(Ee){const{partialObserver:Ie}=this;if(Ie.next)try{Ie.next(Ee)}catch(ze){pe(ze)}}error(Ee){const{partialObserver:Ie}=this;if(Ie.error)try{Ie.error(Ee)}catch(ze){pe(ze)}else pe(Ee)}complete(){const{partialObserver:Ee}=this;if(Ee.complete)try{Ee.complete()}catch(Ie){pe(Ie)}}}class ut extends W{constructor(Ee,Ie,ze){let Le;if(super(),(0,f.m)(Ee)||!Ee)Le={next:Ee??void 0,error:Ie??void 0,complete:ze??void 0};else{let nt;this&&O.v.useDeprecatedNextContext?(nt=Object.create(Ee),nt.unsubscribe=()=>this.unsubscribe(),Le={next:Ee.next&&Te(Ee.next,nt),error:Ee.error&&Te(Ee.error,nt),complete:Ee.complete&&Te(Ee.complete,nt)}):Le=Ee}this.destination=new We(Le)}}function pe(ke){O.v.useDeprecatedSynchronousErrorHandling?(0,j.O)(ke):(0,ie.h)(ke)}function Oe(ke,Ee){const{onStoppedNotification:Ie}=O.v;Ie&&$.z.setTimeout(()=>Ie(ke,Ee))}const je={closed:!0,next:se.Z,error:function Pe(ke){throw ke},complete:se.Z}},727:(wt,Me,k)=>{k.d(Me,{Lc:()=>re,w0:()=>se,Nn:()=>ye});var f=k(576);const O=(0,k(3888).d)(fe=>function(j){fe(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((W,$e)=>`${$e+1}) ${W.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var ie=k(8737);class se{constructor($){this.initialTeardown=$,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let $;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const Te of j)Te.remove(this);else j.remove(this);const{initialTeardown:W}=this;if((0,f.m)(W))try{W()}catch(Te){$=Te instanceof O?Te.errors:[Te]}const{_finalizers:$e}=this;if($e){this._finalizers=null;for(const Te of $e)try{we(Te)}catch(We){$=$??[],We instanceof O?$=[...$,...We.errors]:$.push(We)}}if($)throw new O($)}}add($){var j;if($&&$!==this)if(this.closed)we($);else{if($ instanceof se){if($.closed||$._hasParent(this))return;$._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push($)}}_hasParent($){const{_parentage:j}=this;return j===$||Array.isArray(j)&&j.includes($)}_addParent($){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push($),j):j?[j,$]:$}_removeParent($){const{_parentage:j}=this;j===$?this._parentage=null:Array.isArray(j)&&(0,ie.P)(j,$)}remove($){const{_finalizers:j}=this;j&&(0,ie.P)(j,$),$ instanceof se&&$._removeParent(this)}}se.EMPTY=(()=>{const fe=new se;return fe.closed=!0,fe})();const re=se.EMPTY;function ye(fe){return fe instanceof se||fe&&"closed"in fe&&(0,f.m)(fe.remove)&&(0,f.m)(fe.add)&&(0,f.m)(fe.unsubscribe)}function we(fe){(0,f.m)(fe)?fe():fe.unsubscribe()}},2416:(wt,Me,k)=>{k.d(Me,{v:()=>f});const f={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(wt,Me,k)=>{k.d(Me,{E:()=>Q});const Q=new(k(9751).y)(se=>se.complete())},8996:(wt,Me,k)=>{k.d(Me,{D:()=>Ee});var f=k(8421),Q=k(5363),O=k(9468),re=k(9751),we=k(2202),fe=k(576),$=k(9672);function W(Ie,ze){if(!Ie)throw new Error("Iterable cannot be null");return new re.y(Le=>{(0,$.f)(Le,ze,()=>{const nt=Ie[Symbol.asyncIterator]();(0,$.f)(Le,ze,()=>{nt.next().then(ne=>{ne.done?Le.complete():Le.next(ne.value)})},0,!0)})})}var $e=k(3670),Te=k(8239),We=k(1144),ut=k(6495),pe=k(2206),Pe=k(4532),Oe=k(3260);function Ee(Ie,ze){return ze?function ke(Ie,ze){if(null!=Ie){if((0,$e.c)(Ie))return function ie(Ie,ze){return(0,f.Xf)(Ie).pipe((0,O.R)(ze),(0,Q.Q)(ze))}(Ie,ze);if((0,We.z)(Ie))return function ye(Ie,ze){return new re.y(Le=>{let nt=0;return ze.schedule(function(){nt===Ie.length?Le.complete():(Le.next(Ie[nt++]),Le.closed||this.schedule())})})}(Ie,ze);if((0,Te.t)(Ie))return function se(Ie,ze){return(0,f.Xf)(Ie).pipe((0,O.R)(ze),(0,Q.Q)(ze))}(Ie,ze);if((0,pe.D)(Ie))return W(Ie,ze);if((0,ut.T)(Ie))return function j(Ie,ze){return new re.y(Le=>{let nt;return(0,$.f)(Le,ze,()=>{nt=Ie[we.h](),(0,$.f)(Le,ze,()=>{let ne,bt;try{({value:ne,done:bt}=nt.next())}catch(Xe){return void Le.error(Xe)}bt?Le.complete():Le.next(ne)},0,!0)}),()=>(0,fe.m)(nt?.return)&&nt.return()})}(Ie,ze);if((0,Oe.L)(Ie))return function je(Ie,ze){return W((0,Oe.Q)(Ie),ze)}(Ie,ze)}throw(0,Pe.z)(Ie)}(Ie,ze):(0,f.Xf)(Ie)}},8421:(wt,Me,k)=>{k.d(Me,{Xf:()=>$e});var f=k(7582),Q=k(1144),O=k(8239),ie=k(9751),se=k(3670),re=k(2206),ye=k(4532),we=k(6495),fe=k(3260),$=k(576),j=k(7849),W=k(8822);function $e(ke){if(ke instanceof ie.y)return ke;if(null!=ke){if((0,se.c)(ke))return function Te(ke){return new ie.y(Ee=>{const Ie=ke[W.L]();if((0,$.m)(Ie.subscribe))return Ie.subscribe(Ee);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ke);if((0,Q.z)(ke))return function We(ke){return new ie.y(Ee=>{for(let Ie=0;Ie<ke.length&&!Ee.closed;Ie++)Ee.next(ke[Ie]);Ee.complete()})}(ke);if((0,O.t)(ke))return function ut(ke){return new ie.y(Ee=>{ke.then(Ie=>{Ee.closed||(Ee.next(Ie),Ee.complete())},Ie=>Ee.error(Ie)).then(null,j.h)})}(ke);if((0,re.D)(ke))return Pe(ke);if((0,we.T)(ke))return function pe(ke){return new ie.y(Ee=>{for(const Ie of ke)if(Ee.next(Ie),Ee.closed)return;Ee.complete()})}(ke);if((0,fe.L)(ke))return function Oe(ke){return Pe((0,fe.Q)(ke))}(ke)}throw(0,ye.z)(ke)}function Pe(ke){return new ie.y(Ee=>{(function je(ke,Ee){var Ie,ze,Le,nt;return(0,f.mG)(this,void 0,void 0,function*(){try{for(Ie=(0,f.KL)(ke);!(ze=yield Ie.next()).done;)if(Ee.next(ze.value),Ee.closed)return}catch(ne){Le={error:ne}}finally{try{ze&&!ze.done&&(nt=Ie.return)&&(yield nt.call(Ie))}finally{if(Le)throw Le.error}}Ee.complete()})})(ke,Ee).catch(Ie=>Ee.error(Ie))})}},6451:(wt,Me,k)=>{k.d(Me,{T:()=>re});var f=k(8189),Q=k(8421),O=k(515),ie=k(7669),se=k(8996);function re(...ye){const we=(0,ie.yG)(ye),fe=(0,ie._6)(ye,1/0),$=ye;return $.length?1===$.length?(0,Q.Xf)($[0]):(0,f.J)(fe)((0,se.D)($,we)):O.E}},5403:(wt,Me,k)=>{k.d(Me,{x:()=>Q});var f=k(930);function Q(ie,se,re,ye,we){return new O(ie,se,re,ye,we)}class O extends f.Lv{constructor(se,re,ye,we,fe,$){super(se),this.onFinalize=fe,this.shouldUnsubscribe=$,this._next=re?function(j){try{re(j)}catch(W){se.error(W)}}:super._next,this._error=we?function(j){try{we(j)}catch(W){se.error(W)}finally{this.unsubscribe()}}:super._error,this._complete=ye?function(){try{ye()}catch(j){se.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var se;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:re}=this;super.unsubscribe(),!re&&(null===(se=this.onFinalize)||void 0===se||se.call(this))}}}},4004:(wt,Me,k)=>{k.d(Me,{U:()=>O});var f=k(4482),Q=k(5403);function O(ie,se){return(0,f.e)((re,ye)=>{let we=0;re.subscribe((0,Q.x)(ye,fe=>{ye.next(ie.call(se,fe,we++))}))})}},8189:(wt,Me,k)=>{k.d(Me,{J:()=>O});var f=k(5577),Q=k(4671);function O(ie=1/0){return(0,f.z)(Q.y,ie)}},5577:(wt,Me,k)=>{k.d(Me,{z:()=>we});var f=k(4004),Q=k(8421),O=k(4482),ie=k(9672),se=k(5403),ye=k(576);function we(fe,$,j=1/0){return(0,ye.m)($)?we((W,$e)=>(0,f.U)((Te,We)=>$(W,Te,$e,We))((0,Q.Xf)(fe(W,$e))),j):("number"==typeof $&&(j=$),(0,O.e)((W,$e)=>function re(fe,$,j,W,$e,Te,We,ut){const pe=[];let Pe=0,Oe=0,je=!1;const ke=()=>{je&&!pe.length&&!Pe&&$.complete()},Ee=ze=>Pe<W?Ie(ze):pe.push(ze),Ie=ze=>{Te&&$.next(ze),Pe++;let Le=!1;(0,Q.Xf)(j(ze,Oe++)).subscribe((0,se.x)($,nt=>{$e?.(nt),Te?Ee(nt):$.next(nt)},()=>{Le=!0},void 0,()=>{if(Le)try{for(Pe--;pe.length&&Pe<W;){const nt=pe.shift();We?(0,ie.f)($,We,()=>Ie(nt)):Ie(nt)}ke()}catch(nt){$.error(nt)}}))};return fe.subscribe((0,se.x)($,Ee,()=>{je=!0,ke()})),()=>{ut?.()}}(W,$e,fe,j)))}},5363:(wt,Me,k)=>{k.d(Me,{Q:()=>ie});var f=k(9672),Q=k(4482),O=k(5403);function ie(se,re=0){return(0,Q.e)((ye,we)=>{ye.subscribe((0,O.x)(we,fe=>(0,f.f)(we,se,()=>we.next(fe),re),()=>(0,f.f)(we,se,()=>we.complete(),re),fe=>(0,f.f)(we,se,()=>we.error(fe),re)))})}},3099:(wt,Me,k)=>{k.d(Me,{B:()=>se});var f=k(8421),Q=k(7579),O=k(930),ie=k(4482);function se(ye={}){const{connector:we=(()=>new Q.x),resetOnError:fe=!0,resetOnComplete:$=!0,resetOnRefCountZero:j=!0}=ye;return W=>{let $e,Te,We,ut=0,pe=!1,Pe=!1;const Oe=()=>{Te?.unsubscribe(),Te=void 0},je=()=>{Oe(),$e=We=void 0,pe=Pe=!1},ke=()=>{const Ee=$e;je(),Ee?.unsubscribe()};return(0,ie.e)((Ee,Ie)=>{ut++,!Pe&&!pe&&Oe();const ze=We=We??we();Ie.add(()=>{ut--,0===ut&&!Pe&&!pe&&(Te=re(ke,j))}),ze.subscribe(Ie),!$e&&ut>0&&($e=new O.Hp({next:Le=>ze.next(Le),error:Le=>{Pe=!0,Oe(),Te=re(je,fe,Le),ze.error(Le)},complete:()=>{pe=!0,Oe(),Te=re(je,$),ze.complete()}}),(0,f.Xf)(Ee).subscribe($e))})(W)}}function re(ye,we,...fe){if(!0===we)return void ye();if(!1===we)return;const $=new O.Hp({next:()=>{$.unsubscribe(),ye()}});return we(...fe).subscribe($)}},9468:(wt,Me,k)=>{k.d(Me,{R:()=>Q});var f=k(4482);function Q(O,ie=0){return(0,f.e)((se,re)=>{re.add(O.schedule(()=>se.subscribe(re),ie))})}},8505:(wt,Me,k)=>{k.d(Me,{b:()=>se});var f=k(576),Q=k(4482),O=k(5403),ie=k(4671);function se(re,ye,we){const fe=(0,f.m)(re)||ye||we?{next:re,error:ye,complete:we}:re;return fe?(0,Q.e)(($,j)=>{var W;null===(W=fe.subscribe)||void 0===W||W.call(fe);let $e=!0;$.subscribe((0,O.x)(j,Te=>{var We;null===(We=fe.next)||void 0===We||We.call(fe,Te),j.next(Te)},()=>{var Te;$e=!1,null===(Te=fe.complete)||void 0===Te||Te.call(fe),j.complete()},Te=>{var We;$e=!1,null===(We=fe.error)||void 0===We||We.call(fe,Te),j.error(Te)},()=>{var Te,We;$e&&(null===(Te=fe.unsubscribe)||void 0===Te||Te.call(fe)),null===(We=fe.finalize)||void 0===We||We.call(fe)}))}):ie.y}},4408:(wt,Me,k)=>{k.d(Me,{o:()=>se});var f=k(727);class Q extends f.w0{constructor(ye,we){super()}schedule(ye,we=0){return this}}const O={setInterval(re,ye,...we){const{delegate:fe}=O;return fe?.setInterval?fe.setInterval(re,ye,...we):setInterval(re,ye,...we)},clearInterval(re){const{delegate:ye}=O;return(ye?.clearInterval||clearInterval)(re)},delegate:void 0};var ie=k(8737);class se extends Q{constructor(ye,we){super(ye,we),this.scheduler=ye,this.work=we,this.pending=!1}schedule(ye,we=0){var fe;if(this.closed)return this;this.state=ye;const $=this.id,j=this.scheduler;return null!=$&&(this.id=this.recycleAsyncId(j,$,we)),this.pending=!0,this.delay=we,this.id=null!==(fe=this.id)&&void 0!==fe?fe:this.requestAsyncId(j,this.id,we),this}requestAsyncId(ye,we,fe=0){return O.setInterval(ye.flush.bind(ye,this),fe)}recycleAsyncId(ye,we,fe=0){if(null!=fe&&this.delay===fe&&!1===this.pending)return we;null!=we&&O.clearInterval(we)}execute(ye,we){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const fe=this._execute(ye,we);if(fe)return fe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ye,we){let $,fe=!1;try{this.work(ye)}catch(j){fe=!0,$=j||new Error("Scheduled action threw falsy error")}if(fe)return this.unsubscribe(),$}unsubscribe(){if(!this.closed){const{id:ye,scheduler:we}=this,{actions:fe}=we;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ie.P)(fe,this),null!=ye&&(this.id=this.recycleAsyncId(we,ye,null)),this.delay=null,super.unsubscribe()}}}},7565:(wt,Me,k)=>{k.d(Me,{v:()=>O});var f=k(6063);class Q{constructor(se,re=Q.now){this.schedulerActionCtor=se,this.now=re}schedule(se,re=0,ye){return new this.schedulerActionCtor(this,se).schedule(ye,re)}}Q.now=f.l.now;class O extends Q{constructor(se,re=Q.now){super(se,re),this.actions=[],this._active=!1}flush(se){const{actions:re}=this;if(this._active)return void re.push(se);let ye;this._active=!0;do{if(ye=se.execute(se.state,se.delay))break}while(se=re.shift());if(this._active=!1,ye){for(;se=re.shift();)se.unsubscribe();throw ye}}}},4986:(wt,Me,k)=>{k.d(Me,{z:()=>O});var f=k(4408);const O=new(k(7565).v)(f.o)},6063:(wt,Me,k)=>{k.d(Me,{l:()=>f});const f={now:()=>(f.delegate||Date).now(),delegate:void 0}},3410:(wt,Me,k)=>{k.d(Me,{z:()=>f});const f={setTimeout(Q,O,...ie){const{delegate:se}=f;return se?.setTimeout?se.setTimeout(Q,O,...ie):setTimeout(Q,O,...ie)},clearTimeout(Q){const{delegate:O}=f;return(O?.clearTimeout||clearTimeout)(Q)},delegate:void 0}},2202:(wt,Me,k)=>{k.d(Me,{h:()=>Q});const Q=function f(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(wt,Me,k)=>{k.d(Me,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(wt,Me,k)=>{k.d(Me,{_6:()=>re,jO:()=>ie,yG:()=>se});var f=k(576);function O(ye){return ye[ye.length-1]}function ie(ye){return(0,f.m)(O(ye))?ye.pop():void 0}function se(ye){return function Q(ye){return ye&&(0,f.m)(ye.schedule)}(O(ye))?ye.pop():void 0}function re(ye,we){return"number"==typeof O(ye)?ye.pop():we}},8737:(wt,Me,k)=>{function f(Q,O){if(Q){const ie=Q.indexOf(O);0<=ie&&Q.splice(ie,1)}}k.d(Me,{P:()=>f})},3888:(wt,Me,k)=>{function f(Q){const ie=Q(se=>{Error.call(se),se.stack=(new Error).stack});return ie.prototype=Object.create(Error.prototype),ie.prototype.constructor=ie,ie}k.d(Me,{d:()=>f})},2806:(wt,Me,k)=>{k.d(Me,{O:()=>ie,x:()=>O});var f=k(2416);let Q=null;function O(se){if(f.v.useDeprecatedSynchronousErrorHandling){const re=!Q;if(re&&(Q={errorThrown:!1,error:null}),se(),re){const{errorThrown:ye,error:we}=Q;if(Q=null,ye)throw we}}else se()}function ie(se){f.v.useDeprecatedSynchronousErrorHandling&&Q&&(Q.errorThrown=!0,Q.error=se)}},9672:(wt,Me,k)=>{function f(Q,O,ie,se=0,re=!1){const ye=O.schedule(function(){ie(),re?Q.add(this.schedule(null,se)):this.unsubscribe()},se);if(Q.add(ye),!re)return ye}k.d(Me,{f:()=>f})},4671:(wt,Me,k)=>{function f(Q){return Q}k.d(Me,{y:()=>f})},1144:(wt,Me,k)=>{k.d(Me,{z:()=>f});const f=Q=>Q&&"number"==typeof Q.length&&"function"!=typeof Q},2206:(wt,Me,k)=>{k.d(Me,{D:()=>Q});var f=k(576);function Q(O){return Symbol.asyncIterator&&(0,f.m)(O?.[Symbol.asyncIterator])}},576:(wt,Me,k)=>{function f(Q){return"function"==typeof Q}k.d(Me,{m:()=>f})},3670:(wt,Me,k)=>{k.d(Me,{c:()=>O});var f=k(8822),Q=k(576);function O(ie){return(0,Q.m)(ie[f.L])}},6495:(wt,Me,k)=>{k.d(Me,{T:()=>O});var f=k(2202),Q=k(576);function O(ie){return(0,Q.m)(ie?.[f.h])}},8239:(wt,Me,k)=>{k.d(Me,{t:()=>Q});var f=k(576);function Q(O){return(0,f.m)(O?.then)}},3260:(wt,Me,k)=>{k.d(Me,{L:()=>ie,Q:()=>O});var f=k(7582),Q=k(576);function O(se){return(0,f.FC)(this,arguments,function*(){const ye=se.getReader();try{for(;;){const{value:we,done:fe}=yield(0,f.qq)(ye.read());if(fe)return yield(0,f.qq)(void 0);yield yield(0,f.qq)(we)}}finally{ye.releaseLock()}})}function ie(se){return(0,Q.m)(se?.getReader)}},4482:(wt,Me,k)=>{k.d(Me,{A:()=>Q,e:()=>O});var f=k(576);function Q(ie){return(0,f.m)(ie?.lift)}function O(ie){return se=>{if(Q(se))return se.lift(function(re){try{return ie(re,this)}catch(ye){this.error(ye)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(wt,Me,k)=>{function f(){}k.d(Me,{Z:()=>f})},9635:(wt,Me,k)=>{k.d(Me,{U:()=>O,z:()=>Q});var f=k(4671);function Q(...ie){return O(ie)}function O(ie){return 0===ie.length?f.y:1===ie.length?ie[0]:function(re){return ie.reduce((ye,we)=>we(ye),re)}}},7849:(wt,Me,k)=>{k.d(Me,{h:()=>O});var f=k(2416),Q=k(3410);function O(ie){Q.z.setTimeout(()=>{const{onUnhandledError:se}=f.v;if(!se)throw ie;se(ie)})}},4532:(wt,Me,k)=>{function f(Q){return new TypeError(`You provided ${null!==Q&&"object"==typeof Q?"an invalid object":`'${Q}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(Me,{z:()=>f})},4650:(wt,Me,k)=>{k.d(Me,{$8M:()=>ca,$WT:()=>fr,$Z:()=>Ow,AFp:()=>Kh,AaK:()=>we,CHM:()=>Ua,CRH:()=>Qp,CZH:()=>vy,CqO:()=>cE,D6c:()=>yD,EJc:()=>HI,EpF:()=>aE,F4k:()=>dv,FYo:()=>N_,FiY:()=>nu,Gf:()=>Yp,GfV:()=>pw,Gpc:()=>j,JOm:()=>Dt,KtG:()=>Ba,LFG:()=>rn,LMc:()=>dg,Lbi:()=>r0,Lck:()=>tT,MAs:()=>bb,MMx:()=>jp,NdJ:()=>Sm,O4$:()=>za,OlP:()=>Zt,Oqu:()=>vv,P3R:()=>sh,PXZ:()=>XI,Q6J:()=>iE,QGY:()=>uE,Qsj:()=>NC,R0b:()=>ho,RDi:()=>Gg,Rgc:()=>jh,SBq:()=>dh,Sil:()=>GI,Suo:()=>Gh,TTD:()=>Xc,TgZ:()=>_p,X6Q:()=>Zh,XFs:()=>yt,Xpm:()=>Pi,Xts:()=>I_,Y36:()=>mh,YKP:()=>fI,YNc:()=>uv,Yjl:()=>$t,Yz7:()=>lt,Z0I:()=>En,ZZ4:()=>m0,_Bn:()=>jv,_UZ:()=>bm,_Vd:()=>lh,_c5:()=>mD,_uU:()=>Sh,aQg:()=>Mu,c2e:()=>Ms,cJS:()=>mt,cg1:()=>Lm,dDg:()=>l0,dqk:()=>en,eFA:()=>Xn,eJc:()=>gy,ekj:()=>AE,eoX:()=>Lr,f3M:()=>Nn,g9A:()=>n0,h0i:()=>Ho,hGG:()=>Ru,iGM:()=>Zp,ifc:()=>_e,ip1:()=>lo,jDz:()=>Hv,kL8:()=>Vm,lG2:()=>Ct,lqb:()=>Ul,lri:()=>c0,n5z:()=>oc,oAB:()=>J,oxw:()=>fE,q4F:()=>gw,qLn:()=>Qf,qOj:()=>$l,qZA:()=>Cm,rWj:()=>ZI,sBO:()=>og,s_b:()=>zp,soG:()=>Uc,tb:()=>xn,tp0:()=>It,uIk:()=>Em,vHH:()=>pe,vpe:()=>Go,wAp:()=>Tt,xp6:()=>Tw,z2F:()=>Rs,zSh:()=>Ac,zs3:()=>fh});var f=k(7579),Q=k(727),O=k(9751),ie=k(6451),se=k(3099);function re(s){for(let o in s)if(s[o]===re)return o;throw Error("Could not find renamed property on target object.")}function ye(s,o){for(const a in o)o.hasOwnProperty(a)&&!s.hasOwnProperty(a)&&(s[a]=o[a])}function we(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(we).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function fe(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const $=re({__forward_ref__:re});function j(s){return s.__forward_ref__=j,s.toString=function(){return we(this())},s}function W(s){return $e(s)?s():s}function $e(s){return"function"==typeof s&&s.hasOwnProperty($)&&s.__forward_ref__===j}function Te(s){return s&&!!s.\u0275providers}const ut="https://g.co/ng/security#xss";class pe extends Error{constructor(o,a){super(Pe(o,a)),this.code=o}}function Pe(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}function Oe(s){return"string"==typeof s?s:null==s?"":String(s)}function ze(s,o){throw new pe(-201,!1)}function ge(s,o){null==s&&function oe(s,o,a,l){throw new Error(`ASSERTION ERROR: ${s}`+(null==l?"":` [Expected=> ${a} ${l} ${o} <=Actual]`))}(o,s,null,"!=")}function lt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function mt(s){return{providers:s.providers||[],imports:s.imports||[]}}function qt(s){return gn(s,Rn)||gn(s,ti)}function En(s){return null!==qt(s)}function gn(s,o){return s.hasOwnProperty(o)?s[o]:null}function dr(s){return s&&(s.hasOwnProperty($r)||s.hasOwnProperty(Ar))?s[$r]:null}const Rn=re({\u0275prov:re}),$r=re({\u0275inj:re}),ti=re({ngInjectableDef:re}),Ar=re({ngInjectorDef:re});var yt=(()=>((yt=yt||{})[yt.Default=0]="Default",yt[yt.Host=1]="Host",yt[yt.Self=2]="Self",yt[yt.SkipSelf=4]="SkipSelf",yt[yt.Optional=8]="Optional",yt))();let ni;function Dr(s){const o=ni;return ni=s,o}function Hr(s,o,a){const l=qt(s);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&yt.Optional?null:void 0!==o?o:void ze(we(s))}const en=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),hi={},ri="__NG_DI_FLAG__",hr="ngTempTokenPath",Gr="ngTokenPath",Tn=/\n/gm,ii="\u0275",hn="__source";let Ls;function Kt(s){const o=Ls;return Ls=s,o}function Qi(s,o=yt.Default){if(void 0===Ls)throw new pe(-203,!1);return null===Ls?Hr(s,void 0,o):Ls.get(s,o&yt.Optional?null:void 0,o)}function rn(s,o=yt.Default){return(function Kc(){return ni}()||Qi)(W(s),o)}function Nn(s,o=yt.Default){return rn(s,qn(o))}function qn(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function Ri(s){const o=[];for(let a=0;a<s.length;a++){const l=W(s[a]);if(Array.isArray(l)){if(0===l.length)throw new pe(900,!1);let d,g=yt.Default;for(let _=0;_<l.length;_++){const I=l[_],b=Ni(I);"number"==typeof b?-1===b?d=I.token:g|=b:d=I}o.push(rn(d,g))}else o.push(rn(l))}return o}function vn(s,o){return s[ri]=o,s.prototype[ri]=o,s}function Ni(s){return s[ri]}function L(s){return{toString:s}.toString()}var z=(()=>((z=z||{})[z.OnPush=0]="OnPush",z[z.Default=1]="Default",z))(),_e=(()=>{return(s=_e||(_e={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",_e;var s})();const X={},Ve=[],St=re({\u0275cmp:re}),Yt=re({\u0275dir:re}),jn=re({\u0275pipe:re}),In=re({\u0275mod:re}),an=re({\u0275fac:re}),zt=re({__NG_ELEMENT_ID__:re});let xr=0;function Pi(s){return L(()=>{const o=Pu(s),a={...o,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===z.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&s.dependencies||null,getStandaloneInjector:null,data:s.data||{},encapsulation:s.encapsulation||_e.Emulated,id:"c"+xr++,styles:s.styles||Ve,_:null,schemas:s.schemas||null,tView:null};df(a);const l=s.dependencies;return a.directiveDefs=Zo(l,!1),a.pipeDefs=Zo(l,!0),a})}function Ma(s){return _t(s)||tn(s)}function le(s){return null!==s}function J(s){return L(()=>({type:s.type,bootstrap:s.bootstrap||Ve,declarations:s.declarations||Ve,imports:s.imports||Ve,exports:s.exports||Ve,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function pt(s,o){if(null==s)return X;const a={};for(const l in s)if(s.hasOwnProperty(l)){let d=s[l],g=d;Array.isArray(d)&&(g=d[1],d=d[0]),a[d]=l,o&&(o[d]=g)}return a}function Ct(s){return L(()=>{const o=Pu(s);return df(o),o})}function $t(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function _t(s){return s[St]||null}function tn(s){return s[Yt]||null}function Qt(s){return s[jn]||null}function fr(s){const o=_t(s)||tn(s)||Qt(s);return null!==o&&o.standalone}function Wn(s,o){const a=s[In]||null;if(!a&&!0===o)throw new Error(`Type ${we(s)} does not have '\u0275mod' property.`);return a}function Pu(s){const o={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:o,exportAs:s.exportAs||null,standalone:!0===s.standalone,selectors:s.selectors||Ve,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:pt(s.inputs,o),outputs:pt(s.outputs)}}function df(s){s.features?.forEach(o=>o(s))}function Zo(s,o){if(!s)return null;const a=o?Qt:Ma;return()=>("function"==typeof s?s():s).map(l=>a(l)).filter(le)}const pi=0,Ke=1,kt=2,wn=3,gi=4,cn=5,Kn=6,Yo=7,Pn=8,Ra=9,hs=10,Bt=11,Na=12,po=13,fs=14,go=15,$n=16,Qo=17,ps=18,Oi=19,Vs=20,Cr=21,mn=22,Pa=1,Zc=2,Xo=7,Us=8,mo=9,pr=10;function oi(s){return Array.isArray(s)&&"object"==typeof s[Pa]}function ai(s){return Array.isArray(s)&&!0===s[Pa]}function Oa(s){return 0!=(4&s.flags)}function Jo(s){return s.componentOffset>-1}function Yc(s){return 1==(1&s.flags)}function mi(s){return!!s.template}function ku(s){return 0!=(256&s[kt])}function Ji(s,o){return s.hasOwnProperty(an)?s[an]:null}class yo{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function Xc(){return ka}function ka(s){return s.type.prototype.ngOnChanges&&(s.setInput=Jc),Id}function Id(){const s=gf(this),o=s?.current;if(o){const a=s.previous;if(a===X)s.previous=o;else for(let l in o)a[l]=o[l];s.current=null,this.ngOnChanges(o)}}function Jc(s,o,a,l){const d=this.declaredInputs[a],g=gf(s)||function Vu(s,o){return s[Bs]=o}(s,{previous:X,current:null}),_=g.current||(g.current={}),I=g.previous,b=I[d];_[d]=new yo(b&&b.currentValue,o,I===X),s[l]=o}Xc.ngInherit=!0;const Bs="__ngSimpleChanges__";function gf(s){return s[Bs]||null}const qr=function(s,o,a){},Mr="svg";function gr(s){for(;Array.isArray(s);)s=s[pi];return s}function ys(s,o){return gr(o[s])}function mr(s,o){return gr(o[s.index])}function Cd(s,o){return s.data[o]}function tr(s,o){const a=o[s];return oi(a)?a:a[pi]}function _s(s){return 64==(64&s[kt])}function $s(s,o){return null==o?null:s[o]}function na(s){s[ps]=0}function La(s,o){s[cn]+=o;let a=s,l=s[wn];for(;null!==l&&(1===o&&1===a[cn]||-1===o&&0===a[cn]);)l[cn]+=o,a=l,l=l[wn]}const Nt={lFrame:nl(null),bindingsEnabled:!0};function $u(){return Nt.bindingsEnabled}function he(){return Nt.lFrame.lView}function Ft(){return Nt.lFrame.tView}function Ua(s){return Nt.lFrame.contextLView=s,s[Pn]}function Ba(s){return Nt.lFrame.contextLView=null,s}function nr(){let s=_o();for(;null!==s&&64===s.type;)s=s.parent;return s}function _o(){return Nt.lFrame.currentTNode}function Wr(s,o){const a=Nt.lFrame;a.currentTNode=s,a.isParent=o}function xd(){return Nt.lFrame.isParent}function vo(){return Nt.lFrame.bindingIndex++}function zu(s,o){const a=Nt.lFrame;a.bindingIndex=a.bindingRootIndex=s,Yn(o)}function Yn(s){Nt.lFrame.currentDirectiveIndex=s}function tl(){return Nt.lFrame.currentQueryIndex}function qu(s){Nt.lFrame.currentQueryIndex=s}function Rd(s){const o=s[Ke];return 2===o.type?o.declTNode:1===o.type?s[Kn]:null}function Wu(s,o,a){if(a&yt.SkipSelf){let d=o,g=s;for(;!(d=d.parent,null!==d||a&yt.Host||(d=Rd(g),null===d||(g=g[go],10&d.type))););if(null===d)return!1;o=d,s=g}const l=Nt.lFrame=Ha();return l.currentTNode=o,l.lView=s,!0}function Ku(s){const o=Ha(),a=s[Ke];Nt.lFrame=o,o.currentTNode=a.firstChild,o.lView=s,o.tView=a,o.contextLView=s,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function Ha(){const s=Nt.lFrame,o=null===s?null:s.child;return null===o?nl(s):o}function nl(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Ga(){const s=Nt.lFrame;return Nt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Nd=Ga;function Zu(){const s=Ga();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function br(){return Nt.lFrame.selectedIndex}function ws(s){Nt.lFrame.selectedIndex=s}function Dn(){const s=Nt.lFrame;return Cd(s.tView,s.selectedIndex)}function za(){Nt.lFrame.currentNamespace=Mr}function Qu(s,o){for(let a=o.directiveStart,l=o.directiveEnd;a<l;a++){const g=s.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:I,ngAfterViewInit:b,ngAfterViewChecked:x,ngOnDestroy:R}=g;_&&(s.contentHooks??(s.contentHooks=[])).push(-a,_),I&&((s.contentHooks??(s.contentHooks=[])).push(a,I),(s.contentCheckHooks??(s.contentCheckHooks=[])).push(a,I)),b&&(s.viewHooks??(s.viewHooks=[])).push(-a,b),x&&((s.viewHooks??(s.viewHooks=[])).push(a,x),(s.viewCheckHooks??(s.viewCheckHooks=[])).push(a,x)),null!=R&&(s.destroyHooks??(s.destroyHooks=[])).push(a,R)}}function rl(s,o,a){sl(s,o,3,a)}function il(s,o,a,l){(3&s[kt])===a&&sl(s,o,a,l)}function Od(s,o){let a=s[kt];(3&a)===o&&(a&=2047,a+=1,s[kt]=a)}function sl(s,o,a,l){const g=l??-1,_=o.length-1;let I=0;for(let b=void 0!==l?65535&s[ps]:0;b<_;b++)if("number"==typeof o[b+1]){if(I=o[b],null!=l&&I>=l)break}else o[b]<0&&(s[ps]+=65536),(I<g||-1==g)&&(ia(s,a,o,b),s[ps]=(4294901760&s[ps])+b+2),b++}function ia(s,o,a,l){const d=a[l]<0,g=a[l+1],I=s[d?-a[l]:a[l]];if(d){if(s[kt]>>11<s[ps]>>16&&(3&s[kt])===o){s[kt]+=2048,qr(4,I,g);try{g.call(I)}finally{qr(5,I,g)}}}else{qr(4,I,g);try{g.call(I)}finally{qr(5,I,g)}}}const sa=-1;class Es{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function oa(s,o,a){let l=0;for(;l<a.length;){const d=a[l];if("number"==typeof d){if(0!==d)break;l++;const g=a[l++],_=a[l++],I=a[l++];s.setAttribute(o,_,I,g)}else{const g=d,_=a[++l];Do(g)?s.setProperty(o,g,_):s.setAttribute(o,g,_),l++}}return l}function ol(s){return 3===s||4===s||6===s}function Do(s){return 64===s.charCodeAt(0)}function Co(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?a=d:0===a||ec(s,a,d,null,-1===a||2===a?o[++l]:null)}}return s}function ec(s,o,a,l,d){let g=0,_=s.length;if(-1===o)_=-1;else for(;g<s.length;){const I=s[g++];if("number"==typeof I){if(I===o){_=-1;break}if(I>o){_=g-1;break}}}for(;g<s.length;){const I=s[g];if("number"==typeof I)break;if(I===a){if(null===l)return void(null!==d&&(s[g+1]=d));if(l===s[g+1])return void(s[g+2]=d)}g++,null!==l&&g++,null!==d&&g++}-1!==_&&(s.splice(_,0,o),g=_+1),s.splice(g++,0,a),null!==l&&s.splice(g++,0,l),null!==d&&s.splice(g++,0,d)}function bo(s){return s!==sa}function Hs(s){return 32767&s}function To(s,o){let a=function kd(s){return s>>16}(s),l=o;for(;a>0;)l=l[go],a--;return l}let tc=!0;function Wa(s){const o=tc;return tc=s,o}const nc=255,Fd=5;let So=0;const Fi={};function al(s,o){const a=ua(s,o);if(-1!==a)return a;const l=o[Ke];l.firstCreatePass&&(s.injectorIndex=o.length,aa(l.data,s),aa(o,null),aa(l.blueprint,null));const d=Ld(s,o),g=s.injectorIndex;if(bo(d)){const _=Hs(d),I=To(d,o),b=I[Ke].data;for(let x=0;x<8;x++)o[g+x]=I[_+x]|b[_+x]}return o[g+8]=d,g}function aa(s,o){s.push(0,0,0,0,0,0,0,0,o)}function ua(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Ld(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let a=0,l=null,d=o;for(;null!==d;){if(l=Ya(d),null===l)return sa;if(a++,d=d[go],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return sa}function fn(s,o,a){!function Is(s,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(zt)&&(l=a[zt]),null==l&&(l=a[zt]=So++);const d=l&nc;o.data[s+(d>>Fd)]|=1<<d}(s,o,a)}function rc(s,o,a){if(a&yt.Optional||void 0!==s)return s;ze()}function ul(s,o,a,l){if(a&yt.Optional&&void 0===l&&(l=null),!(a&(yt.Self|yt.Host))){const d=s[Ra],g=Dr(void 0);try{return d?d.get(o,l,a&yt.Optional):Hr(o,l,a&yt.Optional)}finally{Dr(g)}}return rc(l,0,a)}function ic(s,o,a,l=yt.Default,d){if(null!==s){if(1024&o[kt]){const _=function ll(s,o,a,l,d){let g=s,_=o;for(;null!==g&&null!==_&&1024&_[kt]&&!(256&_[kt]);){const I=sc(g,_,a,l|yt.Self,Fi);if(I!==Fi)return I;let b=g.parent;if(!b){const x=_[Cr];if(x){const R=x.get(a,Fi,l);if(R!==Fi)return R}b=Ya(_),_=_[go]}g=b}return d}(s,o,a,l,Fi);if(_!==Fi)return _}const g=sc(s,o,a,l,Fi);if(g!==Fi)return g}return ul(o,a,l,d)}function sc(s,o,a,l,d){const g=function cl(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(zt)?s[zt]:void 0;return"number"==typeof o?o>=0?o&nc:Ef:o}(a);if("function"==typeof g){if(!Wu(o,s,l))return l&yt.Host?rc(d,0,l):ul(o,a,l,d);try{const _=g(l);if(null!=_||l&yt.Optional)return _;ze()}finally{Nd()}}else if("number"==typeof g){let _=null,I=ua(s,o),b=sa,x=l&yt.Host?o[$n][Kn]:null;for((-1===I||l&yt.SkipSelf)&&(b=-1===I?Ld(s,o):o[I+8],b!==sa&&Za(l,!1)?(_=o[Ke],I=Hs(b),o=To(b,o)):I=-1);-1!==I;){const R=o[Ke];if(Ka(g,I,R.data)){const F=rr(I,o,a,_,l,x);if(F!==Fi)return F}b=o[I+8],b!==sa&&Za(l,o[Ke].data[I+8]===x)&&Ka(g,I,o)?(_=R,I=Hs(b),o=To(b,o)):I=-1}}return d}function rr(s,o,a,l,d,g){const _=o[Ke],I=_.data[s+8],R=Ao(I,_,a,null==l?Jo(I)&&tc:l!=_&&0!=(3&I.type),d&yt.Host&&g===I);return null!==R?Hn(o,_,R,I):Fi}function Ao(s,o,a,l,d){const g=s.providerIndexes,_=o.data,I=1048575&g,b=s.directiveStart,R=g>>20,G=d?I+R:s.directiveEnd;for(let Y=l?I:I+R;Y<G;Y++){const ve=_[Y];if(Y<b&&a===ve||Y>=b&&ve.type===a)return Y}if(d){const Y=_[b];if(Y&&mi(Y)&&Y.type===a)return b}return null}function Hn(s,o,a,l){let d=s[a];const g=o.data;if(function Lg(s){return s instanceof Es}(d)){const _=d;_.resolving&&function ke(s,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new pe(-200,`Circular dependency in DI detected for ${s}${a}`)}(function je(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():Oe(s)}(g[a]));const I=Wa(_.canSeeViewProviders);_.resolving=!0;const b=_.injectImpl?Dr(_.injectImpl):null;Wu(s,l,yt.Default);try{d=s[a]=_.factory(void 0,g,s,l),o.firstCreatePass&&a>=l.directiveStart&&function Fg(s,o,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:g}=o.type.prototype;if(l){const _=ka(o);(a.preOrderHooks??(a.preOrderHooks=[])).push(s,_),(a.preOrderCheckHooks??(a.preOrderCheckHooks=[])).push(s,_)}d&&(a.preOrderHooks??(a.preOrderHooks=[])).push(0-s,d),g&&((a.preOrderHooks??(a.preOrderHooks=[])).push(s,g),(a.preOrderCheckHooks??(a.preOrderCheckHooks=[])).push(s,g))}(a,g[a],o)}finally{null!==b&&Dr(b),Wa(I),_.resolving=!1,Nd()}}return d}function Ka(s,o,a){return!!(a[o+(s>>Fd)]&1<<s)}function Za(s,o){return!(s&yt.Self||s&yt.Host&&o)}class Ds{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return ic(this._tNode,this._lView,o,qn(l),a)}}function Ef(){return new Ds(nr(),he())}function oc(s){return L(()=>{const o=s.prototype.constructor,a=o[an]||xo(o),l=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==l;){const g=d[an]||xo(d);if(g&&g!==a)return g;d=Object.getPrototypeOf(d)}return g=>new g})}function xo(s){return $e(s)?()=>{const o=xo(W(s));return o&&o()}:Ji(s)}function Ya(s){const o=s[Ke],a=o.type;return 2===a?o.declTNode:1===a?s[Kn]:null}function ca(s){return function Vd(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const a=s.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const g=a[d];if(ol(g))break;if(0===g)d+=2;else if("number"==typeof g)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(g===o)return a[d+1];d+=2}}}return null}(nr(),s)}const la="__parameters__";function Ro(s,o,a){return L(()=>{const l=function Mo(s){return function(...a){if(s){const l=s(...a);for(const d in l)this[d]=l[d]}}}(o);function d(...g){if(this instanceof d)return l.apply(this,g),this;const _=new d(...g);return I.annotation=_,I;function I(b,x,R){const F=b.hasOwnProperty(la)?b[la]:Object.defineProperty(b,la,{value:[]})[la];for(;F.length<=R;)F.push(null);return(F[R]=F[R]||[]).push(_),b}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class Zt{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=lt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function ts(s,o){s.forEach(a=>Array.isArray(a)?ts(a,o):o(a))}function Tf(s,o,a){o>=s.length?s.push(a):s.splice(o,0,a)}function Po(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Kr(s,o,a){let l=ci(s,o);return l>=0?s[1|l]=a:(l=~l,function pl(s,o,a,l){let d=s.length;if(d==o)s.push(a,l);else if(1===d)s.push(l,s[0]),s[0]=a;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=a,s[o+1]=l}}(s,l,o,a)),l}function Xt(s,o){const a=ci(s,o);if(a>=0)return s[1|a]}function ci(s,o){return function Qn(s,o,a){let l=0,d=s.length>>a;for(;d!==l;){const g=l+(d-l>>1),_=s[g<<a];if(o===_)return g<<a;_>o?d=g:l=g+1}return~(d<<a)}(s,o,1)}const nu=vn(Ro("Optional"),8),It=vn(Ro("SkipSelf"),4);var Dt=(()=>((Dt=Dt||{})[Dt.Important=1]="Important",Dt[Dt.DashCase=2]="DashCase",Dt))();const Gd=new Map;let Bi=0;const K="__ngContext__";function te(s,o){oi(o)?(s[K]=o[Vs],function qd(s){Gd.set(s[Vs],s)}(o)):s[K]=o}let ji;function Qs(s,o){return ji(s,o)}function Cl(s){const o=s[wn];return ai(o)?o[wn]:o}function bl(s){return Rf(s[po])}function Uo(s){return Rf(s[gi])}function Rf(s){for(;null!==s&&!ai(s);)s=s[gi];return s}function Bo(s,o,a,l,d){if(null!=l){let g,_=!1;ai(l)?g=l:oi(l)&&(_=!0,l=l[pi]);const I=gr(l);0===s&&null!==a?null==d?Sl(o,a,I):pa(o,a,I,d||null,!0):1===s&&null!==a?pa(o,a,I,d||null,!0):2===s?function kf(s,o,a){const l=jo(s,o);l&&function Al(s,o,a,l){s.removeChild(o,a,l)}(s,l,o,a)}(o,I,_):3===s&&o.destroyNode(I),null!=g&&function Nl(s,o,a,l,d){const g=a[Xo];g!==gr(a)&&Bo(o,s,l,g,d);for(let I=pr;I<a.length;I++){const b=a[I];Rl(b[Ke],b,s,o,l,g)}}(o,s,g,a,d)}}function Pf(s,o,a){return s.createElement(o,a)}function jg(s,o){const a=s[mo],l=a.indexOf(o),d=o[wn];512&o[kt]&&(o[kt]&=-513,La(d,-1)),a.splice(l,1)}function Tl(s,o){if(s.length<=pr)return;const a=pr+o,l=s[a];if(l){const d=l[Qo];null!==d&&d!==s&&jg(d,l),o>0&&(s[a-1][gi]=l[gi]);const g=Po(s,pr+o);!function a_(s,o){Rl(s,o,o[Bt],2,null,null),o[pi]=null,o[Kn]=null}(l[Ke],l);const _=g[Oi];null!==_&&_.detachView(g[Ke]),l[wn]=null,l[gi]=null,l[kt]&=-65}return l}function Zd(s,o){if(!(128&o[kt])){const a=o[Bt];a.destroyNode&&Rl(s,o,a,3,null,null),function sw(s){let o=s[po];if(!o)return fa(s[Ke],s);for(;o;){let a=null;if(oi(o))a=o[po];else{const l=o[pr];l&&(a=l)}if(!a){for(;o&&!o[gi]&&o!==s;)oi(o)&&fa(o[Ke],o),o=o[wn];null===o&&(o=s),oi(o)&&fa(o[Ke],o),a=o&&o[gi]}o=a}}(o)}}function fa(s,o){if(!(128&o[kt])){o[kt]&=-65,o[kt]|=128,function au(s,o){let a;if(null!=s&&null!=(a=s.destroyHooks))for(let l=0;l<a.length;l+=2){const d=o[a[l]];if(!(d instanceof Es)){const g=a[l+1];if(Array.isArray(g))for(let _=0;_<g.length;_+=2){const I=d[g[_]],b=g[_+1];qr(4,I,b);try{b.call(I)}finally{qr(5,I,b)}}else{qr(4,d,g);try{g.call(d)}finally{qr(5,d,g)}}}}}(s,o),function c_(s,o){const a=s.cleanup,l=o[Yo];let d=-1;if(null!==a)for(let g=0;g<a.length-1;g+=2)if("string"==typeof a[g]){const _=a[g+3];_>=0?l[d=_]():l[d=-_].unsubscribe(),g+=2}else{const _=l[d=a[g+1]];a[g].call(_)}if(null!==l){for(let g=d+1;g<l.length;g++)(0,l[g])();o[Yo]=null}}(s,o),1===o[Ke].type&&o[Bt].destroy();const a=o[Qo];if(null!==a&&ai(o[wn])){a!==o[wn]&&jg(a,o);const l=o[Oi];null!==l&&l.detachView(s)}!function E(s){Gd.delete(s[Vs])}(o)}}function Ec(s,o,a){return function l_(s,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[pi];{const{componentOffset:d}=l;if(d>-1){const{encapsulation:g}=s.data[l.directiveStart+d];if(g===_e.None||g===_e.Emulated)return null}return mr(l,a)}}(s,o.parent,a)}function pa(s,o,a,l,d){s.insertBefore(o,a,l,d)}function Sl(s,o,a){s.appendChild(o,a)}function $g(s,o,a,l,d){null!==l?pa(s,o,a,l,d):Sl(s,o,a)}function jo(s,o){return s.parentNode(o)}let Of,kl,Dc,uu=function xl(s,o,a){return 40&s.type?mr(s,a):null};function cu(s,o,a,l){const d=Ec(s,l,o),g=o[Bt],I=function Qd(s,o,a){return uu(s,o,a)}(l.parent||o[Kn],l,o);if(null!=d)if(Array.isArray(a))for(let b=0;b<a.length;b++)$g(g,d,a[b],I,!1);else $g(g,d,a,I,!1);void 0!==Of&&Of(g,l,o,a,d)}function Jd(s,o){if(null!==o){const a=o.type;if(3&a)return mr(o,s);if(4&a)return Ss(-1,s[o.index]);if(8&a){const l=o.child;if(null!==l)return Jd(s,l);{const d=s[o.index];return ai(d)?Ss(-1,d):gr(d)}}if(32&a)return Qs(o,s)()||gr(s[o.index]);{const l=eh(s,o);return null!==l?Array.isArray(l)?l[0]:Jd(Cl(s[$n]),l):Jd(s,o.next)}}return null}function eh(s,o){return null!==o?s[$n][Kn].projection[o.projection]:null}function Ss(s,o){const a=pr+s+1;if(a<o.length){const l=o[a],d=l[Ke].firstChild;if(null!==d)return Jd(l,d)}return o[Xo]}function Ml(s,o,a,l,d,g,_){for(;null!=a;){const I=l[a.index],b=a.type;if(_&&0===o&&(I&&te(gr(I),l),a.flags|=2),32!=(32&a.flags))if(8&b)Ml(s,o,a.child,l,d,g,!1),Bo(o,s,d,I,g);else if(32&b){const x=Qs(a,l);let R;for(;R=x();)Bo(o,s,d,R,g);Bo(o,s,d,I,g)}else 16&b?Lf(s,o,l,a,d,g):Bo(o,s,d,I,g);a=_?a.projectionNext:a.next}}function Rl(s,o,a,l,d,g){Ml(a,l,s.firstChild,o,d,g,!1)}function Lf(s,o,a,l,d,g){const _=a[$n],b=_[Kn].projection[l.projection];if(Array.isArray(b))for(let x=0;x<b.length;x++)Bo(o,s,d,b[x],g);else Ml(s,o,b,_[wn],d,g,!0)}function ns(s,o,a){""===a?s.removeAttribute(o,"class"):s.setAttribute(o,"class",a)}function Pl(s,o,a){const{mergedAttrs:l,classes:d,styles:g}=a;null!==l&&oa(s,o,l),null!==d&&ns(s,o,d),null!==g&&function Vf(s,o,a){s.setAttribute(o,"style",a)}(s,o,g)}function Gg(s){kl=s}function jf(s){return function Bf(){if(void 0===Dc&&(Dc=null,en.trustedTypes))try{Dc=en.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Dc}()?.createScriptURL(s)||s}class qg{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ut})`}}function Pr(s){return s instanceof qg?s.changingThisBreaksApplicationSecurity:s}function Ci(s,o){const a=function Cc(s){return s instanceof qg&&s.getTypeName()||null}(s);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see ${ut})`)}return a===o}const Wf=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var An=(()=>((An=An||{})[An.NONE=0]="NONE",An[An.HTML=1]="HTML",An[An.STYLE=2]="STYLE",An[An.SCRIPT=3]="SCRIPT",An[An.URL=4]="URL",An[An.RESOURCE_URL=5]="RESOURCE_URL",An))();function rh(s){const o=Kf();return o?o.sanitize(An.URL,s)||"":Ci(s,"URL")?Pr(s):function bc(s){return(s=String(s)).match(Wf)?s:"unsafe:"+s}(Oe(s))}function Ll(s){const o=Kf();if(o)return jf(o.sanitize(An.RESOURCE_URL,s)||"");if(Ci(s,"ResourceURL"))return jf(Pr(s));throw new pe(904,!1)}function sh(s,o,a){return function v_(s,o){return"src"===o&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===o&&("base"===s||"link"===s)?Ll:rh}(o,a)(s)}function Kf(){const s=he();return s&&s[Na]}const I_=new Zt("ENVIRONMENT_INITIALIZER"),Vl=new Zt("INJECTOR",-1),oh=new Zt("INJECTOR_DEF_TYPES");class ow{get(o,a=hi){if(a===hi){const l=new Error(`NullInjectorError: No provider for ${we(o)}!`);throw l.name="NullInjectorError",l}return a}}function Zf(...s){return{\u0275providers:ah(0,s),\u0275fromNgModule:!0}}function ah(s,...o){const a=[],l=new Set;let d;return ts(o,g=>{const _=g;D_(_,a,[],l)&&(d||(d=[]),d.push(_))}),void 0!==d&&aw(d,a),a}function aw(s,o){for(let a=0;a<s.length;a++){const{providers:d}=s[a];C_(d,g=>{o.push(g)})}}function D_(s,o,a,l){if(!(s=W(s)))return!1;let d=null,g=dr(s);const _=!g&&_t(s);if(g||_){if(_&&!_.standalone)return!1;d=s}else{const b=s.ngModule;if(g=dr(b),!g)return!1;d=b}const I=l.has(d);if(_){if(I)return!1;if(l.add(d),_.dependencies){const b="function"==typeof _.dependencies?_.dependencies():_.dependencies;for(const x of b)D_(x,o,a,l)}}else{if(!g)return!1;{if(null!=g.imports&&!I){let x;l.add(d);try{ts(g.imports,R=>{D_(R,o,a,l)&&(x||(x=[]),x.push(R))})}finally{}void 0!==x&&aw(x,o)}if(!I){const x=Ji(d)||(()=>new d);o.push({provide:d,useFactory:x,deps:Ve},{provide:oh,useValue:d,multi:!0},{provide:I_,useValue:()=>rn(d),multi:!0})}const b=g.providers;null==b||I||C_(b,R=>{o.push(R)})}}return d!==s&&void 0!==s.providers}function C_(s,o){for(let a of s)Te(a)&&(a=a.\u0275providers),Array.isArray(a)?C_(a,o):o(a)}const bC=re({provide:String,useValue:re});function b_(s){return null!==s&&"object"==typeof s&&bC in s}function fu(s){return"function"==typeof s}const Ac=new Zt("Set Injector scope."),Jg={},SC={};let T_;function em(){return void 0===T_&&(T_=new ow),T_}class Ul{}class cw extends Ul{get destroyed(){return this._destroyed}constructor(o,a,l,d){super(),this.parent=a,this.source=l,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ch(o,_=>this.processProvider(_)),this.records.set(Vl,uh(void 0,this)),d.has("environment")&&this.records.set(Ul,uh(void 0,this));const g=this.records.get(Ac);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(oh.multi,Ve,yt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const a=Kt(this),l=Dr(void 0);try{return o()}finally{Kt(a),Dr(l)}}get(o,a=hi,l=yt.Default){this.assertNotDestroyed(),l=qn(l);const d=Kt(this),g=Dr(void 0);try{if(!(l&yt.SkipSelf)){let I=this.records.get(o);if(void 0===I){const b=function M_(s){return"function"==typeof s||"object"==typeof s&&s instanceof Zt}(o)&&qt(o);I=b&&this.injectableDefInScope(b)?uh(S_(o),Jg):null,this.records.set(o,I)}if(null!=I)return this.hydrate(o,I)}return(l&yt.Self?em():this.parent).get(o,a=l&yt.Optional&&a===hi?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[hr]=_[hr]||[]).unshift(we(o)),d)throw _;return function zr(s,o,a,l){const d=s[hr];throw o[hn]&&d.unshift(o[hn]),s.message=function B(s,o,a,l=null){s=s&&"\n"===s.charAt(0)&&s.charAt(1)==ii?s.slice(2):s;let d=we(o);if(Array.isArray(o))d=o.map(we).join(" -> ");else if("object"==typeof o){let g=[];for(let _ in o)if(o.hasOwnProperty(_)){let I=o[_];g.push(_+":"+("string"==typeof I?JSON.stringify(I):we(I)))}d=`{${g.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${s.replace(Tn,"\n  ")}`}("\n"+s.message,d,a,l),s[Gr]=d,s[hr]=null,s}(_,o,"R3InjectorError",this.source)}throw _}finally{Dr(g),Kt(d)}}resolveInjectorInitializers(){const o=Kt(this),a=Dr(void 0);try{const l=this.get(I_.multi,Ve,yt.Self);for(const d of l)d()}finally{Kt(o),Dr(a)}}toString(){const o=[],a=this.records;for(const l of a.keys())o.push(we(l));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new pe(205,!1)}processProvider(o){let a=fu(o=W(o))?o:W(o&&o.provide);const l=function xC(s){return b_(s)?uh(void 0,s.useValue):uh(A_(s),Jg)}(o);if(fu(o)||!0!==o.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=uh(void 0,Jg,!0),d.factory=()=>Ri(d.multi),this.records.set(a,d)),a=o,d.multi.push(o)}this.records.set(a,l)}hydrate(o,a){return a.value===Jg&&(a.value=SC,a.value=a.factory()),"object"==typeof a.value&&a.value&&function lw(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=W(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function S_(s){const o=qt(s),a=null!==o?o.factory:Ji(s);if(null!==a)return a;if(s instanceof Zt)throw new pe(204,!1);if(s instanceof Function)return function AC(s){const o=s.length;if(o>0)throw function uc(s,o){const a=[];for(let l=0;l<s;l++)a.push(o);return a}(o,"?"),new pe(204,!1);const a=function Bn(s){return s&&(s[Rn]||s[ti])||null}(s);return null!==a?()=>a.factory(s):()=>new s}(s);throw new pe(204,!1)}function A_(s,o,a){let l;if(fu(s)){const d=W(s);return Ji(d)||S_(d)}if(b_(s))l=()=>W(s.useValue);else if(function uw(s){return!(!s||!s.useFactory)}(s))l=()=>s.useFactory(...Ri(s.deps||[]));else if(function TC(s){return!(!s||!s.useExisting)}(s))l=()=>rn(W(s.useExisting));else{const d=W(s&&(s.useClass||s.provide));if(!function x_(s){return!!s.deps}(s))return Ji(d)||S_(d);l=()=>new d(...Ri(s.deps))}return l}function uh(s,o,a=!1){return{factory:s,value:o,multi:a?[]:void 0}}function ch(s,o){for(const a of s)Array.isArray(a)?ch(a,o):a&&Te(a)?ch(a.\u0275providers,o):o(a)}class MC{}class dw{}class fw{resolveComponentFactory(o){throw function RC(s){const o=Error(`No component factory found for ${we(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let lh=(()=>{class s{}return s.NULL=new fw,s})();function tm(){return pu(nr(),he())}function pu(s,o){return new dh(mr(s,o))}let dh=(()=>{class s{constructor(a){this.nativeElement=a}}return s.__NG_ELEMENT_ID__=tm,s})();function Yf(s){return s instanceof dh?s.nativeElement:s}class N_{}let NC=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function PC(){const s=he(),a=tr(nr().index,s);return(oi(a)?a:s)[Bt]}(),s})(),OC=(()=>{class s{}return s.\u0275prov=lt({token:s,providedIn:"root",factory:()=>null}),s})();class pw{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const gw=new pw("15.2.9"),nm={},P_="ngOriginalError";function O_(s){return s[P_]}class Qf{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&O_(o);for(;a&&O_(a);)a=O_(a);return a||null}}function ma(s){return s instanceof Function?s():s}function Ew(s,o,a){let l=s.length;for(;;){const d=s.indexOf(o,a);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const g=o.length;if(d+g===l||s.charCodeAt(d+g)<=32)return d}a=d+1}}const k_="ng-template";function F_(s,o,a){let l=0,d=!0;for(;l<s.length;){let g=s[l++];if("string"==typeof g&&d){const _=s[l++];if(a&&"class"===g&&-1!==Ew(_.toLowerCase(),o,0))return!0}else{if(1===g){for(;l<s.length&&"string"==typeof(g=s[l++]);)if(g.toLowerCase()===o)return!0;return!1}"number"==typeof g&&(d=!1)}}return!1}function L_(s){return 4===s.type&&s.value!==k_}function hh(s,o,a){return o===(4!==s.type||a?s.value:k_)}function V_(s,o,a){let l=4;const d=s.attrs||[],g=function Dw(s){for(let o=0;o<s.length;o++)if(ol(s[o]))return o;return s.length}(d);let _=!1;for(let I=0;I<o.length;I++){const b=o[I];if("number"!=typeof b){if(!_)if(4&l){if(l=2|1&l,""!==b&&!hh(s,b,a)||""===b&&1===o.length){if($o(l))return!1;_=!0}}else{const x=8&l?b:o[++I];if(8&l&&null!==s.attrs){if(!F_(s.attrs,x,a)){if($o(l))return!1;_=!0}continue}const F=Iw(8&l?"class":b,d,L_(s),a);if(-1===F){if($o(l))return!1;_=!0;continue}if(""!==x){let G;G=F>g?"":d[F+1].toLowerCase();const Y=8&l?G:null;if(Y&&-1!==Ew(Y,x,0)||2&l&&x!==G){if($o(l))return!1;_=!0}}}}else{if(!_&&!$o(l)&&!$o(b))return!1;if(_&&$o(b))continue;_=!1,l=b|1&l}}return $o(l)||_}function $o(s){return 0==(1&s)}function Iw(s,o,a,l){if(null===o)return-1;let d=0;if(l||!a){let g=!1;for(;d<o.length;){const _=o[d];if(_===s)return d;if(3===_||6===_)g=!0;else{if(1===_||2===_){let I=o[++d];for(;"string"==typeof I;)I=o[++d];continue}if(4===_)break;if(0===_){d+=4;continue}}d+=g?1:2}return-1}return function Cw(s,o){let a=s.indexOf(4);if(a>-1)for(a++;a<s.length;){const l=s[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,s)}function Jf(s,o,a=!1){for(let l=0;l<o.length;l++)if(V_(s,o[l],a))return!0;return!1}function bw(s,o){return s?":not("+o.trim()+")":o}function $C(s){let o=s[0],a=1,l=2,d="",g=!1;for(;a<s.length;){let _=s[a];if("string"==typeof _)if(2&l){const I=s[++a];d+="["+_+(I.length>0?'="'+I+'"':"")+"]"}else 8&l?d+="."+_:4&l&&(d+=" "+_);else""!==d&&!$o(_)&&(o+=bw(g,d),d=""),l=_,g=g||!$o(l);a++}return""!==d&&(o+=bw(g,d)),o}const Lt={};function Tw(s){Sw(Ft(),he(),br()+s,!1)}function Sw(s,o,a,l){if(!l)if(3==(3&o[kt])){const g=s.preOrderCheckHooks;null!==g&&rl(o,g,a)}else{const g=s.preOrderHooks;null!==g&&il(o,g,0,a)}ws(a)}function xw(s,o=null,a=null,l){const d=B_(s,o,a,l);return d.resolveInjectorInitializers(),d}function B_(s,o=null,a=null,l,d=new Set){const g=[a||Ve,Zf(s)];return l=l||("object"==typeof s?void 0:we(s)),new cw(g,o||em(),l||null,d)}let fh=(()=>{class s{static create(a,l){if(Array.isArray(a))return xw({name:""},l,a,"");{const d=a.name??"";return xw({name:d},a.parent,a.providers,d)}}}return s.THROW_IF_NOT_FOUND=hi,s.NULL=new ow,s.\u0275prov=lt({token:s,providedIn:"any",factory:()=>rn(Vl)}),s.__NG_ELEMENT_ID__=-1,s})();function mh(s,o=yt.Default){const a=he();return null===a?rn(s,o):ic(nr(),a,W(s),o)}function Ow(){throw new Error("invalid")}function kw(s,o){const a=s.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const g=a[l+1];if(-1!==g){const _=s.data[g];qu(a[l]),_.contentQueries(2,o[g],g)}}}function om(s,o,a,l,d,g,_,I,b,x,R){const F=o.blueprint.slice();return F[pi]=d,F[kt]=76|l,(null!==R||s&&1024&s[kt])&&(F[kt]|=1024),na(F),F[wn]=F[go]=s,F[Pn]=a,F[hs]=_||s&&s[hs],F[Bt]=I||s&&s[Bt],F[Na]=b||s&&s[Na]||null,F[Ra]=x||s&&s[Ra]||null,F[Kn]=g,F[Vs]=function zd(){return Bi++}(),F[Cr]=R,F[$n]=2==o.type?s[$n]:F,F}function rp(s,o,a,l,d){let g=s.data[o];if(null===g)g=function z_(s,o,a,l,d){const g=_o(),_=xd(),b=s.data[o]=function ub(s,o,a,l,d,g){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?g:g&&g.parent,a,o,l,d);return null===s.firstChild&&(s.firstChild=b),null!==g&&(_?null==g.child&&null!==b.parent&&(g.child=b):null===g.next&&(g.next=b,b.prev=g)),b}(s,o,a,l,d),function Md(){return Nt.lFrame.inI18n}()&&(g.flags|=32);else if(64&g.type){g.type=a,g.value=l,g.attrs=d;const _=function Hu(){const s=Nt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();g.injectorIndex=null===_?-1:_.injectorIndex}return Wr(g,!0),g}function ip(s,o,a,l){if(0===a)return-1;const d=o.length;for(let g=0;g<a;g++)o.push(l),s.blueprint.push(l),s.data.push(null);return d}function am(s,o,a){Ku(o);try{const l=s.viewQuery;null!==l&&_a(1,l,a);const d=s.template;null!==d&&q_(s,o,d,1,a),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&kw(s,o),s.staticViewQueries&&_a(2,s.viewQuery,a);const g=s.components;null!==g&&function Fw(s,o){for(let a=0;a<o.length;a++)ev(s,o[a])}(o,g)}catch(l){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),l}finally{o[kt]&=-5,Zu()}}function sp(s,o,a,l){const d=o[kt];if(128!=(128&d)){Ku(o);try{na(o),function es(s){return Nt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==a&&q_(s,o,a,2,l);const _=3==(3&d);if(_){const x=s.preOrderCheckHooks;null!==x&&rl(o,x,null)}else{const x=s.preOrderHooks;null!==x&&il(o,x,0,null),Od(o,0)}if(function Yw(s){for(let o=bl(s);null!==o;o=Uo(o)){if(!o[Zc])continue;const a=o[mo];for(let l=0;l<a.length;l++){const d=a[l];512&d[kt]||La(d[wn],1),d[kt]|=512}}}(o),function J_(s){for(let o=bl(s);null!==o;o=Uo(o))for(let a=pr;a<o.length;a++){const l=o[a],d=l[Ke];_s(l)&&sp(d,l,d.template,l[Pn])}}(o),null!==s.contentQueries&&kw(s,o),_){const x=s.contentCheckHooks;null!==x&&rl(o,x)}else{const x=s.contentHooks;null!==x&&il(o,x,1),Od(o,1)}!function sb(s,o){const a=s.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const d=a[l];if(d<0)ws(~d);else{const g=d,_=a[++l],I=a[++l];zu(_,g),I(2,o[g])}}}finally{ws(-1)}}(s,o);const I=s.components;null!==I&&function ob(s,o){for(let a=0;a<o.length;a++)Qw(s,o[a])}(o,I);const b=s.viewQuery;if(null!==b&&_a(2,b,l),_){const x=s.viewCheckHooks;null!==x&&rl(o,x)}else{const x=s.viewHooks;null!==x&&il(o,x,2),Od(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[kt]&=-41,512&o[kt]&&(o[kt]&=-513,La(o[wn],-1))}finally{Zu()}}}function q_(s,o,a,l,d){const g=br(),_=2&l;try{ws(-1),_&&o.length>mn&&Sw(s,o,mn,!1),qr(_?2:0,d),a(l,d)}finally{ws(g),qr(_?3:1,d)}}function W_(s,o,a){if(Oa(o)){const d=o.directiveEnd;for(let g=o.directiveStart;g<d;g++){const _=s.data[g];_.contentQueries&&_.contentQueries(1,a[g],g)}}}function K_(s,o,a){$u()&&(function $w(s,o,a,l){const d=a.directiveStart,g=a.directiveEnd;Jo(a)&&function Kw(s,o,a){const l=mr(o,s),d=xc(a),g=s[hs],_=op(s,om(s,d,null,a.onPush?32:16,l,o,g,g.createRenderer(l,a),null,null,null));s[o.index]=_}(o,a,s.data[d+a.componentOffset]),s.firstCreatePass||al(a,o),te(l,o);const _=a.initialInputs;for(let I=d;I<g;I++){const b=s.data[I],x=Hn(o,s,I,a);te(x,o),null!==_&&Zw(0,I-d,x,b,0,_),mi(b)&&(tr(a.index,o)[Pn]=Hn(o,s,I,a))}}(s,o,a,mr(a,o)),64==(64&a.flags)&&Y_(s,o,a))}function um(s,o,a=mr){const l=o.localNames;if(null!==l){let d=o.index+1;for(let g=0;g<l.length;g+=2){const _=l[g+1],I=-1===_?a(o,s):s[_];s[d++]=I}}}function xc(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=no(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function no(s,o,a,l,d,g,_,I,b,x){const R=mn+l,F=R+d,G=function ab(s,o){const a=[];for(let l=0;l<o;l++)a.push(l<s?null:Lt);return a}(R,F),Y="function"==typeof x?x():x;return G[Ke]={type:s,blueprint:G,template:a,queries:null,viewQuery:I,declTNode:o,data:G.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:F,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:b,consts:Y,incompleteFirstPass:!1}}function Vw(s,o,a,l){const d=db(o);null===a?d.push(l):(d.push(a),s.firstCreatePass&&hb(s).push(l,d.length-1))}function Uw(s,o,a,l){for(let d in s)if(s.hasOwnProperty(d)){a=null===a?{}:a;const g=s[d];null===l?yh(a,o,d,g):l.hasOwnProperty(d)&&yh(a,o,l[d],g)}return a}function yh(s,o,a,l){s.hasOwnProperty(a)?s[a].push(o,l):s[a]=[o,l]}function Nc(s,o,a,l){if($u()){const d=null===l?null:{"":-1},g=function Gw(s,o){const a=s.directiveRegistry;let l=null,d=null;if(a)for(let g=0;g<a.length;g++){const _=a[g];if(Jf(o,_.selectors,!1))if(l||(l=[]),mi(_))if(null!==_.findHostDirectiveDefs){const I=[];d=d||new Map,_.findHostDirectiveDefs(_,I,d),l.unshift(...I,_),cm(s,o,I.length)}else l.unshift(_),cm(s,o,0);else d=d||new Map,_.findHostDirectiveDefs?.(_,l,d),l.push(_)}return null===l?null:[l,d]}(s,a);let _,I;null===g?_=I=null:[_,I]=g,null!==_&&Z_(s,o,a,_,d,I),d&&function lm(s,o,a){if(o){const l=s.localNames=[];for(let d=0;d<o.length;d+=2){const g=a[o[d+1]];if(null==g)throw new pe(-301,!1);l.push(o[d],g)}}}(a,l,d)}a.mergedAttrs=Co(a.mergedAttrs,a.attrs)}function Z_(s,o,a,l,d,g){for(let x=0;x<l.length;x++)fn(al(a,o),s,l[x].type);!function qw(s,o,a){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+a,s.providerIndexes=o}(a,s.data.length,l.length);for(let x=0;x<l.length;x++){const R=l[x];R.providersResolver&&R.providersResolver(R)}let _=!1,I=!1,b=ip(s,o,l.length,null);for(let x=0;x<l.length;x++){const R=l[x];a.mergedAttrs=Co(a.mergedAttrs,R.hostAttrs),Ww(s,a,o,b,R),zw(b,R,d),null!==R.contentQueries&&(a.flags|=4),(null!==R.hostBindings||null!==R.hostAttrs||0!==R.hostVars)&&(a.flags|=64);const F=R.type.prototype;!_&&(F.ngOnChanges||F.ngOnInit||F.ngDoCheck)&&((s.preOrderHooks??(s.preOrderHooks=[])).push(a.index),_=!0),!I&&(F.ngOnChanges||F.ngDoCheck)&&((s.preOrderCheckHooks??(s.preOrderCheckHooks=[])).push(a.index),I=!0),b++}!function cb(s,o,a){const d=o.directiveEnd,g=s.data,_=o.attrs,I=[];let b=null,x=null;for(let R=o.directiveStart;R<d;R++){const F=g[R],G=a?a.get(F):null,ve=G?G.outputs:null;b=Uw(F.inputs,R,b,G?G.inputs:null),x=Uw(F.outputs,R,x,ve);const Be=null===b||null===_||L_(o)?null:Q_(b,R,_);I.push(Be)}null!==b&&(b.hasOwnProperty("class")&&(o.flags|=8),b.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=I,o.inputs=b,o.outputs=x}(s,a,g)}function Y_(s,o,a){const l=a.directiveStart,d=a.directiveEnd,g=a.index,_=function kg(){return Nt.lFrame.currentDirectiveIndex}();try{ws(g);for(let I=l;I<d;I++){const b=s.data[I],x=o[I];Yn(I),(null!==b.hostBindings||0!==b.hostVars||null!==b.hostAttrs)&&Hw(b,x)}}finally{ws(-1),Yn(_)}}function Hw(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function cm(s,o,a){o.componentOffset=a,(s.components??(s.components=[])).push(o.index)}function zw(s,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=s;mi(o)&&(a[""]=s)}}function Ww(s,o,a,l,d){s.data[l]=d;const g=d.factory||(d.factory=Ji(d.type)),_=new Es(g,mi(d),mh);s.blueprint[l]=_,a[l]=_,function Bw(s,o,a,l,d){const g=d.hostBindings;if(g){let _=s.hostBindingOpCodes;null===_&&(_=s.hostBindingOpCodes=[]);const I=~o.index;(function jw(s){let o=s.length;for(;o>0;){const a=s[--o];if("number"==typeof a&&a<0)return a}return 0})(_)!=I&&_.push(I),_.push(a,l,g)}}(s,o,l,ip(s,a,d.hostVars,Lt),d)}function ya(s,o,a,l,d,g){const _=mr(s,o);!function dm(s,o,a,l,d,g,_){if(null==g)s.removeAttribute(o,d,a);else{const I=null==_?Oe(g):_(g,l||"",d);s.setAttribute(o,d,I,a)}}(o[Bt],_,g,s.value,a,l,d)}function Zw(s,o,a,l,d,g){const _=g[o];if(null!==_){const I=l.setInput;for(let b=0;b<_.length;){const x=_[b++],R=_[b++],F=_[b++];null!==I?l.setInput(a,F,x,R):a[R]=F}}}function Q_(s,o,a){let l=null,d=0;for(;d<a.length;){const g=a[d];if(0!==g)if(5!==g){if("number"==typeof g)break;if(s.hasOwnProperty(g)){null===l&&(l=[]);const _=s[g];for(let I=0;I<_.length;I+=2)if(_[I]===o){l.push(g,_[I+1],a[d+1]);break}}d+=2}else d+=2;else d+=4}return l}function X_(s,o,a,l){return[s,!0,!1,o,null,0,l,a,null,null]}function Qw(s,o){const a=tr(o,s);if(_s(a)){const l=a[Ke];48&a[kt]?sp(l,a,l.template,a[Pn]):a[cn]>0&&hm(a)}}function hm(s){for(let l=bl(s);null!==l;l=Uo(l))for(let d=pr;d<l.length;d++){const g=l[d];if(_s(g))if(512&g[kt]){const _=g[Ke];sp(_,g,_.template,g[Pn])}else g[cn]>0&&hm(g)}const a=s[Ke].components;if(null!==a)for(let l=0;l<a.length;l++){const d=tr(a[l],s);_s(d)&&d[cn]>0&&hm(d)}}function ev(s,o){const a=tr(o,s),l=a[Ke];(function fm(s,o){for(let a=o.length;a<s.blueprint.length;a++)o.push(s.blueprint[a])})(l,a),am(l,a,a[Pn])}function op(s,o){return s[po]?s[fs][gi]=o:s[po]=o,s[fs]=o,o}function ap(s){for(;s;){s[kt]|=32;const o=Cl(s);if(ku(s)&&!o)return s;s=o}return null}function up(s,o,a,l=!0){const d=o[hs];d.begin&&d.begin();try{sp(s,o,s.template,a)}catch(_){throw l&&gm(o,_),_}finally{d.end&&d.end()}}function _a(s,o,a){qu(0),o(s,a)}function db(s){return s[Yo]||(s[Yo]=[])}function hb(s){return s.cleanup||(s.cleanup=[])}function gm(s,o){const a=s[Ra],l=a?a.get(Qf,null):null;l&&l.handleError(o)}function cp(s,o,a,l,d){for(let g=0;g<a.length;){const _=a[g++],I=a[g++],b=o[_],x=s.data[_];null!==x.setInput?x.setInput(b,d,l,I):b[I]=d}}function mm(s,o,a){let l=a?s.styles:null,d=a?s.classes:null,g=0;if(null!==o)for(let _=0;_<o.length;_++){const I=o[_];"number"==typeof I?g=I:1==g?d=fe(d,I):2==g&&(l=fe(l,I+": "+o[++_]+";"))}a?s.styles=l:s.stylesWithoutHost=l,a?s.classes=d:s.classesWithoutHost=d}function _h(s,o,a,l,d=!1){for(;null!==a;){const g=o[a.index];if(null!==g&&l.push(gr(g)),ai(g))for(let I=pr;I<g.length;I++){const b=g[I],x=b[Ke].firstChild;null!==x&&_h(b[Ke],b,x,l)}const _=a.type;if(8&_)_h(s,o,a.child,l);else if(32&_){const I=Qs(a,o);let b;for(;b=I();)l.push(b)}else if(16&_){const I=eh(o,a);if(Array.isArray(I))l.push(...I);else{const b=Cl(o[$n]);_h(b[Ke],b,I,l,!0)}}a=d?a.projectionNext:a.next}return l}class lp{get rootNodes(){const o=this._lView,a=o[Ke];return _h(a,o,a.firstChild,[])}constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Pn]}set context(o){this._lView[Pn]=o}get destroyed(){return 128==(128&this._lView[kt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[wn];if(ai(o)){const a=o[Us],l=a?a.indexOf(this):-1;l>-1&&(Tl(o,l),Po(a,l))}this._attachedToViewContainer=!1}Zd(this._lView[Ke],this._lView)}onDestroy(o){Vw(this._lView[Ke],this._lView,null,o)}markForCheck(){ap(this._cdRefInjectingView||this._lView)}detach(){this._lView[kt]&=-65}reattach(){this._lView[kt]|=64}detectChanges(){up(this._lView[Ke],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new pe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Kd(s,o){Rl(s,o,o[Bt],2,null,null)}(this._lView[Ke],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new pe(902,!1);this._appRef=o}}class Ux extends lp{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;up(o[Ke],o,o[Pn],!1)}checkNoChanges(){}get context(){return null}}class fb extends lh{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=_t(o);return new ym(a,this.ngModule)}}function pb(s){const o=[];for(let a in s)s.hasOwnProperty(a)&&o.push({propName:s[a],templateName:a});return o}class jx{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,l){l=qn(l);const d=this.injector.get(o,nm,l);return d!==nm||a===nm?d:this.parentInjector.get(o,a,l)}}class ym extends dw{get inputs(){return pb(this.componentDef.inputs)}get outputs(){return pb(this.componentDef.outputs)}constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function HC(s){return s.map($C).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}create(o,a,l,d){let g=(d=d||this.ngModule)instanceof Ul?d:d?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const _=g?new jx(o,g):o,I=_.get(N_,null);if(null===I)throw new pe(407,!1);const b=_.get(OC,null),x=I.createRenderer(null,this.componentDef),R=this.componentDef.selectors[0][0]||"div",F=l?function Lw(s,o,a){return s.selectRootElement(o,a===_e.ShadowDom)}(x,l,this.componentDef.encapsulation):Pf(x,R,function Bx(s){const o=s.toLowerCase();return"svg"===o?Mr:"math"===o?"math":null}(R)),G=this.componentDef.onPush?288:272,Y=no(0,null,null,1,0,null,null,null,null,null),ve=om(null,Y,null,G,null,null,I,x,b,_,null);let Be,Ce;Ku(ve);try{const ht=this.componentDef;let At,Ne=null;ht.findHostDirectiveDefs?(At=[],Ne=new Map,ht.findHostDirectiveDefs(ht,At,Ne),At.push(ht)):At=[ht];const Ut=function Xw(s,o){const a=s[Ke],l=mn;return s[l]=o,rp(a,l,2,"#host",null)}(ve,F),Un=function gb(s,o,a,l,d,g,_,I){const b=d[Ke];!function mb(s,o,a,l){for(const d of s)o.mergedAttrs=Co(o.mergedAttrs,d.hostAttrs);null!==o.mergedAttrs&&(mm(o,o.mergedAttrs,!0),null!==a&&Pl(l,a,o))}(l,s,o,_);const x=g.createRenderer(o,a),R=om(d,xc(a),null,a.onPush?32:16,d[s.index],s,g,x,I||null,null,null);return b.firstCreatePass&&cm(b,s,l.length-1),op(d,R),d[s.index]=R}(Ut,F,ht,At,ve,I,x);Ce=Cd(Y,mn),F&&function tv(s,o,a,l){if(l)oa(s,a,["ng-version",gw.full]);else{const{attrs:d,classes:g}=function GC(s){const o=[],a=[];let l=1,d=2;for(;l<s.length;){let g=s[l];if("string"==typeof g)2===d?""!==g&&o.push(g,s[++l]):8===d&&a.push(g);else{if(!$o(d))break;d=g}l++}return{attrs:o,classes:a}}(o.selectors[0]);d&&oa(s,a,d),g&&g.length>0&&ns(s,a,g.join(" "))}}(x,ht,F,l),void 0!==a&&function dp(s,o,a){const l=s.projection=[];for(let d=0;d<o.length;d++){const g=a[d];l.push(null!=g?Array.from(g):null)}}(Ce,this.ngContentSelectors,a),Be=function yb(s,o,a,l,d,g){const _=nr(),I=d[Ke],b=mr(_,d);Z_(I,d,_,a,null,l);for(let R=0;R<a.length;R++)te(Hn(d,I,_.directiveStart+R,_),d);Y_(I,d,_),b&&te(b,d);const x=Hn(d,I,_.directiveStart+_.componentOffset,_);if(s[Pn]=d[Pn]=x,null!==g)for(const R of g)R(x,o);return W_(I,_,s),x}(Un,ht,At,Ne,ve,[_m]),am(Y,ve,null)}finally{Zu()}return new $x(this.componentType,Be,pu(Ce,ve),ve,Ce)}}class $x extends MC{constructor(o,a,l,d,g){super(),this.location=l,this._rootLView=d,this._tNode=g,this.instance=a,this.hostView=this.changeDetectorRef=new Ux(d),this.componentType=o}setInput(o,a){const l=this._tNode.inputs;let d;if(null!==l&&(d=l[o])){const g=this._rootLView;cp(g[Ke],g,d,o,a),ap(tr(this._tNode.index,g))}}get injector(){return new Ds(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function _m(){const s=nr();Qu(he()[Ke],s)}function $l(s){let o=function jl(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),a=!0;const l=[s];for(;o;){let d;if(mi(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new pe(903,!1);d=o.\u0275dir}if(d){if(a){l.push(d);const _=s;_.inputs=rv(s.inputs),_.declaredInputs=rv(s.declaredInputs),_.outputs=rv(s.outputs);const I=d.hostBindings;I&&vm(s,I);const b=d.viewQuery,x=d.contentQueries;if(b&&iv(s,b),x&&_b(s,x),ye(s.inputs,d.inputs),ye(s.declaredInputs,d.declaredInputs),ye(s.outputs,d.outputs),mi(d)&&d.data.animation){const R=s.data;R.animation=(R.animation||[]).concat(d.data.animation)}}const g=d.features;if(g)for(let _=0;_<g.length;_++){const I=g[_];I&&I.ngInherit&&I(s),I===$l&&(a=!1)}}o=Object.getPrototypeOf(o)}!function nv(s){let o=0,a=null;for(let l=s.length-1;l>=0;l--){const d=s[l];d.hostVars=o+=d.hostVars,d.hostAttrs=Co(d.hostAttrs,a=Co(a,d.hostAttrs))}}(l)}function rv(s){return s===X?{}:s===Ve?[]:s}function iv(s,o){const a=s.viewQuery;s.viewQuery=a?(l,d)=>{o(l,d),a(l,d)}:o}function _b(s,o){const a=s.contentQueries;s.contentQueries=a?(l,d,g)=>{o(l,d,g),a(l,d,g)}:o}function vm(s,o){const a=s.hostBindings;s.hostBindings=a?(l,d)=>{o(l,d),a(l,d)}:o}function Gl(s){return!!vh(s)&&(Array.isArray(s)||!(s instanceof Map)&&Symbol.iterator in s)}function vh(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Ti(s,o,a){return!Object.is(s[o],a)&&(s[o]=a,!0)}function Em(s,o,a,l){const d=he();return Ti(d,vo(),o)&&(Ft(),ya(Dn(),d,s,o,a,l)),Em}function uv(s,o,a,l,d,g,_,I){const b=he(),x=Ft(),R=s+mn,F=x.firstCreatePass?function Cb(s,o,a,l,d,g,_,I,b){const x=o.consts,R=rp(o,s,4,_||null,$s(x,I));Nc(o,a,R,$s(x,b)),Qu(o,R);const F=R.tView=no(2,R,l,d,g,o.directiveRegistry,o.pipeRegistry,null,o.schemas,x);return null!==o.queries&&(o.queries.template(o,R),F.queries=o.queries.embeddedTView(R)),R}(R,x,b,o,a,l,d,g,_):x.data[R];Wr(F,!1);const G=b[Bt].createComment("");cu(x,b,G,F),te(G,b),op(b,b[R]=X_(G,b,G,F)),Yc(F)&&K_(x,b,F),null!=_&&um(b,F,I)}function bb(s){return function Rr(s,o){return s[o]}(function Og(){return Nt.lFrame.contextLView}(),mn+s)}function iE(s,o,a){const l=he();return Ti(l,vo(),o)&&function is(s,o,a,l,d,g,_,I){const b=mr(o,a);let R,x=o.inputs;!I&&null!=x&&(R=x[l])?(cp(s,a,R,l,d),Jo(o)&&function bi(s,o){const a=tr(o,s);16&a[kt]||(a[kt]|=32)}(a,o.index)):3&o.type&&(l=function Mc(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(l),d=null!=_?_(d,o.value||"",l):d,g.setProperty(b,l,d))}(Ft(),Dn(),l,s,o,l[Bt],a,!1),iE}function sE(s,o,a,l,d){const _=d?"class":"style";cp(s,a,o.inputs[_],_,l)}function _p(s,o,a,l){const d=he(),g=Ft(),_=mn+s,I=d[Bt],b=g.firstCreatePass?function Tb(s,o,a,l,d,g){const _=o.consts,b=rp(o,s,2,l,$s(_,d));return Nc(o,a,b,$s(_,g)),null!==b.attrs&&mm(b,b.attrs,!1),null!==b.mergedAttrs&&mm(b,b.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,b),b}(_,g,d,o,a,l):g.data[_],x=d[_]=Pf(I,o,function Pd(){return Nt.lFrame.currentNamespace}()),R=Yc(b);return Wr(b,!0),Pl(I,x,b),32!=(32&b.flags)&&cu(g,d,x,b),0===function Td(){return Nt.lFrame.elementDepthCount}()&&te(x,d),function ju(){Nt.lFrame.elementDepthCount++}(),R&&(K_(g,d,b),W_(g,b,d)),null!==l&&um(d,b),_p}function Cm(){let s=nr();xd()?function Gu(){Nt.lFrame.isParent=!1}():(s=s.parent,Wr(s,!1));const o=s;!function Sd(){Nt.lFrame.elementDepthCount--}();const a=Ft();return a.firstCreatePass&&(Qu(a,s),Oa(s)&&a.queries.elementEnd(s)),null!=o.classesWithoutHost&&function qa(s){return 0!=(8&s.flags)}(o)&&sE(a,o,he(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Eo(s){return 0!=(16&s.flags)}(o)&&sE(a,o,he(),o.stylesWithoutHost,!1),Cm}function bm(s,o,a,l){return _p(s,o,a,l),Cm(),bm}function aE(){return he()}function uE(s){return!!s&&"function"==typeof s.then}function dv(s){return!!s&&"function"==typeof s.subscribe}const cE=dv;function Sm(s,o,a,l){const d=he(),g=Ft(),_=nr();return function Am(s,o,a,l,d,g,_){const I=Yc(l),x=s.firstCreatePass&&hb(s),R=o[Pn],F=db(o);let G=!0;if(3&l.type||_){const Be=mr(l,o),Ce=_?_(Be):Be,ht=F.length,At=_?Ut=>_(gr(Ut[l.index])):l.index;let Ne=null;if(!_&&I&&(Ne=function dE(s,o,a,l){const d=s.cleanup;if(null!=d)for(let g=0;g<d.length-1;g+=2){const _=d[g];if(_===a&&d[g+1]===l){const I=o[Yo],b=d[g+2];return I.length>b?I[b]:null}"string"==typeof _&&(g+=2)}return null}(s,o,d,l.index)),null!==Ne)(Ne.__ngLastListenerFn__||Ne).__ngNextListenerFn__=g,Ne.__ngLastListenerFn__=g,G=!1;else{g=hv(l,o,R,g,!1);const Ut=a.listen(Ce,d,g);F.push(g,Ut),x&&x.push(d,At,ht,ht+1)}}else g=hv(l,o,R,g,!1);const Y=l.outputs;let ve;if(G&&null!==Y&&(ve=Y[d])){const Be=ve.length;if(Be)for(let Ce=0;Ce<Be;Ce+=2){const Un=o[ve[Ce]][ve[Ce+1]].subscribe(g),Gn=F.length;F.push(g,Un),x&&x.push(d,l.index,Gn,-(Gn+1))}}}(g,d,d[Bt],_,s,o,l),Sm}function hE(s,o,a,l){try{return qr(6,o,a),!1!==a(l)}catch(d){return gm(s,d),!1}finally{qr(7,o,a)}}function hv(s,o,a,l,d){return function g(_){if(_===Function)return l;ap(s.componentOffset>-1?tr(s.index,o):o);let b=hE(o,a,l,_),x=g.__ngNextListenerFn__;for(;x;)b=hE(o,a,x,_)&&b,x=x.__ngNextListenerFn__;return d&&!1===b&&(_.preventDefault(),_.returnValue=!1),b}}function fE(s=1){return function mf(s){return(Nt.lFrame.contextLView=function Yu(s,o){for(;s>0;)o=o[go],s--;return o}(s,Nt.lFrame.contextLView))[Pn]}(s)}function Mm(s,o){return s<<17|o<<2}function gu(s){return s>>17&32767}function Ip(s){return 2|s}function Wl(s){return(131068&s)>>2}function Rm(s,o){return-131069&s|o<<2}function mu(s){return 1|s}function EE(s,o,a,l,d){const g=s[a+1],_=null===o;let I=l?gu(g):Wl(g),b=!1;for(;0!==I&&(!1===b||_);){const R=s[I+1];Rb(s[I],o)&&(b=!0,s[I+1]=l?mu(R):Ip(R)),I=l?gu(R):Wl(R)}b&&(s[a+1]=l?Ip(g):mu(g))}function Rb(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&ci(s,o)>=0}function AE(s,o){return function wa(s,o,a,l){const d=he(),g=Ft(),_=function _i(s){const o=Nt.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,a}(2);g.firstUpdatePass&&function Fn(s,o,a,l){const d=s.data;if(null===d[a+1]){const g=d[br()],_=function xE(s,o){return o>=s.expandoStartIndex}(s,a);(function Dp(s,o){return 0!=(s.flags&(o?8:16))})(g,l)&&null===o&&!_&&(o=!1),o=function _v(s,o,a,l){const d=function ra(s){const o=Nt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let g=l?o.residualClasses:o.residualStyles;if(null===d)0===(l?o.classBindings:o.styleBindings)&&(a=Gi(a=me(null,s,o,a,l),o.attrs,l),g=null);else{const _=o.directiveStylingLast;if(-1===_||s[_]!==d)if(a=me(d,s,o,a,l),null===g){let b=function Hi(s,o,a){const l=a?o.classBindings:o.styleBindings;if(0!==Wl(l))return s[gu(l)]}(s,o,l);void 0!==b&&Array.isArray(b)&&(b=me(null,s,o,b[1],l),b=Gi(b,o.attrs,l),function Jx(s,o,a,l){s[gu(a?o.classBindings:o.styleBindings)]=l}(s,o,l,b))}else g=function ME(s,o,a){let l;const d=o.directiveEnd;for(let g=1+o.directiveStylingLast;g<d;g++)l=Gi(l,s[g].hostAttrs,a);return Gi(l,o.attrs,a)}(s,o,l)}return void 0!==g&&(l?o.residualClasses=g:o.residualStyles=g),a}(d,g,o,l),function Mb(s,o,a,l,d,g){let _=g?o.classBindings:o.styleBindings,I=gu(_),b=Wl(_);s[l]=a;let R,x=!1;if(Array.isArray(a)?(R=a[1],(null===R||ci(a,R)>0)&&(x=!0)):R=a,d)if(0!==b){const G=gu(s[I+1]);s[l+1]=Mm(G,I),0!==G&&(s[G+1]=Rm(s[G+1],l)),s[I+1]=function qx(s,o){return 131071&s|o<<17}(s[I+1],l)}else s[l+1]=Mm(I,0),0!==I&&(s[I+1]=Rm(s[I+1],l)),I=l;else s[l+1]=Mm(b,0),0===I?I=l:s[b+1]=Rm(s[b+1],l),b=l;x&&(s[l+1]=Ip(s[l+1])),EE(s,R,l,!0),EE(s,R,l,!1),function wE(s,o,a,l,d){const g=d?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof o&&ci(g,o)>=0&&(a[l+1]=mu(a[l+1]))}(o,R,s,l,g),_=Mm(I,b),g?o.classBindings=_:o.styleBindings=_}(d,g,o,a,_,l)}}(g,s,_,l),o!==Lt&&Ti(d,_,o)&&function oo(s,o,a,l,d,g,_,I){if(!(3&o.type))return;const b=s.data,x=b[I+1],R=function vE(s){return 1==(1&s)}(x)?Qe(b,o,a,d,Wl(x),_):void 0;Th(R)||(Th(g)||function Ab(s){return 2==(2&s)}(x)&&(g=Qe(b,null,a,d,I,_)),function Xs(s,o,a,l,d){if(o)d?s.addClass(a,l):s.removeClass(a,l);else{let g=-1===l.indexOf("-")?void 0:Dt.DashCase;null==d?s.removeStyle(a,l,g):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),g|=Dt.Important),s.setStyle(a,l,d,g))}}(l,_,ys(br(),a),d,g))}(g,g.data[br()],d,d[Bt],s,d[_+1]=function jt(s,o){return null==s||""===s||("string"==typeof o?s+=o:"object"==typeof s&&(s=we(Pr(s)))),s}(o,a),l,_)}(s,o,null,!0),AE}function me(s,o,a,l,d){let g=null;const _=a.directiveEnd;let I=a.directiveStylingLast;for(-1===I?I=a.directiveStart:I++;I<_&&(g=o[I],l=Gi(l,g.hostAttrs,d),g!==s);)I++;return null!==s&&(a.directiveStylingLast=I),l}function Gi(s,o,a){const l=a?1:2;let d=-1;if(null!==o)for(let g=0;g<o.length;g++){const _=o[g];"number"==typeof _?d=_:d===l&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Kr(s,_,!!a||o[++g]))}return void 0===s?null:s}function Qe(s,o,a,l,d,g){const _=null===o;let I;for(;d>0;){const b=s[d],x=Array.isArray(b),R=x?b[1]:b,F=null===R;let G=a[d+1];G===Lt&&(G=F?Ve:void 0);let Y=F?Xt(G,l):R===l?G:void 0;if(x&&!Th(Y)&&(Y=Xt(b,l)),Th(Y)&&(I=Y,_))return I;const ve=s[d+1];d=_?gu(ve):Wl(ve)}if(null!==o){let b=g?o.residualClasses:o.residualStyles;null!=b&&(I=Xt(b,l))}return I}function Th(s){return void 0!==s}function Sh(s,o=""){const a=he(),l=Ft(),d=s+mn,g=l.firstCreatePass?rp(l,d,1,o,null):l.data[d],_=a[d]=function wc(s,o){return s.createText(o)}(a[Bt],o);cu(l,a,_,g),Wr(g,!1)}function vv(s){return Cp("",s,""),vv}function Cp(s,o,a){const l=he(),d=function gp(s,o,a,l){return Ti(s,vo(),a)?o+Oe(a)+l:Lt}(l,s,o,a);return d!==Lt&&function ro(s,o,a){const l=ys(o,s);!function Nf(s,o,a){s.setValue(o,a)}(s[Bt],l,a)}(l,br(),d),Cp}const Da=void 0;var Bb=["en",[["a","p"],["AM","PM"],Da],[["AM","PM"],Da,Da],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Da,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Da,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Da,"{1} 'at' {0}",Da],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function bv(s){const a=Math.floor(Math.abs(s)),l=s.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let Kl={};function Lm(s){const o=function zE(s){return s.toLowerCase().replace(/_/g,"-")}(s);let a=Um(o);if(a)return a;const l=o.split("-")[0];if(a=Um(l),a)return a;if("en"===l)return Bb;throw new pe(701,!1)}function Vm(s){return Lm(s)[Tt.PluralCase]}function Um(s){return s in Kl||(Kl[s]=en.ng&&en.ng.common&&en.ng.common.locales&&en.ng.common.locales[s]),Kl[s]}var Tt=(()=>((Tt=Tt||{})[Tt.LocaleId=0]="LocaleId",Tt[Tt.DayPeriodsFormat=1]="DayPeriodsFormat",Tt[Tt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Tt[Tt.DaysFormat=3]="DaysFormat",Tt[Tt.DaysStandalone=4]="DaysStandalone",Tt[Tt.MonthsFormat=5]="MonthsFormat",Tt[Tt.MonthsStandalone=6]="MonthsStandalone",Tt[Tt.Eras=7]="Eras",Tt[Tt.FirstDayOfWeek=8]="FirstDayOfWeek",Tt[Tt.WeekendRange=9]="WeekendRange",Tt[Tt.DateFormat=10]="DateFormat",Tt[Tt.TimeFormat=11]="TimeFormat",Tt[Tt.DateTimeFormat=12]="DateTimeFormat",Tt[Tt.NumberSymbols=13]="NumberSymbols",Tt[Tt.NumberFormats=14]="NumberFormats",Tt[Tt.CurrencyCode=15]="CurrencyCode",Tt[Tt.CurrencySymbol=16]="CurrencySymbol",Tt[Tt.CurrencyName=17]="CurrencyName",Tt[Tt.Currencies=18]="Currencies",Tt[Tt.Directionality=19]="Directionality",Tt[Tt.PluralCase=20]="PluralCase",Tt[Tt.ExtraData=21]="ExtraData",Tt))();const Zl="en-US";let Bm=Zl;function Vv(s,o,a,l,d){if(s=W(s),Array.isArray(s))for(let g=0;g<s.length;g++)Vv(s[g],o,a,l,d);else{const g=Ft(),_=he();let I=fu(s)?s:W(s.provide),b=A_(s);const x=nr(),R=1048575&x.providerIndexes,F=x.directiveStart,G=x.providerIndexes>>20;if(fu(s)||!s.multi){const Y=new Es(b,d,mh),ve=Bv(I,o,d?R:R+G,F);-1===ve?(fn(al(x,_),g,I),Uv(g,s,o.length),o.push(I),x.directiveStart++,x.directiveEnd++,d&&(x.providerIndexes+=1048576),a.push(Y),_.push(Y)):(a[ve]=Y,_[ve]=Y)}else{const Y=Bv(I,o,R+G,F),ve=Bv(I,o,R,R+G),Ce=ve>=0&&a[ve];if(d&&!Ce||!d&&!(Y>=0&&a[Y])){fn(al(x,_),g,I);const ht=function hI(s,o,a,l,d){const g=new Es(s,a,mh);return g.multi=[],g.index=o,g.componentProviders=0,dI(g,d,l&&!a),g}(d?Lc:Bp,a.length,d,l,b);!d&&Ce&&(a[ve].providerFactory=ht),Uv(g,s,o.length,0),o.push(I),x.directiveStart++,x.directiveEnd++,d&&(x.providerIndexes+=1048576),a.push(ht),_.push(ht)}else Uv(g,s,Y>-1?Y:ve,dI(a[d?ve:Y],b,!d&&l));!d&&l&&Ce&&a[ve].componentProviders++}}}function Uv(s,o,a,l){const d=fu(o),g=function Xg(s){return!!s.useClass}(o);if(d||g){const b=(g?W(o.useClass):o).prototype.ngOnDestroy;if(b){const x=s.destroyHooks||(s.destroyHooks=[]);if(!d&&o.multi){const R=x.indexOf(a);-1===R?x.push(a,[l,b]):x[R+1].push(l,b)}else x.push(a,b)}}}function dI(s,o,a){return a&&s.componentProviders++,s.multi.push(o)-1}function Bv(s,o,a,l){for(let d=a;d<l;d++)if(o[d]===s)return d;return-1}function Bp(s,o,a,l){return Jm(this.multi,[])}function Lc(s,o,a,l){const d=this.multi;let g;if(this.providerFactory){const _=this.providerFactory.componentProviders,I=Hn(a,a[Ke],this.providerFactory.index,l);g=I.slice(0,_),Jm(d,g);for(let b=_;b<I.length;b++)g.push(I[b])}else g=[],Jm(d,g);return g}function Jm(s,o){for(let a=0;a<s.length;a++)o.push((0,s[a])());return o}function jv(s,o=[]){return a=>{a.providersResolver=(l,d)=>function lI(s,o,a){const l=Ft();if(l.firstCreatePass){const d=mi(s);Vv(a,l.data,l.blueprint,d,!0),Vv(o,l.data,l.blueprint,d,!1)}}(l,d?d(s):s,o)}}class Ho{}class fI{}function tT(s,o){return new pI(s,o??null)}class pI extends Ho{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new fb(this);const l=Wn(o);this._bootstrapComponents=ma(l.bootstrap),this._r3Injector=B_(o,a,[{provide:Ho,useValue:this},{provide:lh,useValue:this.componentFactoryResolver}],we(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class ey extends fI{constructor(o){super(),this.moduleType=o}create(o){return new pI(this.moduleType,o)}}class gI extends Ho{constructor(o,a,l){super(),this.componentFactoryResolver=new fb(this),this.instance=null;const d=new cw([...o,{provide:Ho,useValue:this},{provide:lh,useValue:this.componentFactoryResolver}],a||em(),l,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function jp(s,o,a=null){return new gI(s,o,a).injector}let $v=(()=>{class s{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const l=ah(0,a.type),d=l.length>0?jp([l],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,d)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=lt({token:s,providedIn:"environment",factory:()=>new s(rn(Ul))}),s})();function Hv(s){s.getStandaloneInjector=o=>o.get($v).getOrCreateStandaloneInjector(s)}function cy(s){return o=>{setTimeout(s,void 0,o)}}const Go=class uy extends f.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,l){let d=o,g=a||(()=>null),_=l;if(o&&"object"==typeof o){const b=o;d=b.next?.bind(b),g=b.error?.bind(b),_=b.complete?.bind(b)}this.__isAsync&&(g=cy(g),d&&(d=cy(d)),_&&(_=cy(_)));const I=super.subscribe({next:d,error:g,complete:_});return o instanceof Q.w0&&o.add(I),I}};function rd(){return this._results[Symbol.iterator]()}class ly{get changes(){return this._changes||(this._changes=new Go)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=ly.prototype;a[Symbol.iterator]||(a[Symbol.iterator]=rd)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const l=this;l.dirty=!1;const d=function Li(s){return s.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function fl(s,o,a){if(s.length!==o.length)return!1;for(let l=0;l<s.length;l++){let d=s[l],g=o[l];if(a&&(d=a(d),g=a(g)),g!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let jh=(()=>{class s{}return s.__NG_ELEMENT_ID__=dy,s})();const AI=jh,xI=class extends AI{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(o,a){const l=this._declarationTContainer.tView,d=om(this._declarationLView,l,o,16,null,l.declTNode,null,null,null,null,a||null);d[Qo]=this._declarationLView[this._declarationTContainer.index];const _=this._declarationLView[Oi];return null!==_&&(d[Oi]=_.createEmbeddedView(l)),am(l,d,o),new lp(d)}};function dy(){return xi(nr(),he())}function xi(s,o){return 4&s.type?new xI(o,s,pu(s,o)):null}let zp=(()=>{class s{}return s.__NG_ELEMENT_ID__=MI,s})();function MI(){return yn(nr(),he())}const $h=zp,RI=class extends $h{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return pu(this._hostTNode,this._hostLView)}get injector(){return new Ds(this._hostTNode,this._hostLView)}get parentInjector(){const o=Ld(this._hostTNode,this._hostLView);if(bo(o)){const a=To(o,this._hostLView),l=Hs(o);return new Ds(a[Ke].data[l+8],a)}return new Ds(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=ao(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-pr}createEmbeddedView(o,a,l){let d,g;"number"==typeof l?d=l:null!=l&&(d=l.index,g=l.injector);const _=o.createEmbeddedView(a||{},g);return this.insert(_,d),_}createComponent(o,a,l,d,g){const _=o&&!function ac(s){return"function"==typeof s}(o);let I;if(_)I=a;else{const F=a||{};I=F.index,l=F.injector,d=F.projectableNodes,g=F.environmentInjector||F.ngModuleRef}const b=_?o:new ym(_t(o)),x=l||this.parentInjector;if(!g&&null==b.ngModule){const G=(_?x:this.parentInjector).get(Ul,null);G&&(g=G)}const R=b.create(x,d,void 0,g);return this.insert(R.hostView,I),R}insert(o,a){const l=o._lView,d=l[Ke];if(function el(s){return ai(s[wn])}(l)){const R=this.indexOf(o);if(-1!==R)this.detach(R);else{const F=l[wn],G=new RI(F,F[Kn],F[wn]);G.detach(G.indexOf(o))}}const g=this._adjustIndex(a),_=this._lContainer;!function ou(s,o,a,l){const d=pr+l,g=a.length;l>0&&(a[d-1][gi]=o),l<g-pr?(o[gi]=a[d],Tf(a,pr+l,o)):(a.push(o),o[gi]=null),o[wn]=a;const _=o[Qo];null!==_&&a!==_&&function u_(s,o){const a=s[mo];o[$n]!==o[wn][wn][$n]&&(s[Zc]=!0),null===a?s[mo]=[o]:a.push(o)}(_,o);const I=o[Oi];null!==I&&I.insertView(s),o[kt]|=64}(d,l,_,g);const I=Ss(g,_),b=l[Bt],x=jo(b,_[Xo]);return null!==x&&function Bg(s,o,a,l,d,g){l[pi]=d,l[Kn]=o,Rl(s,l,a,1,d,g)}(d,_[Kn],b,l,x,I),o.attachToViewContainerRef(),Tf(qp(_),g,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=ao(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=Tl(this._lContainer,a);l&&(Po(qp(this._lContainer),a),Zd(l[Ke],l))}detach(o){const a=this._adjustIndex(o,-1),l=Tl(this._lContainer,a);return l&&null!=Po(qp(this._lContainer),a)?new lp(l):null}_adjustIndex(o,a=0){return o??this.length+a}};function ao(s){return s[Us]}function qp(s){return s[Us]||(s[Us]=[])}function yn(s,o){let a;const l=o[s.index];if(ai(l))a=l;else{let d;if(8&s.type)d=gr(l);else{const g=o[Bt];d=g.createComment("");const _=mr(s,o);pa(g,jo(g,_),d,function Hg(s,o){return s.nextSibling(o)}(g,_),!1)}o[s.index]=a=X_(l,o,d,s),op(o,a)}return new RI(a,s,o)}class Yv{constructor(o){this.queryList=o,this.matches=null}clone(){return new Yv(this.queryList)}setDirty(){this.queryList.setDirty()}}class Wp{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let g=0;g<l;g++){const _=a.getByIndex(g);d.push(this.queries[_.indexInDeclarationView].clone())}return new Wp(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==fy(o,a).matches&&this.queries[a].setDirty()}}class zo{constructor(o,a,l=null){this.predicate=o,this.flags=a,this.read=l}}class hy{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,g=this.getByIndex(l).embeddedTView(o,d);g&&(g.indexInDeclarationView=l,null!==a?a.push(g):a=[g])}return null!==a?new hy(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Kp{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new Kp(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const g=l[d];this.matchTNodeWithReadOption(o,a,Hh(a,g)),this.matchTNodeWithReadOption(o,a,Ao(a,o,g,!1,!1))}else l===jh?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,Ao(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===dh||d===zp||d===jh&&4&a.type)this.addMatch(a.index,-2);else{const g=Ao(a,o,d,!1,!1);null!==g&&this.addMatch(a.index,g)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function Hh(s,o){const a=s.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function NI(s,o,a,l){return-1===a?function Qv(s,o){return 11&s.type?pu(s,o):4&s.type?xi(s,o):null}(o,s):-2===a?function Iu(s,o,a){return a===dh?pu(o,s):a===jh?xi(o,s):a===zp?yn(o,s):void 0}(s,o,l):Hn(s,s[Ke],a,o)}function xs(s,o,a,l){const d=o[Oi].queries[l];if(null===d.matches){const g=s.data,_=a.matches,I=[];for(let b=0;b<_.length;b+=2){const x=_[b];I.push(x<0?null:NI(o,g[x],_[b+1],a.metadata.read))}d.matches=I}return d.matches}function kr(s,o,a,l){const d=s.queries.getByIndex(a),g=d.matches;if(null!==g){const _=xs(s,o,d,a);for(let I=0;I<g.length;I+=2){const b=g[I];if(b>0)l.push(_[I/2]);else{const x=g[I+1],R=o[-b];for(let F=pr;F<R.length;F++){const G=R[F];G[Qo]===G[wn]&&kr(G[Ke],G,x,l)}if(null!==R[mo]){const F=R[mo];for(let G=0;G<F.length;G++){const Y=F[G];kr(Y[Ke],Y,x,l)}}}}}return l}function Zp(s){const o=he(),a=Ft(),l=tl();qu(l+1);const d=fy(a,l);if(s.dirty&&function Bu(s){return 4==(4&s[kt])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const g=d.crossesNgTemplate?kr(a,o,l,[]):xs(a,o,d,l);s.reset(g,Yf),s.notifyOnChanges()}return!0}return!1}function Yp(s,o,a){const l=Ft();l.firstCreatePass&&(OI(l,new zo(s,o,a),-1),2==(2&o)&&(l.staticViewQueries=!0)),id(l,he(),o)}function Gh(s,o,a,l){const d=Ft();if(d.firstCreatePass){const g=nr();OI(d,new zo(o,a,l),g.index),function dT(s,o){const a=s.contentQueries||(s.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(s.queries.length-1,o)}(d,s),2==(2&a)&&(d.staticContentQueries=!0)}id(d,he(),a)}function Qp(){return function PI(s,o){return s[Oi].queries[o].queryList}(he(),tl())}function id(s,o,a){const l=new ly(4==(4&a));Vw(s,o,l,l.destroy),null===o[Oi]&&(o[Oi]=new Wp),o[Oi].queries.push(new Yv(l))}function OI(s,o,a){null===s.queries&&(s.queries=new hy),s.queries.track(new Kp(o,a))}function fy(s,o){return s.queries.getByIndex(o)}function gy(s){return!!Wn(s)}function ee(...s){}const lo=new Zt("Application Initializer");let vy=(()=>{class s{constructor(a){this.appInits=a,this.resolve=ee,this.reject=ee,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const g=this.appInits[d]();if(uE(g))a.push(g);else if(cE(g)){const _=new Promise((I,b)=>{g.subscribe({complete:I,error:b})});a.push(_)}}Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}}return s.\u0275fac=function(a){return new(a||s)(rn(lo,8))},s.\u0275prov=lt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Kh=new Zt("AppId",{providedIn:"root",factory:function Du(){return`${Cu()}${Cu()}${Cu()}`}});function Cu(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const n0=new Zt("Platform Initializer"),r0=new Zt("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let Ms=(()=>{class s{log(a){console.log(a)}warn(a){console.warn(a)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=lt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const Uc=new Zt("LocaleId",{providedIn:"root",factory:()=>Nn(Uc,yt.Optional|yt.SkipSelf)||function tg(){return typeof $localize<"u"&&$localize.locale||Zl}()}),HI=new Zt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Ta{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let GI=(()=>{class s{compileModuleSync(a){return new ey(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),g=ma(Wn(a).declarations).reduce((_,I)=>{const b=_t(I);return b&&_.push(new ym(b)),_},[]);return new Ta(l,g)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=lt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const CT=(()=>Promise.resolve(0))();function s0(s){typeof Zone>"u"?CT.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class ho{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Go(!1),this.onMicrotaskEmpty=new Go(!1),this.onStable=new Go(!1),this.onError=new Go(!1),typeof Zone>"u")throw new pe(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function bT(){let s=en.requestAnimationFrame,o=en.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const a=s[Zone.__symbol__("OriginalDelegate")];a&&(s=a);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function AT(s){const o=()=>{!function ST(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(en,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,a0(s),s.isCheckStableRunning=!0,o0(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),a0(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,g,_,I)=>{try{return u0(s),a.invokeTask(d,g,_,I)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&o(),WI(s)}},onInvoke:(a,l,d,g,_,I,b)=>{try{return u0(s),a.invoke(d,g,_,I,b)}finally{s.shouldCoalesceRunChangeDetection&&o(),WI(s)}},onHasTask:(a,l,d,g)=>{a.hasTask(d,g),l===d&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,a0(s),o0(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(a,l,d,g)=>(a.handleError(d,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ho.isInAngularZone())throw new pe(909,!1)}static assertNotInAngularZone(){if(ho.isInAngularZone())throw new pe(909,!1)}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,d){const g=this._inner,_=g.scheduleEventTask("NgZoneEvent: "+d,o,TT,ee,ee);try{return g.runTask(_,a,l)}finally{g.cancelTask(_)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const TT={};function o0(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function a0(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function u0(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function WI(s){s._nesting--,o0(s)}class KI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Go,this.onMicrotaskEmpty=new Go,this.onStable=new Go,this.onError=new Go}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,d){return o.apply(a,l)}}const c0=new Zt(""),ZI=new Zt("");let Sa,l0=(()=>{class s{constructor(a,l,d){this._ngZone=a,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Sa||(function YI(s){Sa=s}(d),d.addToWindow(l)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ho.assertNotInAngularZone(),s0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())s0(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let g=-1;l&&l>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==g),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:g,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,l,d){return[]}}return s.\u0275fac=function(a){return new(a||s)(rn(ho),rn(Lr),rn(ZI))},s.\u0275prov=lt({token:s,factory:s.\u0275fac}),s})(),Lr=(()=>{class s{constructor(){this._applications=new Map}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return Sa?.findTestabilityInTree(this,a,l)??null}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=lt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const Aa=!1;let un=null;const ng=new Zt("AllowMultipleToken"),Vr=new Zt("PlatformDestroyListeners"),xn=new Zt("appBootstrapListener");class XI{constructor(o,a){this.name=o,this.token=a}}function Xn(s,o,a=[]){const l=`Platform: ${o}`,d=new Zt(l);return(g=[])=>{let _=ld();if(!_||_.injector.get(ng,!1)){const I=[...a,...g,{provide:d,useValue:!0}];s?s(I):function xT(s){if(un&&!un.get(ng,!1))throw new pe(400,!1);un=s;const o=s.get(eD);(function JI(s){const o=s.get(n0,null);o&&o.forEach(a=>a())})(s)}(function ig(s=[],o){return fh.create({name:o,providers:[{provide:Ac,useValue:"platform"},{provide:Vr,useValue:new Set([()=>un=null])},...s]})}(I,l))}return function bu(s){const o=ld();if(!o)throw new pe(401,!1);return o}()}}function ld(){return un?.get(eD)??null}let eD=(()=>{class s{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const d=function Su(s,o){let a;return a="noop"===s?new KI:("zone.js"===s?void 0:s)||new ho(o),a}(l?.ngZone,function Tu(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(l)),g=[{provide:ho,useValue:d}];return d.run(()=>{const _=fh.create({providers:g,parent:this.injector,name:a.moduleType.name}),I=a.create(_),b=I.injector.get(Qf,null);if(!b)throw new pe(402,!1);return d.runOutsideAngular(()=>{const x=d.onError.subscribe({next:R=>{b.handleError(R)}});I.onDestroy(()=>{Bc(this._modules,I),x.unsubscribe()})}),function sg(s,o,a){try{const l=a();return uE(l)?l.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):l}catch(l){throw o.runOutsideAngular(()=>s.handleError(l)),l}}(b,d,()=>{const x=I.injector.get(vy);return x.runInitializers(),x.donePromise.then(()=>(function jm(s){ge(s,"Expected localeId to be defined"),"string"==typeof s&&(Bm=s.toLowerCase().replace(/_/g,"-"))}(I.injector.get(Uc,Zl)||Zl),this._moduleDoBootstrap(I),I))})})}bootstrapModule(a,l=[]){const d=Au({},l);return function QI(s,o,a){const l=new ey(a);return Promise.resolve(l)}(0,0,a).then(g=>this.bootstrapModuleFactory(g,d))}_moduleDoBootstrap(a){const l=a.injector.get(Rs);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new pe(-403,!1);a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new pe(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(Vr,null);a&&(a.forEach(l=>l()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(a){return new(a||s)(rn(fh))},s.\u0275prov=lt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function Au(s,o){return Array.isArray(o)?o.reduce(Au,s):{...s,...o}}let Rs=(()=>{class s{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(a,l,d){this._zone=a,this._injector=l,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new O.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),_=new O.y(I=>{let b;this._zone.runOutsideAngular(()=>{b=this._zone.onStable.subscribe(()=>{ho.assertNotInAngularZone(),s0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const x=this._zone.onUnstable.subscribe(()=>{ho.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{b.unsubscribe(),x.unsubscribe()}});this.isStable=(0,ie.T)(g,_.pipe((0,se.B)()))}bootstrap(a,l){const d=a instanceof dw;if(!this._injector.get(vy).done){!d&&fr(a);throw new pe(405,Aa)}let _;_=d?a:this._injector.get(lh).resolveComponentFactory(a),this.componentTypes.push(_.componentType);const I=function os(s){return s.isBoundToModule}(_)?void 0:this._injector.get(Ho),x=_.create(fh.NULL,[],l||_.selector,I),R=x.location.nativeElement,F=x.injector.get(c0,null);return F?.registerApplication(R),x.onDestroy(()=>{this.detachView(x.hostView),Bc(this.components,x),F?.unregisterApplication(R)}),this._loadComponent(x),x}tick(){if(this._runningTick)throw new pe(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;Bc(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const l=this._injector.get(xn,[]);l.push(...this._bootstrapListeners),l.forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>Bc(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new pe(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(a){return new(a||s)(rn(ho),rn(Ul),rn(Qf))},s.\u0275prov=lt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Bc(s,o){const a=s.indexOf(o);a>-1&&s.splice(a,1)}function Zh(){return!1}let og=(()=>{class s{}return s.__NG_ELEMENT_ID__=rD,s})();function rD(s){return function iD(s,o,a){if(Jo(s)&&!a){const l=tr(s.index,o);return new lp(l,l)}return 47&s.type?new lp(o[$n],o):null}(nr(),he(),16==(16&s))}class by{constructor(){}supports(o){return Gl(o)}create(o){return new lD(o)}}const cD=(s,o)=>o;class lD{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||cD}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,d=0,g=null;for(;a||l;){const _=!l||a&&a.currentIndex<fD(l,d,g)?a:l,I=fD(_,d,g),b=_.currentIndex;if(_===l)d--,l=l._nextRemoved;else if(a=a._next,null==_.previousIndex)d++;else{g||(g=[]);const x=I-d,R=b-d;if(x!=R){for(let G=0;G<x;G++){const Y=G<g.length?g[G]:g[G]=0,ve=Y+G;R<=ve&&ve<x&&(g[G]=Y+1)}g[_.previousIndex]=R-x}}I!==b&&o(_,I,b)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!Gl(o))throw new pe(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,g,_,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let I=0;I<this.length;I++)g=o[I],_=this._trackByFn(I,g),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,g,_,I)),Object.is(a.item,g)||this._addIdentityChange(a,g)):(a=this._mismatch(a,g,_,I),l=!0),a=a._next}else d=0,function wm(s,o){if(Array.isArray(s))for(let a=0;a<s.length;a++)o(s[a]);else{const a=s[Symbol.iterator]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,I=>{_=this._trackByFn(d,I),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,I,_,d)),Object.is(a.item,I)||this._addIdentityChange(a,I)):(a=this._mismatch(a,I,_,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,d){let g;return null===o?g=this._itTail:(g=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,g,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,g,d)):o=this._addAfter(new dD(a,l),g,d),o}_verifyReinsertion(o,a,l,d){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==g?o=this._reinsertAfter(g,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,g=o._nextRemoved;return null===d?this._removalsHead=g:d._nextRemoved=g,null===g?this._removalsTail=d:g._prevRemoved=d,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new hD),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new hD),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class dD{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class PT{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class hD{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new PT,this.map.set(a,l)),l.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function fD(s,o,a){const l=s.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+o+d}class g0{constructor(){}supports(o){return o instanceof Map||vh(o)}create(){return new OT}}class OT{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||vh(o)))throw new pe(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const g=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,g)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const g=d._prev,_=d._next;return g&&(g._next=_),_&&(_._prev=g),d._next=null,d._prev=null,d}const l=new pD(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class pD{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function gD(){return new m0([new by])}let m0=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||gD()),deps:[[s,new It,new nu]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new pe(901,!1)}}return s.\u0275prov=lt({token:s,providedIn:"root",factory:gD}),s})();function Ty(){return new Mu([new g0])}let Mu=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||Ty()),deps:[[s,new It,new nu]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(l)return l;throw new pe(901,!1)}}return s.\u0275prov=lt({token:s,providedIn:"root",factory:Ty}),s})();const mD=Xn(null,"core",[]);let Ru=(()=>{class s{constructor(a){}}return s.\u0275fac=function(a){return new(a||s)(rn(Rs))},s.\u0275mod=J({type:s}),s.\u0275inj=mt({}),s})();function yD(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}function dg(s,o){const a=_t(s),l=o.elementInjector||em();return new ym(a).create(l,o.projectableNodes,o.hostElement,o.environmentInjector)}},3942:(wt,Me,k)=>{k.d(Me,{Z:()=>We});var f=k(2090),Q=k(4859),O=k(6881),ie=k(1877);class se{constructor(pe,Pe){this._delegate=pe,this.firebase=Pe,(0,O._addComponent)(pe,new Q.wA("app-compat",()=>this,"PUBLIC")),this.container=pe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(pe){this._delegate.automaticDataCollectionEnabled=pe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(pe=>{this._delegate.checkDestroyed(),pe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(pe,Pe=O._DEFAULT_ENTRY_NAME){var Oe;this._delegate.checkDestroyed();const je=this._delegate.container.getProvider(pe);return!je.isInitialized()&&"EXPLICIT"===(null===(Oe=je.getComponent())||void 0===Oe?void 0:Oe.instantiationMode)&&je.initialize(),je.getImmediate({identifier:Pe})}_removeServiceInstance(pe,Pe=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(pe).clearInstance(Pe)}_addComponent(pe){(0,O._addComponent)(this._delegate,pe)}_addOrOverwriteComponent(pe){(0,O._addOrOverwriteComponent)(this._delegate,pe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ye=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function fe(){const ut=function we(ut){const pe={},Pe={__esModule:!0,initializeApp:function ke(Le,nt={}){const ne=O.initializeApp(Le,nt);if((0,f.r3)(pe,ne.name))return pe[ne.name];const bt=new ut(ne,Pe);return pe[ne.name]=bt,bt},app:je,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function Ie(Le){const nt=Le.name,ne=nt.replace("-compat","");if(O._registerComponent(Le)&&"PUBLIC"===Le.type){const bt=(Xe=je())=>{if("function"!=typeof Xe[ne])throw ye.create("invalid-app-argument",{appName:nt});return Xe[ne]()};void 0!==Le.serviceProps&&(0,f.ZB)(bt,Le.serviceProps),Pe[ne]=bt,ut.prototype[ne]=function(...Xe){return this._getService.bind(this,nt).apply(this,Le.multipleInstances?Xe:[])}}return"PUBLIC"===Le.type?Pe[ne]:null},removeApp:function Oe(Le){delete pe[Le]},useAsService:function ze(Le,nt){return"serverAuth"===nt?null:nt},modularAPIs:O}};function je(Le){if(!(0,f.r3)(pe,Le=Le||O._DEFAULT_ENTRY_NAME))throw ye.create("no-app",{appName:Le});return pe[Le]}return Pe.default=Pe,Object.defineProperty(Pe,"apps",{get:function Ee(){return Object.keys(pe).map(Le=>pe[Le])}}),je.App=ut,Pe}(se);return ut.INTERNAL=Object.assign(Object.assign({},ut.INTERNAL),{createFirebaseNamespace:fe,extendNamespace:function pe(Pe){(0,f.ZB)(ut,Pe)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),ut}(),j=new ie.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ut=self.firebase.SDK_VERSION;ut&&ut.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const We=$;!function Te(ut){(0,O.registerVersion)("@firebase/app-compat","0.2.13",ut)}()},6881:(wt,Me,k)=>{k.r(Me),k.d(Me,{FirebaseError:()=>ie.ZR,SDK_VERSION:()=>Ls,_DEFAULT_ENTRY_NAME:()=>Hr,_addComponent:()=>rt,_addOrOverwriteComponent:()=>Rt,_apps:()=>en,_clearComponents:()=>Gr,_components:()=>nn,_getProvider:()=>ri,_registerComponent:()=>hi,_removeServiceInstance:()=>hr,deleteApp:()=>fi,getApp:()=>Qi,getApps:()=>rn,initializeApp:()=>Kt,onLog:()=>Ri,registerVersion:()=>qn,setLogLevel:()=>vn});var f=k(5861),Q=k(4859),O=k(1877),ie=k(2090);const se=(le,J)=>J.some(Fe=>le instanceof Fe);let re,ye;const $=new WeakMap,j=new WeakMap,W=new WeakMap,$e=new WeakMap,Te=new WeakMap;let pe={get(le,J,Fe){if(le instanceof IDBTransaction){if("done"===J)return j.get(le);if("objectStoreNames"===J)return le.objectStoreNames||W.get(le);if("store"===J)return Fe.objectStoreNames[1]?void 0:Fe.objectStore(Fe.objectStoreNames[0])}return ke(le[J])},set:(le,J,Fe)=>(le[J]=Fe,!0),has:(le,J)=>le instanceof IDBTransaction&&("done"===J||"store"===J)||J in le};function je(le){return"function"==typeof le?function Oe(le){return le!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function fe(){return ye||(ye=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(le)?function(...J){return le.apply(Ee(this),J),ke($.get(this))}:function(...J){return ke(le.apply(Ee(this),J))}:function(J,...Fe){const pt=le.call(Ee(this),J,...Fe);return W.set(pt,J.sort?J.sort():[J]),ke(pt)}}(le):(le instanceof IDBTransaction&&function ut(le){if(j.has(le))return;const J=new Promise((Fe,pt)=>{const Ct=()=>{le.removeEventListener("complete",$t),le.removeEventListener("error",_t),le.removeEventListener("abort",_t)},$t=()=>{Fe(),Ct()},_t=()=>{pt(le.error||new DOMException("AbortError","AbortError")),Ct()};le.addEventListener("complete",$t),le.addEventListener("error",_t),le.addEventListener("abort",_t)});j.set(le,J)}(le),se(le,function we(){return re||(re=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(le,pe):le)}function ke(le){if(le instanceof IDBRequest)return function We(le){const J=new Promise((Fe,pt)=>{const Ct=()=>{le.removeEventListener("success",$t),le.removeEventListener("error",_t)},$t=()=>{Fe(ke(le.result)),Ct()},_t=()=>{pt(le.error),Ct()};le.addEventListener("success",$t),le.addEventListener("error",_t)});return J.then(Fe=>{Fe instanceof IDBCursor&&$.set(Fe,le)}).catch(()=>{}),Te.set(J,le),J}(le);if($e.has(le))return $e.get(le);const J=je(le);return J!==le&&($e.set(le,J),Te.set(J,le)),J}const Ee=le=>Te.get(le),Le=["get","getKey","getAll","getAllKeys","count"],nt=["put","add","delete","clear"],ne=new Map;function bt(le,J){if(!(le instanceof IDBDatabase)||J in le||"string"!=typeof J)return;if(ne.get(J))return ne.get(J);const Fe=J.replace(/FromIndex$/,""),pt=J!==Fe,Ct=nt.includes(Fe);if(!(Fe in(pt?IDBIndex:IDBObjectStore).prototype)||!Ct&&!Le.includes(Fe))return;const $t=function(){var _t=(0,f.Z)(function*(tn,...Qt){const fr=this.transaction(tn,Ct?"readwrite":"readonly");let Wn=fr.store;return pt&&(Wn=Wn.index(Qt.shift())),(yield Promise.all([Wn[Fe](...Qt),Ct&&fr.done]))[0]});return function(Qt){return _t.apply(this,arguments)}}();return ne.set(J,$t),$t}!function Pe(le){pe=le(pe)}(le=>({...le,get:(J,Fe,pt)=>bt(J,Fe)||le.get(J,Fe,pt),has:(J,Fe)=>!!bt(J,Fe)||le.has(J,Fe)}));class Xe{constructor(J){this.container=J}getPlatformInfoString(){return this.container.getProviders().map(Fe=>{if(function Ht(le){return"VERSION"===le.getComponent()?.type}(Fe)){const pt=Fe.getImmediate();return`${pt.library}/${pt.version}`}return null}).filter(Fe=>Fe).join(" ")}}const ot="@firebase/app",ei=new O.Yd("@firebase/app"),Hr="[DEFAULT]",Yi={[ot]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},en=new Map,nn=new Map;function rt(le,J){try{le.container.addComponent(J)}catch(Fe){ei.debug(`Component ${J.name} failed to register with FirebaseApp ${le.name}`,Fe)}}function Rt(le,J){le.container.addOrOverwriteComponent(J)}function hi(le){const J=le.name;if(nn.has(J))return ei.debug(`There were multiple attempts to register component ${J}.`),!1;nn.set(J,le);for(const Fe of en.values())rt(Fe,le);return!0}function ri(le,J){const Fe=le.container.getProvider("heartbeat").getImmediate({optional:!0});return Fe&&Fe.triggerHeartbeat(),le.container.getProvider(J)}function hr(le,J,Fe=Hr){ri(le,J).clearInstance(Fe)}function Gr(){nn.clear()}const ii=new ie.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class hn{constructor(J,Fe,pt){this._isDeleted=!1,this._options=Object.assign({},J),this._config=Object.assign({},Fe),this._name=Fe.name,this._automaticDataCollectionEnabled=Fe.automaticDataCollectionEnabled,this._container=pt,this.container.addComponent(new Q.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(J){this.checkDestroyed(),this._automaticDataCollectionEnabled=J}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(J){this._isDeleted=J}checkDestroyed(){if(this.isDeleted)throw ii.create("app-deleted",{appName:this._name})}}const Ls="9.23.0";function Kt(le,J={}){let Fe=le;"object"!=typeof J&&(J={name:J});const pt=Object.assign({name:Hr,automaticDataCollectionEnabled:!1},J),Ct=pt.name;if("string"!=typeof Ct||!Ct)throw ii.create("bad-app-name",{appName:String(Ct)});if(Fe||(Fe=(0,ie.aH)()),!Fe)throw ii.create("no-options");const $t=en.get(Ct);if($t){if((0,ie.vZ)(Fe,$t.options)&&(0,ie.vZ)(pt,$t.config))return $t;throw ii.create("duplicate-app",{appName:Ct})}const _t=new Q.H0(Ct);for(const Qt of nn.values())_t.addComponent(Qt);const tn=new hn(Fe,pt,_t);return en.set(Ct,tn),tn}function Qi(le=Hr){const J=en.get(le);if(!J&&le===Hr&&(0,ie.aH)())return Kt();if(!J)throw ii.create("no-app",{appName:le});return J}function rn(){return Array.from(en.values())}function fi(le){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,f.Z)(function*(le){const J=le.name;en.has(J)&&(en.delete(J),yield Promise.all(le.container.getProviders().map(Fe=>Fe.delete())),le.isDeleted=!0)})).apply(this,arguments)}function qn(le,J,Fe){var pt;let Ct=null!==(pt=Yi[le])&&void 0!==pt?pt:le;Fe&&(Ct+=`-${Fe}`);const $t=Ct.match(/\s|\//),_t=J.match(/\s|\//);if($t||_t){const tn=[`Unable to register library "${Ct}" with version "${J}":`];return $t&&tn.push(`library name "${Ct}" contains illegal characters (whitespace or "/")`),$t&&_t&&tn.push("and"),_t&&tn.push(`version name "${J}" contains illegal characters (whitespace or "/")`),void ei.warn(tn.join(" "))}hi(new Q.wA(`${Ct}-version`,()=>({library:Ct,version:J}),"VERSION"))}function Ri(le,J){if(null!==le&&"function"!=typeof le)throw ii.create("invalid-log-argument");(0,O.Am)(le,J)}function vn(le){(0,O.Ub)(le)}const Ni="firebase-heartbeat-database",zr=1,B="firebase-heartbeat-store";let L=null;function z(){return L||(L=function Ie(le,J,{blocked:Fe,upgrade:pt,blocking:Ct,terminated:$t}={}){const _t=indexedDB.open(le,J),tn=ke(_t);return pt&&_t.addEventListener("upgradeneeded",Qt=>{pt(ke(_t.result),Qt.oldVersion,Qt.newVersion,ke(_t.transaction),Qt)}),Fe&&_t.addEventListener("blocked",Qt=>Fe(Qt.oldVersion,Qt.newVersion,Qt)),tn.then(Qt=>{$t&&Qt.addEventListener("close",()=>$t()),Ct&&Qt.addEventListener("versionchange",fr=>Ct(fr.oldVersion,fr.newVersion,fr))}).catch(()=>{}),tn}(Ni,zr,{upgrade:(le,J)=>{0===J&&le.createObjectStore(B)}}).catch(le=>{throw ii.create("idb-open",{originalErrorMessage:le.message})})),L}function X(){return(X=(0,f.Z)(function*(le){try{return yield(yield z()).transaction(B).objectStore(B).get(Yt(le))}catch(J){if(J instanceof ie.ZR)ei.warn(J.message);else{const Fe=ii.create("idb-get",{originalErrorMessage:J?.message});ei.warn(Fe.message)}}})).apply(this,arguments)}function Ve(le,J){return St.apply(this,arguments)}function St(){return(St=(0,f.Z)(function*(le,J){try{const pt=(yield z()).transaction(B,"readwrite");yield pt.objectStore(B).put(J,Yt(le)),yield pt.done}catch(Fe){if(Fe instanceof ie.ZR)ei.warn(Fe.message);else{const pt=ii.create("idb-set",{originalErrorMessage:Fe?.message});ei.warn(pt.message)}}})).apply(this,arguments)}function Yt(le){return`${le.name}!${le.options.appId}`}class an{constructor(J){this.container=J,this._heartbeatsCache=null;const Fe=this.container.getProvider("app").getImmediate();this._storage=new Pi(Fe),this._heartbeatsCachePromise=this._storage.read().then(pt=>(this._heartbeatsCache=pt,pt))}triggerHeartbeat(){var J=this;return(0,f.Z)(function*(){const pt=J.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ct=zt();if(null===J._heartbeatsCache&&(J._heartbeatsCache=yield J._heartbeatsCachePromise),J._heartbeatsCache.lastSentHeartbeatDate!==Ct&&!J._heartbeatsCache.heartbeats.some($t=>$t.date===Ct))return J._heartbeatsCache.heartbeats.push({date:Ct,agent:pt}),J._heartbeatsCache.heartbeats=J._heartbeatsCache.heartbeats.filter($t=>{const _t=new Date($t.date).valueOf();return Date.now()-_t<=2592e6}),J._storage.overwrite(J._heartbeatsCache)})()}getHeartbeatsHeader(){var J=this;return(0,f.Z)(function*(){if(null===J._heartbeatsCache&&(yield J._heartbeatsCachePromise),null===J._heartbeatsCache||0===J._heartbeatsCache.heartbeats.length)return"";const Fe=zt(),{heartbeatsToSend:pt,unsentEntries:Ct}=function xr(le,J=1024){const Fe=[];let pt=le.slice();for(const Ct of le){const $t=Fe.find(_t=>_t.agent===Ct.agent);if($t){if($t.dates.push(Ct.date),Xi(Fe)>J){$t.dates.pop();break}}else if(Fe.push({agent:Ct.agent,dates:[Ct.date]}),Xi(Fe)>J){Fe.pop();break}pt=pt.slice(1)}return{heartbeatsToSend:Fe,unsentEntries:pt}}(J._heartbeatsCache.heartbeats),$t=(0,ie.L)(JSON.stringify({version:2,heartbeats:pt}));return J._heartbeatsCache.lastSentHeartbeatDate=Fe,Ct.length>0?(J._heartbeatsCache.heartbeats=Ct,yield J._storage.overwrite(J._heartbeatsCache)):(J._heartbeatsCache.heartbeats=[],J._storage.overwrite(J._heartbeatsCache)),$t})()}}function zt(){return(new Date).toISOString().substring(0,10)}class Pi{constructor(J){this.app=J,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,ie.hl)()&&(0,ie.eu)().then(()=>!0).catch(()=>!1)})()}read(){var J=this;return(0,f.Z)(function*(){return(yield J._canUseIndexedDBPromise)&&(yield function _e(le){return X.apply(this,arguments)}(J.app))||{heartbeats:[]}})()}overwrite(J){var Fe=this;return(0,f.Z)(function*(){var pt;if(yield Fe._canUseIndexedDBPromise){const $t=yield Fe.read();return Ve(Fe.app,{lastSentHeartbeatDate:null!==(pt=J.lastSentHeartbeatDate)&&void 0!==pt?pt:$t.lastSentHeartbeatDate,heartbeats:J.heartbeats})}})()}add(J){var Fe=this;return(0,f.Z)(function*(){var pt;if(yield Fe._canUseIndexedDBPromise){const $t=yield Fe.read();return Ve(Fe.app,{lastSentHeartbeatDate:null!==(pt=J.lastSentHeartbeatDate)&&void 0!==pt?pt:$t.lastSentHeartbeatDate,heartbeats:[...$t.heartbeats,...J.heartbeats]})}})()}}function Xi(le){return(0,ie.L)(JSON.stringify({version:2,heartbeats:le})).length}!function Ma(le){hi(new Q.wA("platform-logger",J=>new Xe(J),"PRIVATE")),hi(new Q.wA("heartbeat",J=>new an(J),"PRIVATE")),qn(ot,"0.9.13",le),qn(ot,"0.9.13","esm2017"),qn("fire-js","")}("")},4859:(wt,Me,k)=>{k.d(Me,{H0:()=>we,wA:()=>O});var f=k(5861),Q=k(2090);class O{constructor($,j,W){this.name=$,this.instanceFactory=j,this.type=W,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}const ie="[DEFAULT]";class se{constructor($,j){this.name=$,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){const j=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(j)){const W=new Q.BH;if(this.instancesDeferred.set(j,W),this.isInitialized(j)||this.shouldAutoInitialize())try{const $e=this.getOrInitializeService({instanceIdentifier:j});$e&&W.resolve($e)}catch{}}return this.instancesDeferred.get(j).promise}getImmediate($){var j;const W=this.normalizeInstanceIdentifier($?.identifier),$e=null!==(j=$?.optional)&&void 0!==j&&j;if(!this.isInitialized(W)&&!this.shouldAutoInitialize()){if($e)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:W})}catch(Te){if($e)return null;throw Te}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if(function ye(fe){return"EAGER"===fe.instantiationMode}($))try{this.getOrInitializeService({instanceIdentifier:ie})}catch{}for(const[j,W]of this.instancesDeferred.entries()){const $e=this.normalizeInstanceIdentifier(j);try{const Te=this.getOrInitializeService({instanceIdentifier:$e});W.resolve(Te)}catch{}}}}clearInstance($=ie){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}delete(){var $=this;return(0,f.Z)(function*(){const j=Array.from($.instances.values());yield Promise.all([...j.filter(W=>"INTERNAL"in W).map(W=>W.INTERNAL.delete()),...j.filter(W=>"_delete"in W).map(W=>W._delete())])})()}isComponentSet(){return null!=this.component}isInitialized($=ie){return this.instances.has($)}getOptions($=ie){return this.instancesOptions.get($)||{}}initialize($={}){const{options:j={}}=$,W=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(W))throw Error(`${this.name}(${W}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const $e=this.getOrInitializeService({instanceIdentifier:W,options:j});for(const[Te,We]of this.instancesDeferred.entries())W===this.normalizeInstanceIdentifier(Te)&&We.resolve($e);return $e}onInit($,j){var W;const $e=this.normalizeInstanceIdentifier(j),Te=null!==(W=this.onInitCallbacks.get($e))&&void 0!==W?W:new Set;Te.add($),this.onInitCallbacks.set($e,Te);const We=this.instances.get($e);return We&&$(We,$e),()=>{Te.delete($)}}invokeOnInitCallbacks($,j){const W=this.onInitCallbacks.get(j);if(W)for(const $e of W)try{$e($,j)}catch{}}getOrInitializeService({instanceIdentifier:$,options:j={}}){let W=this.instances.get($);if(!W&&this.component&&(W=this.component.instanceFactory(this.container,{instanceIdentifier:(fe=$,fe===ie?void 0:fe),options:j}),this.instances.set($,W),this.instancesOptions.set($,j),this.invokeOnInitCallbacks(W,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,W)}catch{}var fe;return W||null}normalizeInstanceIdentifier($=ie){return this.component?this.component.multipleInstances?$:ie:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class we{constructor($){this.name=$,this.providers=new Map}addComponent($){const j=this.getProvider($.name);if(j.isComponentSet())throw new Error(`Component ${$.name} has already been registered with ${this.name}`);j.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);const j=new se($,this);return this.providers.set($,j),j}getProviders(){return Array.from(this.providers.values())}}},1877:(wt,Me,k)=>{k.d(Me,{Am:()=>fe,Ub:()=>we,Yd:()=>ye,in:()=>Q});const f=[];var Q=(()=>{return($=Q||(Q={}))[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",Q;var $})();const O={debug:Q.DEBUG,verbose:Q.VERBOSE,info:Q.INFO,warn:Q.WARN,error:Q.ERROR,silent:Q.SILENT},ie=Q.INFO,se={[Q.DEBUG]:"log",[Q.VERBOSE]:"log",[Q.INFO]:"info",[Q.WARN]:"warn",[Q.ERROR]:"error"},re=($,j,...W)=>{if(j<$.logLevel)return;const $e=(new Date).toISOString(),Te=se[j];if(!Te)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[Te](`[${$e}]  ${$.name}:`,...W)};class ye{constructor(j){this.name=j,this._logLevel=ie,this._logHandler=re,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in Q))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?O[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,Q.DEBUG,...j),this._logHandler(this,Q.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,Q.VERBOSE,...j),this._logHandler(this,Q.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,Q.INFO,...j),this._logHandler(this,Q.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,Q.WARN,...j),this._logHandler(this,Q.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,Q.ERROR,...j),this._logHandler(this,Q.ERROR,...j)}}function we($){f.forEach(j=>{j.setLogLevel($)})}function fe($,j){for(const W of f){let $e=null;j&&j.level&&($e=O[j.level]),W.userLogHandler=null===$?null:(Te,We,...ut)=>{const pe=ut.map(Pe=>{if(null==Pe)return null;if("string"==typeof Pe)return Pe;if("number"==typeof Pe||"boolean"==typeof Pe)return Pe.toString();if(Pe instanceof Error)return Pe.message;try{return JSON.stringify(Pe)}catch{return null}}).filter(Pe=>Pe).join(" ");We>=($e??Te.logLevel)&&$({level:Q[We].toLowerCase(),message:pe,args:ut,type:Te.name})}}}},259:(wt,Me,k)=>{k.d(Me,{C6:()=>f.getApps,Mq:()=>f.getApp});var f=k(6881);(0,f.registerVersion)("firebase","9.23.0","app")},9260:(wt,Me,k)=>{k.d(Me,{Z:()=>f.Z});var f=k(3942);f.Z.registerVersion("firebase","9.23.0","app-compat")},2644:(wt,Me,k)=>{k.r(Me);var f=k(5861),Q=k(3942),O=k(2090),ie=k(6881),se=k(7582),re=k(1877),ye=k(4859);const fe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},W_EMAIL_SIGNIN="EMAIL_SIGNIN",W_PASSWORD_RESET="PASSWORD_RESET",W_RECOVER_EMAIL="RECOVER_EMAIL",W_REVERT_SECOND_FACTOR_ADDITION="REVERT_SECOND_FACTOR_ADDITION",W_VERIFY_AND_CHANGE_EMAIL="VERIFY_AND_CHANGE_EMAIL",W_VERIFY_EMAIL="VERIFY_EMAIL";const We=function $e(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},ut=function Te(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},pe=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Oe=new re.Yd("@firebase/auth");function ke(y,...h){Oe.logLevel<=re.in.ERROR&&Oe.error(`Auth (${ie.SDK_VERSION}): ${y}`,...h)}function Ee(y,...h){throw nt(y,...h)}function Ie(y,...h){return nt(y,...h)}function ze(y,h,p){const v=Object.assign(Object.assign({},ut()),{[h]:p});return new O.LL("auth","Firebase",v).create(h,{appName:y.name})}function Le(y,h,p){if(!(h instanceof p))throw p.name!==h.constructor.name&&Ee(y,"argument-error"),ze(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function nt(y,...h){if("string"!=typeof y){const p=h[0],v=[...h.slice(1)];return v[0]&&(v[0].appName=y.name),y._errorFactory.create(p,...v)}return pe.create(y,...h)}function ne(y,h,...p){if(!y)throw nt(h,...p)}function bt(y){const h="INTERNAL ASSERTION FAILED: "+y;throw ke(h),new Error(h)}function Xe(y,h){y||bt(h)}function Ht(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function ot(){return"http:"===Fs()||"https:"===Fs()}function Fs(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class Zi{constructor(h,p){this.shortDelay=h,this.longDelay=p,Xe(p>h,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function ei(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ot()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ae(y,h){Xe(y.emulator,"Emulator should always be set here");const{url:p}=y.emulator;return h?`${p}${h.startsWith("/")?h.slice(1):h}`:p}class de{static initialize(h,p,v){this.fetchImpl=h,p&&(this.headersImpl=p),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void bt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void bt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void bt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ge={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},oe=new Zi(3e4,6e4);function Se(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function be(y,h,p,v){return ct.apply(this,arguments)}function ct(){return(ct=(0,f.Z)(function*(y,h,p,v,S={}){return lt(y,S,(0,f.Z)(function*(){let M={},U={};v&&("GET"===h?U=v:M={body:JSON.stringify(v)});const Z=(0,O.xO)(Object.assign({key:y.config.apiKey},U)).slice(1),Re=yield y._getAdditionalHeaders();return Re["Content-Type"]="application/json",y.languageCode&&(Re["X-Firebase-Locale"]=y.languageCode),de.fetch()(En(y,y.config.apiHost,p,Z),Object.assign({method:h,headers:Re,referrerPolicy:"no-referrer"},M))}))})).apply(this,arguments)}function lt(y,h,p){return _n.apply(this,arguments)}function _n(){return(_n=(0,f.Z)(function*(y,h,p){y._canInitEmulator=!1;const v=Object.assign(Object.assign({},ge),h);try{const S=new gn(y),M=yield Promise.race([p(),S.promise]);S.clearNetworkTimeout();const U=yield M.json();if("needConfirmation"in U)throw Bn(y,"account-exists-with-different-credential",U);if(M.ok&&!("errorMessage"in U))return U;{const Z=M.ok?U.errorMessage:U.error.message,[Re,Ge]=Z.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Re)throw Bn(y,"credential-already-in-use",U);if("EMAIL_EXISTS"===Re)throw Bn(y,"email-already-in-use",U);if("USER_DISABLED"===Re)throw Bn(y,"user-disabled",U);const Je=v[Re]||Re.toLowerCase().replace(/[_\s]+/g,"-");if(Ge)throw ze(y,Je,Ge);Ee(y,Je)}}catch(S){if(S instanceof O.ZR)throw S;Ee(y,"network-request-failed",{message:String(S)})}})).apply(this,arguments)}function mt(y,h,p,v){return qt.apply(this,arguments)}function qt(){return(qt=(0,f.Z)(function*(y,h,p,v,S={}){const M=yield be(y,h,p,v,S);return"mfaPendingCredential"in M&&Ee(y,"multi-factor-auth-required",{_serverResponse:M}),M})).apply(this,arguments)}function En(y,h,p,v){const S=`${h}${p}?${v}`;return y.config.emulator?ae(y.config,S):`${y.config.apiScheme}://${S}`}class gn{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((p,v)=>{this.timer=setTimeout(()=>v(Ie(this.auth,"network-request-failed")),oe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Bn(y,h,p){const v={appName:y.name};p.email&&(v.email=p.email),p.phoneNumber&&(v.phoneNumber=p.phoneNumber);const S=Ie(y,h,v);return S.customData._tokenResponse=p,S}function Rn(){return(Rn=(0,f.Z)(function*(y,h){return be(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function ti(){return(ti=(0,f.Z)(function*(y,h){return be(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function yt(){return(yt=(0,f.Z)(function*(y,h){return be(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function ni(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function Hr(){return(Hr=(0,f.Z)(function*(y,h=!1){const p=(0,O.m9)(y),v=yield p.getIdToken(h),S=en(v);ne(S&&S.exp&&S.auth_time&&S.iat,p.auth,"internal-error");const M="object"==typeof S.firebase?S.firebase:void 0,U=M?.sign_in_provider;return{claims:S,token:v,authTime:ni(Yi(S.auth_time)),issuedAtTime:ni(Yi(S.iat)),expirationTime:ni(Yi(S.exp)),signInProvider:U||null,signInSecondFactor:M?.sign_in_second_factor||null}})).apply(this,arguments)}function Yi(y){return 1e3*Number(y)}function en(y){const[h,p,v]=y.split(".");if(void 0===h||void 0===p||void 0===v)return ke("JWT malformed, contained fewer than 3 sections"),null;try{const S=(0,O.tV)(p);return S?JSON.parse(S):(ke("Failed to decode base64 JWT payload"),null)}catch(S){return ke("Caught error parsing JWT payload as JSON",S?.toString()),null}}function rt(y,h){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,f.Z)(function*(y,h,p=!1){if(p)return h;try{return yield h}catch(v){throw v instanceof O.ZR&&function hi({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}(v)&&y.auth.currentUser===y&&(yield y.auth.signOut()),v}})).apply(this,arguments)}class ri{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var p;if(h){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const S=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(h=!1){var p=this;if(!this.isRunning)return;const v=this.getInterval(h);this.timerId=setTimeout((0,f.Z)(function*(){yield p.iteration()}),v)}iteration(){var h=this;return(0,f.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p?.code&&h.schedule(!0))}h.schedule()})()}}class hr{constructor(h,p){this.createdAt=h,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=ni(this.lastLoginAt),this.creationTime=ni(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Gr(y){return Tn.apply(this,arguments)}function Tn(){return Tn=(0,f.Z)(function*(y){var h;const p=y.auth,v=yield y.getIdToken(),S=yield rt(y,function Ar(y,h){return yt.apply(this,arguments)}(p,{idToken:v}));ne(S?.users.length,p,"internal-error");const M=S.users[0];y._notifyReloadListener(M);const U=null!==(h=M.providerUserInfo)&&void 0!==h&&h.length?function Kt(y){return y.map(h=>{var{providerId:p}=h,v=(0,se._T)(h,["providerId"]);return{providerId:p,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}(M.providerUserInfo):[],Z=function Ls(y,h){return[...y.filter(v=>!h.some(S=>S.providerId===v.providerId)),...h]}(y.providerData,U),Je=!!y.isAnonymous&&!(y.email&&M.passwordHash||Z?.length),tt={uid:M.localId,displayName:M.displayName||null,photoURL:M.photoUrl||null,email:M.email||null,emailVerified:M.emailVerified||!1,phoneNumber:M.phoneNumber||null,tenantId:M.tenantId||null,providerData:Z,metadata:new hr(M.createdAt,M.lastLoginAt),isAnonymous:Je};Object.assign(y,tt)}),Tn.apply(this,arguments)}function hn(){return(hn=(0,f.Z)(function*(y){const h=(0,O.m9)(y);yield Gr(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function rn(){return(rn=(0,f.Z)(function*(y,h){const p=yield lt(y,{},(0,f.Z)(function*(){const v=(0,O.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:S,apiKey:M}=y.config,U=En(y,S,"/v1/token",`key=${M}`),Z=yield y._getAdditionalHeaders();return Z["Content-Type"]="application/x-www-form-urlencoded",de.fetch()(U,{method:"POST",headers:Z,body:v})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class fi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){ne(h.idToken,"internal-error"),ne(typeof h.idToken<"u","internal-error"),ne(typeof h.refreshToken<"u","internal-error");const p="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):function nn(y){const h=en(y);return ne(h,"internal-error"),ne(typeof h.exp<"u","internal-error"),ne(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,p)}getToken(h,p=!1){var v=this;return(0,f.Z)(function*(){return ne(!v.accessToken||v.refreshToken,h,"user-token-expired"),p||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(h,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,p){var v=this;return(0,f.Z)(function*(){const{accessToken:S,refreshToken:M,expiresIn:U}=yield function Qi(y,h){return rn.apply(this,arguments)}(h,p);v.updateTokensAndExpiration(S,M,Number(U))})()}updateTokensAndExpiration(h,p,v){this.refreshToken=p||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(h,p){const{refreshToken:v,accessToken:S,expirationTime:M}=p,U=new fi;return v&&(ne("string"==typeof v,"internal-error",{appName:h}),U.refreshToken=v),S&&(ne("string"==typeof S,"internal-error",{appName:h}),U.accessToken=S),M&&(ne("number"==typeof M,"internal-error",{appName:h}),U.expirationTime=M),U}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new fi,this.toJSON())}_performRefresh(){return bt("not implemented")}}function Nn(y,h){ne("string"==typeof y||typeof y>"u","internal-error",{appName:h})}class qn{constructor(h){var{uid:p,auth:v,stsTokenManager:S}=h,M=(0,se._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ri(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=v,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=M.displayName||null,this.email=M.email||null,this.emailVerified=M.emailVerified||!1,this.phoneNumber=M.phoneNumber||null,this.photoURL=M.photoURL||null,this.isAnonymous=M.isAnonymous||!1,this.tenantId=M.tenantId||null,this.providerData=M.providerData?[...M.providerData]:[],this.metadata=new hr(M.createdAt||void 0,M.lastLoginAt||void 0)}getIdToken(h){var p=this;return(0,f.Z)(function*(){const v=yield rt(p,p.stsTokenManager.getToken(p.auth,h));return ne(v,p.auth,"internal-error"),p.accessToken!==v&&(p.accessToken=v,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),v})()}getIdTokenResult(h){return function Dr(y){return Hr.apply(this,arguments)}(this,h)}reload(){return function ii(y){return hn.apply(this,arguments)}(this)}_assign(h){this!==h&&(ne(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(p=>Object.assign({},p)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){const p=new qn(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}));return p.metadata._copy(this.metadata),p}_onReload(h){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,p=!1){var v=this;return(0,f.Z)(function*(){let S=!1;h.idToken&&h.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(h),S=!0),p&&(yield Gr(v)),yield v.auth._persistUserIfCurrent(v),S&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var h=this;return(0,f.Z)(function*(){const p=yield h.getIdToken();return yield rt(h,function dr(y,h){return Rn.apply(this,arguments)}(h.auth,{idToken:p})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,p){var v,S,M,U,Z,Re,Ge,Je;const tt=null!==(v=p.displayName)&&void 0!==v?v:void 0,bn=null!==(S=p.email)&&void 0!==S?S:void 0,eo=null!==(M=p.phoneNumber)&&void 0!==M?M:void 0,Fl=null!==(U=p.photoURL)&&void 0!==U?U:void 0,__=null!==(Z=p.tenantId)&&void 0!==Z?Z:void 0,An=null!==(Re=p._redirectEventId)&&void 0!==Re?Re:void 0,Yg=null!==(Ge=p.createdAt)&&void 0!==Ge?Ge:void 0,Qg=null!==(Je=p.lastLoginAt)&&void 0!==Je?Je:void 0,{uid:rh,emailVerified:Ll,isAnonymous:$i,providerData:ih,stsTokenManager:Sc}=p;ne(rh&&Sc,h,"internal-error");const v_=fi.fromJSON(this.name,Sc);ne("string"==typeof rh,h,"internal-error"),Nn(tt,h.name),Nn(bn,h.name),ne("boolean"==typeof Ll,h,"internal-error"),ne("boolean"==typeof $i,h,"internal-error"),Nn(eo,h.name),Nn(Fl,h.name),Nn(__,h.name),Nn(An,h.name),Nn(Yg,h.name),Nn(Qg,h.name);const sh=new qn({uid:rh,auth:h,email:bn,emailVerified:Ll,displayName:tt,isAnonymous:$i,photoURL:Fl,phoneNumber:eo,tenantId:__,stsTokenManager:v_,createdAt:Yg,lastLoginAt:Qg});return ih&&Array.isArray(ih)&&(sh.providerData=ih.map(w_=>Object.assign({},w_))),An&&(sh._redirectEventId=An),sh}static _fromIdTokenResponse(h,p,v=!1){return(0,f.Z)(function*(){const S=new fi;S.updateFromServerResponse(p);const M=new qn({uid:p.localId,auth:h,stsTokenManager:S,isAnonymous:v});return yield Gr(M),M})()}}const Ri=new Map;function vn(y){Xe(y instanceof Function,"Expected a class definition");let h=Ri.get(y);return h?(Xe(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,Ri.set(y,h),h)}const zr=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(p,v){var S=this;return(0,f.Z)(function*(){S.storage[p]=v})()}_get(p){var v=this;return(0,f.Z)(function*(){const S=v.storage[p];return void 0===S?null:S})()}_remove(p){var v=this;return(0,f.Z)(function*(){delete v.storage[p]})()}_addListener(p,v){}_removeListener(p,v){}}return y.type="NONE",y})();function B(y,h,p){return`firebase:${y}:${h}:${p}`}class L{constructor(h,p,v){this.persistence=h,this.auth=p,this.userKey=v;const{config:S,name:M}=this.auth;this.fullUserKey=B(this.userKey,S.apiKey,M),this.fullPersistenceKey=B("persistence",S.apiKey,M),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,f.Z)(function*(){const p=yield h.persistence._get(h.fullUserKey);return p?qn._fromJSON(h.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var p=this;return(0,f.Z)(function*(){if(p.persistence===h)return;const v=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=h,v?p.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,p,v="authUser"){return(0,f.Z)(function*(){if(!p.length)return new L(vn(zr),h,v);const S=(yield Promise.all(p.map(function(){var Ge=(0,f.Z)(function*(Je){if(yield Je._isAvailable())return Je});return function(Je){return Ge.apply(this,arguments)}}()))).filter(Ge=>Ge);let M=S[0]||vn(zr);const U=B(v,h.config.apiKey,h.name);let Z=null;for(const Ge of p)try{const Je=yield Ge._get(U);if(Je){const tt=qn._fromJSON(h,Je);Ge!==M&&(Z=tt),M=Ge;break}}catch{}const Re=S.filter(Ge=>Ge._shouldAllowMigration);return M._shouldAllowMigration&&Re.length?(M=Re[0],Z&&(yield M._set(U,Z.toJSON())),yield Promise.all(p.map(function(){var Ge=(0,f.Z)(function*(Je){if(Je!==M)try{yield Je._remove(U)}catch{}});return function(Je){return Ge.apply(this,arguments)}}())),new L(M,h,v)):new L(M,h,v)})()}}function z(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(St(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(_e(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(jn(h))return"Blackberry";if(In(h))return"Webos";if(X(h))return"Safari";if((h.includes("chrome/")||Ve(h))&&!h.includes("edge/"))return"Chrome";if(Yt(h))return"Android";{const v=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===v?.length)return v[1]}return"Other"}function _e(y=(0,O.z$)()){return/firefox\//i.test(y)}function X(y=(0,O.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function Ve(y=(0,O.z$)()){return/crios\//i.test(y)}function St(y=(0,O.z$)()){return/iemobile/i.test(y)}function Yt(y=(0,O.z$)()){return/android/i.test(y)}function jn(y=(0,O.z$)()){return/blackberry/i.test(y)}function In(y=(0,O.z$)()){return/webos/i.test(y)}function an(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function Xi(y=(0,O.z$)()){return an(y)||Yt(y)||In(y)||jn(y)||/windows phone/i.test(y)||St(y)}function le(y,h=[]){let p;switch(y){case"Browser":p=z((0,O.z$)());break;case"Worker":p=`${z((0,O.z$)())}-${y}`;break;default:p=y}const v=h.length?h.join(","):"FirebaseCore-web";return`${p}/JsCore/${ie.SDK_VERSION}/${v}`}function Fe(){return(Fe=(0,f.Z)(function*(y){return(yield be(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function pt(y,h){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,f.Z)(function*(y,h){return be(y,"GET","/v2/recaptchaConfig",Se(y,h))})).apply(this,arguments)}function $t(y){return void 0!==y&&void 0!==y.getResponse}function _t(y){return void 0!==y&&void 0!==y.enterprise}class tn{constructor(h){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===h.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=h.recaptchaKey.split("/")[3],this.emailPasswordEnabled=h.recaptchaEnforcementState.some(p=>"EMAIL_PASSWORD_PROVIDER"===p.provider&&"OFF"!==p.enforcementState)}}function fr(y){return new Promise((h,p)=>{const v=document.createElement("script");v.setAttribute("src",y),v.onload=h,v.onerror=S=>{const M=Ie("internal-error");M.customData=S,p(M)},v.type="text/javascript",v.charset="UTF-8",function Qt(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(v)})}function Wn(y){return`__${y}${Math.floor(1e6*Math.random())}`}const Zo="NO_RECAPTCHA";class pi{constructor(h){this.type="recaptcha-enterprise",this.auth=cn(h)}verify(h="verify",p=!1){var v=this;return(0,f.Z)(function*(){function M(){return M=(0,f.Z)(function*(Z){if(!p){if(null==Z.tenantId&&null!=Z._agentRecaptchaConfig)return Z._agentRecaptchaConfig.siteKey;if(null!=Z.tenantId&&void 0!==Z._tenantRecaptchaConfigs[Z.tenantId])return Z._tenantRecaptchaConfigs[Z.tenantId].siteKey}return new Promise(function(){var Re=(0,f.Z)(function*(Ge,Je){pt(Z,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(tt=>{if(void 0!==tt.recaptchaKey){const bn=new tn(tt);return null==Z.tenantId?Z._agentRecaptchaConfig=bn:Z._tenantRecaptchaConfigs[Z.tenantId]=bn,Ge(bn.siteKey)}Je(new Error("recaptcha Enterprise site key undefined"))}).catch(tt=>{Je(tt)})});return function(Ge,Je){return Re.apply(this,arguments)}}())}),M.apply(this,arguments)}function U(Z,Re,Ge){const Je=window.grecaptcha;_t(Je)?Je.enterprise.ready(()=>{Je.enterprise.execute(Z,{action:h}).then(tt=>{Re(tt)}).catch(()=>{Re(Zo)})}):Ge(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Z,Re)=>{(function S(Z){return M.apply(this,arguments)})(v.auth).then(Ge=>{if(!p&&_t(window.grecaptcha))U(Ge,Z,Re);else{if(typeof window>"u")return void Re(new Error("RecaptchaVerifier is only supported in browser"));fr("https://www.google.com/recaptcha/enterprise.js?render="+Ge).then(()=>{U(Ge,Z,Re)}).catch(Je=>{Re(Je)})}}).catch(Ge=>{Re(Ge)})})})()}}function Ke(y,h,p){return kt.apply(this,arguments)}function kt(){return(kt=(0,f.Z)(function*(y,h,p,v=!1){const S=new pi(y);let M;try{M=yield S.verify(p)}catch{M=yield S.verify(p,!0)}const U=Object.assign({},h);return Object.assign(U,v?{captchaResp:M}:{captchaResponse:M}),Object.assign(U,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(U,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),U})).apply(this,arguments)}class wn{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,p){const v=M=>new Promise((U,Z)=>{try{U(h(M))}catch(Re){Z(Re)}});v.onAbort=p,this.queue.push(v);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(h){var p=this;return(0,f.Z)(function*(){if(p.auth.currentUser===h)return;const v=[];try{for(const S of p.queue)yield S(h),S.onAbort&&v.push(S.onAbort)}catch(S){v.reverse();for(const M of v)try{M()}catch{}throw p.auth._errorFactory.create("login-blocked",{originalMessage:S?.message})}})()}}class gi{constructor(h,p,v,S){this.app=h,this.heartbeatServiceProvider=p,this.appCheckServiceProvider=v,this.config=S,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Kn(this),this.idTokenSubscription=new Kn(this),this.beforeStateQueue=new wn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=S.sdkClientVersion}_initializeWithPersistence(h,p){var v=this;return p&&(this._popupRedirectResolver=vn(p)),this._initializationPromise=this.queue((0,f.Z)(function*(){var S,M;if(!v._deleted&&(v.persistenceManager=yield L.create(v,h),!v._deleted)){if(null!==(S=v._popupRedirectResolver)&&void 0!==S&&S._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch{}yield v.initializeCurrentUser(p),v.lastNotifiedUid=(null===(M=v.currentUser)||void 0===M?void 0:M.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,f.Z)(function*(){if(h._deleted)return;const p=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||p){if(h.currentUser&&p&&h.currentUser.uid===p.uid)return h._currentUser._assign(p),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(p,!0)}})()}initializeCurrentUser(h){var p=this;return(0,f.Z)(function*(){var v;const S=yield p.assertedPersistence.getCurrentUser();let M=S,U=!1;if(h&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const Z=null===(v=p.redirectUser)||void 0===v?void 0:v._redirectEventId,Re=M?._redirectEventId,Ge=yield p.tryRedirectSignIn(h);(!Z||Z===Re)&&Ge?.user&&(M=Ge.user,U=!0)}if(!M)return p.directlySetCurrentUser(null);if(!M._redirectEventId){if(U)try{yield p.beforeStateQueue.runMiddleware(M)}catch(Z){M=S,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(Z))}return M?p.reloadAndSetCurrentUserOrClear(M):p.directlySetCurrentUser(null)}return ne(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===M._redirectEventId?p.directlySetCurrentUser(M):p.reloadAndSetCurrentUserOrClear(M)})()}tryRedirectSignIn(h){var p=this;return(0,f.Z)(function*(){let v=null;try{v=yield p._popupRedirectResolver._completeRedirectFn(p,h,!0)}catch{yield p._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(h){var p=this;return(0,f.Z)(function*(){try{yield Gr(h)}catch(v){if("auth/network-request-failed"!==v?.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function fo(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,f.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var p=this;return(0,f.Z)(function*(){const v=h?(0,O.m9)(h):null;return v&&ne(v.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(v&&v._clone(p))})()}_updateCurrentUser(h,p=!1){var v=this;return(0,f.Z)(function*(){if(!v._deleted)return h&&ne(v.tenantId===h.tenantId,v,"tenant-id-mismatch"),p||(yield v.beforeStateQueue.runMiddleware(h)),v.queue((0,f.Z)(function*(){yield v.directlySetCurrentUser(h),v.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,f.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var p=this;return this.queue((0,f.Z)(function*(){yield p.assertedPersistence.setPersistence(vn(h))}))}initializeRecaptchaConfig(){var h=this;return(0,f.Z)(function*(){const p=yield pt(h,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),v=new tn(p);null==h.tenantId?h._agentRecaptchaConfig=v:h._tenantRecaptchaConfigs[h.tenantId]=v,v.emailPasswordEnabled&&new pi(h).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new O.LL("auth","Firebase",h())}onAuthStateChanged(h,p,v){return this.registerStateListener(this.authStateSubscription,h,p,v)}beforeAuthStateChanged(h,p){return this.beforeStateQueue.pushCallback(h,p)}onIdTokenChanged(h,p,v){return this.registerStateListener(this.idTokenSubscription,h,p,v)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,p){var v=this;return(0,f.Z)(function*(){const S=yield v.getOrInitRedirectPersistenceManager(p);return null===h?S.removeCurrentUser():S.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var p=this;return(0,f.Z)(function*(){if(!p.redirectPersistenceManager){const v=h&&vn(h)||p._popupRedirectResolver;ne(v,p,"argument-error"),p.redirectPersistenceManager=yield L.create(p,[vn(v._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(h){var p=this;return(0,f.Z)(function*(){var v,S;return p._isInitialized&&(yield p.queue((0,f.Z)(function*(){}))),(null===(v=p._currentUser)||void 0===v?void 0:v._redirectEventId)===h?p._currentUser:(null===(S=p.redirectUser)||void 0===S?void 0:S._redirectEventId)===h?p.redirectUser:null})()}_persistUserIfCurrent(h){var p=this;return(0,f.Z)(function*(){if(h===p.currentUser)return p.queue((0,f.Z)(function*(){return p.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(p=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,p,v,S){if(this._deleted)return()=>{};const M="function"==typeof p?p:p.next.bind(p),U=this._isInitialized?Promise.resolve():this._initializationPromise;return ne(U,this,"internal-error"),U.then(()=>M(this.currentUser)),"function"==typeof p?h.addObserver(p,v,S):h.addObserver(p)}directlySetCurrentUser(h){var p=this;return(0,f.Z)(function*(){p.currentUser&&p.currentUser!==h&&p._currentUser._stopProactiveRefresh(),h&&p.isProactiveRefreshEnabled&&h._startProactiveRefresh(),p.currentUser=h,h?yield p.assertedPersistence.setCurrentUser(h):yield p.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=le(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,f.Z)(function*(){var p;const v={"X-Client-Version":h.clientVersion};h.app.options.appId&&(v["X-Firebase-gmpid"]=h.app.options.appId);const S=yield null===(p=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();S&&(v["X-Firebase-Client"]=S);const M=yield h._getAppCheckToken();return M&&(v["X-Firebase-AppCheck"]=M),v})()}_getAppCheckToken(){var h=this;return(0,f.Z)(function*(){var p;const v=yield null===(p=h.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getToken();return v?.error&&function je(y,...h){Oe.logLevel<=re.in.WARN&&Oe.warn(`Auth (${ie.SDK_VERSION}): ${y}`,...h)}(`Error while retrieving App Check token: ${v.error}`),v?.token})()}}function cn(y){return(0,O.m9)(y)}class Kn{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,O.ne)(p=>this.observer=p)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function hs(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function Na(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class fs{constructor(h,p){this.providerId=h,this.signInMethod=p}toJSON(){return bt("not implemented")}_getIdTokenResponse(h){return bt("not implemented")}_linkToIdToken(h,p){return bt("not implemented")}_getReauthenticationResolver(h){return bt("not implemented")}}function go(y,h){return $n.apply(this,arguments)}function $n(){return($n=(0,f.Z)(function*(y,h){return be(y,"POST","/v1/accounts:resetPassword",Se(y,h))})).apply(this,arguments)}function Qo(y,h){return ps.apply(this,arguments)}function ps(){return(ps=(0,f.Z)(function*(y,h){return be(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Vs(){return(Vs=(0,f.Z)(function*(y,h){return be(y,"POST","/v1/accounts:update",Se(y,h))})).apply(this,arguments)}function Cr(y,h){return mn.apply(this,arguments)}function mn(){return(mn=(0,f.Z)(function*(y,h){return mt(y,"POST","/v1/accounts:signInWithPassword",Se(y,h))})).apply(this,arguments)}function si(y,h){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,f.Z)(function*(y,h){return be(y,"POST","/v1/accounts:sendOobCode",Se(y,h))})).apply(this,arguments)}function Xo(){return(Xo=(0,f.Z)(function*(y,h){return si(y,h)})).apply(this,arguments)}function Us(y,h){return mo.apply(this,arguments)}function mo(){return(mo=(0,f.Z)(function*(y,h){return si(y,h)})).apply(this,arguments)}function pr(y,h){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,f.Z)(function*(y,h){return si(y,h)})).apply(this,arguments)}function ai(){return(ai=(0,f.Z)(function*(y,h){return si(y,h)})).apply(this,arguments)}function Jo(){return(Jo=(0,f.Z)(function*(y,h){return mt(y,"POST","/v1/accounts:signInWithEmailLink",Se(y,h))})).apply(this,arguments)}function mi(){return(mi=(0,f.Z)(function*(y,h){return mt(y,"POST","/v1/accounts:signInWithEmailLink",Se(y,h))})).apply(this,arguments)}class ku extends fs{constructor(h,p,v,S=null){super("password",v),this._email=h,this._password=p,this._tenantId=S}static _fromEmailAndPassword(h,p){return new ku(h,p,"password")}static _fromEmailAndCode(h,p,v=null){return new ku(h,p,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h;if(p?.email&&p?.password){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(h){var p=this;return(0,f.Z)(function*(){var v;switch(p.signInMethod){case"password":const S={returnSecureToken:!0,email:p._email,password:p._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(v=h._getRecaptchaConfig())&&void 0!==v&&v.emailPasswordEnabled){const M=yield Ke(h,S,"signInWithPassword");return Cr(h,M)}return Cr(h,S).catch(function(){var M=(0,f.Z)(function*(U){if("auth/missing-recaptcha-token"===U.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Z=yield Ke(h,S,"signInWithPassword");return Cr(h,Z)}return Promise.reject(U)});return function(U){return M.apply(this,arguments)}}());case"emailLink":return function Oa(y,h){return Jo.apply(this,arguments)}(h,{email:p._email,oobCode:p._password});default:Ee(h,"internal-error")}})()}_linkToIdToken(h,p){var v=this;return(0,f.Z)(function*(){switch(v.signInMethod){case"password":return Qo(h,{idToken:p,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function Yc(y,h){return mi.apply(this,arguments)}(h,{idToken:p,email:v._email,oobCode:v._password});default:Ee(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function ki(y,h){return _d.apply(this,arguments)}function _d(){return(_d=(0,f.Z)(function*(y,h){return mt(y,"POST","/v1/accounts:signInWithIdp",Se(y,h))})).apply(this,arguments)}class gs extends fs{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const p=new gs(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(p.idToken=h.idToken),h.accessToken&&(p.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(p.nonce=h.nonce),h.pendingToken&&(p.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(p.accessToken=h.oauthToken,p.secret=h.oauthTokenSecret):Ee("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:S}=p,M=(0,se._T)(p,["providerId","signInMethod"]);if(!v||!S)return null;const U=new gs(v,S);return U.idToken=M.idToken||void 0,U.accessToken=M.accessToken||void 0,U.secret=M.secret,U.nonce=M.nonce,U.pendingToken=M.pendingToken||null,U}_getIdTokenResponse(h){return ki(h,this.buildRequest())}_linkToIdToken(h,p){const v=this.buildRequest();return v.idToken=p,ki(h,v)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,ki(h,p)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),h.postBody=(0,O.xO)(p)}return h}}function Qc(){return(Qc=(0,f.Z)(function*(y,h){return be(y,"POST","/v1/accounts:sendVerificationCode",Se(y,h))})).apply(this,arguments)}function vd(){return(vd=(0,f.Z)(function*(y,h){return mt(y,"POST","/v1/accounts:signInWithPhoneNumber",Se(y,h))})).apply(this,arguments)}function Fu(){return(Fu=(0,f.Z)(function*(y,h){const p=yield mt(y,"POST","/v1/accounts:signInWithPhoneNumber",Se(y,h));if(p.temporaryProof)throw Bn(y,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const wd={USER_NOT_FOUND:"user-not-found"};function Lu(){return(Lu=(0,f.Z)(function*(y,h){return mt(y,"POST","/v1/accounts:signInWithPhoneNumber",Se(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),wd)})).apply(this,arguments)}class ui extends fs{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,p){return new ui({verificationId:h,verificationCode:p})}static _fromTokenResponse(h,p){return new ui({phoneNumber:h,temporaryProof:p})}_getIdTokenResponse(h){return function Rg(y,h){return vd.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,p){return function Ng(y,h){return Fu.apply(this,arguments)}(h,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function t_(y,h){return Lu.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:p,verificationId:v,verificationCode:S}=this.params;return h&&p?{temporaryProof:h,phoneNumber:p}:{sessionInfo:v,code:S}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:p,verificationCode:v,phoneNumber:S,temporaryProof:M}=h;return v||p||S||M?new ui({verificationId:p,verificationCode:v,phoneNumber:S,temporaryProof:M}):null}}class ea{constructor(h){var p,v,S,M,U,Z;const Re=(0,O.zd)((0,O.pd)(h)),Ge=null!==(p=Re.apiKey)&&void 0!==p?p:null,Je=null!==(v=Re.oobCode)&&void 0!==v?v:null,tt=function ff(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=Re.mode)&&void 0!==S?S:null);ne(Ge&&Je&&tt,"argument-error"),this.apiKey=Ge,this.operation=tt,this.code=Je,this.continueUrl=null!==(M=Re.continueUrl)&&void 0!==M?M:null,this.languageCode=null!==(U=Re.languageCode)&&void 0!==U?U:null,this.tenantId=null!==(Z=Re.tenantId)&&void 0!==Z?Z:null}static parseLink(h){const p=function Ed(y){const h=(0,O.zd)((0,O.pd)(y)).link,p=h?(0,O.zd)((0,O.pd)(h)).deep_link_id:null,v=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(v?(0,O.zd)((0,O.pd)(v)).link:null)||v||p||h||y}(h);try{return new ea(p)}catch{return null}}}let pf=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(p,v){return ku._fromEmailAndPassword(p,v)}static credentialWithLink(p,v){const S=ea.parseLink(v);return ne(S,"argument-error"),ku._fromEmailAndCode(p,S.code,S.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class ms{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Ji extends ms{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class yo extends Ji{static credentialFromJSON(h){const p="string"==typeof h?JSON.parse(h):h;return ne("providerId"in p&&"signInMethod"in p,"argument-error"),gs._fromParams(p)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return ne(h.idToken||h.accessToken,"argument-error"),gs._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return yo.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return yo.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:p,oauthAccessToken:v,oauthTokenSecret:S,pendingToken:M,nonce:U,providerId:Z}=h;if(!v&&!S&&!p&&!M||!Z)return null;try{return new yo(Z)._credential({idToken:p,accessToken:v,nonce:U,pendingToken:M})}catch{return null}}}let Xc=(()=>{class y extends Ji{constructor(){super("facebook.com")}static credential(p){return gs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),ka=(()=>{class y extends Ji{constructor(){super("google.com"),this.addScope("profile")}static credential(p,v){return gs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:v})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:v,oauthAccessToken:S}=p;if(!v&&!S)return null;try{return y.credential(v,S)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Id=(()=>{class y extends Ji{constructor(){super("github.com")}static credential(p){return gs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Bs extends fs{constructor(h,p){super(h,h),this.pendingToken=p}_getIdTokenResponse(h){return ki(h,this.buildRequest())}_linkToIdToken(h,p){const v=this.buildRequest();return v.idToken=p,ki(h,v)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,ki(h,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:S,pendingToken:M}=p;return v&&S&&M&&v===S?new Bs(v,M):null}static _create(h,p){return new Bs(h,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Vu extends ms{constructor(h){ne(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return Vu.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return Vu.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const p=Bs.fromJSON(h);return ne(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:p,providerId:v}=h;if(!p||!v)return null;try{return Bs._create(v,p)}catch{return null}}}let Uu=(()=>{class y extends Ji{constructor(){super("twitter.com")}static credential(p,v){return gs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:v})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:v,oauthTokenSecret:S}=p;if(!v||!S)return null;try{return y.credential(v,S)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function js(y,h){return qr.apply(this,arguments)}function qr(){return(qr=(0,f.Z)(function*(y,h){return mt(y,"POST","/v1/accounts:signUp",Se(y,h))})).apply(this,arguments)}class Mr{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,p,v,S=!1){return(0,f.Z)(function*(){const M=yield qn._fromIdTokenResponse(h,v,S),U=Fa(v);return new Mr({user:M,providerId:U,_tokenResponse:v,operationType:p})})()}static _forOperation(h,p,v){return(0,f.Z)(function*(){yield h._updateTokensIfNecessary(v,!0);const S=Fa(v);return new Mr({user:h,providerId:S,_tokenResponse:v,operationType:p})})()}}function Fa(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function ta(){return(ta=(0,f.Z)(function*(y){var h;const p=cn(y);if(yield p._initializationPromise,null!==(h=p.currentUser)&&void 0!==h&&h.isAnonymous)return new Mr({user:p.currentUser,providerId:null,operationType:"signIn"});const v=yield js(p,{returnSecureToken:!0}),S=yield Mr._fromIdTokenResponse(p,"signIn",v,!0);return yield p._updateCurrentUser(S.user),S})).apply(this,arguments)}class ys extends O.ZR{constructor(h,p,v,S){var M;super(p.code,p.message),this.operationType=v,this.user=S,Object.setPrototypeOf(this,ys.prototype),this.customData={appName:h.name,tenantId:null!==(M=h.tenantId)&&void 0!==M?M:void 0,_serverResponse:p.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(h,p,v,S){return new ys(h,p,v,S)}}function mr(y,h,p,v){return("reauthenticate"===h?p._getReauthenticationResolver(y):p._getIdTokenResponse(y)).catch(M=>{throw"auth/multi-factor-auth-required"===M.code?ys._fromErrorAndOperation(y,M,h,v):M})}function Dd(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function Rr(){return Rr=(0,f.Z)(function*(y,h){const p=(0,O.m9)(y);yield _s(!0,p,h);const{providerUserInfo:v}=yield function $r(y,h){return ti.apply(this,arguments)}(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[h]}),S=Dd(v||[]);return p.providerData=p.providerData.filter(M=>S.has(M.providerId)),S.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p}),Rr.apply(this,arguments)}function tr(y,h){return Bu.apply(this,arguments)}function Bu(){return(Bu=(0,f.Z)(function*(y,h,p=!1){const v=yield rt(y,h._linkToIdToken(y.auth,yield y.getIdToken()),p);return Mr._forOperation(y,"link",v)})).apply(this,arguments)}function _s(y,h,p){return el.apply(this,arguments)}function el(){return(el=(0,f.Z)(function*(y,h,p){yield Gr(h);const S=!1===y?"provider-already-linked":"no-such-provider";ne(Dd(h.providerData).has(p)===y,h.auth,S)})).apply(this,arguments)}function $s(y,h){return na.apply(this,arguments)}function na(){return(na=(0,f.Z)(function*(y,h,p=!1){const{auth:v}=y,S="reauthenticate";try{const M=yield rt(y,mr(v,S,h,y),p);ne(M.idToken,v,"internal-error");const U=en(M.idToken);ne(U,v,"internal-error");const{sub:Z}=U;return ne(y.uid===Z,v,"user-mismatch"),Mr._forOperation(y,S,M)}catch(M){throw"auth/user-not-found"===M?.code&&Ee(v,"user-mismatch"),M}})).apply(this,arguments)}function La(y,h){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,f.Z)(function*(y,h,p=!1){const v="signIn",S=yield mr(y,v,h),M=yield Mr._fromIdTokenResponse(y,v,S);return p||(yield y._updateCurrentUser(M.user)),M})).apply(this,arguments)}function Va(y,h){return bd.apply(this,arguments)}function bd(){return(bd=(0,f.Z)(function*(y,h){return La(cn(y),h)})).apply(this,arguments)}function Td(y,h){return ju.apply(this,arguments)}function ju(){return(ju=(0,f.Z)(function*(y,h){const p=(0,O.m9)(y);return yield _s(!1,p,h.providerId),tr(p,h)})).apply(this,arguments)}function Sd(y,h){return $u.apply(this,arguments)}function $u(){return($u=(0,f.Z)(function*(y,h){return $s((0,O.m9)(y),h)})).apply(this,arguments)}function Ad(){return(Ad=(0,f.Z)(function*(y,h){return mt(y,"POST","/v1/accounts:signInWithCustomToken",Se(y,h))})).apply(this,arguments)}function Ft(){return Ft=(0,f.Z)(function*(y,h){const p=cn(y),v=yield function Pg(y,h){return Ad.apply(this,arguments)}(p,{token:h,returnSecureToken:!0}),S=yield Mr._fromIdTokenResponse(p,"signIn",v);return yield p._updateCurrentUser(S.user),S}),Ft.apply(this,arguments)}class Ua{constructor(h,p){this.factorId=h,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(h,p){return"phoneInfo"in p?Ba._fromServerResponse(h,p):"totpInfo"in p?nr._fromServerResponse(h,p):Ee(h,"internal-error")}}class Ba extends Ua{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,p){return new Ba(p)}}class nr extends Ua{constructor(h){super("totp",h)}static _fromServerResponse(h,p){return new nr(p)}}function _o(y,h,p){var v;ne((null===(v=p.url)||void 0===v?void 0:v.length)>0,y,"invalid-continue-uri"),ne(typeof p.dynamicLinkDomain>"u"||p.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=p.url,h.dynamicLinkDomain=p.dynamicLinkDomain,h.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(ne(p.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=p.iOS.bundleId),p.android&&(ne(p.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=p.android.installApp,h.androidMinimumVersionCode=p.android.minimumVersion,h.androidPackageName=p.android.packageName)}function Wr(){return Wr=(0,f.Z)(function*(y,h,p){var v;const S=cn(y),M={requestType:"PASSWORD_RESET",email:h,clientType:"CLIENT_TYPE_WEB"};if(null!==(v=S._getRecaptchaConfig())&&void 0!==v&&v.emailPasswordEnabled){const U=yield Ke(S,M,"getOobCode",!0);p&&_o(S,U,p),yield Us(S,U)}else p&&_o(S,M,p),yield Us(S,M).catch(function(){var U=(0,f.Z)(function*(Z){if("auth/missing-recaptcha-token"!==Z.code)return Promise.reject(Z);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Re=yield Ke(S,M,"getOobCode",!0);p&&_o(S,Re,p),yield Us(S,Re)}});return function(Z){return U.apply(this,arguments)}}())}),Wr.apply(this,arguments)}function Gu(){return(Gu=(0,f.Z)(function*(y,h,p){yield go((0,O.m9)(y),{oobCode:h,newPassword:p})})).apply(this,arguments)}function vs(){return vs=(0,f.Z)(function*(y,h){yield function Oi(y,h){return Vs.apply(this,arguments)}((0,O.m9)(y),{oobCode:h})}),vs.apply(this,arguments)}function ja(y,h){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,f.Z)(function*(y,h){const p=(0,O.m9)(y),v=yield go(p,{oobCode:h}),S=v.requestType;switch(ne(S,p,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ne(v.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ne(v.mfaInfo,p,"internal-error");default:ne(v.email,p,"internal-error")}let M=null;return v.mfaInfo&&(M=Ua._fromServerResponse(cn(p),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:M},operation:S}})).apply(this,arguments)}function es(){return(es=(0,f.Z)(function*(y,h){const{data:p}=yield ja((0,O.m9)(y),h);return p.email})).apply(this,arguments)}function _i(){return _i=(0,f.Z)(function*(y,h,p){var v;const S=cn(y),M={returnSecureToken:!0,email:h,password:p,clientType:"CLIENT_TYPE_WEB"};let U;if(null!==(v=S._getRecaptchaConfig())&&void 0!==v&&v.emailPasswordEnabled){const Ge=yield Ke(S,M,"signUpPassword");U=js(S,Ge)}else U=js(S,M).catch(function(){var Ge=(0,f.Z)(function*(Je){if("auth/missing-recaptcha-token"===Je.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const tt=yield Ke(S,M,"signUpPassword");return js(S,tt)}return Promise.reject(Je)});return function(Je){return Ge.apply(this,arguments)}}());const Z=yield U.catch(Ge=>Promise.reject(Ge)),Re=yield Mr._fromIdTokenResponse(S,"signIn",Z);return yield S._updateCurrentUser(Re.user),Re}),_i.apply(this,arguments)}function zu(){return zu=(0,f.Z)(function*(y,h,p){var v;const S=cn(y),M={requestType:"EMAIL_SIGNIN",email:h,clientType:"CLIENT_TYPE_WEB"};function U(Z,Re){ne(Re.handleCodeInApp,S,"argument-error"),Re&&_o(S,Z,Re)}if(null!==(v=S._getRecaptchaConfig())&&void 0!==v&&v.emailPasswordEnabled){const Z=yield Ke(S,M,"getOobCode",!0);U(Z,p),yield pr(S,Z)}else U(M,p),yield pr(S,M).catch(function(){var Z=(0,f.Z)(function*(Re){if("auth/missing-recaptcha-token"!==Re.code)return Promise.reject(Re);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Ge=yield Ke(S,M,"getOobCode",!0);U(Ge,p),yield pr(S,Ge)}});return function(Re){return Z.apply(this,arguments)}}())}),zu.apply(this,arguments)}function ra(){return(ra=(0,f.Z)(function*(y,h,p){const v=(0,O.m9)(y),S=pf.credentialWithLink(h,p||Ht());return ne(S._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),Va(v,S)})).apply(this,arguments)}function qu(){return(qu=(0,f.Z)(function*(y,h){return be(y,"POST","/v1/accounts:createAuthUri",Se(y,h))})).apply(this,arguments)}function Wu(){return Wu=(0,f.Z)(function*(y,h){const v={identifier:h,continueUri:ot()?Ht():"http://localhost"},{signinMethods:S}=yield function tl(y,h){return qu.apply(this,arguments)}((0,O.m9)(y),v);return S||[]}),Wu.apply(this,arguments)}function Ha(){return Ha=(0,f.Z)(function*(y,h){const p=(0,O.m9)(y),S={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&_o(p.auth,S,h);const{email:M}=yield function Zc(y,h){return Xo.apply(this,arguments)}(p.auth,S);M!==y.email&&(yield y.reload())}),Ha.apply(this,arguments)}function Ga(){return Ga=(0,f.Z)(function*(y,h,p){const v=(0,O.m9)(y),M={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};p&&_o(v.auth,M,p);const{email:U}=yield function oi(y,h){return ai.apply(this,arguments)}(v.auth,M);U!==y.email&&(yield y.reload())}),Ga.apply(this,arguments)}function Zu(){return(Zu=(0,f.Z)(function*(y,h){return be(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Yu(){return Yu=(0,f.Z)(function*(y,{displayName:h,photoURL:p}){if(void 0===h&&void 0===p)return;const v=(0,O.m9)(y),M={idToken:yield v.getIdToken(),displayName:h,photoUrl:p,returnSecureToken:!0},U=yield rt(v,function Nd(y,h){return Zu.apply(this,arguments)}(v.auth,M));v.displayName=U.displayName||null,v.photoURL=U.photoUrl||null;const Z=v.providerData.find(({providerId:Re})=>"password"===Re);Z&&(Z.displayName=v.displayName,Z.photoURL=v.photoURL),yield v._updateTokensIfNecessary(U)}),Yu.apply(this,arguments)}function Dn(y,h,p){return za.apply(this,arguments)}function za(){return(za=(0,f.Z)(function*(y,h,p){const{auth:v}=y,M={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(M.email=h),p&&(M.password=p);const U=yield rt(y,Qo(v,M));yield y._updateTokensIfNecessary(U,!0)})).apply(this,arguments)}class wo{constructor(h,p,v={}){this.isNewUser=h,this.providerId=p,this.profile=v}}class _f extends wo{constructor(h,p,v,S){super(h,p,v),this.username=S}}class Pd extends wo{constructor(h,p){super(h,"facebook.com",p)}}class Fg extends _f{constructor(h,p){super(h,"github.com",p,"string"==typeof p?.login?p?.login:null)}}class Qu extends wo{constructor(h,p){super(h,"google.com",p)}}class rl extends _f{constructor(h,p,v){super(h,"twitter.com",p,v)}}function il(y){const{user:h,_tokenResponse:p}=y;return h.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function yf(y){var h,p;if(!y)return null;const{providerId:v}=y,S=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},M=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!v&&y?.idToken){const U=null===(p=null===(h=en(y.idToken))||void 0===h?void 0:h.firebase)||void 0===p?void 0:p.sign_in_provider;if(U)return new wo(M,"anonymous"!==U&&"custom"!==U?U:null)}if(!v)return null;switch(v){case"facebook.com":return new Pd(M,S);case"github.com":return new Fg(M,S);case"google.com":return new Qu(M,S);case"twitter.com":return new rl(M,S,y.screenName||null);case"custom":case"anonymous":return new wo(M,null);default:return new wo(M,v,S)}}(p)}class Eo{constructor(h,p,v){this.type=h,this.credential=p,this.auth=v}static _fromIdtoken(h,p){return new Eo("enroll",h,p)}static _fromMfaPendingCredential(h){return new Eo("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var p,v;if(h?.multiFactorSession){if(null!==(p=h.multiFactorSession)&&void 0!==p&&p.pendingCredential)return Eo._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(v=h.multiFactorSession)&&void 0!==v&&v.idToken)return Eo._fromIdtoken(h.multiFactorSession.idToken)}return null}}class Io{constructor(h,p,v){this.session=h,this.hints=p,this.signInResolver=v}static _fromError(h,p){const v=cn(h),S=p.customData._serverResponse,M=(S.mfaInfo||[]).map(Z=>Ua._fromServerResponse(v,Z));ne(S.mfaPendingCredential,v,"internal-error");const U=Eo._fromMfaPendingCredential(S.mfaPendingCredential);return new Io(U,M,function(){var Z=(0,f.Z)(function*(Re){const Ge=yield Re._process(v,U);delete S.mfaInfo,delete S.mfaPendingCredential;const Je=Object.assign(Object.assign({},S),{idToken:Ge.idToken,refreshToken:Ge.refreshToken});switch(p.operationType){case"signIn":const tt=yield Mr._fromIdTokenResponse(v,p.operationType,Je);return yield v._updateCurrentUser(tt.user),tt;case"reauthenticate":return ne(p.user,v,"internal-error"),Mr._forOperation(p.user,p.operationType,Je);default:Ee(v,"internal-error")}});return function(Re){return Z.apply(this,arguments)}}())}resolveSignIn(h){var p=this;return(0,f.Z)(function*(){return p.signInResolver(h)})()}}class bo{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(v=>Ua._fromServerResponse(h.auth,v)))})}static _fromUser(h){return new bo(h)}getSession(){var h=this;return(0,f.Z)(function*(){return Eo._fromIdtoken(yield h.user.getIdToken(),h.user.auth)})()}enroll(h,p){var v=this;return(0,f.Z)(function*(){const S=h,M=yield v.getSession(),U=yield rt(v.user,S._process(v.user.auth,M,p));return yield v.user._updateTokensIfNecessary(U),v.user.reload()})()}unenroll(h){var p=this;return(0,f.Z)(function*(){const v="string"==typeof h?h:h.uid,S=yield p.user.getIdToken();try{const M=yield rt(p.user,function ec(y,h){return be(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Se(y,h))}(p.user.auth,{idToken:S,mfaEnrollmentId:v}));p.enrolledFactors=p.enrolledFactors.filter(({uid:U})=>U!==v),yield p.user._updateTokensIfNecessary(M),yield p.user.reload()}catch(M){throw M}})()}}const Hs=new WeakMap,To="__sak";class tc{constructor(h,p){this.storageRetriever=h,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(To,"1"),this.storage.removeItem(To),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,p){return this.storage.setItem(h,JSON.stringify(p)),Promise.resolve()}_get(h){const p=this.storage.getItem(h);return Promise.resolve(p?JSON.parse(p):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const So=(()=>{class y extends tc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,v)=>this.onStorageEvent(p,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Wa(){const y=(0,O.z$)();return X(y)||an(y)}()&&function Ma(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Xi(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const v of Object.keys(this.listeners)){const S=this.storage.getItem(v),M=this.localCache[v];S!==M&&p(v,M,S)}}onStorageEvent(p,v=!1){if(!p.key)return void this.forAllChangedKeys((Z,Re,Ge)=>{this.notifyListeners(Z,Ge)});const S=p.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Z=this.storage.getItem(S);if(p.newValue!==Z)null!==p.newValue?this.storage.setItem(S,p.newValue):this.storage.removeItem(S);else if(this.localCache[S]===p.newValue&&!v)return}const M=()=>{const Z=this.storage.getItem(S);!v&&this.localCache[S]===Z||this.notifyListeners(S,Z)},U=this.storage.getItem(S);!function Pi(){return(0,O.w1)()&&10===document.documentMode}()||U===p.newValue||p.newValue===p.oldValue?M():setTimeout(M,10)}notifyListeners(p,v){this.localCache[p]=v;const S=this.listeners[p];if(S)for(const M of Array.from(S))M(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,v,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:v,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(v)}_removeListener(p,v){this.listeners[p]&&(this.listeners[p].delete(v),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,v){var S=()=>super._set,M=this;return(0,f.Z)(function*(){yield S().call(M,p,v),M.localCache[p]=JSON.stringify(v)})()}_get(p){var v=()=>super._get,S=this;return(0,f.Z)(function*(){const M=yield v().call(S,p);return S.localCache[p]=JSON.stringify(M),M})()}_remove(p){var v=()=>super._remove,S=this;return(0,f.Z)(function*(){yield v().call(S,p),delete S.localCache[p]})()}}return y.type="LOCAL",y})(),Is=(()=>{class y extends tc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,v){}_removeListener(p,v){}}return y.type="SESSION",y})();let aa=(()=>{class y{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const v=this.receivers.find(M=>M.isListeningto(p));if(v)return v;const S=new y(p);return this.receivers.push(S),S}isListeningto(p){return this.eventTarget===p}handleEvent(p){var v=this;return(0,f.Z)(function*(){const S=p,{eventId:M,eventType:U,data:Z}=S.data,Re=v.handlersMap[U];if(!Re?.size)return;S.ports[0].postMessage({status:"ack",eventId:M,eventType:U});const Ge=Array.from(Re).map(function(){var tt=(0,f.Z)(function*(bn){return bn(S.origin,Z)});return function(bn){return tt.apply(this,arguments)}}()),Je=yield function al(y){return Promise.all(y.map(function(){var h=(0,f.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(v){return{fulfilled:!1,reason:v}}});return function(p){return h.apply(this,arguments)}}()))}(Ge);S.ports[0].postMessage({status:"done",eventId:M,eventType:U,response:Je})})()}_subscribe(p,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(v)}_unsubscribe(p,v){this.handlersMap[p]&&v&&this.handlersMap[p].delete(v),(!v||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function ua(y="",h=10){let p="";for(let v=0;v<h;v++)p+=Math.floor(10*Math.random());return y+p}class Ld{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,p,v=50){var S=this;return(0,f.Z)(function*(){const M=typeof MessageChannel<"u"?new MessageChannel:null;if(!M)throw new Error("connection_unavailable");let U,Z;return new Promise((Re,Ge)=>{const Je=ua("",20);M.port1.start();const tt=setTimeout(()=>{Ge(new Error("unsupported_event"))},v);Z={messageChannel:M,onMessage(bn){const eo=bn;if(eo.data.eventId===Je)switch(eo.data.status){case"ack":clearTimeout(tt),U=setTimeout(()=>{Ge(new Error("timeout"))},3e3);break;case"done":clearTimeout(U),Re(eo.data.response);break;default:clearTimeout(tt),clearTimeout(U),Ge(new Error("invalid_response"))}}},S.handlers.add(Z),M.port1.addEventListener("message",Z.onMessage),S.target.postMessage({eventType:h,eventId:Je,data:p},[M.port2])}).finally(()=>{Z&&S.removeMessageHandler(Z)})})()}}function fn(){return window}function rc(){return typeof fn().WorkerGlobalScope<"u"&&"function"==typeof fn().importScripts}function ic(){return(ic=(0,f.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ao="firebaseLocalStorageDb",Hn=1,cl="firebaseLocalStorage",Ka="fbase_key";class Za{constructor(h){this.request=h}toPromise(){return new Promise((h,p)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function Ds(y,h){return y.transaction([cl],h?"readwrite":"readonly").objectStore(cl)}function oc(){const y=indexedDB.open(Ao,Hn);return new Promise((h,p)=>{y.addEventListener("error",()=>{p(y.error)}),y.addEventListener("upgradeneeded",()=>{const v=y.result;try{v.createObjectStore(cl,{keyPath:Ka})}catch(S){p(S)}}),y.addEventListener("success",(0,f.Z)(function*(){const v=y.result;v.objectStoreNames.contains(cl)?h(v):(v.close(),yield function Ef(){const y=indexedDB.deleteDatabase(Ao);return new Za(y).toPromise()}(),h(yield oc()))}))})}function xo(y,h,p){return ll.apply(this,arguments)}function ll(){return(ll=(0,f.Z)(function*(y,h,p){const v=Ds(y,!0).put({[Ka]:h,value:p});return new Za(v).toPromise()})).apply(this,arguments)}function ca(){return(ca=(0,f.Z)(function*(y,h){const p=Ds(y,!1).get(h),v=yield new Za(p).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function Gs(y,h){const p=Ds(y,!0).delete(h);return new Za(p).toPromise()}const Mo=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,f.Z)(function*(){return p.db||(p.db=yield oc()),p.db})()}_withRetries(p){var v=this;return(0,f.Z)(function*(){let S=0;for(;;)try{const M=yield v._openDb();return yield p(M)}catch(M){if(S++>3)throw M;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,f.Z)(function*(){return rc()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,f.Z)(function*(){p.receiver=aa._getInstance(function rr(){return rc()?self:null}()),p.receiver._subscribe("keyChanged",function(){var v=(0,f.Z)(function*(S,M){return{keyProcessed:(yield p._poll()).includes(M.key)}});return function(S,M){return v.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var v=(0,f.Z)(function*(S,M){return["keyChanged"]});return function(S,M){return v.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,f.Z)(function*(){var v,S;if(p.activeServiceWorker=yield function ul(){return ic.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new Ld(p.activeServiceWorker);const M=yield p.sender._send("ping",{},800);M&&null!==(v=M[0])&&void 0!==v&&v.fulfilled&&null!==(S=M[0])&&void 0!==S&&S.value.includes("keyChanged")&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var v=this;return(0,f.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function sc(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:p},v.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const p=yield oc();return yield xo(p,To,"1"),yield Gs(p,To),!0}catch{}return!1})()}_withPendingWrite(p){var v=this;return(0,f.Z)(function*(){v.pendingWrites++;try{yield p()}finally{v.pendingWrites--}})()}_set(p,v){var S=this;return(0,f.Z)(function*(){return S._withPendingWrite((0,f.Z)(function*(){return yield S._withRetries(M=>xo(M,p,v)),S.localCache[p]=v,S.notifyServiceWorker(p)}))})()}_get(p){var v=this;return(0,f.Z)(function*(){const S=yield v._withRetries(M=>function Ya(y,h){return ca.apply(this,arguments)}(M,p));return v.localCache[p]=S,S})()}_remove(p){var v=this;return(0,f.Z)(function*(){return v._withPendingWrite((0,f.Z)(function*(){return yield v._withRetries(S=>Gs(S,p)),delete v.localCache[p],v.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,f.Z)(function*(){const v=yield p._withRetries(U=>{const Z=Ds(U,!1).getAll();return new Za(Z).toPromise()});if(!v)return[];if(0!==p.pendingWrites)return[];const S=[],M=new Set;for(const{fbase_key:U,value:Z}of v)M.add(U),JSON.stringify(p.localCache[U])!==JSON.stringify(Z)&&(p.notifyListeners(U,Z),S.push(U));for(const U of Object.keys(p.localCache))p.localCache[U]&&!M.has(U)&&(p.notifyListeners(U,null),S.push(U));return S})()}notifyListeners(p,v){this.localCache[p]=v;const S=this.listeners[p];if(S)for(const M of Array.from(S))M(v)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(v)}_removeListener(p,v){this.listeners[p]&&(this.listeners[p].delete(v),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})(),Xa=1e12;class dl{constructor(h){this.auth=h,this.counter=Xa,this._widgets=new Map}render(h,p){const v=this.counter;return this._widgets.set(v,new hl(h,this.auth.name,p||{})),this.counter++,v}reset(h){var p;const v=h||Xa;null===(p=this._widgets.get(v))||void 0===p||p.delete(),this._widgets.delete(v)}getResponse(h){var p;return(null===(p=this._widgets.get(h||Xa))||void 0===p?void 0:p.getResponse())||""}execute(h){var p=this;return(0,f.Z)(function*(){var v;return null===(v=p._widgets.get(h||Xa))||void 0===v||v.execute(),""})()}}class hl{constructor(h,p,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof h?document.getElementById(h):h;ne(S,"argument-error",{appName:p}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function i_(y){const h=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<y;v++)h.push(p.charAt(Math.floor(Math.random()*p.length)));return h.join("")}(50);const{callback:h,"expired-callback":p}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Cf=Wn("rcb"),s_=new Zi(3e4,6e4);class o_{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=fn().grecaptcha)||void 0===h||!h.render)}load(h,p=""){return ne(function bf(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(p),h,"argument-error"),this.shouldResolveImmediately(p)&&$t(fn().grecaptcha)?Promise.resolve(fn().grecaptcha):new Promise((v,S)=>{const M=fn().setTimeout(()=>{S(Ie(h,"network-request-failed"))},s_.get());fn()[Cf]=()=>{fn().clearTimeout(M),delete fn()[Cf];const Z=fn().grecaptcha;if(!Z||!$t(Z))return void S(Ie(h,"internal-error"));const Re=Z.render;Z.render=(Ge,Je)=>{const tt=Re(Ge,Je);return this.counter++,tt},this.hostLanguage=p,v(Z)},fr(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:Cf,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(M),S(Ie(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var p;return!(null===(p=fn().grecaptcha)||void 0===p||!p.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ir{load(h){return(0,f.Z)(function*(){return new dl(h)})()}clearedOneInstance(){}}const Ja="recaptcha",ac={theme:"light",type:"image"};class fl{constructor(h,p=Object.assign({},ac),v){this.parameters=p,this.type=Ja,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=cn(v),this.isInvisible="invisible"===this.parameters.size,ne(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof h?document.getElementById(h):h;ne(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ir:new o_,this.validateStartingState()}verify(){var h=this;return(0,f.Z)(function*(){h.assertNotDestroyed();const p=yield h.render(),v=h.getAssertedRecaptcha();return v.getResponse(p)||new Promise(M=>{const U=Z=>{Z&&(h.tokenChangeListeners.delete(U),M(Z))};h.tokenChangeListeners.add(U),h.isInvisible&&v.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){ne(!this.parameters.sitekey,this.auth,"argument-error"),ne(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ne(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return p=>{if(this.tokenChangeListeners.forEach(v=>v(p)),"function"==typeof h)h(p);else if("string"==typeof h){const v=fn()[h];"function"==typeof v&&v(p)}}}assertNotDestroyed(){ne(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,f.Z)(function*(){if(yield h.init(),!h.widgetId){let p=h.container;if(!h.isInvisible){const v=document.createElement("div");p.appendChild(v),p=v}h.widgetId=h.getAssertedRecaptcha().render(p,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,f.Z)(function*(){ne(ot()&&!rc(),h.auth,"internal-error"),yield function Li(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const p=yield function J(y){return Fe.apply(this,arguments)}(h.auth);ne(p,h.auth,"internal-error"),h.parameters.sitekey=p})()}getAssertedRecaptcha(){return ne(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ts{constructor(h,p){this.verificationId=h,this.onConfirmation=p}confirm(h){const p=ui._fromVerification(this.verificationId,h);return this.onConfirmation(p)}}function Po(){return(Po=(0,f.Z)(function*(y,h,p){const v=cn(y),S=yield lc(v,h,(0,O.m9)(p));return new ts(S,M=>Va(v,M))})).apply(this,arguments)}function cc(){return(cc=(0,f.Z)(function*(y,h,p){const v=(0,O.m9)(y);yield _s(!1,v,"phone");const S=yield lc(v.auth,h,(0,O.m9)(p));return new ts(S,M=>Td(v,M))})).apply(this,arguments)}function pl(){return(pl=(0,f.Z)(function*(y,h,p){const v=(0,O.m9)(y),S=yield lc(v.auth,h,(0,O.m9)(p));return new ts(S,M=>Sd(v,M))})).apply(this,arguments)}function lc(y,h,p){return Kr.apply(this,arguments)}function Kr(){return Kr=(0,f.Z)(function*(y,h,p){var v;const S=yield p.verify();try{let M;if(ne("string"==typeof S,y,"argument-error"),ne(p.type===Ja,y,"argument-error"),M="string"==typeof h?{phoneNumber:h}:h,"session"in M){const U=M.session;if("phoneNumber"in M)return ne("enroll"===U.type,y,"internal-error"),(yield function oa(y,h){return be(y,"POST","/v2/accounts/mfaEnrollment:start",Se(y,h))}(y,{idToken:U.credential,phoneEnrollmentInfo:{phoneNumber:M.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{ne("signin"===U.type,y,"internal-error");const Z=(null===(v=M.multiFactorHint)||void 0===v?void 0:v.uid)||M.multiFactorUid;return ne(Z,y,"missing-multi-factor-info"),(yield function Ro(y,h){return be(y,"POST","/v2/accounts/mfaSignIn:start",Se(y,h))}(y,{mfaPendingCredential:U.credential,mfaEnrollmentId:Z,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:U}=yield function Mg(y,h){return Qc.apply(this,arguments)}(y,{phoneNumber:M.phoneNumber,recaptchaToken:S});return U}}finally{p._reset()}}),Kr.apply(this,arguments)}function ci(){return(ci=(0,f.Z)(function*(y,h){yield tr((0,O.m9)(y),h)})).apply(this,arguments)}let st=(()=>{class y{constructor(p){this.providerId=y.PROVIDER_ID,this.auth=cn(p)}verifyPhoneNumber(p,v){return lc(this.auth,p,(0,O.m9)(v))}static credential(p,v){return ui._fromVerification(p,v)}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:v,temporaryProof:S}=p;return v&&S?ui._fromTokenResponse(v,S):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Qn(y,h){return h?vn(h):(ne(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Cn extends fs{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return ki(h,this._buildIdpRequest())}_linkToIdToken(h,p){return ki(h,this._buildIdpRequest(p))}_getReauthenticationResolver(h){return ki(h,this._buildIdpRequest())}_buildIdpRequest(h){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(p.idToken=h),p}}function Bd(y){return La(y.auth,new Cn(y),y.bypassAuthState)}function eu(y){const{auth:h,user:p}=y;return ne(p,h,"internal-error"),$s(p,new Cn(y),y.bypassAuthState)}function Zr(y){return dc.apply(this,arguments)}function dc(){return(dc=(0,f.Z)(function*(y){const{auth:h,user:p}=y;return ne(p,h,"internal-error"),tr(p,new Cn(y),y.bypassAuthState)})).apply(this,arguments)}class gl{constructor(h,p,v,S,M=!1){this.auth=h,this.resolver=v,this.user=S,this.bypassAuthState=M,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var h=this;return new Promise(function(){var p=(0,f.Z)(function*(v,S){h.pendingPromise={resolve:v,reject:S};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(M){h.reject(M)}});return function(v,S){return p.apply(this,arguments)}}())}onAuthEvent(h){var p=this;return(0,f.Z)(function*(){const{urlResponse:v,sessionId:S,postBody:M,tenantId:U,error:Z,type:Re}=h;if(Z)return void p.reject(Z);const Ge={auth:p.auth,requestUri:v,sessionId:S,tenantId:U||void 0,postBody:M||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Re)(Ge))}catch(Je){p.reject(Je)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return Bd;case"linkViaPopup":case"linkViaRedirect":return Zr;case"reauthViaPopup":case"reauthViaRedirect":return eu;default:Ee(this.auth,"internal-error")}}resolve(h){Xe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){Xe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const vi=new Zi(2e3,1e4);function tu(){return(tu=(0,f.Z)(function*(y,h,p){const v=cn(y);Le(y,h,ms);const S=Qn(v,p);return new hc(v,"signInViaPopup",h,S).executeNotNull()})).apply(this,arguments)}function zs(){return(zs=(0,f.Z)(function*(y,h,p){const v=(0,O.m9)(y);Le(v.auth,h,ms);const S=Qn(v.auth,p);return new hc(v.auth,"reauthViaPopup",h,S,v).executeNotNull()})).apply(this,arguments)}function ml(){return(ml=(0,f.Z)(function*(y,h,p){const v=(0,O.m9)(y);Le(v.auth,h,ms);const S=Qn(v.auth,p);return new hc(v.auth,"linkViaPopup",h,S,v).executeNotNull()})).apply(this,arguments)}let hc=(()=>{class y extends gl{constructor(p,v,S,M,U){super(p,v,M,U),this.provider=S,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var p=this;return(0,f.Z)(function*(){const v=yield p.execute();return ne(v,p.auth,"internal-error"),v})()}onExecution(){var p=this;return(0,f.Z)(function*(){Xe(1===p.filter.length,"Popup operations only handle one event");const v=ua();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],v),p.authWindow.associatedEvent=v,p.resolver._originValidation(p.auth).catch(S=>{p.reject(S)}),p.resolver._isIframeWebStorageSupported(p.auth,S=>{S||p.reject(Ie(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(Ie(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const p=()=>{var v,S;this.pollId=null!==(S=null===(v=this.authWindow)||void 0===v?void 0:v.window)&&void 0!==S&&S.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ie(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(p,vi.get())};p()}}return y.currentPopupAction=null,y})();const Cs="pendingRedirect",qs=new Map;class sr extends gl{constructor(h,p,v=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,v),this.eventId=null}execute(){var h=()=>super.execute,p=this;return(0,f.Z)(function*(){let v=qs.get(p.auth._key());if(!v){try{const M=(yield function yl(y,h){return _l.apply(this,arguments)}(p.resolver,p.auth))?yield h().call(p):null;v=()=>Promise.resolve(M)}catch(S){v=()=>Promise.reject(S)}qs.set(p.auth._key(),v)}return p.bypassAuthState||qs.set(p.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(h){var p=()=>super.onAuthEvent,v=this;return(0,f.Z)(function*(){if("signInViaRedirect"===h.type)return p().call(v,h);if("unknown"!==h.type){if(h.eventId){const S=yield v.auth._redirectUserForId(h.eventId);if(S)return v.user=S,p().call(v,h);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function _l(){return(_l=(0,f.Z)(function*(y,h){const p=Ws(h),v=pc(y);if(!(yield v._isAvailable()))return!1;const S="true"===(yield v._get(p));return yield v._remove(p),S})).apply(this,arguments)}function Oo(y,h){return ko.apply(this,arguments)}function ko(){return(ko=(0,f.Z)(function*(y,h){return pc(y)._set(Ws(h),"true")})).apply(this,arguments)}function jd(y,h){qs.set(y._key(),h)}function pc(y){return vn(y._redirectPersistence)}function Ws(y){return B(Cs,y.config.apiKey,y.name)}function $d(y,h,p){return function Af(y,h,p){return wi.apply(this,arguments)}(y,h,p)}function wi(){return(wi=(0,f.Z)(function*(y,h,p){const v=cn(y);Le(y,h,ms),yield v._initializationPromise;const S=Qn(v,p);return yield Oo(S,v),S._openRedirect(v,h,"signInViaRedirect")})).apply(this,arguments)}function ru(y,h,p){return function Vi(y,h,p){return iu.apply(this,arguments)}(y,h,p)}function iu(){return(iu=(0,f.Z)(function*(y,h,p){const v=(0,O.m9)(y);Le(v.auth,h,ms),yield v.auth._initializationPromise;const S=Qn(v.auth,p);yield Oo(S,v.auth);const M=yield kn(v);return S._openRedirect(v.auth,h,"reauthViaRedirect",M)})).apply(this,arguments)}function yr(y,h,p){return function vl(y,h,p){return wl.apply(this,arguments)}(y,h,p)}function wl(){return(wl=(0,f.Z)(function*(y,h,p){const v=(0,O.m9)(y);Le(v.auth,h,ms),yield v.auth._initializationPromise;const S=Qn(v.auth,p);yield _s(!1,v,h.providerId),yield Oo(S,v.auth);const M=yield kn(v);return S._openRedirect(v.auth,h,"linkViaRedirect",M)})).apply(this,arguments)}function Ks(){return(Ks=(0,f.Z)(function*(y,h){return yield cn(y)._initializationPromise,Fo(y,h,!1)})).apply(this,arguments)}function Fo(y,h){return On.apply(this,arguments)}function On(){return(On=(0,f.Z)(function*(y,h,p=!1){const v=cn(y),S=Qn(v,h),U=yield new sr(v,S,p).execute();return U&&!p&&(delete U.user._redirectEventId,yield v._persistUserIfCurrent(U.user),yield v._setRedirectUser(null,h)),U})).apply(this,arguments)}function kn(y){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,f.Z)(function*(y){const h=ua(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class ha{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let p=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(h,v)&&(p=!0,this.sendToConsumer(h,v),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function _r(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bs(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=h,p=!0)),p}sendToConsumer(h,p){var v;if(h.error&&!bs(h)){const S=(null===(v=h.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";p.onError(Ie(this.auth,S))}else p.onAuthEvent(h)}isEventForConsumer(h,p){const v=null===p.eventId||!!h.eventId&&h.eventId===p.eventId;return p.filter.includes(h.type)&&v}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ei(h))}saveEventToCache(h){this.cachedEventUids.add(Ei(h)),this.lastProcessedEventTime=Date.now()}}function Ei(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function bs({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===h?.code}function Lo(y){return xf.apply(this,arguments)}function xf(){return(xf=(0,f.Z)(function*(y,h={}){return be(y,"GET","/v1/projects",h)})).apply(this,arguments)}const gc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mc=/^https?/;function Ts(){return(Ts=(0,f.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield Lo(y);for(const p of h)try{if(Il(p))return}catch{}Ee(y,"unauthorized-domain")})).apply(this,arguments)}function Il(y){const h=Ht(),{protocol:p,hostname:v}=new URL(h);if(y.startsWith("chrome-extension://")){const U=new URL(y);return""===U.hostname&&""===v?"chrome-extension:"===p&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===p&&U.hostname===v}if(!mc.test(p))return!1;if(gc.test(y))return v===y;const S=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(v)}const _c=new Zi(3e4,6e4);function Dt(){const y=fn().___jsl;if(y?.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let p=0;p<y.CP.length;p++)y.CP[p]=null}let vc=null;const Hd=new Zi(5e3,15e3),Gd="__/auth/iframe",Bi="emulator/auth/iframe",zd={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Wd(y){const h=y.config;ne(h.authDomain,y,"auth-domain-config-required");const p=h.emulator?ae(h,Bi):`https://${y.config.authDomain}/${Gd}`,v={apiKey:h.apiKey,appName:y.name,v:ie.SDK_VERSION},S=qd.get(y.config.apiHost);S&&(v.eid=S);const M=y._getFrameworks();return M.length&&(v.fw=M.join(",")),`${p}?${(0,O.xO)(v).slice(1)}`}function C(){return C=(0,f.Z)(function*(y){const h=yield function Ii(y){return vc=vc||function Ui(y){return new Promise((h,p)=>{var v,S,M;function U(){Dt(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{Dt(),p(Ie(y,"network-request-failed"))},timeout:_c.get()})}if(null!==(S=null===(v=fn().gapi)||void 0===v?void 0:v.iframes)&&void 0!==S&&S.Iframe)h(gapi.iframes.getContext());else{if(null===(M=fn().gapi)||void 0===M||!M.load){const Z=Wn("iframefcb");return fn()[Z]=()=>{gapi.load?U():p(Ie(y,"network-request-failed"))},fr(`https://apis.google.com/js/api.js?onload=${Z}`).catch(Re=>p(Re))}U()}}).catch(h=>{throw vc=null,h})}(y),vc}(y),p=fn().gapi;return ne(p,y,"internal-error"),h.open({where:document.body,url:Wd(y),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zd,dontclear:!0},v=>new Promise(function(){var S=(0,f.Z)(function*(M,U){yield v.restyle({setHideOnLeave:!1});const Z=Ie(y,"network-request-failed"),Re=fn().setTimeout(()=>{U(Z)},Hd.get());function Ge(){fn().clearTimeout(Re),M(v)}v.ping(Ge).then(Ge,()=>{U(Z)})});return function(M,U){return S.apply(this,arguments)}}()))}),C.apply(this,arguments)}const A={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},P=500,H=600,K="_blank",te="http://localhost";class qe{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const xt="__/auth/handler",Mt="emulator/auth/handler",Nr=encodeURIComponent("fac");function pn(y,h,p,v,S,M){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,f.Z)(function*(y,h,p,v,S,M){ne(y.config.authDomain,y,"auth-domain-config-required"),ne(y.config.apiKey,y,"invalid-api-key");const U={apiKey:y.config.apiKey,appName:y.name,authType:p,redirectUrl:v,v:ie.SDK_VERSION,eventId:S};if(h instanceof ms){h.setDefaultLanguage(y.languageCode),U.providerId=h.providerId||"",(0,O.xb)(h.getCustomParameters())||(U.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Je,tt]of Object.entries(M||{}))U[Je]=tt}if(h instanceof Ji){const Je=h.getScopes().filter(tt=>""!==tt);Je.length>0&&(U.scopes=Je.join(","))}y.tenantId&&(U.tid=y.tenantId);const Z=U;for(const Je of Object.keys(Z))void 0===Z[Je]&&delete Z[Je];const Re=yield y._getAppCheckToken(),Ge=Re?`#${Nr}=${encodeURIComponent(Re)}`:"";return`${function Ys({config:y}){return y.emulator?ae(y,Mt):`https://${y.authDomain}/${xt}`}(y)}?${(0,O.xO)(Z).slice(1)}${Ge}`})).apply(this,arguments)}const Vo="webStorageSupport",ji=class vr{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Is,this._completeRedirectFn=Fo,this._overrideRedirectResult=jd}_openPopup(h,p,v,S){var M=this;return(0,f.Z)(function*(){var U;Xe(null===(U=M.eventManagers[h._key()])||void 0===U?void 0:U.manager,"_initialize() not called before _openPopup()");const Z=yield pn(h,p,v,Ht(),S);return function He(y,h,p,v=P,S=H){const M=Math.max((window.screen.availHeight-S)/2,0).toString(),U=Math.max((window.screen.availWidth-v)/2,0).toString();let Z="";const Re=Object.assign(Object.assign({},A),{width:v.toString(),height:S.toString(),top:M,left:U}),Ge=(0,O.z$)().toLowerCase();p&&(Z=Ve(Ge)?K:p),_e(Ge)&&(h=h||te,Re.scrollbars="yes");const Je=Object.entries(Re).reduce((bn,[eo,Fl])=>`${bn}${eo}=${Fl},`,"");if(function xr(y=(0,O.z$)()){var h;return an(y)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(Ge)&&"_self"!==Z)return function at(y,h){const p=document.createElement("a");p.href=y,p.target=h;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(v)}(h||"",Z),new qe(null);const tt=window.open(h||"",Z,Je);ne(tt,y,"popup-blocked");try{tt.focus()}catch{}return new qe(tt)}(h,Z,ua())})()}_openRedirect(h,p,v,S){var M=this;return(0,f.Z)(function*(){return yield M._originValidation(h),function Vd(y){fn().location.href=y}(yield pn(h,p,v,Ht(),S)),new Promise(()=>{})})()}_initialize(h){const p=h._key();if(this.eventManagers[p]){const{manager:S,promise:M}=this.eventManagers[p];return S?Promise.resolve(S):(Xe(M,"If manager is not set, promise should be"),M)}const v=this.initAndGetManager(h);return this.eventManagers[p]={promise:v},v.catch(()=>{delete this.eventManagers[p]}),v}initAndGetManager(h){var p=this;return(0,f.Z)(function*(){const v=yield function E(y){return C.apply(this,arguments)}(h),S=new ha(h);return v.register("authEvent",M=>(ne(M?.authEvent,h,"invalid-auth-event"),{status:S.onEvent(M.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[h._key()]={manager:S},p.iframes[h._key()]=v,S})()}_isIframeWebStorageSupported(h,p){this.iframes[h._key()].send(Vo,{type:Vo},S=>{var M;const U=null===(M=S?.[0])||void 0===M?void 0:M[Vo];void 0!==U&&p(!!U),Ee(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function yc(y){return Ts.apply(this,arguments)}(h)),this.originValidationPromises[p]}get _shouldInitProactively(){return Xi()||X()||an()}};class Qs{constructor(h){this.factorId=h}_process(h,p,v){switch(p.type){case"enroll":return this._finalizeEnroll(h,p.credential,v);case"signin":return this._finalizeSignIn(h,p.credential);default:return bt("unexpected MultiFactorSessionType")}}}class Dl extends Qs{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new Dl(h)}_finalizeEnroll(h,p,v){return function ol(y,h){return be(y,"POST","/v2/accounts/mfaEnrollment:finalize",Se(y,h))}(h,{idToken:p,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,p){return function Df(y,h){return be(y,"POST","/v2/accounts/mfaSignIn:finalize",Se(y,h))}(h,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Cl=(()=>{class y{constructor(){}static assertion(p){return Dl._fromCredential(p)}}return y.FACTOR_ID="phone",y})();var Rf="@firebase/auth";class wc{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var p=this;return(0,f.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const p=this.auth.onIdTokenChanged(v=>{h(v?.stsTokenManager.accessToken||null)});this.internalListeners.set(h,p),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const p=this.internalListeners.get(h);p&&(this.internalListeners.delete(h),p(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ou(){return window}(0,O.Pz)("authIdTokenMaxAge"),function Ug(y){(0,ie._registerComponent)(new ye.wA("auth",(h,{options:p})=>{const v=h.getProvider("app").getImmediate(),S=h.getProvider("heartbeat"),M=h.getProvider("app-check-internal"),{apiKey:U,authDomain:Z}=v.options;ne(U&&!U.includes(":"),"invalid-api-key",{appName:v.name});const Re={apiKey:U,authDomain:Z,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:le(y)},Ge=new gi(v,S,M,Re);return function Pn(y,h){const p=h?.persistence||[],v=(Array.isArray(p)?p:[p]).map(vn);h?.errorMap&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(v,h?.popupRedirectResolver)}(Ge,p),Ge},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,p,v)=>{h.getProvider("auth-internal").initialize()})),(0,ie._registerComponent)(new ye.wA("auth-internal",h=>{const p=cn(h.getProvider("auth").getImmediate());return new wc(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ie.registerVersion)(Rf,"0.23.2",function Nf(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ie.registerVersion)(Rf,"0.23.2","esm2017")}("Browser");const u_=2e3;function Tl(){return Tl=(0,f.Z)(function*(y,h,p){var v;const{BuildInfo:S}=ou();Xe(h.sessionId,"AuthEvent did not contain a session ID");const M=yield function pa(y){return Sl.apply(this,arguments)}(h.sessionId),U={};return an()?U.ibi=S.packageName:Yt()?U.apn=S.packageName:Ee(y,"operation-not-supported-in-this-environment"),S.displayName&&(U.appDisplayName=S.displayName),U.sessionId=M,pn(y,p,h.type,void 0,null!==(v=h.eventId)&&void 0!==v?v:void 0,U)}),Tl.apply(this,arguments)}function fa(){return(fa=(0,f.Z)(function*(y){const{BuildInfo:h}=ou(),p={};an()?p.iosBundleId=h.packageName:Yt()?p.androidPackageName=h.packageName:Ee(y,"operation-not-supported-in-this-environment"),yield Lo(y,p)})).apply(this,arguments)}function Ec(){return(Ec=(0,f.Z)(function*(y,h,p){const{cordova:v}=ou();let S=()=>{};try{yield new Promise((M,U)=>{let Z=null;function Re(){var tt;M();const bn=null===(tt=v.plugins.browsertab)||void 0===tt?void 0:tt.close;"function"==typeof bn&&bn(),"function"==typeof p?.close&&p.close()}function Ge(){Z||(Z=window.setTimeout(()=>{U(Ie(y,"redirect-cancelled-by-user"))},u_))}function Je(){"visible"===document?.visibilityState&&Ge()}h.addPassiveListener(Re),document.addEventListener("resume",Ge,!1),Yt()&&document.addEventListener("visibilitychange",Je,!1),S=()=>{h.removePassiveListener(Re),document.removeEventListener("resume",Ge,!1),document.removeEventListener("visibilitychange",Je,!1),Z&&window.clearTimeout(Z)}})}finally{S()}})).apply(this,arguments)}function Sl(){return(Sl=(0,f.Z)(function*(y){const h=function $g(y){if(Xe(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),p=new Uint8Array(h);for(let v=0;v<y.length;v++)p[v]=y.charCodeAt(v);return p}(y),p=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(p)).map(S=>S.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const Al=20;class Yd extends ha{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(h)),super.onEvent(h)}initialized(){var h=this;return(0,f.Z)(function*(){yield h.initPromise})()}}function Qd(y){return xl.apply(this,arguments)}function xl(){return(xl=(0,f.Z)(function*(y){const h=yield Xd()._get(cu(y));return h&&(yield Xd()._remove(cu(y))),h})).apply(this,arguments)}function Of(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<Al;p++){const v=Math.floor(Math.random()*h.length);y.push(h.charAt(v))}return y.join("")}function Xd(){return vn(So)}function cu(y){return B("authEvent",y.config.apiKey,y.name)}function Ss(y){if(!y?.includes("?"))return{};const[h,...p]=y.split("?");return(0,O.zd)(p.join("?"))}const Rl=class Ml{constructor(){this._redirectPersistence=Is,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Fo,this._overrideRedirectResult=jd}_initialize(h){var p=this;return(0,f.Z)(function*(){const v=h._key();let S=p.eventManagers.get(v);return S||(S=new Yd(h),p.eventManagers.set(v,S),p.attachCallbackListeners(h,S)),S})()}_openPopup(h){Ee(h,"operation-not-supported-in-this-environment")}_openRedirect(h,p,v,S){var M=this;return(0,f.Z)(function*(){!function l_(y){var h,p,v,S,M,U,Z,Re,Ge,Je;const tt=ou();ne("function"==typeof(null===(h=tt?.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ne(typeof(null===(p=tt?.BuildInfo)||void 0===p?void 0:p.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ne("function"==typeof(null===(M=null===(S=null===(v=tt?.cordova)||void 0===v?void 0:v.plugins)||void 0===S?void 0:S.browsertab)||void 0===M?void 0:M.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ne("function"==typeof(null===(Re=null===(Z=null===(U=tt?.cordova)||void 0===U?void 0:U.plugins)||void 0===Z?void 0:Z.browsertab)||void 0===Re?void 0:Re.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ne("function"==typeof(null===(Je=null===(Ge=tt?.cordova)||void 0===Ge?void 0:Ge.InAppBrowser)||void 0===Je?void 0:Je.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const U=yield M._initialize(h);yield U.initialized(),U.resetRedirect(),function fc(){qs.clear()}(),yield M._originValidation(h);const Z=function jo(y,h,p=null){return{type:h,eventId:p,urlResponse:null,sessionId:Of(),postBody:null,tenantId:y.tenantId,error:Ie(y,"no-auth-event")}}(h,v,S);yield function Hg(y,h){return Xd()._set(cu(y),h)}(h,Z);const Re=yield function jg(y,h,p){return Tl.apply(this,arguments)}(h,Z,p),Ge=yield function c_(y){const{cordova:h}=ou();return new Promise(p=>{h.plugins.browsertab.isAvailable(v=>{let S=null;v?h.plugins.browsertab.openUrl(y):S=h.InAppBrowser.open(y,function zt(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),p(S)})})}(Re);return function au(y,h,p){return Ec.apply(this,arguments)}(h,U,Ge)})()}_isIframeWebStorageSupported(h,p){throw new Error("Method not implemented.")}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Zd(y){return fa.apply(this,arguments)}(h)),this.originValidationPromises[p]}attachCallbackListeners(h,p){const{universalLinks:v,handleOpenURL:S,BuildInfo:M}=ou(),U=setTimeout((0,f.Z)(function*(){yield Qd(h),p.onEvent(Ff())}),500),Z=function(){var Je=(0,f.Z)(function*(tt){clearTimeout(U);const bn=yield Qd(h);let eo=null;bn&&tt?.url&&(eo=function uu(y,h){var p,v;const S=function eh(y){const h=Ss(y),p=h.link?decodeURIComponent(h.link):void 0,v=Ss(p).link,S=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return Ss(S).link||S||v||p||y}(h);if(S.includes("/__/auth/callback")){const M=Ss(S),U=M.firebaseError?function Jd(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(M.firebaseError)):null,Z=null===(v=null===(p=U?.code)||void 0===p?void 0:p.split("auth/"))||void 0===v?void 0:v[1],Re=Z?Ie(Z):null;return Re?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Re,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:S,postBody:null}}return null}(bn,tt.url)),p.onEvent(eo||Ff())});return function(bn){return Je.apply(this,arguments)}}();typeof v<"u"&&"function"==typeof v.subscribe&&v.subscribe(null,Z);const Re=S,Ge=`${M.packageName.toLowerCase()}://`;ou().handleOpenURL=function(){var Je=(0,f.Z)(function*(tt){if(tt.toLowerCase().startsWith(Ge)&&Z({url:tt}),"function"==typeof Re)try{Re(tt)}catch(bn){console.error(bn)}});return function(tt){return Je.apply(this,arguments)}}()}};function Ff(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ie("no-auth-event")}}const Vf=1e3;function ns(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function ga(y=(0,O.z$)()){return!("file:"!==ns()&&"ionic:"!==ns()&&"capacitor:"!==ns()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function f_(){try{const y=self.localStorage,h=ua();if(y)return y.setItem(h,"1"),y.removeItem(h),!function h_(y=(0,O.z$)()){return function Ic(){return(0,O.w1)()&&11===document?.documentMode}()||function d_(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch{return Uf()&&(0,O.hl)()}return!1}function Uf(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function kl(){return(function Pl(){return"http:"===ns()||"https:"===ns()}()||(0,O.ru)()||ga())&&!function Ol(){return(0,O.b$)()||(0,O.UG)()}()&&f_()&&!Uf()}function Gg(){return ga()&&typeof document<"u"}function Dc(){return(Dc=(0,f.Z)(function*(){return!!Gg()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},Vf);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const Di={LOCAL:"local",NONE:"none",SESSION:"session"},lu=ne,jf="persistence";function $f(y){return Hf.apply(this,arguments)}function Hf(){return(Hf=(0,f.Z)(function*(y){yield y._initializationPromise;const h=Gf(),p=B(jf,y.config.apiKey,y.name);h&&h.setItem(p,y._getPersistence())})).apply(this,arguments)}function Gf(){var y;try{return(null===(y=function Bf(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const zf=ne;class Pr{constructor(){this.browserResolver=vn(ji),this.cordovaResolver=vn(Rl),this.underlyingResolver=null,this._redirectPersistence=Is,this._completeRedirectFn=Fo,this._overrideRedirectResult=jd}_initialize(h){var p=this;return(0,f.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,p,v,S){var M=this;return(0,f.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openPopup(h,p,v,S)})()}_openRedirect(h,p,v,S){var M=this;return(0,f.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openRedirect(h,p,v,S)})()}_isIframeWebStorageSupported(h,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,p)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return Gg()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return zf(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,f.Z)(function*(){if(h.underlyingResolver)return;const p=yield function zg(){return Dc.apply(this,arguments)}();h.underlyingResolver=p?h.cordovaResolver:h.browserResolver})()}}function Ci(y){return y.unwrap()}function g_(y){return y_(y)}function y_(y){const{_tokenResponse:h}=y instanceof O.ZR?y.customData:y;if(!h)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return st.credentialFromResult(y);const p=h.providerId;if(!p||p===fe.PASSWORD)return null;let v;switch(p){case fe.GOOGLE:v=ka;break;case fe.FACEBOOK:v=Xc;break;case fe.GITHUB:v=Id;break;case fe.TWITTER:v=Uu;break;default:const{oauthIdToken:S,oauthAccessToken:M,oauthTokenSecret:U,pendingToken:Z,nonce:Re}=h;return M||U||S||Z?Z?p.startsWith("saml.")?Bs._create(p,Z):gs._fromParams({providerId:p,signInMethod:p,pendingToken:Z,idToken:S,accessToken:M}):new yo(p).credential({idToken:S,accessToken:M,rawNonce:Re}):null}return y instanceof O.ZR?v.credentialFromError(y):v.credentialFromResult(y)}function Tr(y,h){return h.catch(p=>{throw p instanceof O.ZR&&function m_(y,h){var p;const v=null===(p=h.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===h?.code)h.resolver=new nh(y,function Ju(y,h){var p;const v=(0,O.m9)(y),S=h;return ne(h.customData.operationType,v,"argument-error"),ne(null===(p=S.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,v,"argument-error"),Io._fromError(v,S)}(y,h));else if(v){const S=y_(h),M=h;S&&(M.credential=S,M.tenantId=v.tenantId||void 0,M.email=v.email||void 0,M.phoneNumber=v.phoneNumber||void 0)}}(y,p),p}).then(p=>{const S=p.user;return{operationType:p.operationType,credential:g_(p),additionalUserInfo:il(p),user:Js.getOrCreate(S)}})}function qf(y,h){return th.apply(this,arguments)}function th(){return(th=(0,f.Z)(function*(y,h){const p=yield h;return{verificationId:p.verificationId,confirm:v=>Tr(y,p.confirm(v))}})).apply(this,arguments)}class nh{constructor(h,p){this.resolver=p,this.auth=function Cc(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return Tr(Ci(this.auth),this.resolver.resolveSignIn(h))}}class Js{constructor(h){this._delegate=h,this.multiFactor=function kd(y){const h=(0,O.m9)(y);return Hs.has(h)||Hs.set(h,bo._fromUser(h)),Hs.get(h)}(h)}static getOrCreate(h){return Js.USER_MAP.has(h)||Js.USER_MAP.set(h,new Js(h)),Js.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var p=this;return(0,f.Z)(function*(){return Tr(p.auth,Td(p._delegate,h))})()}linkWithPhoneNumber(h,p){var v=this;return(0,f.Z)(function*(){return qf(v.auth,function uc(y,h,p){return cc.apply(this,arguments)}(v._delegate,h,p))})()}linkWithPopup(h){var p=this;return(0,f.Z)(function*(){return Tr(p.auth,function It(y,h,p){return ml.apply(this,arguments)}(p._delegate,h,Pr))})()}linkWithRedirect(h){var p=this;return(0,f.Z)(function*(){return yield $f(cn(p.auth)),yr(p._delegate,h,Pr)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var p=this;return(0,f.Z)(function*(){return Tr(p.auth,Sd(p._delegate,h))})()}reauthenticateWithPhoneNumber(h,p){return qf(this.auth,function Sf(y,h,p){return pl.apply(this,arguments)}(this._delegate,h,p))}reauthenticateWithPopup(h){return Tr(this.auth,function nu(y,h,p){return zs.apply(this,arguments)}(this._delegate,h,Pr))}reauthenticateWithRedirect(h){var p=this;return(0,f.Z)(function*(){return yield $f(cn(p.auth)),ru(p._delegate,h,Pr)})()}sendEmailVerification(h){return function Ku(y,h){return Ha.apply(this,arguments)}(this._delegate,h)}unlink(h){var p=this;return(0,f.Z)(function*(){return yield function Cd(y,h){return Rr.apply(this,arguments)}(p._delegate,h),p})()}updateEmail(h){return function br(y,h){return Dn((0,O.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function ws(y,h){return Dn((0,O.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function Xt(y,h){return ci.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function mf(y,h){return Yu.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,p){return function nl(y,h,p){return Ga.apply(this,arguments)}(this._delegate,h,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Js.USER_MAP=new WeakMap;const du=ne;let Wf=(()=>{class y{constructor(p,v){if(this.app=p,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:S}=p.options;du(S,"invalid-api-key",{appName:p.name}),du(S,"invalid-api-key",{appName:p.name});const M=typeof window<"u"?Pr:void 0;this._delegate=v.initialize({options:{persistence:As(S,p.name),popupRedirectResolver:M}}),this._delegate._updateErrorMap(We),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Js.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,v){!function Ra(y,h,p){const v=cn(y);ne(v._canInitEmulator,v,"emulator-config-failed"),ne(/^https?:\/\//.test(h),v,"invalid-emulator-scheme");const S=!!p?.disableWarnings,M=hs(h),{host:U,port:Z}=function Bt(y){const h=hs(y),p=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!p)return{host:"",port:null};const v=p[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(v);if(S){const M=S[1];return{host:M,port:Na(v.substr(M.length+1))}}{const[M,U]=v.split(":");return{host:M,port:Na(U)}}}(h);v.config.emulator={url:`${M}//${U}${null===Z?"":`:${Z}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:U,port:Z,protocol:M.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function po(){function y(){const h=document.createElement("p"),p=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,p,v)}applyActionCode(p){return function Og(y,h){return vs.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return ja(this._delegate,p)}confirmPasswordReset(p,v){return function xd(y,h,p){return Gu.apply(this,arguments)}(this._delegate,p,v)}createUserWithEmailAndPassword(p,v){var S=this;return(0,f.Z)(function*(){return Tr(S._delegate,function vo(y,h,p){return _i.apply(this,arguments)}(S._delegate,p,v))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function Rd(y,h){return Wu.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function kg(y,h){return"EMAIL_SIGNIN"===ea.parseLink(h)?.operation}(0,p)}getRedirectResult(){var p=this;return(0,f.Z)(function*(){du(kl(),p._delegate,"operation-not-supported-in-this-environment");const v=yield function Sn(y,h){return Ks.apply(this,arguments)}(p._delegate,Pr);return v?Tr(p._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function Lf(y,h){cn(y)._logFramework(h)}(this._delegate,p)}onAuthStateChanged(p,v,S){const{next:M,error:U,complete:Z}=bc(p,v,S);return this._delegate.onAuthStateChanged(M,U,Z)}onIdTokenChanged(p,v,S){const{next:M,error:U,complete:Z}=bc(p,v,S);return this._delegate.onIdTokenChanged(M,U,Z)}sendSignInLinkToEmail(p,v){return function $a(y,h,p){return zu.apply(this,arguments)}(this._delegate,p,v)}sendPasswordResetEmail(p,v){return function Hu(y,h,p){return Wr.apply(this,arguments)}(this._delegate,p,v||void 0)}setPersistence(p){var v=this;return(0,f.Z)(function*(){let S;switch(function qg(y,h){lu(Object.values(Di).includes(h),y,"invalid-persistence-type"),(0,O.b$)()?lu(h!==Di.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?lu(h===Di.NONE,y,"unsupported-persistence-type"):Uf()?lu(h===Di.NONE||h===Di.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):lu(h===Di.NONE||f_(),y,"unsupported-persistence-type")}(v._delegate,p),p){case Di.SESSION:S=Is;break;case Di.LOCAL:S=(yield vn(Mo)._isAvailable())?Mo:So;break;case Di.NONE:S=zr;break;default:return Ee("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(S)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return Tr(this._delegate,function gr(y){return ta.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return Tr(this._delegate,Va(this._delegate,p))}signInWithCustomToken(p){return Tr(this._delegate,function he(y,h){return Ft.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,v){return Tr(this._delegate,function Md(y,h,p){return Va((0,O.m9)(y),pf.credential(h,p))}(this._delegate,p,v))}signInWithEmailLink(p,v){return Tr(this._delegate,function Yn(y,h,p){return ra.apply(this,arguments)}(this._delegate,p,v))}signInWithPhoneNumber(p,v){return qf(this._delegate,function Tf(y,h,p){return Po.apply(this,arguments)}(this._delegate,p,v))}signInWithPopup(p){var v=this;return(0,f.Z)(function*(){return du(kl(),v._delegate,"operation-not-supported-in-this-environment"),Tr(v._delegate,function da(y,h,p){return tu.apply(this,arguments)}(v._delegate,p,Pr))})()}signInWithRedirect(p){var v=this;return(0,f.Z)(function*(){return du(kl(),v._delegate,"operation-not-supported-in-this-environment"),yield $f(v._delegate),$d(v._delegate,p,Pr)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function yi(y,h){return es.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Di,y})();function bc(y,h,p){let v=y;"function"!=typeof y&&({next:v,error:h,complete:p}=y);const S=v;return{next:U=>S(U&&Js.getOrCreate(U)),error:h,complete:p}}function As(y,h){const p=function p_(y,h){const p=Gf();if(!p)return[];const v=B(jf,y,h);switch(p.getItem(v)){case Di.NONE:return[zr];case Di.LOCAL:return[Mo,Is];case Di.SESSION:return[Is];default:return[]}}(y,h);if(typeof self<"u"&&!p.includes(Mo)&&p.push(Mo),typeof window<"u")for(const v of[So,Is])p.includes(v)||p.push(v);return p.includes(zr)||p.push(zr),p}class hu{constructor(){this.providerId="phone",this._delegate=new st(Ci(Q.Z.auth()))}static credential(h,p){return st.credential(h,p)}verifyPhoneNumber(h,p){return this._delegate.verifyPhoneNumber(h,p)}unwrap(){return this._delegate}}hu.PHONE_SIGN_IN_METHOD=st.PHONE_SIGN_IN_METHOD,hu.PROVIDER_ID=st.PROVIDER_ID;const Tc=ne;class Wg{constructor(h,p,v=Q.Z.app()){var S;Tc(null===(S=v.options)||void 0===S?void 0:S.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new fl(h,p,v.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Zg(y){y.INTERNAL.registerComponent(new ye.wA("auth-compat",h=>{const p=h.getProvider("app-compat").getImmediate(),v=h.getProvider("auth");return new Wf(p,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:W_EMAIL_SIGNIN,PASSWORD_RESET:W_PASSWORD_RESET,RECOVER_EMAIL:W_RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:W_REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:W_VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:W_VERIFY_EMAIL}},EmailAuthProvider:pf,FacebookAuthProvider:Xc,GithubAuthProvider:Id,GoogleAuthProvider:ka,OAuthProvider:yo,SAMLAuthProvider:Vu,PhoneAuthProvider:hu,PhoneMultiFactorGenerator:Cl,RecaptchaVerifier:Wg,TwitterAuthProvider:Uu,Auth:Wf,AuthCredential:fs,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.4.2")}(Q.Z)},5861:(wt,Me,k)=>{function f(O,ie,se,re,ye,we,fe){try{var $=O[we](fe),j=$.value}catch(W){return void se(W)}$.done?ie(j):Promise.resolve(j).then(re,ye)}function Q(O){return function(){var ie=this,se=arguments;return new Promise(function(re,ye){var we=O.apply(ie,se);function fe(j){f(we,re,ye,fe,$,"next",j)}function $(j){f(we,re,ye,fe,$,"throw",j)}fe(void 0)})}}k.d(Me,{Z:()=>Q})},7582:(wt,Me,k)=>{function ie(ae,de){var ge={};for(var oe in ae)Object.prototype.hasOwnProperty.call(ae,oe)&&de.indexOf(oe)<0&&(ge[oe]=ae[oe]);if(null!=ae&&"function"==typeof Object.getOwnPropertySymbols){var Se=0;for(oe=Object.getOwnPropertySymbols(ae);Se<oe.length;Se++)de.indexOf(oe[Se])<0&&Object.prototype.propertyIsEnumerable.call(ae,oe[Se])&&(ge[oe[Se]]=ae[oe[Se]])}return ge}function W(ae,de,ge,oe){return new(ge||(ge=Promise))(function(be,ct){function lt(qt){try{mt(oe.next(qt))}catch(En){ct(En)}}function _n(qt){try{mt(oe.throw(qt))}catch(En){ct(En)}}function mt(qt){qt.done?be(qt.value):function Se(be){return be instanceof ge?be:new ge(function(ct){ct(be)})}(qt.value).then(lt,_n)}mt((oe=oe.apply(ae,de||[])).next())})}function ke(ae){return this instanceof ke?(this.v=ae,this):new ke(ae)}function Ee(ae,de,ge){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Se,oe=ge.apply(ae,de||[]),be=[];return Se={},ct("next"),ct("throw"),ct("return"),Se[Symbol.asyncIterator]=function(){return this},Se;function ct(gn){oe[gn]&&(Se[gn]=function(Bn){return new Promise(function(dr,Rn){be.push([gn,Bn,dr,Rn])>1||lt(gn,Bn)})})}function lt(gn,Bn){try{!function _n(gn){gn.value instanceof ke?Promise.resolve(gn.value.v).then(mt,qt):En(be[0][2],gn)}(oe[gn](Bn))}catch(dr){En(be[0][3],dr)}}function mt(gn){lt("next",gn)}function qt(gn){lt("throw",gn)}function En(gn,Bn){gn(Bn),be.shift(),be.length&&lt(be[0][0],be[0][1])}}function ze(ae){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ge,de=ae[Symbol.asyncIterator];return de?de.call(ae):(ae=function ut(ae){var de="function"==typeof Symbol&&Symbol.iterator,ge=de&&ae[de],oe=0;if(ge)return ge.call(ae);if(ae&&"number"==typeof ae.length)return{next:function(){return ae&&oe>=ae.length&&(ae=void 0),{value:ae&&ae[oe++],done:!ae}}};throw new TypeError(de?"Object is not iterable.":"Symbol.iterator is not defined.")}(ae),ge={},oe("next"),oe("throw"),oe("return"),ge[Symbol.asyncIterator]=function(){return this},ge);function oe(be){ge[be]=ae[be]&&function(ct){return new Promise(function(lt,_n){!function Se(be,ct,lt,_n){Promise.resolve(_n).then(function(mt){be({value:mt,done:lt})},ct)}(lt,_n,(ct=ae[be](ct)).done,ct.value)})}}}k.d(Me,{FC:()=>Ee,KL:()=>ze,_T:()=>ie,mG:()=>W,qq:()=>ke}),"function"==typeof SuppressedError&&SuppressedError}},wt=>{wt(wt.s=6942)}]);